/*
 zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License  zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc. */
var IS_CONCAT_BUILD=!0,BUILD_LMV_WORKER_URL="viewer3D.min.js",LMV_WORKER_URL=BUILD_LMV_WORKER_URL,ENABLE_DEBUG=!1,ENABLE_TRACE=!1,ENABLE_INLINE_WORKER=!0;AutodeskNamespace=function(a){var b=this;a=a.split(".");for(var c=0;c<a.length;++c)b[a[c]]=b[a[c]]||{},b=b[a[c]];return b};var _isIE11=!!navigator.userAgent.match(/Trident\/7\./);
"undefined"!==typeof window&&_isIE11&&function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var f=document.createEvent("CustomEvent");f.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return f}a.prototype=window.CustomEvent.prototype;window.CustomEvent=a}();
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,b){!b||b>this.byteLength?b=this.byteLength:0>b&&(b=this.byteLength+b,0>b&&(b=0));0>a&&(a=this.byteLength+a,0>a&&(a=0));if(b<=a)return new ArrayBuffer;for(var c=b-a,f=new Uint8Array(this,a,c),d=new Uint8Array(c),g=0;g<c;g++)d[g]=f[g];return d.buffer});"undefined"!==typeof window&&(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);
function launchFullscreen(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}
function inFullscreen(){return document.fullscreenEnabled||document.mozFullScreenElement||document.webkitIsFullScreen||document.msFullscreenElement?!0:!1}function fullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function isFullscreenAvailable(a){return a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen}
"undefined"!==typeof window&&!function(a,b,c,f){function d(a,b,h){return Array.isArray(a)?(g(a,h[b],h),!0):!1}function g(a,b,h){var c;if(a)if(a.forEach)a.forEach(b,h);else if(a.length!==f)for(c=0;c<a.length;)b.call(h,a[c],c,a),c++;else for(c in a)a.hasOwnProperty(c)&&b.call(h,a[c],c,a)}function h(a,b,h){for(var c=Object.keys(b),d=0;d<c.length;)(!h||h&&a[c[d]]===f)&&(a[c[d]]=b[c[d]]),d++;return a}function k(a,b){return h(a,b,!0)}function l(a,b,c){var d=b.prototype;b=a.prototype=Object.create(d);b.constructor=
a;b._super=d;c&&h(b,c)}function m(a,b){return function(){return a.apply(b,arguments)}}function p(a,b){return typeof a==Fa?a.apply(b?b[0]||f:f,b):a}function n(a,b,h){g(s(b),function(b){a.addEventListener(b,h,!1)})}function q(a,b,h){g(s(b),function(b){a.removeEventListener(b,h,!1)})}function r(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function s(a){return a.trim().split(/\s+/g)}function u(a,b,h){if(a.indexOf&&!h)return a.indexOf(b);for(var c=0;c<a.length;){if(h&&a[c][h]==b||!h&&a[c]===
b)return c;c++}return-1}function w(a){return Array.prototype.slice.call(a,0)}function v(a,b,h){for(var c=[],d=[],k=0;k<a.length;){var f=b?a[k][b]:a[k];0>u(d,f)&&c.push(a[k]);d[k]=f;k++}return h&&(c=b?c.sort(function(a,h){return a[b]>h[b]}):c.sort()),c}function B(a,b){for(var h,c,d=b[0].toUpperCase()+b.slice(1),k=0;k<Ga.length;){if(h=Ga[k],c=h?h+d:b,c in a)return c;k++}return f}function z(a){a=a.ownerDocument;return a.defaultView||a.parentWindow}function A(a,b){var h=this;this.manager=a;this.callback=
b;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(b){p(a.options.enable,[a])&&h.handler(b)};this.init()}function C(a){var b=a.options.inputClass;return new (b?b:Ja?D:ja?J:Oa?K:F)(a,G)}function G(a,b,h){var c=h.pointers.length,d=h.changedPointers.length,k=b&ka&&0===c-d,c=b&(ca|na)&&0===c-d;h.isFirst=!!k;h.isFinal=!!c;k&&(a.session={});h.eventType=b;b=a.session;k=h.pointers;c=k.length;b.firstInput||(b.firstInput=E(h));1<c&&!b.firstMultiple?b.firstMultiple=E(h):1===
c&&(b.firstMultiple=!1);var d=b.firstInput,l=(c=b.firstMultiple)?c.center:d.center,g=h.center=I(k);h.timeStamp=sa();h.deltaTime=h.timeStamp-d.timeStamp;h.angle=N(l,g);h.distance=Q(l,g);var d=h.center,l=b.offsetDelta||{},g=b.prevDelta||{},m=b.prevInput||{};(h.eventType===ka||m.eventType===ca)&&(g=b.prevDelta={x:m.deltaX||0,y:m.deltaY||0},l=b.offsetDelta={x:d.x,y:d.y});h.deltaX=g.x+(d.x-l.x);h.deltaY=g.y+(d.y-l.y);h.offsetDirection=H(h.deltaX,h.deltaY);h.scale=c?Q(k[0],k[1],oa)/Q(c.pointers[0],c.pointers[1],
oa):1;h.rotation=c?N(k[1],k[0],oa)-N(c.pointers[1],c.pointers[0],oa):0;l=b.lastInterval||h;k=h.timeStamp-l.timeStamp;h.eventType!=na&&(k>Ha||l.velocity===f)?(d=l.deltaX-h.deltaX,l=l.deltaY-h.deltaY,g=d/k||0,m=l/k||0,k=g,c=m,g=Ta(g)>Ta(m)?g:m,d=H(d,l),b.lastInterval=h):(g=l.velocity,k=l.velocityX,c=l.velocityY,d=l.direction);h.velocity=g;h.velocityX=k;h.velocityY=c;h.direction=d;b=a.element;r(h.srcEvent.target,b)&&(b=h.srcEvent.target);h.target=b;a.emit("hammer.input",h);a.recognize(h);a.session.prevInput=
h}function E(a){for(var b=[],h=0;h<a.pointers.length;)b[h]={clientX:Ma(a.pointers[h].clientX),clientY:Ma(a.pointers[h].clientY)},h++;return{timeStamp:sa(),pointers:b,center:I(b),deltaX:a.deltaX,deltaY:a.deltaY}}function I(a){var b=a.length;if(1===b)return{x:Ma(a[0].clientX),y:Ma(a[0].clientY)};for(var h=0,c=0,d=0;b>d;)h+=a[d].clientX,c+=a[d].clientY,d++;return{x:Ma(h/b),y:Ma(c/b)}}function H(a,b){return a===b?la:Ta(a)>=Ta(b)?0<a?wa:Ba:0<b?xa:ta}function Q(a,b,h){h||(h=Ka);var c=b[h[0]]-a[h[0]];a=
b[h[1]]-a[h[1]];return Math.sqrt(c*c+a*a)}function N(a,b,h){h||(h=Ka);return 180*Math.atan2(b[h[1]]-a[h[1]],b[h[0]]-a[h[0]])/Math.PI}function F(){this.evEl=ob;this.evWin=t;this.allow=!0;this.pressed=!1;A.apply(this,arguments)}function D(){this.evEl=hb;this.evWin=Wa;A.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function S(){this.evTarget=ib;this.evWin=rb;this.started=!1;A.apply(this,arguments)}function J(){this.evTarget=Na;this.targetIds={};A.apply(this,arguments)}function Z(a,
b){var h=w(a.touches),c=this.targetIds;if(b&(ka|ma)&&1===h.length)return c[h[0].identifier]=!0,[h,h];var d,k=w(a.changedTouches),f=[],l=this.target;if(d=h.filter(function(a){return r(a.target,l)}),b===ka)for(h=0;h<d.length;)c[d[h].identifier]=!0,h++;for(h=0;h<k.length;)c[k[h].identifier]&&f.push(k[h]),b&(ca|na)&&delete c[k[h].identifier],h++;return f.length?[v(d.concat(f),"identifier",!0),f]:void 0}function K(){A.apply(this,arguments);var a=m(this.handler,this);this.touch=new J(this.manager,a);this.mouse=
new F(this.manager,a)}function M(a,b){this.manager=a;this.set(b)}function ea(a){if(-1<a.indexOf(Xa))return Xa;var b=-1<a.indexOf(Pa),h=-1<a.indexOf(Ya);return b&&h?Pa+" "+Ya:b||h?b?Pa:Ya:-1<a.indexOf(jb)?jb:sb}function U(a){this.id=ha++;this.manager=null;this.options=k(a||{},this.defaults);this.options.enable=this.options.enable===f?!0:this.options.enable;this.state=Za;this.simultaneous={};this.requireFail=[]}function X(a){return a==ta?"down":a==xa?"up":a==wa?"left":a==Ba?"right":""}function O(a,
b){var h=b.manager;return h?h.get(a):a}function ba(){U.apply(this,arguments)}function R(){ba.apply(this,arguments);this.pY=this.pX=null}function V(){ba.apply(this,arguments)}function W(){U.apply(this,arguments);this._input=this._timer=null}function da(){ba.apply(this,arguments)}function ga(){ba.apply(this,arguments)}function ia(){U.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function ya(a,b){return b=b||{},b.recognizers=b.recognizers===f?ya.defaults.preset:
b.recognizers,new ua(a,b)}function ua(a,b){b=b||{};this.options=k(b,ya.defaults);this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.element=a;this.input=C(this);this.touchAction=new M(this,this.options.touchAction);za(this,!0);g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]);a[3]&&b.requireFailure(a[3])},this)}function za(a,b){var h=a.element;g(a.options.cssProps,function(a,c){h.style[B(h.style,c)]=b?
a:""})}function Ca(a,h){var c=b.createEvent("Event");c.initEvent(a,!0,!0);c.gesture=h;h.target.dispatchEvent(c)}var Ga=" webkit moz MS ms o".split(" "),Y=b.createElement("div"),Fa="function",Ma=Math.round,Ta=Math.abs,sa=Date.now,ha=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,Oa="ontouchstart"in a,Ja=B(a,"PointerEvent")!==f,ja=Oa&&pa.test(navigator.userAgent),Ha=25,ka=1,ma=2,ca=4,na=8,la=1,wa=2,Ba=4,xa=8,ta=16,Ua=wa|Ba,$a=xa|ta,ab=Ua|$a,Ka=["x","y"],oa=["clientX","clientY"];A.prototype={handler:function(){},
init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler);this.evTarget&&n(this.target,this.evTarget,this.domHandler);this.evWin&&n(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&q(this.element,this.evEl,this.domHandler);this.evTarget&&q(this.target,this.evTarget,this.domHandler);this.evWin&&q(z(this.element),this.evWin,this.domHandler)}};var Va={mousedown:ka,mousemove:ma,mouseup:ca},ob="mousedown",t="mousemove mouseup";l(F,A,{handler:function(a){var b=Va[a.type];
b&ka&&0===a.button&&(this.pressed=!0);b&ma&&1!==a.which&&(b=ca);this.pressed&&this.allow&&(b&ca&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:"mouse",srcEvent:a}))}});var mb={pointerdown:ka,pointermove:ma,pointerup:ca,pointercancel:na,pointerout:na},tb={2:"touch",3:"pen",4:"mouse",5:"kinect"},hb="pointerdown",Wa="pointermove pointerup pointercancel";a.MSPointerEvent&&(hb="MSPointerDown",Wa="MSPointerMove MSPointerUp MSPointerCancel");l(D,A,{handler:function(a){var b=
this.store,h=!1,c=a.type.toLowerCase().replace("ms",""),c=mb[c],d=tb[a.pointerType]||a.pointerType,k="touch"==d,f=u(b,a.pointerId,"pointerId");c&ka&&(0===a.button||k)?0>f&&(b.push(a),f=b.length-1):c&(ca|na)&&(h=!0);0>f||(b[f]=a,this.callback(this.manager,c,{pointers:b,changedPointers:[a],pointerType:d,srcEvent:a}),h&&b.splice(f,1))}});var Ra={touchstart:ka,touchmove:ma,touchend:ca,touchcancel:na},ib="touchstart",rb="touchstart touchmove touchend touchcancel";l(S,A,{handler:function(a){var b=Ra[a.type];
if(b===ka&&(this.started=!0),this.started){var h,c=w(a.touches);h=w(a.changedTouches);h=(b&(ca|na)&&(c=v(c.concat(h),"identifier",!0)),[c,h]);b&(ca|na)&&0===h[0].length-h[1].length&&(this.started=!1);this.callback(this.manager,b,{pointers:h[0],changedPointers:h[1],pointerType:"touch",srcEvent:a})}}});var cb={touchstart:ka,touchmove:ma,touchend:ca,touchcancel:na},Na="touchstart touchmove touchend touchcancel";l(J,A,{handler:function(a){var b=cb[a.type],h=Z.call(this,a,b);h&&this.callback(this.manager,
b,{pointers:h[0],changedPointers:h[1],pointerType:"touch",srcEvent:a})}});l(K,A,{handler:function(a,b,h){var c="mouse"==h.pointerType;if("touch"==h.pointerType)this.mouse.allow=!1;else if(c&&!this.mouse.allow)return;b&(ca|na)&&(this.mouse.allow=!0);this.callback(a,b,h)},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var db=B(Y.style,"touchAction"),nb=db!==f,sb="auto",jb="manipulation",Xa="none",Pa="pan-x",Ya="pan-y";M.prototype={set:function(a){"compute"==a&&(a=this.compute());nb&&
(this.manager.element.style[db]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){p(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),ea(a.join(" "))},preventDefaults:function(a){if(!nb){var b=a.srcEvent;a=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var h=this.actions,c=-1<h.indexOf(Xa),d=-1<h.indexOf(Ya),h=-1<h.indexOf(Pa);return c||
d&&a&Ua||h&&a&$a?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0;a.preventDefault()}};var Za=1,Ia=2,eb=4,bb=8,Qa=bb,fb=16;U.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(d(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=O(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return d(a,"dropRecognizeWith",this)?
this:(a=O(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(d(a,"requireFailure",this))return this;var b=this.requireFail;return a=O(a,this),-1===u(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(d(a,"dropRequireFailure",this))return this;a=O(a,this);a=u(this.requireFail,a);return-1<a&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},
emit:function(a){function b(d){h.manager.emit(h.options.event+(d?c&fb?"cancel":c&bb?"end":c&eb?"move":c&Ia?"start":"":""),a)}var h=this,c=this.state;bb>c&&b(!0);b();c>=bb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|Za)))return!1;a++}return!0},recognize:function(a){a=h({},a);return p(this.options.enable,[this,a])?(this.state&(Qa|fb|32)&&(this.state=Za),this.state=this.process(a),
void(this.state&(Ia|eb|bb|fb)&&this.tryEmit(a))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}};l(ba,U,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,h=a.eventType,c=b&(Ia|eb);a=this.attrTest(a);return c&&(h&na||!a)?b|fb:c||a?h&ca?b|bb:b&Ia?b|eb:Ia:32}});l(R,ba,{defaults:{event:"pan",threshold:10,pointers:1,direction:ab},getTouchAction:function(){var a=
this.options.direction,b=[];return a&Ua&&b.push(Ya),a&$a&&b.push(Pa),b},directionTest:function(a){var b=this.options,h=!0,c=a.distance,d=a.direction,k=a.deltaX,f=a.deltaY;return d&b.direction||(b.direction&Ua?(d=0===k?la:0>k?wa:Ba,h=k!=this.pX,c=Math.abs(a.deltaX)):(d=0===f?la:0>f?xa:ta,h=f!=this.pY,c=Math.abs(a.deltaY))),a.direction=d,h&&c>b.threshold&&d&b.direction},attrTest:function(a){return ba.prototype.attrTest.call(this,a)&&(this.state&Ia||!(this.state&Ia)&&this.directionTest(a))},emit:function(a){this.pX=
a.deltaX;this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a);this._super.emit.call(this,a)}});l(V,ba,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Xa]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&Ia)},emit:function(a){(this._super.emit.call(this,a),1!==a.scale)&&this.manager.emit(this.options.event+(1>a.scale?"in":"out"),a)}});l(W,U,{defaults:{event:"press",
pointers:1,time:500,threshold:5},getTouchAction:function(){return[sb]},process:function(a){var b=this.options,h=a.pointers.length===b.pointers,c=a.distance<b.threshold,d=a.deltaTime>b.time;if(this._input=a,!c||!h||a.eventType&(ca|na)&&!d)this.reset();else if(a.eventType&ka)this.reset(),this._timer=setTimeout(m(function(){this.state=Qa;this.tryEmit()},this),b.time);else if(a.eventType&ca)return Qa;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===Qa&&(a&&a.eventType&
ca?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=sa(),this.manager.emit(this.options.event,this._input)))}});l(da,ba,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Xa]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&Ia)}});l(ga,ba,{defaults:{event:"swipe",threshold:10,velocity:0.65,direction:Ua|$a,pointers:1},getTouchAction:function(){return R.prototype.getTouchAction.call(this)},
attrTest:function(a){var b,h=this.options.direction;return h&(Ua|$a)?b=a.velocity:h&Ua?b=a.velocityX:h&$a&&(b=a.velocityY),this._super.attrTest.call(this,a)&&h&a.direction&&a.distance>this.options.threshold&&Ta(b)>this.options.velocity&&a.eventType&ca},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a);this.manager.emit(this.options.event,a)}});l(ia,U,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[jb]},
process:function(a){var b=this.options,h=a.pointers.length===b.pointers,c=a.distance<b.threshold,d=a.deltaTime<b.time;if(this.reset(),a.eventType&ka&&0===this.count)return this.failTimeout();if(c&&d&&h){if(a.eventType!=ca)return this.failTimeout();h=this.pTime?a.timeStamp-this.pTime<b.interval:!0;c=!this.pCenter||Q(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;c&&h?this.count+=1:this.count=1;this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?
(this._timer=setTimeout(m(function(){this.state=Qa;this.tryEmit()},this),b.interval),Ia):Qa}return 32},failTimeout:function(){return this._timer=setTimeout(m(function(){this.state=32},this),this.options.interval),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Qa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});ya.VERSION="2.0.4";ya.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[da,
{enable:!1}],[V,{enable:!1},["rotate"]],[ga,{direction:Ua}],[R,{direction:Ua},["swipe"]],[ia],[ia,{event:"doubletap",taps:2},["tap"]],[W]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ua.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=
a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var h,c=this.recognizers,d=b.curRecognizer;(!d||d&&d.state&Qa)&&(d=b.curRecognizer=null);for(var k=0;k<c.length;)h=c[k],2===b.stopped||d&&h!=d&&!h.canRecognizeWith(d)?h.reset():h.recognize(a),!d&&h.state&(Ia|eb|bb)&&(d=b.curRecognizer=h),k++}},get:function(a){if(a instanceof U)return a;for(var b=this.recognizers,h=0;h<b.length;h++)if(b[h].options.event==a)return b[h];return null},add:function(a){if(d(a,
"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(d(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(u(b,a),1),this.touchAction.update(),this},on:function(a,b){var h=this.handlers;return g(s(a),function(a){h[a]=h[a]||[];h[a].push(b)}),this},off:function(a,b){var h=this.handlers;return g(s(a),function(a){b?h[a].splice(u(h[a],b),1):delete h[a]}),
this},emit:function(a,b){this.options.domEvents&&Ca(a,b);var h=this.handlers[a]&&this.handlers[a].slice();if(h&&h.length){b.type=a;b.preventDefault=function(){b.srcEvent.preventDefault()};for(var c=0;c<h.length;)h[c](b),c++}},destroy:function(){this.element&&za(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};h(ya,{INPUT_START:ka,INPUT_MOVE:ma,INPUT_END:ca,INPUT_CANCEL:na,STATE_POSSIBLE:Za,STATE_BEGAN:Ia,STATE_CHANGED:eb,STATE_ENDED:bb,STATE_RECOGNIZED:Qa,STATE_CANCELLED:fb,
STATE_FAILED:32,DIRECTION_NONE:la,DIRECTION_LEFT:wa,DIRECTION_RIGHT:Ba,DIRECTION_UP:xa,DIRECTION_DOWN:ta,DIRECTION_HORIZONTAL:Ua,DIRECTION_VERTICAL:$a,DIRECTION_ALL:ab,Manager:ua,Input:A,TouchAction:M,TouchInput:J,MouseInput:F,PointerEventInput:D,TouchMouseInput:K,SingleTouchInput:S,Recognizer:U,AttrRecognizer:ba,Tap:ia,Pan:R,Swipe:ga,Pinch:V,Rotate:da,Press:W,on:n,off:q,each:g,merge:k,extend:h,inherit:l,bindFn:m,prefixed:B});"undefined"!=typeof module&&module.exports?module.exports=ya:a[c]=ya}(window,
document,"Hammer");AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.ESCAPE_EVENT="escape";Autodesk.Viewing.PROGRESS_UPDATE_EVENT="progress";Autodesk.Viewing.FULLSCREEN_MODE_EVENT="fullScreenMode";Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT="navmode";Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT="viewerStateRestored";Autodesk.Viewing.VIEWER_RESIZE_EVENT="viewerResize";Autodesk.Viewing.TOOLBAR_CREATED_EVENT="toolbarCreated";Autodesk.Viewing.VIEWER_UNINITIALIZED="viewerUninitialized";
Autodesk.Viewing.Viewer=function(a,b){this.clientContainer=a;this.container=document.createElement("div");this.container.className="adsk-viewing-viewer";this.container.style.height="100%";this.container.style.width="100%";this.container.style.overflow="hidden";this.clientContainer.appendChild(this.container);this.listeners={};this.dockingPanels=[];this.config=b;this.contextMenu=null;this.__firefoxLMBfix=!1;this.screenModeDelegateClass=this.screenModeDelegate=null;this.setScreenModeDelegate(b?b.screenModeDelegate:
void 0);this.loadedExtensions={};this.started=!1};Autodesk.Viewing.Viewer.prototype={load:function(a,b){throw"bool load(urn, function(void)) must be implemented.  For more details, read the Viewer class documentation.";}};Autodesk.Viewing.Viewer.prototype.start=function(){if(this.started)return 0;var a=this.initialize();if(0===a&&(this.started=!0,this.config&&this.config.hasOwnProperty("extensions")))for(var b=this.config.extensions,c=0;c<b.length;++c)this.loadExtension(b[c],this.config);return a};
Autodesk.Viewing.Viewer.prototype.initialize=function(){var a=this;this.onResizeCallback=function(b){a.resize()};window.addEventListener("resize",this.onResizeCallback,!1);if(!this.config||(this.config.hasOwnProperty("disableBrowserContextMenu")?this.config.disableBrowserContextMenu:1))this.onDefaultContextMenu=function(a){a.preventDefault()},this.container.addEventListener("contextmenu",this.onDefaultContextMenu,!1);this.initContextMenu();this.localize()};
Autodesk.Viewing.Viewer.prototype.uninitialize=function(){this.onDefaultContextMenu&&this.container.removeEventListener("contextmenu",this.onDefaultContextMenu,!1);this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container);this.container=null;this.screenModeDelegate&&(this.screenModeDelegate.uninitialize(),this.screenModeDelegate=null);this.config=this.clientContainer=null;this.listeners={};this.dockingPanels=[];this.contextMenu=null;window.removeEventListener("resize",
this.onResizeCallback,!1);this.fireEvent({type:Autodesk.Viewing.VIEWER_UNINITIALIZED})};Autodesk.Viewing.Viewer.prototype.finish=function(){for(var a in this.loadedExtensions)this.unloadExtension(a);this.uninitialize()};
Autodesk.Viewing.Viewer.prototype.loadExtension=function(a,b){var c=!1;if(this.isExtensionLoaded(a))stderr("Extension already loaded: "+a);else{var f=Autodesk.Viewing.theExtensionManager.getExtension(a);if(f){if(f=new f(this,b),c=f.load())this.loadedExtensions[a]=f,stderr("Extension loaded: "+a)}else stderr("Extension not found: "+a)}return c};Autodesk.Viewing.Viewer.prototype.isExtensionLoaded=function(a){return a in this.loadedExtensions};
Autodesk.Viewing.Viewer.prototype.unloadExtension=function(a){var b=!1;this.isExtensionLoaded(a)?(b=this.loadedExtensions[a].unload(),stderr("Extension unloaded: "+a),delete this.loadedExtensions[a]):stderr("Extension not found: "+a);return b};Autodesk.Viewing.Viewer.prototype.localize=function(){Autodesk.Viewing.i18n.localize()};Autodesk.Viewing.Viewer.prototype.addEventListener=function(a,b){"undefined"==typeof this.listeners[a]&&(this.listeners[a]=[]);this.listeners[a].push(b)};
Autodesk.Viewing.Viewer.prototype.hasEventListener=function(a,b){if(void 0===this.listeners)return!1;var c=this.listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1};Autodesk.Viewing.Viewer.prototype.removeEventListener=function(a,b){if(this.listeners[a]instanceof Array)for(var c=this.listeners[a],f=0,d=c.length;f<d;f++)if(c[f]===b){c.splice(f,1);break}};
Autodesk.Viewing.Viewer.prototype.fireEvent=function(a){"string"==typeof a&&(a={type:a});a.target||(a.target=this);if(!a.type)throw Error("event type unknown.");if(this.listeners[a.type]instanceof Array)for(var b=this.listeners[a.type].slice(),c=0;c<b.length;c++)b[c].call(this,a)};
Autodesk.Viewing.Viewer.prototype.getDimensions=function(){if(this.container){var a={};this.getScreenMode()===this.ScreenMode.kFullScreen?(a.width=screen.width,a.height=screen.height):a=this.container.getBoundingClientRect();return{width:a.width,height:a.height}}return null};Autodesk.Viewing.Viewer.prototype.getState=function(a){throw"Implement getState() in derived class";};Autodesk.Viewing.Viewer.prototype.restoreState=function(a,b,c){throw"Implement restoreState() in derived class";};
Autodesk.Viewing.Viewer.prototype.isValidState=function(a){throw"Implement isValidState() in derived class";};Autodesk.Viewing.Viewer.prototype.setViewFromArray=function(a){};Autodesk.Viewing.Viewer.prototype.setViewFromViewBox=function(a){};Autodesk.Viewing.Viewer.prototype.setViewFromFile=function(){};Autodesk.Viewing.Viewer.prototype.resize=function(){this.resizePanels()};
Autodesk.Viewing.Viewer.prototype.addPanel=function(a){return-1===this.dockingPanels.indexOf(a)?(this.dockingPanels.push(a),!0):!1};Autodesk.Viewing.Viewer.prototype.removePanel=function(a){a=this.dockingPanels.indexOf(a);return-1<a?(this.dockingPanels.splice(a,1),!0):!1};
Autodesk.Viewing.Viewer.prototype.resizePanels=function(a){var b=a?a.viewer:null;b||(b=this);a=a?a.dockingPanels:null;a||(a=b.dockingPanels);for(var c=b.container.getBoundingClientRect(),b=c.top,f=c.bottom,d=c.left,g=c.right,h=c.width,c=c.height,k=0;k<a.length;++k){var l=a[k].container,m=l.getBoundingClientRect(),p=m.top,p=m.bottom,n=m.left,n=m.right,q=m.width,m=m.height;if(q&&m){h<q&&(q=Math.round(h),l.style.width=q+"px");c<m&&(m=Math.round(c),l.style.height=m+"px");if(g<n||l.dockRight)n=Math.round(g-
q-d),l.style.left=n+"px";if(f<p||l.dockBottom)p=Math.round(f-m-b),l.style.top=p+"px";l.style.maxWidth=Math.round(h)+"px";l.style.maxHeight=Math.round(c)+"px"}}};Autodesk.Viewing.Viewer.prototype.search=function(a,b,c){};Autodesk.Viewing.Viewer.prototype.setContextMenu=function(a){this.contextMenu&&this.contextMenu.hide();this.contextMenu=a};
Autodesk.Viewing.Viewer.prototype.initContextMenu=function(){function a(a){var c=a.button;"buttons"in a&&(!b.__firefoxLMBfix||a.buttons&1?2===c&&a.buttons&1&&(c=0,b.__firefoxLMBfix=!0):(b.__firefoxLMBfix=!1,c=0));a=b.navigation&&b.navigation.getUseLeftHandedInput()?0:2;return c===a?!0:!1}var b=this,c=this.canvas||this.container;c.addEventListener("mousedown",function(c){a(c)&&(b.startX=c.clientX,b.startY=c.clientY)});c.addEventListener("mouseup",function(c){return a(c)&&b.contextMenu&&c.clientX===
b.startX&&c.clientY===b.startY&&b.preContextMenuShow(c)?b.contextMenu.show(c):!0},!1)};Autodesk.Viewing.Viewer.prototype.preContextMenuShow=function(a){return!0};Autodesk.Viewing.Viewer.ScreenMode={kNormal:0,kFullBrowser:1,kFullScreen:2};Autodesk.Viewing.Viewer.prototype.ScreenMode={kNormal:0,kFullBrowser:1,kFullScreen:2};
Autodesk.Viewing.Viewer.prototype.setScreenModeDelegate=function(a){this.screenModeDelegate&&(this.screenModeDelegate.uninitialize(),this.screenModeDelegate=null);this.screenModeDelegateClass=a?a:null===a?Autodesk.Viewing.NullScreenModeDelegate:Autodesk.Viewing.ViewerScreenModeDelegate};Autodesk.Viewing.Viewer.prototype.getScreenModeDelegate=function(){this.screenModeDelegate||(this.screenModeDelegate=new this.screenModeDelegateClass(this));return this.screenModeDelegate};
Autodesk.Viewing.Viewer.prototype.isScreenModeSupported=function(a){return this.getScreenModeDelegate().isModeSupported(a)};Autodesk.Viewing.Viewer.prototype.canChangeScreenMode=function(){return this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.kNormal)};Autodesk.Viewing.Viewer.prototype.setScreenMode=function(a){return this.getScreenModeDelegate().setMode(a)};Autodesk.Viewing.Viewer.prototype.getScreenMode=function(){return this.getScreenModeDelegate().getMode()};
Autodesk.Viewing.Viewer.prototype.nextScreenMode=function(){var a=this.getScreenModeDelegate().getNextMode();return void 0!==a?this.setScreenMode(a):!1};Autodesk.Viewing.Viewer.prototype.escapeScreenMode=function(){var a=this.getScreenModeDelegate().getEscapeMode();return void 0!==a?this.setScreenMode(a):!1};
Autodesk.Viewing.ScreenModeDelegate=function(a){this.viewer=a;this.bindFullscreenEventListener=this.fullscreenEventListener.bind(this);this.getMode()===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&(document.addEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("MSFullscreenChange",
this.bindFullscreenEventListener,!1))};Autodesk.Viewing.ScreenModeDelegate.prototype.uninitialize=function(){document.removeEventListener("fullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1);this.viewer=null};
Autodesk.Viewing.ScreenModeDelegate.prototype.isModeSupported=function(a){return!0};Autodesk.Viewing.ScreenModeDelegate.prototype.setMode=function(a){var b=this.getMode();if(a!==b&&this.isModeSupported(a)){this.doScreenModeChange(b,a);if(b!==Autodesk.Viewing.Viewer.ScreenMode.kFullScreen)this.onScreenModeChanged(b,a);return!0}return!1};Autodesk.Viewing.ScreenModeDelegate.prototype.getMode=function(){throw"Implement getMode() in derived class";};
Autodesk.Viewing.ScreenModeDelegate.prototype.getNextMode=function(){var a=this.getMode(),b;a===Autodesk.Viewing.Viewer.ScreenMode.kNormal&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser)?b=Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser:a===Autodesk.Viewing.Viewer.ScreenMode.kNormal&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullScreen)?b=Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:a===Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullScreen)?
b=Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:a===Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kNormal)?b=Autodesk.Viewing.Viewer.ScreenMode.kNormal:a===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kNormal)?b=Autodesk.Viewing.Viewer.ScreenMode.kNormal:a===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&this.isModeSupported(Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser)&&(b=Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser);
return b};Autodesk.Viewing.ScreenModeDelegate.prototype.getEscapeMode=function(){return this.getMode()!==Autodesk.Viewing.Viewer.ScreenMode.kNormal?Autodesk.Viewing.Viewer.ScreenMode.kNormal:void 0};Autodesk.Viewing.ScreenModeDelegate.prototype.fullscreenEventListener=function(){if(inFullscreen())this.viewer.resize();else{var a=Autodesk.Viewing.Viewer.ScreenMode;this.doScreenModeChange(a.kFullScreen,a.kNormal);this.onScreenModeChanged(a.kFullScreen,a.kNormal)}};
Autodesk.Viewing.ScreenModeDelegate.prototype.doScreenModeChange=function(a,b){throw"Implement doScreenModeChange() in derived class";};
Autodesk.Viewing.ScreenModeDelegate.prototype.onScreenModeChanged=function(a,b){a===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen?(document.removeEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1)):b===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&
(document.addEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1));this.viewer.resize();this.viewer.fireEvent({type:Autodesk.Viewing.FULLSCREEN_MODE_EVENT,mode:b})};
Autodesk.Viewing.ViewerScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.ViewerScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.ViewerScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ViewerScreenModeDelegate;
Autodesk.Viewing.ViewerScreenModeDelegate.prototype.getMode=function(){return inFullscreen()&&fullscreenElement()===this.viewer.container?Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:this.viewer.container.classList.contains("viewer-fill-browser")?Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser:Autodesk.Viewing.Viewer.ScreenMode.kNormal};
Autodesk.Viewing.ViewerScreenModeDelegate.prototype.doScreenModeChange=function(a,b){var c=this.viewer.container;switch(b){case Autodesk.Viewing.Viewer.ScreenMode.kNormal:c.classList.remove("viewer-fill-browser");exitFullscreen();break;case Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser:c.classList.add("viewer-fill-browser");break;case Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:c.classList.add("viewer-fill-browser"),launchFullscreen(c)}};
Autodesk.Viewing.ApplicationScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.ApplicationScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ApplicationScreenModeDelegate;Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.isModeSupported=function(a){return a!==Autodesk.Viewing.Viewer.ScreenMode.kFullBrowser};
Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.getMode=function(){return inFullscreen()&&fullscreenElement()===document.documentElement?Autodesk.Viewing.Viewer.ScreenMode.kFullScreen:Autodesk.Viewing.Viewer.ScreenMode.kNormal};Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.doScreenModeChange=function(a,b){b===Autodesk.Viewing.Viewer.ScreenMode.kNormal?exitFullscreen():b===Autodesk.Viewing.Viewer.ScreenMode.kFullScreen&&launchFullscreen(document.documentElement)};
Autodesk.Viewing.NullScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.NullScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.NullScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ScreenModeDelegate;Autodesk.Viewing.NullScreenModeDelegate.prototype.isModeSupported=function(a){return!1};Autodesk.Viewing.NullScreenModeDelegate.prototype.getMode=function(){return Autodesk.Viewing.Viewer.ScreenMode.kNormal};
"use strict";var THREE={REVISION:"68"};"object"===typeof module&&(module.exports=THREE);THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;
THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;
THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;
THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;
THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var f=function(a,b,h){0>h&&(h+=1);1<h&&(h-=1);return h<1/6?a+6*(b-a)*
h:0.5>h?b:h<2/3?a+6*(b-a)*(2/3-h):a};b=0.5>=c?c*(1+b):c+b-c*b;c=2*c-b;this.r=f(c,b,a+1/3);this.g=f(c,b,a);this.b=f(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,f=this.b,d=Math.max(b,c,f),g=Math.min(b,c,f),h,k=(g+d)/2;if(g===d)g=h=0;else{var l=d-g,g=0.5>=k?l/(d+g):l/(2-d-g);switch(d){case b:h=(c-f)/l+(c<f?6:0);break;case c:h=(f-b)/l+2;break;case f:h=(b-c)/l+4}h/=6}a.h=h;a.s=g;a.l=k;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var f=this.getHSL();f.h+=a;f.s+=b;f.l+=c;this.setHSL(f.h,f.s,f.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,f){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==f?f:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,f){this._x=a;this._y=b;this._z=c;this._w=f;this.onChangeCallback();return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;
this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),f=Math.cos(a._y/2),d=Math.cos(a._z/2),g=Math.sin(a._x/2),h=Math.sin(a._y/2),k=Math.sin(a._z/2);"XYZ"===a.order?(this._x=g*f*d+c*h*k,this._y=c*h*d-g*f*k,this._z=c*f*k+g*h*d,this._w=c*f*d-g*h*k):"YXZ"===a.order?(this._x=g*f*d+c*h*k,this._y=c*h*d-g*f*k,this._z=
c*f*k-g*h*d,this._w=c*f*d+g*h*k):"ZXY"===a.order?(this._x=g*f*d-c*h*k,this._y=c*h*d+g*f*k,this._z=c*f*k+g*h*d,this._w=c*f*d-g*h*k):"ZYX"===a.order?(this._x=g*f*d-c*h*k,this._y=c*h*d+g*f*k,this._z=c*f*k-g*h*d,this._w=c*f*d+g*h*k):"YZX"===a.order?(this._x=g*f*d+c*h*k,this._y=c*h*d+g*f*k,this._z=c*f*k-g*h*d,this._w=c*f*d-g*h*k):"XZY"===a.order&&(this._x=g*f*d-c*h*k,this._y=c*h*d-g*f*k,this._z=c*f*k+g*h*d,this._w=c*f*d+g*h*k);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,f=Math.sin(c);this._x=a.x*f;this._y=a.y*f;this._z=a.z*f;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var f=b[8],d=b[1],g=b[5],h=b[9],k=b[2],l=b[6],b=b[10],m=c+g+b;0<m?(c=0.5/Math.sqrt(m+1),this._w=0.25/c,this._x=(l-h)*c,this._y=(f-k)*c,this._z=(d-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(l-h)/c,this._x=0.25*c,this._y=(a+d)/c,this._z=(f+k)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(f-k)/c,this._x=(a+d)/c,this._y=
0.25*c,this._z=(h+l)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(d-a)/c,this._x=(f+k)/c,this._y=(h+l)/c,this._z=0.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,f){void 0===a&&(a=new THREE.Vector3);b=c.dot(f)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,f);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,f=a._y,d=a._z,g=a._w,h=b._x,k=b._y,l=b._z,m=b._w;this._x=c*m+g*h+f*l-d*k;this._y=f*m+g*k+d*h-c*l;this._z=d*m+g*l+c*k-f*h;this._w=g*m-c*h-f*k-d*l;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,f=this._y,d=this._z,g=this._w,h=g*a._w+c*a._x+f*a._y+d*a._z;0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,h=-h):this.copy(a);if(1<=h)return this._w=g,this._x=c,this._y=f,this._z=d,this;var k=Math.acos(h),l=Math.sqrt(1-h*h);if(0.001>Math.abs(l))return this._w=0.5*(g+this._w),this._x=0.5*(c+this._x),this._y=0.5*(f+this._y),this._z=0.5*(d+this._z),this;h=Math.sin((1-b)*k)/l;k=Math.sin(b*k)/l;this._w=g*h+this._w*k;this._x=
c*h+this._x*k;this._y=f*h+this._y*k;this._z=d*h+this._z*k;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,
this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,f){return c.copy(a).slerp(b,f)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},
subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,
b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,f){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(f,f);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=
this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=
a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,
c=this.y,f=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*f;this.y=a[1]*b+a[4]*c+a[7]*f;this.z=a[2]*b+a[5]*c+a[8]*f;return this},applyMatrix4:function(a){var b=this.x,c=this.y,f=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*f+a[12];this.y=a[1]*b+a[5]*c+a[9]*f+a[13];this.z=a[2]*b+a[6]*c+a[10]*f+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,f=this.z;a=a.elements;var d=1/(a[3]*b+a[7]*c+a[11]*f+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*f+a[12])*d;this.y=(a[1]*b+a[5]*c+a[9]*f+a[13])*d;this.z=
(a[2]*b+a[6]*c+a[10]*f+a[14])*d;return this},applyQuaternion:function(a){var b=this.x,c=this.y,f=this.z,d=a.x,g=a.y,h=a.z;a=a.w;var k=a*b+g*f-h*c,l=a*c+h*b-d*f,m=a*f+d*c-g*b,b=-d*b-g*c-h*f;this.x=k*a+b*-d+l*-h-m*-g;this.y=l*a+b*-g+m*-d-k*-h;this.z=m*a+b*-h+k*-g-l*-d;return this},transformDirection:function(a){var b=this.x,c=this.y,f=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*f;this.y=a[1]*b+a[5]*c+a[9]*f;this.z=a[2]*b+a[6]*c+a[10]*f;this.normalize();return this},divide:function(a){this.x/=a.x;
this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=
b.z);return this},clampScalar:function(){var a,b;return function(c,f){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(f,f,f);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+
Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,f=this.y,d=this.z;this.x=f*a.z-d*a.y;this.y=
d*a.x-c*a.z;this.z=c*a.y-f*a.x;return this},crossVectors:function(a,b){var c=a.x,f=a.y,d=a.z,g=b.x,h=b.y,k=b.z;this.x=f*k-d*h;this.y=d*g-c*k;this.z=c*h-f*g;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===
a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,
b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=
a;return this},setFromMatrixColumn:function(a,b){var c=4*a,f=b.elements;this.x=f[c];this.y=f[c+1];this.z=f[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Vector4=function(a,b,c,f){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==f?f:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,f){this.x=a;this.y=b;this.z=c;this.w=f;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=
this.x,c=this.y,f=this.z,d=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*f+a[12]*d;this.y=a[1]*b+a[5]*c+a[9]*f+a[13]*d;this.z=a[2]*b+a[6]*c+a[10]*f+a[14]*d;this.w=a[3]*b+a[7]*c+a[11]*f+a[15]*d;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},
setAxisAngleFromRotationMatrix:function(a){var b,c,f;a=a.elements;var d=a[0];f=a[4];var g=a[8],h=a[1],k=a[5],l=a[9];c=a[2];b=a[6];var m=a[10];if(0.01>Math.abs(f-h)&&0.01>Math.abs(g-c)&&0.01>Math.abs(l-b)){if(0.1>Math.abs(f+h)&&0.1>Math.abs(g+c)&&0.1>Math.abs(l+b)&&0.1>Math.abs(d+k+m-3))return this.set(1,0,0,0),this;a=Math.PI;d=(d+1)/2;k=(k+1)/2;m=(m+1)/2;f=(f+h)/4;g=(g+c)/4;l=(l+b)/4;d>k&&d>m?0.01>d?(b=0,f=c=0.707106781):(b=Math.sqrt(d),c=f/b,f=g/b):k>m?0.01>k?(b=0.707106781,c=0,f=0.707106781):(c=
Math.sqrt(k),b=f/c,f=l/c):0.01>m?(c=b=0.707106781,f=0):(f=Math.sqrt(m),b=g/f,c=l/f);this.set(b,c,f,a);return this}a=Math.sqrt((b-l)*(b-l)+(g-c)*(g-c)+(h-f)*(h-f));0.001>Math.abs(a)&&(a=1);this.x=(b-l)/a;this.y=(g-c)/a;this.z=(h-f)/a;this.w=Math.acos((d+k+m-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);this.w<
a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,f){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(f,f,f,f);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);
this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):
Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,
this.w)}};THREE.Euler=function(a,b,c,f){this._x=a||0;this._y=b||0;this._z=c||0;this._order=f||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,f){this._x=a;this._y=b;this._z=c;this._order=f||this._order;this.onChangeCallback();return this},copy:function(a){this._x=
a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b){var c=THREE.Math.clamp,f=a.elements,d=f[0],g=f[4],h=f[8],k=f[1],l=f[5],m=f[9],p=f[2],n=f[6],f=f[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(h,-1,1)),0.99999>Math.abs(h)?(this._x=Math.atan2(-m,f),this._z=Math.atan2(-g,d)):(this._x=Math.atan2(n,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(m,-1,1)),0.99999>Math.abs(m)?(this._y=Math.atan2(h,f),this._z=Math.atan2(k,l)):
(this._y=Math.atan2(-p,d),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(n,-1,1)),0.99999>Math.abs(n)?(this._y=Math.atan2(-p,f),this._z=Math.atan2(-g,l)):(this._y=0,this._z=Math.atan2(k,d))):"ZYX"===b?(this._y=Math.asin(-c(p,-1,1)),0.99999>Math.abs(p)?(this._x=Math.atan2(n,f),this._z=Math.atan2(k,d)):(this._x=0,this._z=Math.atan2(-g,l))):"YZX"===b?(this._z=Math.asin(c(k,-1,1)),0.99999>Math.abs(k)?(this._x=Math.atan2(-m,l),this._y=Math.atan2(-p,d)):(this._x=0,this._y=Math.atan2(h,f))):"XZY"===b?(this._z=
Math.asin(-c(g,-1,1)),0.99999>Math.abs(g)?(this._x=Math.atan2(n,l),this._y=Math.atan2(h,d)):(this._x=Math.atan2(-m,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;this.onChangeCallback();return this},setFromQuaternion:function(a,b,c){var f=THREE.Math.clamp,d=a.x*a.x,g=a.y*a.y,h=a.z*a.z,k=a.w*a.w;b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),k-d-g+h),this._y=Math.asin(f(2*(a.x*a.z+a.y*a.w),-1,1)),this._z=Math.atan2(2*
(a.z*a.w-a.x*a.y),k+d-g-h)):"YXZ"===b?(this._x=Math.asin(f(2*(a.x*a.w-a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),k-d-g+h),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),k-d+g-h)):"ZXY"===b?(this._x=Math.asin(f(2*(a.x*a.w+a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),k-d-g+h),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),k-d+g-h)):"ZYX"===b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),k-d-g+h),this._y=Math.asin(f(2*(a.y*a.w-a.x*a.z),-1,1)),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),k+d-g-h)):"YZX"===
b?(this._x=Math.atan2(2*(a.x*a.w-a.z*a.y),k-d+g-h),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),k+d-g-h),this._z=Math.asin(f(2*(a.x*a.y+a.z*a.w),-1,1))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),k-d+g-h),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),k+d-g-h),this._z=Math.asin(f(2*(a.z*a.w-a.x*a.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);
this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}};
THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,f){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var d=b.dot(b),d=b.dot(a)/d;f&&(d=THREE.Math.clamp(d,0,1));return d}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var f=a.copy(c).multiplyScalar(0.5);this.min.copy(b).sub(f);this.max.copy(b).add(f);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=
this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var f=a.copy(c).multiplyScalar(0.5);this.min.copy(b).sub(f);this.max.copy(b).add(f);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);
this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var d=b.geometry.vertices,g=0,h=d.length;g<h;g++)a.copy(d[g]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},
center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||
a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||
a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=0.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},
union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);
a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};
THREE.Matrix3=function(a,b,c,f,d,g,h,k,l){var m=this.elements=new Float32Array(9);m[0]=void 0!==a?a:1;m[3]=b||0;m[6]=c||0;m[1]=f||0;m[4]=void 0!==d?d:1;m[7]=g||0;m[2]=h||0;m[5]=k||0;m[8]=void 0!==l?l:1};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,f,d,g,h,k,l){var m=this.elements;m[0]=a;m[3]=b;m[6]=c;m[1]=f;m[4]=d;m[7]=g;m[2]=h;m[5]=k;m[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,f){void 0===c&&(c=0);void 0===f&&(f=b.length);for(var d=0;d<f;d+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=
a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],f=a[2],d=a[3],g=a[4],h=a[5],k=a[6],l=a[7],a=a[8];return b*g*a-b*h*l-c*d*a+c*h*k+f*d*l-f*g*k},getInverse:function(a,b){var c=a.elements,f=this.elements;f[0]=c[10]*c[5]-c[6]*c[9];f[1]=-c[10]*c[1]+c[2]*c[9];f[2]=c[6]*c[1]-c[2]*c[5];f[3]=-c[10]*c[4]+c[6]*c[8];f[4]=c[10]*c[0]-c[2]*c[8];f[5]=-c[6]*c[0]+c[2]*c[4];f[6]=c[9]*c[4]-c[5]*c[8];f[7]=-c[9]*c[0]+c[1]*c[8];f[8]=c[5]*c[0]-c[1]*c[4];
c=c[0]*f[0]+c[1]*f[3]+c[2]*f[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];
a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],
a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,f,d,g,h,k,l,m,p,n,q,r,s,u){var w=this.elements=new Float32Array(16);w[0]=void 0!==a?a:1;w[4]=b||0;w[8]=c||0;w[12]=f||0;w[1]=d||0;w[5]=void 0!==g?g:1;w[9]=h||0;w[13]=k||0;w[2]=l||0;w[6]=m||0;w[10]=void 0!==p?p:1;w[14]=n||0;w[3]=q||0;w[7]=r||0;w[11]=s||0;w[15]=void 0!==u?u:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,f,d,g,h,k,l,m,p,n,q,r,s,u){var w=this.elements;w[0]=a;w[4]=b;w[8]=c;w[12]=f;w[1]=d;w[5]=g;w[9]=h;w[13]=k;w[2]=l;w[6]=m;w[10]=p;w[14]=n;w[3]=q;w[7]=r;w[11]=s;w[15]=u;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREEMatrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},
copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements;b=b.elements;var f=1/a.set(b[0],b[1],b[2]).length(),d=1/a.set(b[4],b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*f;c[1]=b[1]*f;c[2]=b[2]*f;c[4]=b[4]*d;c[5]=b[5]*d;c[6]=b[6]*d;c[8]=b[8]*g;c[9]=b[9]*g;c[10]=b[10]*g;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&
console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,f=a.y,d=a.z,g=Math.cos(c),c=Math.sin(c),h=Math.cos(f),f=Math.sin(f),k=Math.cos(d),d=Math.sin(d);if("XYZ"===a.order){a=g*k;var l=g*d,m=c*k,p=c*d;b[0]=h*k;b[4]=-h*d;b[8]=f;b[1]=l+m*f;b[5]=a-p*f;b[9]=-c*h;b[2]=p-a*f;b[6]=m+l*f;b[10]=g*h}else"YXZ"===a.order?(a=h*k,l=h*d,m=f*k,p=f*d,b[0]=a+p*c,b[4]=m*c-l,b[8]=g*f,b[1]=g*d,b[5]=g*k,b[9]=-c,b[2]=l*c-m,b[6]=p+a*c,
b[10]=g*h):"ZXY"===a.order?(a=h*k,l=h*d,m=f*k,p=f*d,b[0]=a-p*c,b[4]=-g*d,b[8]=m+l*c,b[1]=l+m*c,b[5]=g*k,b[9]=p-a*c,b[2]=-g*f,b[6]=c,b[10]=g*h):"ZYX"===a.order?(a=g*k,l=g*d,m=c*k,p=c*d,b[0]=h*k,b[4]=m*f-l,b[8]=a*f+p,b[1]=h*d,b[5]=p*f+a,b[9]=l*f-m,b[2]=-f,b[6]=c*h,b[10]=g*h):"YZX"===a.order?(a=g*h,l=g*f,m=c*h,p=c*f,b[0]=h*k,b[4]=p-a*d,b[8]=m*d+l,b[1]=d,b[5]=g*k,b[9]=-c*k,b[2]=-f*k,b[6]=l*d+m,b[10]=a-p*d):"XZY"===a.order&&(a=g*h,l=g*f,m=c*h,p=c*f,b[0]=h*k,b[4]=-d,b[8]=f*k,b[1]=a*d+p,b[5]=g*k,b[9]=l*
d-m,b[2]=m*d-l,b[6]=c*k,b[10]=p*d+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,f=a.y,d=a.z,g=a.w,h=c+c,k=f+f,l=d+d;a=c*h;var m=c*k,c=c*l,p=f*k,f=f*l,d=d*l,h=g*h,k=g*k,g=g*l;b[0]=1-(p+d);b[4]=m-g;b[8]=c+k;b[1]=m+g;b[5]=1-
(a+d);b[9]=f-h;b[2]=c-k;b[6]=f+h;b[10]=1-(a+p);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(f,d,g){var h=this.elements;c.subVectors(f,d).normalize();0===c.length()&&(c.z=1);a.crossVectors(g,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(g,c).normalize());b.crossVectors(c,a);h[0]=a.x;h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=a.z;h[6]=b.z;h[10]=c.z;return this}}(),
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,f=b.elements,d=this.elements,g=c[0],h=c[4],k=c[8],l=c[12],m=c[1],p=c[5],n=c[9],q=c[13],r=c[2],s=c[6],u=c[10],w=c[14],v=c[3],B=c[7],z=c[11],c=c[15],A=f[0],C=f[4],G=f[8],E=f[12],I=f[1],H=f[5],Q=f[9],N=f[13],F=f[2],D=f[6],S=f[10],J=f[14],Z=f[3],
K=f[7],M=f[11],f=f[15];d[0]=g*A+h*I+k*F+l*Z;d[4]=g*C+h*H+k*D+l*K;d[8]=g*G+h*Q+k*S+l*M;d[12]=g*E+h*N+k*J+l*f;d[1]=m*A+p*I+n*F+q*Z;d[5]=m*C+p*H+n*D+q*K;d[9]=m*G+p*Q+n*S+q*M;d[13]=m*E+p*N+n*J+q*f;d[2]=r*A+s*I+u*F+w*Z;d[6]=r*C+s*H+u*D+w*K;d[10]=r*G+s*Q+u*S+w*M;d[14]=r*E+s*N+u*J+w*f;d[3]=v*A+B*I+z*F+c*Z;d[7]=v*C+B*H+z*D+c*K;d[11]=v*G+B*Q+z*S+c*M;d[15]=v*E+B*N+z*J+c*f;return this},multiplyToArray:function(a,b,c){var f=this.elements;this.multiplyMatrices(a,b);c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=
f[4];c[5]=f[5];c[6]=f[6];c[7]=f[7];c[8]=f[8];c[9]=f[9];c[10]=f[10];c[11]=f[11];c[12]=f[12];c[13]=f[13];c[14]=f[14];c[15]=f[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,f){void 0===c&&(c=0);void 0===f&&(f=
b.length);for(var d=0;d<f;d+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix4(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=
a[0],c=a[4],f=a[8],d=a[12],g=a[1],h=a[5],k=a[9],l=a[13],m=a[2],p=a[6],n=a[10],q=a[14];return a[3]*(+d*k*p-f*l*p-d*h*n+c*l*n+f*h*q-c*k*q)+a[7]*(+b*k*q-b*l*n+d*g*n-f*g*q+f*l*m-d*k*m)+a[11]*(+b*l*p-b*h*q-d*g*p+c*g*q+d*h*m-c*l*m)+a[15]*(-f*h*m-b*k*p+b*h*n+f*g*p-c*g*n+c*k*m)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,
b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=
this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,f=a.elements,d=f[0],g=f[4],h=f[8],k=f[12],l=f[1],m=f[5],p=f[9],n=f[13],q=f[2],r=f[6],s=f[10],u=f[14],w=f[3],v=f[7],B=f[11],f=f[15];c[0]=p*u*v-n*s*v+n*r*B-m*u*B-p*r*f+m*s*f;c[4]=k*s*v-h*u*v-k*r*B+g*u*B+h*r*f-g*s*f;c[8]=h*n*v-k*p*v+k*m*B-g*n*B-h*m*f+g*p*f;c[12]=k*p*r-h*n*r-k*m*s+g*n*s+h*m*u-g*p*u;c[1]=n*s*w-p*u*w-n*q*B+l*u*B+p*q*f-l*s*f;c[5]=h*u*w-k*s*w+k*q*B-d*u*B-h*q*f+d*s*f;c[9]=k*p*w-h*n*w-k*l*
B+d*n*B+h*l*f-d*p*f;c[13]=h*n*q-k*p*q+k*l*s-d*n*s-h*l*u+d*p*u;c[2]=m*u*w-n*r*w+n*q*v-l*u*v-m*q*f+l*r*f;c[6]=k*r*w-g*u*w-k*q*v+d*u*v+g*q*f-d*r*f;c[10]=g*n*w-k*m*w+k*l*v-d*n*v-g*l*f+d*m*f;c[14]=k*m*q-g*n*q-k*l*r+d*n*r+g*l*u-d*m*u;c[3]=p*r*w-m*s*w-p*q*v+l*s*v+m*q*B-l*r*B;c[7]=g*s*w-h*r*w+h*q*v-d*s*v-g*q*B+d*r*B;c[11]=h*m*w-g*p*w-h*l*v+d*p*v+g*l*B-d*m*B;c[15]=g*p*q-h*m*q+h*l*r-d*p*r-g*l*s+d*m*s;c=d*c[0]+l*c[4]+q*c[8]+w*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,f=a.y;a=a.z;b[0]*=c;b[4]*=f;b[8]*=a;b[1]*=c;b[5]*=f;b[9]*=a;b[2]*=c;b[6]*=f;b[10]*=a;b[3]*=c;b[7]*=f;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),f=Math.sin(b),d=1-c,g=a.x,h=a.y,k=a.z,l=d*g,m=d*h;this.set(l*g+c,l*h-f*k,l*k+f*h,0,l*h+f*k,m*h+c,m*k-f*g,0,l*k-f*h,m*k+f*g,d*k*k+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,f,d){var g=this.elements,h=a.set(g[0],g[1],g[2]).length(),k=a.set(g[4],g[5],g[6]).length(),l=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(h=-h);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/h;var g=1/k,m=1/l;b.elements[0]*=c;b.elements[1]*=
c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;f.setFromRotationMatrix(b);d.x=h;d.y=k;d.z=l;return this}}(),makeFrustum:function(a,b,c,f,d,g){var h=this.elements;h[0]=2*d/(b-a);h[4]=0;h[8]=(b+a)/(b-a);h[12]=0;h[1]=0;h[5]=2*d/(f-c);h[9]=(f+c)/(f-c);h[13]=0;h[2]=0;h[6]=0;h[10]=-(g+d)/(g-d);h[14]=-2*g*d/(g-d);h[3]=0;h[7]=0;h[11]=-1;h[15]=0;return this},makePerspective:function(a,b,c,f){a=c*Math.tan(THREE.Math.degToRad(0.5*a));
var d=-a;return this.makeFrustum(d*b,a*b,d,a,c,f)},makeOrthographic:function(a,b,c,f,d,g){var h=this.elements,k=b-a,l=c-f,m=g-d;h[0]=2/k;h[4]=0;h[8]=0;h[12]=-((b+a)/k);h[1]=0;h[5]=2/l;h[9]=0;h[13]=-((c+f)/l);h[2]=0;h[6]=0;h[10]=-2/m;h[14]=-((g+d)/m);h[3]=0;h[7]=0;h[11]=0;h[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=
this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var f=c.dot(this.direction);return 0>f?c.copy(this.origin):c.copy(this.direction).multiplyScalar(f).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,f){var d=a.clone().add(b).multiplyScalar(0.5),g=b.clone().sub(a).normalize(),h=0.5*a.distanceTo(b),
k=this.origin.clone().sub(d);a=-this.direction.dot(g);b=k.dot(this.direction);var l=-k.dot(g),m=k.lengthSq(),p=Math.abs(1-a*a),n,q;0<=p?(k=a*l-b,n=a*b-l,q=h*p,0<=k?n>=-q?n<=q?(h=1/p,k*=h,n*=h,a=k*(k+a*n+2*b)+n*(a*k+n+2*l)+m):(n=h,k=Math.max(0,-(a*n+b)),a=-k*k+n*(n+2*l)+m):(n=-h,k=Math.max(0,-(a*n+b)),a=-k*k+n*(n+2*l)+m):n<=-q?(k=Math.max(0,-(-a*h+b)),n=0<k?-h:Math.min(Math.max(-h,-l),h),a=-k*k+n*(n+2*l)+m):n<=q?(k=0,n=Math.min(Math.max(-h,-l),h),a=n*(n+2*l)+m):(k=Math.max(0,-(a*h+b)),n=0<k?h:Math.min(Math.max(-h,
-l),h),a=-k*k+n*(n+2*l)+m)):(n=0<a?-h:h,k=Math.max(0,-(a*n+b)),a=-k*k+n*(n+2*l)+m);c&&c.copy(this.direction.clone().multiplyScalar(k).add(this.origin));f&&f.copy(g.clone().multiplyScalar(n).add(d));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=new THREE.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var f=a.dot(this.direction),d=a.dot(a)-f*f,g=b.radius*b.radius;if(d>g)return null;g=Math.sqrt(g-d);d=f-g;
f+=g;return 0>d&&0>f?null:0>d?this.at(f,c):this.at(d,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;
return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,f,d,g,h;f=1/this.direction.x;g=1/this.direction.y;h=1/this.direction.z;var k=this.origin;0<=f?(c=(a.min.x-k.x)*f,f*=a.max.x-k.x):(c=(a.max.x-k.x)*f,f*=a.min.x-k.x);0<=g?(d=(a.min.y-k.y)*g,g*=a.max.y-k.y):(d=(a.max.y-k.y)*g,g*=a.min.y-k.y);if(c>g||d>f)return null;if(d>c||c!==c)c=d;if(g<f||f!==f)f=g;0<=h?(d=(a.min.z-k.z)*h,h*=a.max.z-k.z):(d=(a.max.z-k.z)*h,h*=a.min.z-k.z);if(c>h||d>f)return null;if(d>c||c!==
c)c=d;if(h<f||f!==f)f=h;return 0>f?null:this.at(0<=c?c:f,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,f=new THREE.Vector3;return function(d,g,h,k,l){b.subVectors(g,d);c.subVectors(h,d);f.crossVectors(b,c);g=this.direction.dot(f);if(0<g){if(k)return null;k=1}else if(0>g)k=-1,g=-g;else return null;a.subVectors(this.origin,d);d=k*this.direction.dot(c.crossVectors(a,c));if(0>d)return null;h=k*this.direction.dot(b.cross(a));if(0>h||d+h>g)return null;
d=-k*a.dot(f);return 0>d?null:this.at(d/g,l)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var f=this.center;void 0!==c?f.copy(c):a.setFromPoints(b).center(f);for(var d=0,g=0,h=b.length;g<h;g++)d=Math.max(d,f.distanceToSquared(b[g]));this.radius=Math.sqrt(d);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),f=b||new THREE.Vector3;f.copy(a);c>this.radius*this.radius&&(f.sub(this.center).normalize(),f.multiplyScalar(this.radius).add(this.center));return f},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};
THREE.Frustum=function(a,b,c,f,d,g){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==f?f:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==g?g:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,f,d,g){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(f);h[4].copy(d);h[5].copy(g);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var f=c[1],d=c[2],g=c[3],h=c[4],k=c[5],l=c[6],m=c[7],p=c[8],n=c[9],q=c[10],r=c[11],s=c[12],u=c[13],w=c[14],c=c[15];b[0].setComponents(g-a,m-h,r-p,c-s).normalize();b[1].setComponents(g+
a,m+h,r+p,c+s).normalize();b[2].setComponents(g+f,m+k,r+n,c+u).normalize();b[3].setComponents(g-f,m-k,r-n,c-u).normalize();b[4].setComponents(g-d,m-l,r-q,c-w).normalize();b[5].setComponents(g+d,m+l,r+q,c+w).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,
c=a.center;a=-a.radius;for(var f=0;6>f;f++)if(b[f].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var f=this.planes,d=0;6>d;d++){var g=f[d];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var h=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>h&&0>g)return!1}return!0}}(),
containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,f){this.normal.set(a,b,c);this.constant=f;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,f,d){f=a.subVectors(d,f).cross(b.subVectors(c,f)).normalize();this.setFromNormalAndCoplanarPoint(f,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var f=c||new THREE.Vector3,d=b.delta(a),g=this.normal.dot(d);if(0==g){if(0==this.distanceToPoint(b.start))return f.copy(b.start)}else return g=-(b.start.dot(this.normal)+this.constant)/g,0>g||1<g?void 0:f.copy(d).multiplyScalar(g).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(f,d){var g=d||c.getNormalMatrix(f),g=a.copy(this.normal).applyMatrix3(g),h=this.coplanarPoint(b);h.applyMatrix4(f);this.setFromNormalAndCoplanarPoint(g,h);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};
THREE.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,f;return function(){for(var d=0;36>d;d++)8==d||13==d||18==d||23==d?b[d]="-":14==d?b[d]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),f=c&15,c>>=4,b[d]=a[19==d?f&3|8:f]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,f,d){return f+(a-b)*(d-f)/(c-b)},smoothstep:function(a,b,c){if(a<=
b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/180;return function(b){return b*
a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}};
THREE.Spline=function(a){function b(a,b,h,c,d,k,f){a=0.5*(h-a);c=0.5*(c-b);return(2*(b-h)+a+c)*f+(-3*(b-h)-2*a-c)*k+a*d+b}this.points=a;var c=[],f={x:0,y:0,z:0},d,g,h,k,l,m,p,n,q;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){d=(this.points.length-1)*a;g=Math.floor(d);h=d-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:
g+2;m=this.points[c[0]];p=this.points[c[1]];n=this.points[c[2]];q=this.points[c[3]];k=h*h;l=h*k;f.x=b(m.x,p.x,n.x,q.x,h,k,l);f.y=b(m.y,p.y,n.y,q.y,h,k,l);f.z=b(m.z,p.z,n.z,q.z,h,k,l);return f};this.getControlPointsArray=function(){var a,b,h=this.points.length,c=[];for(a=0;a<h;a++)b=this.points[a],c[a]=[b.x,b.y,b.z];return c};this.getLength=function(a){var b,h,c,d=0,k=new THREE.Vector3,f=new THREE.Vector3,l=[],g=0;l[0]=0;a||(a=100);h=this.points.length*a;k.copy(this.points[0]);for(a=1;a<h;a++)b=a/
h,c=this.getPoint(b),f.copy(c),g+=f.distanceTo(k),k.copy(c),b*=this.points.length-1,b=Math.floor(b),b!=d&&(l[b]=g,d=b);l[l.length]=g;return{chunks:l,total:g}};this.reparametrizeByArcLength=function(a){var b,h,c,d,k,f,l=[],g=new THREE.Vector3,m=this.getLength();l.push(g.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){h=m.chunks[b]-m.chunks[b-1];f=Math.ceil(a*h/m.total);d=(b-1)/(this.points.length-1);k=b/(this.points.length-1);for(h=1;h<f-1;h++)c=d+1/f*h*(k-d),c=this.getPoint(c),l.push(g.copy(c).clone());
l.push(g.copy(this.points[b]).clone())}this.points=l}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,f,d){d=d||new THREE.Vector3;d.subVectors(f,c);a.subVectors(b,c);d.cross(a);b=d.lengthSq();return 0<b?d.multiplyScalar(1/Math.sqrt(b)):d.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(f,d,g,h,k){a.subVectors(h,d);b.subVectors(g,d);c.subVectors(f,d);f=a.dot(a);d=a.dot(b);g=a.dot(c);var l=b.dot(b);h=b.dot(c);var m=f*l-d*d;k=k||new THREE.Vector3;if(0==m)return k.set(-2,-1,-1);m=1/m;l=(l*g-d*h)*m;f=(f*h-d*g)*m;return k.set(1-l-f,f,l)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,f,d){b=THREE.Triangle.barycoordFromPoint(b,c,f,d,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,f){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[f]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return 0.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=0.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var f=c.indexOf(b);-1!==f&&c.splice(f,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],f=b.length,d=0;d<f;d++)c[d]=b[d];for(d=0;d<f;d++)c[d].call(this,a)}}}};
(function(a){a.Raycaster=function(b,c,g,h){this.ray=new a.Ray(b,c);this.near=g||0;this.far=h||Infinity;this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var b=function(a,b){return a.distance-b.distance},c=function(a,b,g,h){a.raycast(b,g);if(!0===h&&(a=a.children)){h=0;for(var k=a.length;h<k;h++)c(a[h],b,g,!0)}};a.Raycaster.prototype={constructor:a.Raycaster,precision:1E-4,linePrecision:1,set:function(a,b){this.ray.set(a,b)},intersectObject:function(a,d){var g=[];c(a,this,g,
d);g.sort(b);return g},intersectObjects:function(a,d){for(var g=[],h=0,k=a.length;h<k;h++)c(a[h],this,g,d);g.sort(b);return g}}})(THREE);
THREE.Object3D=function(a){this.id=THREE.Object3DIdCount++;this.parent=void 0;if(a)this.matrixAutoUpdate=!1,this.skipModTerms=!0;else{this.up=THREE.Object3D.DefaultUp.clone();a=new THREE.Vector3;var b=new THREE.Euler,c=new THREE.Quaternion,f=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,
value:f}});this.matrix=new THREE.Matrix4;this.rotationAutoUpdate=this.matrixAutoUpdate=!0;this.skipModTerms=!1}this.renderDepth=null;this.matrixWorld=new THREE.Matrix4;this.visible=this.matrixWorldNeedsUpdate=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);
THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,
c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));
return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,
b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add:",
a,"can't be added as a child of itself."),this;if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children||(this.children=[]);this.children.push(a);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}else console.error("THREE.Object3D.add:",a,"is not an instance of THREE.Object3D.");return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);
b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},raycast:function(){},traverse:function(a){a(this);if(this.children)for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},traverseVisible:function(a){if(!1!==this.visible&&(a(this),this.children))for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverseVisible(a)},
getObjectById:function(a,b){if(this.children)for(var c=0,f=this.children.length;c<f;c++){var d=this.children[c];if(d.id===a||!0===b&&(d=d.getObjectById(a,b),void 0!==d))return d}},getObjectByName:function(a,b){if(this.children)for(var c=0,f=this.children.length;c<f;c++){var d=this.children[c];if(d.name===a||!0===b&&(d=d.getObjectByName(a,b),void 0!==d))return d}},getChildByName:function(a,b){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a,
b)},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent&&this.matrix?this.matrixWorld.copy(this.matrix):this.matrix&&this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;if(this.children)for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},
clone:function(a,b){void 0===a&&(a=new THREE.Object3D(this.skipModTerms));void 0===b&&(b=!0);a.name=this.name;this.skipModTerms||(a.up.copy(this.up),a.position.copy(this.position),a.quaternion.copy(this.quaternion),a.scale.copy(this.scale),a.renderDepth=this.renderDepth,a.rotationAutoUpdate=this.rotationAutoUpdate,a.matrix.copy(this.matrix),a.matrixAutoUpdate=this.matrixAutoUpdate);a.matrixWorld.copy(this.matrixWorld);a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=
this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;this.userData&&(a.userData=JSON.parse(JSON.stringify(this.userData)));if(!0===b&&this.children)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;
THREE.Projector=function(){function a(){if(n===r){var a=new THREE.RenderableVertex;q.push(a);r++;n++;return a}return q[n++]}function b(){if(u===v){var a=new THREE.RenderableFace;w.push(a);v++;u++;return a}return w[u++]}function c(){if(z===C){var a=new THREE.RenderableLine;A.push(a);C++;z++;return a}return A[z++]}function f(){if(E===H){var a=new THREE.RenderableSprite;I.push(a);H++;E++;return a}return I[E++]}function d(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function g(a,b){var h=0,c=
1,d=a.z+a.w,k=b.z+b.w,f=-a.z+a.w,l=-b.z+b.w;if(0<=d&&0<=k&&0<=f&&0<=l)return!0;if(0>d&&0>k||0>f&&0>l)return!1;0>d?h=Math.max(h,d/(d-k)):0>k&&(c=Math.min(c,d/(d-k)));0>f?h=Math.max(h,f/(f-l)):0>l&&(c=Math.min(c,f/(f-l)));if(c<h)return!1;a.lerp(b,h);b.lerp(a,1-c);return!0}var h,k,l=[],m=0,p,n,q=[],r=0,s,u,w=[],v=0,B,z,A=[],C=0,G,E,I=[],H=0,Q={objects:[],lights:[],elements:[]},N=new THREE.Vector3,F=new THREE.Vector3,D=new THREE.Vector3,S=new THREE.Vector3,J=new THREE.Vector4,Z=new THREE.Box3(new THREE.Vector3(-1,
-1,-1),new THREE.Vector3(1,1,1)),K=new THREE.Box3,M=Array(3),ea=new THREE.Matrix4,U=new THREE.Matrix4,X,O=new THREE.Matrix4,ba=new THREE.Matrix3,R=new THREE.Frustum,V=new THREE.Vector4,W=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);U.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(U)};this.unprojectVector=function(){var a=new THREE.Matrix4;return function(b,h){a.getInverse(h.projectionMatrix);U.multiplyMatrices(h.matrixWorld,
a);return b.applyProjection(U)}}();this.pickingRay=function(a,b){a.z=-1;var h=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(h,b);h.sub(a).normalize();return new THREE.Raycaster(a,h)};var da=new function(){var h=[],d=[],k=null,f=null,l=new THREE.Matrix3,g=function(a){var b=a.positionWorld,h=a.positionScreen;b.copy(a.position).applyMatrix4(X);h.copy(b).applyMatrix4(U);b=1/h.w;h.x*=b;h.y*=b;h.z*=b;a.visible=-1<=h.x&&1>=h.x&&-1<=h.y&&1>=h.y&&-1<=h.z&&1>=h.z},m=function(a,
b,h){if(!0===a.visible||!0===b.visible||!0===h.visible)return!0;M[0]=a.positionScreen;M[1]=b.positionScreen;M[2]=h.positionScreen;return Z.isIntersectionBox(K.setFromPoints(M))},n=function(a,b,h){return 0>(h.positionScreen.x-a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(h.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x)};return{setObject:function(a){k=a;f=k.material;l.getNormalMatrix(k.matrixWorld);h.length=0;d.length=0},projectVertex:g,checkTriangleVisibility:m,
checkBackfaceCulling:n,pushVertex:function(b,h,c){p=a();p.position.set(b,h,c);g(p)},pushNormal:function(a,b,c){h.push(a,b,c)},pushUv:function(a,b){d.push(a,b)},pushLine:function(a,b){var h=q[a],d=q[b];B=c();B.id=k.id;B.v1.copy(h);B.v2.copy(d);B.z=(h.positionScreen.z+d.positionScreen.z)/2;B.material=k.material;Q.elements.push(B)},pushTriangle:function(a,c,g){var p=q[a],U=q[c],r=q[g];if(!1!==m(p,U,r)&&(f.side===THREE.DoubleSide||!0===n(p,U,r))){s=b();s.id=k.id;s.v1.copy(p);s.v2.copy(U);s.v3.copy(r);
s.z=(p.positionScreen.z+U.positionScreen.z+r.positionScreen.z)/3;for(p=0;3>p;p++)U=3*arguments[p],r=s.vertexNormalsModel[p],r.set(h[U],h[U+1],h[U+2]),r.applyMatrix3(l).normalize(),U=2*arguments[p],s.uvs[p].set(d[U],d[U+1]);s.vertexNormalsLength=3;s.material=k.material;Q.elements.push(s)}}}};this.projectScene=function(p,r,Z,w){E=z=u=0;Q.elements.length=0;!0===p.autoUpdate&&p.updateMatrixWorld();void 0===r.parent&&r.updateMatrixWorld();ea.copy(r.matrixWorldInverse.getInverse(r.matrixWorld));U.multiplyMatrices(r.projectionMatrix,
ea);R.setFromMatrix(U);k=0;Q.objects.length=0;Q.lights.length=0;p.traverseVisible(function(a){if(a instanceof THREE.Light)Q.lights.push(a);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Sprite)if(!1===a.frustumCulled||!0===R.intersectsObject(a)){if(k===m){var b=new THREE.RenderableObject;l.push(b);m++;k++;h=b}else h=l[k++];h.id=a.id;h.object=a;null!==a.renderDepth?h.z=a.renderDepth:(S.setFromMatrixPosition(a.matrixWorld),S.applyProjection(U),h.z=S.z);Q.objects.push(h)}});
!0===Z&&Q.objects.sort(d);p=0;for(Z=Q.objects.length;p<Z;p++){var K=Q.objects[p].object,v=K.geometry;da.setObject(K);X=K.matrixWorld;n=0;if(K instanceof THREE.Mesh)if(v instanceof THREE.BufferGeometry){var M=v.attributes,K=v.offsets;if(void 0!==M.position){for(var A=M.position.array,v=0,C=A.length;v<C;v+=3)da.pushVertex(A[v],A[v+1],A[v+2]);if(void 0!==M.normal)for(var H=M.normal.array,v=0,C=H.length;v<C;v+=3)da.pushNormal(H[v],H[v+1],H[v+2]);if(void 0!==M.uv)for(H=M.uv.array,v=0,C=H.length;v<C;v+=
2)da.pushUv(H[v],H[v+1]);if(void 0!==M.index)if(M=M.index.array,0<K.length)for(p=0;p<K.length;p++)for(C=K[p],A=C.index,v=C.start,C=C.start+C.count;v<C;v+=3)da.pushTriangle(M[v]+A,M[v+1]+A,M[v+2]+A);else for(v=0,C=M.length;v<C;v+=3)da.pushTriangle(M[v],M[v+1],M[v+2]);else for(v=0,C=A.length/3;v<C;v+=3)da.pushTriangle(v,v+1,v+2)}}else{if(v instanceof THREE.Geometry){var I=v.vertices,C=v.faces,M=v.faceVertexUvs[0];ba.getNormalMatrix(X);for(var A=K.material instanceof THREE.MeshFaceMaterial,H=!0===A?
K.material:null,sa=0,ha=I.length;sa<ha;sa++){var pa=I[sa];da.pushVertex(pa.x,pa.y,pa.z)}I=0;for(sa=C.length;I<sa;I++){var ha=C[I],Oa=!0===A?H.materials[ha.materialIndex]:K.material;if(void 0!==Oa){var Ja=Oa.side,pa=q[ha.a],ja=q[ha.b],Ha=q[ha.c];if(!0===Oa.morphTargets){var ka=v.morphTargets,ma=K.morphTargetInfluences,ca=pa.position,na=ja.position,la=Ha.position;N.set(0,0,0);F.set(0,0,0);D.set(0,0,0);for(var wa=0,Ba=ka.length;wa<Ba;wa++){var xa=ma[wa];if(0!==xa){var ta=ka[wa].vertices;N.x+=(ta[ha.a].x-
ca.x)*xa;N.y+=(ta[ha.a].y-ca.y)*xa;N.z+=(ta[ha.a].z-ca.z)*xa;F.x+=(ta[ha.b].x-na.x)*xa;F.y+=(ta[ha.b].y-na.y)*xa;F.z+=(ta[ha.b].z-na.z)*xa;D.x+=(ta[ha.c].x-la.x)*xa;D.y+=(ta[ha.c].y-la.y)*xa;D.z+=(ta[ha.c].z-la.z)*xa}}pa.position.add(N);ja.position.add(F);Ha.position.add(D);da.projectVertex(pa);da.projectVertex(ja);da.projectVertex(Ha)}if(!1!==da.checkTriangleVisibility(pa,ja,Ha)){ka=da.checkBackfaceCulling(pa,ja,Ha);if(Ja!==THREE.DoubleSide){if(Ja===THREE.FrontSide&&!1===ka)continue;if(Ja===THREE.BackSide&&
!0===ka)continue}s=b();s.id=K.id;s.v1.copy(pa);s.v2.copy(ja);s.v3.copy(Ha);s.normalModel.copy(ha.normal);!1!==ka||Ja!==THREE.BackSide&&Ja!==THREE.DoubleSide||s.normalModel.negate();s.normalModel.applyMatrix3(ba).normalize();ma=ha.vertexNormals;ca=0;for(na=Math.min(ma.length,3);ca<na;ca++)la=s.vertexNormalsModel[ca],la.copy(ma[ca]),!1!==ka||Ja!==THREE.BackSide&&Ja!==THREE.DoubleSide||la.negate(),la.applyMatrix3(ba).normalize();s.vertexNormalsLength=ma.length;Ja=M[I];if(void 0!==Ja)for(ka=0;3>ka;ka++)s.uvs[ka].copy(Ja[ka]);
s.color=ha.color;s.material=Oa;s.z=(pa.positionScreen.z+ja.positionScreen.z+Ha.positionScreen.z)/3;Q.elements.push(s)}}}}}else if(K instanceof THREE.Line)if(v instanceof THREE.BufferGeometry){if(M=v.attributes,void 0!==M.position){A=M.position.array;v=0;for(C=A.length;v<C;v+=3)da.pushVertex(A[v],A[v+1],A[v+2]);if(void 0!==M.index)for(M=M.index.array,v=0,C=M.length;v<C;v+=2)da.pushLine(M[v],M[v+1]);else for(M=K.type===THREE.LinePieces?2:1,v=0,C=A.length/3-1;v<C;v+=M)da.pushLine(v,v+1)}}else{if(v instanceof
THREE.Geometry&&(O.multiplyMatrices(U,X),I=K.geometry.vertices,0!==I.length))for(pa=a(),pa.positionScreen.copy(I[0]).applyMatrix4(O),M=K.type===THREE.LinePieces?2:1,sa=1,ha=I.length;sa<ha;sa++)pa=a(),pa.positionScreen.copy(I[sa]).applyMatrix4(O),0<(sa+1)%M||(ja=q[n-2],V.copy(pa.positionScreen),W.copy(ja.positionScreen),!0===g(V,W)&&(V.multiplyScalar(1/V.w),W.multiplyScalar(1/W.w),B=c(),B.id=K.id,B.v1.positionScreen.copy(V),B.v2.positionScreen.copy(W),B.z=Math.max(V.z,W.z),B.material=K.material,K.material.vertexColors===
THREE.VertexColors&&(B.vertexColors[0].copy(K.geometry.colors[sa]),B.vertexColors[1].copy(K.geometry.colors[sa-1])),Q.elements.push(B)))}else K instanceof THREE.Sprite&&(J.set(X.elements[12],X.elements[13],X.elements[14],1),J.applyMatrix4(U),v=1/J.w,J.z*=v,-1<=J.z&&1>=J.z&&(G=f(),G.id=K.id,G.x=J.x*v,G.y=J.y*v,G.z=J.z,G.object=K,G.rotation=K.rotation,G.scale.x=K.scale.x*Math.abs(G.x-(J.x+r.projectionMatrix.elements[0])/(J.w+r.projectionMatrix.elements[12])),G.scale.y=K.scale.y*Math.abs(G.y-(J.y+r.projectionMatrix.elements[5])/
(J.w+r.projectionMatrix.elements[13])),G.material=K.material,Q.elements.push(G)))}!0===w&&Q.elements.sort(d);return Q}};THREE.Face3=function(a,b,c,f,d,g){this.a=a;this.b=b;this.c=c;this.normal=f instanceof THREE.Vector3?f:new THREE.Vector3;this.vertexNormals=f instanceof Array?f:[];this.color=d instanceof THREE.Color?d:new THREE.Color;this.vertexColors=d instanceof Array?d:[];this.vertexTangents=[];this.materialIndex=void 0!==g?g:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.materialIndex=this.materialIndex;for(var b=0,c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();return a}};
THREE.Face4=function(a,b,c,f,d,g,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,d,g,h)};THREE.BufferAttribute=function(a,b){this.array=a;this.itemSize=b};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},set:function(a){this.array.set(a);return this},setX:function(a,b){this.array[a*this.itemSize]=b;return this},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,f){a*=this.itemSize;this.array[a]=b;this.array[a+1]=
c;this.array[a+2]=f;return this},setXYZW:function(a,b,c,f,d){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;this.array[a+2]=f;this.array[a+3]=d;return this}};THREE.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int32Attribute=function(a,b){console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.attributes={};this.offsets=this.drawcalls=[];this.boundingSphere=this.boundingBox=null};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c){!1===b instanceof THREE.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[a]={array:b,itemSize:c}):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addDrawCall:function(a,b,c){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0})},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),
b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0)},fromGeometry:function(a,b){b=b||{vertexColors:THREE.NoColors};var c=a.vertices,f=a.faces,d=a.faceVertexUvs,g=b.vertexColors,h=0<d[0].length,k=3==f[0].vertexNormals.length,l=new Float32Array(9*f.length);this.addAttribute("position",new THREE.BufferAttribute(l,3));var m=new Float32Array(9*f.length);this.addAttribute("normal",new THREE.BufferAttribute(m,3));if(g!==
THREE.NoColors){var p=new Float32Array(9*f.length);this.addAttribute("color",new THREE.BufferAttribute(p,3))}if(!0===h){var n=new Float32Array(6*f.length);this.addAttribute("uvs",new THREE.BufferAttribute(n,2))}for(var q=0,r=0,s=0;q<f.length;q++,r+=6,s+=9){var u=f[q],w=c[u.a],v=c[u.b],B=c[u.c];l[s]=w.x;l[s+1]=w.y;l[s+2]=w.z;l[s+3]=v.x;l[s+4]=v.y;l[s+5]=v.z;l[s+6]=B.x;l[s+7]=B.y;l[s+8]=B.z;!0===k?(w=u.vertexNormals[0],v=u.vertexNormals[1],B=u.vertexNormals[2],m[s]=w.x,m[s+1]=w.y,m[s+2]=w.z,m[s+3]=
v.x,m[s+4]=v.y,m[s+5]=v.z,m[s+6]=B.x,m[s+7]=B.y,m[s+8]=B.z):(w=u.normal,m[s]=w.x,m[s+1]=w.y,m[s+2]=w.z,m[s+3]=w.x,m[s+4]=w.y,m[s+5]=w.z,m[s+6]=w.x,m[s+7]=w.y,m[s+8]=w.z);g===THREE.FaceColors?(u=u.color,p[s]=u.r,p[s+1]=u.g,p[s+2]=u.b,p[s+3]=u.r,p[s+4]=u.g,p[s+5]=u.b,p[s+6]=u.r,p[s+7]=u.g,p[s+8]=u.b):g===THREE.VertexColors&&(w=u.vertexColors[0],v=u.vertexColors[1],u=u.vertexColors[2],p[s]=w.r,p[s+1]=w.g,p[s+2]=w.b,p[s+3]=v.r,p[s+4]=v.g,p[s+5]=v.b,p[s+6]=u.r,p[s+7]=u.g,p[s+8]=u.b);!0===h&&(u=d[0][q][0],
w=d[0][q][1],v=d[0][q][2],n[r]=u.x,n[r+1]=u.y,n[r+2]=w.x,n[r+3]=w.y,n[r+4]=v.x,n[r+5]=v.y)}this.computeBoundingSphere();return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var c=3,f=a.length;c<f;c+=3){var d=a[c],g=a[c+1],h=a[c+2];d<b.min.x?b.min.x=d:d>b.max.x&&(b.max.x=d);g<b.min.y?b.min.y=g:g>b.max.y&&
(b.max.y=g);h<b.min.z?b.min.z=h:h>b.max.z&&(b.max.z=h)}}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&
(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var f=this.boundingSphere.center,d=0,g=c.length;d<g;d+=3)b.set(c[d],c[d+1],c[d+2]),a.expandByPoint(b);a.center(f);for(var h=0,d=0,g=c.length;d<g;d+=3)b.set(c[d],c[d+1],c[d+2]),h=Math.max(h,f.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(h);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),
computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var a,b,c,f;a=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else for(a=0,b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0;var d=this.attributes.position.array,g=this.attributes.normal.array,h,k,l,m,p,n,q=new THREE.Vector3,r=new THREE.Vector3,s=new THREE.Vector3,u=new THREE.Vector3,w=new THREE.Vector3;
if(this.attributes.index){var v=this.attributes.index.array,B=0<this.offsets.length?this.offsets:[{start:0,count:v.length,index:0}];c=0;for(f=B.length;c<f;++c){b=B[c].start;h=B[c].count;var z=B[c].index;a=b;for(b+=h;a<b;a+=3)h=z+v[a],k=z+v[a+1],l=z+v[a+2],m=d[3*h],p=d[3*h+1],n=d[3*h+2],q.set(m,p,n),m=d[3*k],p=d[3*k+1],n=d[3*k+2],r.set(m,p,n),m=d[3*l],p=d[3*l+1],n=d[3*l+2],s.set(m,p,n),u.subVectors(s,r),w.subVectors(q,r),u.cross(w),g[3*h]+=u.x,g[3*h+1]+=u.y,g[3*h+2]+=u.z,g[3*k]+=u.x,g[3*k+1]+=u.y,
g[3*k+2]+=u.z,g[3*l]+=u.x,g[3*l+1]+=u.y,g[3*l+2]+=u.z}}else for(a=0,b=d.length;a<b;a+=9)m=d[a],p=d[a+1],n=d[a+2],q.set(m,p,n),m=d[a+3],p=d[a+4],n=d[a+5],r.set(m,p,n),m=d[a+6],p=d[a+7],n=d[a+8],s.set(m,p,n),u.subVectors(s,r),w.subVectors(q,r),u.cross(w),g[a]=u.x,g[a+1]=u.y,g[a+2]=u.z,g[a+3]=u.x,g[a+4]=u.y,g[a+5]=u.z,g[a+6]=u.x,g[a+7]=u.y,g[a+8]=u.z;this.normalizeNormals();this.normalsNeedUpdate=!0}},computeTangents:function(){function a(a,b,h){n=f[3*a];q=f[3*a+1];r=f[3*a+2];s=f[3*b];u=f[3*b+1];w=f[3*
b+2];v=f[3*h];B=f[3*h+1];z=f[3*h+2];A=g[2*a];C=g[2*a+1];G=g[2*b];E=g[2*b+1];I=g[2*h];H=g[2*h+1];Q=s-n;N=v-n;F=u-q;D=B-q;S=w-r;J=z-r;Z=G-A;K=I-A;M=E-C;ea=H-C;U=1/(Z*ea-K*M);X.set((ea*Q-M*N)*U,(ea*F-M*D)*U,(ea*S-M*J)*U);O.set((Z*N-K*Q)*U,(Z*D-K*F)*U,(Z*J-K*S)*U);l[a].add(X);l[b].add(X);l[h].add(X);m[a].add(O);m[b].add(O);m[h].add(O)}function b(a){za.x=d[3*a];za.y=d[3*a+1];za.z=d[3*a+2];Ca.copy(za);Y=l[a];ya.copy(Y);ya.sub(za.multiplyScalar(za.dot(Y))).normalize();ua.crossVectors(Ca,Y);Fa=ua.dot(m[a]);
Ga=0>Fa?-1:1;k[4*a]=ya.x;k[4*a+1]=ya.y;k[4*a+2]=ya.z;k[4*a+3]=Ga}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var c=this.attributes.index.array,f=this.attributes.position.array,d=this.attributes.normal.array,g=this.attributes.uv.array,h=f.length/3;void 0===this.attributes.tangent&&(this.attributes.tangent=
{itemSize:4,array:new Float32Array(4*h)});for(var k=this.attributes.tangent.array,l=[],m=[],p=0;p<h;p++)l[p]=new THREE.Vector3,m[p]=new THREE.Vector3;var n,q,r,s,u,w,v,B,z,A,C,G,E,I,H,Q,N,F,D,S,J,Z,K,M,ea,U,X=new THREE.Vector3,O=new THREE.Vector3,ba,R,V,W,da,ga=this.offsets,p=0;for(R=ga.length;p<R;++p){ba=ga[p].start;V=ga[p].count;var ia=ga[p].index,h=ba;for(ba+=V;h<ba;h+=3)V=ia+c[h],W=ia+c[h+1],da=ia+c[h+2],a(V,W,da)}var ya=new THREE.Vector3,ua=new THREE.Vector3,za=new THREE.Vector3,Ca=new THREE.Vector3,
Ga,Y,Fa,p=0;for(R=ga.length;p<R;++p)for(ba=ga[p].start,V=ga[p].count,ia=ga[p].index,h=ba,ba+=V;h<ba;h+=3)V=ia+c[h],W=ia+c[h+1],da=ia+c[h+2],b(V),b(W),b(da)}},computeOffsets:function(a){var b=a;void 0===a&&(b=65535);Date.now();a=this.attributes.index.array;for(var c=this.attributes.position.array,f=a.length/3,d=new Uint16Array(a.length),g=0,h=0,k=[{start:0,count:0,index:0}],l=k[0],m=0,p=0,n=new Int32Array(6),q=new Int32Array(c.length),r=new Int32Array(c.length),s=0;s<c.length;s++)q[s]=-1,r[s]=-1;for(c=
0;c<f;c++){for(var u=p=0;3>u;u++)s=a[3*c+u],-1==q[s]?(n[2*u]=s,n[2*u+1]=-1,p++):q[s]<l.index?(n[2*u]=s,n[2*u+1]=-1,m++):(n[2*u]=s,n[2*u+1]=q[s]);if(h+p>l.index+b)for(l={start:g,count:0,index:h},k.push(l),p=0;6>p;p+=2)u=n[p+1],-1<u&&u<l.index&&(n[p+1]=-1);for(p=0;6>p;p+=2)s=n[p],u=n[p+1],-1===u&&(u=h++),q[s]=u,r[u]=s,d[g++]=u-l.index,l.count++}this.reorderBuffers(d,r,h);return this.offsets=k},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var a=this.attributes.normal.array,
b,c,f,d=0,g=a.length;d<g;d+=3)b=a[d],c=a[d+1],f=a[d+2],b=1/Math.sqrt(b*b+c*c+f*f),a[d]*=b,a[d+1]*=b,a[d+2]*=b},reorderBuffers:function(a,b,c){var f={},d=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],g;for(g in this.attributes)if("index"!=g)for(var h=this.attributes[g].array,k=0,l=d.length;k<l;k++){var m=d[k];if(h instanceof m){f[g]=new m(this.attributes[g].itemSize*c);break}}for(d=0;d<c;d++)for(g in h=b[d],this.attributes)if("index"!=
g)for(var k=this.attributes[g].array,l=this.attributes[g].itemSize,m=f[g],p=0;p<l;p++)m[d*l+p]=k[h*l+p];this.attributes.index.array=a;for(g in this.attributes)"index"!=g&&(this.attributes[g].array=f[g],this.attributes[g].numItems=this.attributes[g].itemSize*c)},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var f=this.attributes[c],d=f.array,g={itemSize:f.itemSize,
array:null},f=0,h=b.length;f<h;f++){var k=b[f];if(d instanceof k){g.array=new k(d);break}}a.attributes[c]=g}f=0;for(h=this.offsets.length;f<h;f++)b=this.offsets[f],a.offsets.push({start:b.start,index:b.index,count:b.count});return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);
THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.groupsNeedUpdate=this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=
this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,f=this.vertices.length;c<f;c++)this.vertices[c].applyMatrix4(a);c=0;for(f=this.faces.length;c<f;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var d=0,g=a.vertexNormals.length;d<g;d++)a.vertexNormals[d].applyMatrix3(b).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},
center:function(){this.computeBoundingBox();var a=new THREE.Vector3;a.addVectors(this.boundingBox.min,this.boundingBox.max);a.multiplyScalar(-0.5);this.applyMatrix((new THREE.Matrix4).makeTranslation(a.x,a.y,a.z));this.computeBoundingBox();return a},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,f=this.faces.length;c<f;c++){var d=this.faces[c],g=this.vertices[d.a],h=this.vertices[d.b];a.subVectors(this.vertices[d.c],h);b.subVectors(g,h);a.cross(b);a.normalize();
d.normal.copy(a)}},computeVertexNormals:function(a){var b,c,f;f=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)f[b]=new THREE.Vector3;if(a){var d,g,h,k=new THREE.Vector3,l=new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],d=this.vertices[c.a],g=this.vertices[c.b],h=this.vertices[c.c],k.subVectors(h,g),l.subVectors(d,g),k.cross(l),f[c.a].add(k),f[c.b].add(k),f[c.c].add(k)}else for(a=0,b=this.faces.length;a<
b;a++)c=this.faces[a],f[c.a].add(c.normal),f[c.b].add(c.normal),f[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)f[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.vertexNormals[0]=f[c.a].clone(),c.vertexNormals[1]=f[c.b].clone(),c.vertexNormals[2]=f[c.c].clone()},computeMorphNormals:function(){var a,b,c,f,d;c=0;for(f=this.faces.length;c<f;c++)for(d=this.faces[c],d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone(),d.__originalVertexNormals||
(d.__originalVertexNormals=[]),a=0,b=d.vertexNormals.length;a<b;a++)d.__originalVertexNormals[a]?d.__originalVertexNormals[a].copy(d.vertexNormals[a]):d.__originalVertexNormals[a]=d.vertexNormals[a].clone();var g=new THREE.Geometry;g.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];d=this.morphNormals[a].faceNormals;var h=this.morphNormals[a].vertexNormals,k,l;c=
0;for(f=this.faces.length;c<f;c++)k=new THREE.Vector3,l={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},d.push(k),h.push(l)}h=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;g.computeFaceNormals();g.computeVertexNormals();c=0;for(f=this.faces.length;c<f;c++)d=this.faces[c],k=h.faceNormals[c],l=h.vertexNormals[c],k.copy(d.normal),l.a.copy(d.vertexNormals[0]),l.b.copy(d.vertexNormals[1]),l.c.copy(d.vertexNormals[2])}c=0;for(f=this.faces.length;c<f;c++)d=this.faces[c],d.normal=
d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeTangents:function(){var a,b,c,f,d,g,h,k,l,m,p,n,q,r,s,u,w,v=[],B=[];c=new THREE.Vector3;var z=new THREE.Vector3,A=new THREE.Vector3,C=new THREE.Vector3,G=new THREE.Vector3;a=0;for(b=this.vertices.length;a<b;a++)v[a]=new THREE.Vector3,B[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)d=this.faces[a],g=this.faceVertexUvs[0][a],f=d.a,w=d.b,d=d.c,h=this.vertices[f],k=this.vertices[w],l=this.vertices[d],m=g[0],p=g[1],n=g[2],
g=k.x-h.x,q=l.x-h.x,r=k.y-h.y,s=l.y-h.y,k=k.z-h.z,h=l.z-h.z,l=p.x-m.x,u=n.x-m.x,p=p.y-m.y,m=n.y-m.y,n=1/(l*m-u*p),c.set((m*g-p*q)*n,(m*r-p*s)*n,(m*k-p*h)*n),z.set((l*q-u*g)*n,(l*s-u*r)*n,(l*h-u*k)*n),v[f].add(c),v[w].add(c),v[d].add(c),B[f].add(z),B[w].add(z),B[d].add(z);z=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++)for(d=this.faces[a],c=0;c<Math.min(d.vertexNormals.length,3);c++)G.copy(d.vertexNormals[c]),f=d[z[c]],w=v[f],A.copy(w),A.sub(G.multiplyScalar(G.dot(w))).normalize(),C.crossVectors(d.vertexNormals[c],
w),f=C.dot(B[f]),f=0>f?-1:1,d.vertexTangents[c]=new THREE.Vector4(A.x,A.y,A.z,f);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,f=b.length;c<f;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},
merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var f,d=this.vertices.length,g=this.vertices,h=a.vertices,k=this.faces,l=a.faces,m=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(f=(new THREE.Matrix3).getNormalMatrix(b));for(var p=0,n=h.length;p<n;p++){var q=h[p].clone();void 0!==b&&q.applyMatrix4(b);g.push(q)}p=0;for(n=l.length;p<n;p++){var h=l[p],r,s=h.vertexNormals,u=
h.vertexColors,q=new THREE.Face3(h.a+d,h.b+d,h.c+d);q.normal.copy(h.normal);void 0!==f&&q.normal.applyMatrix3(f).normalize();b=0;for(g=s.length;b<g;b++)r=s[b].clone(),void 0!==f&&r.applyMatrix3(f).normalize(),q.vertexNormals.push(r);q.color.copy(h.color);b=0;for(g=u.length;b<g;b++)r=u[b],q.vertexColors.push(r.clone());q.materialIndex=h.materialIndex+c;k.push(q)}p=0;for(n=a.length;p<n;p++)if(c=a[p],f=[],void 0!==c){b=0;for(g=c.length;b<g;b++)f.push(new THREE.Vector2(c[b].x,c[b].y));m.push(f)}}},mergeVertices:function(){var a=
{},b=[],c=[],f,d=Math.pow(10,4),g,h;g=0;for(h=this.vertices.length;g<h;g++)f=this.vertices[g],f=Math.round(f.x*d)+"_"+Math.round(f.y*d)+"_"+Math.round(f.z*d),void 0===a[f]?(a[f]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[f]];a=[];g=0;for(h=this.faces.length;g<h;g++)for(d=this.faces[g],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],f=0;3>f;f++)if(d[f]==d[(f+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(d=a[g],this.faces.splice(d,1),c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(d,
1);g=this.vertices.length-b.length;this.vertices=b;return g},makeGroups:function(){var a=0;return function(b,c){var f,d,g,h,k={},l,m=this.morphTargets.length,p=this.morphNormals.length;this.geometryGroups={};this.geometryGroupsList=[];f=0;for(d=this.faces.length;f<d;f++)g=this.faces[f],g=b?g.materialIndex:0,g in k||(k[g]={hash:g,counter:0}),h=k[g].hash+"_"+k[g].counter,h in this.geometryGroups||(l={id:a++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:m,numMorphNormals:p},this.geometryGroups[h]=
l,this.geometryGroupsList.push(l)),this.geometryGroups[h].vertices+3>c&&(k[g].counter+=1,h=k[g].hash+"_"+k[g].counter,h in this.geometryGroups||(l={id:a++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:m,numMorphNormals:p},this.geometryGroups[h]=l,this.geometryGroupsList.push(l))),this.geometryGroups[h].faces3.push(f),this.geometryGroups[h].vertices+=3}}(),clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,f=b.length;c<f;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(f=
b.length;c<f;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(f=b.length;c<f;c++){for(var d=b[c],g=[],h=0,k=d.length;h<k;h++)g.push(new THREE.Vector2(d[h].x,d[h].y));a.faceVertexUvs[0].push(g)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};
THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);return a};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,-1,0);f.lookAt(new THREE.Vector3(1,0,0));this.add(f);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(-1,0,0));this.add(d);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new THREE.Vector3(0,1,0));this.add(g);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new THREE.Vector3(0,-1,0));this.add(h);var k=new THREE.PerspectiveCamera(90,
1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,1));this.add(k);var l=new THREE.PerspectiveCamera(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new THREE.Vector3(0,0,-1));this.add(l);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,q=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,f,c);c.activeCubeFace=1;a.render(b,d,c);c.activeCubeFace=
2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,h,c);c.activeCubeFace=4;a.render(b,k,c);c.generateMipmaps=q;c.activeCubeFace=5;a.render(b,l,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.OrthographicCamera=function(a,b,c,f,d,g){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=f;this.near=void 0!==d?d:0.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};
THREE.PerspectiveCamera=function(a,b,c,f){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:0.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,f,d,g){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=f;this.width=d;this.height=g;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(0.5*this.fov))*this.near,c=-b,f=a*c,a=Math.abs(a*b-f),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(f+this.x*a/this.fullWidth,f+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};
THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};
THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=0.5;this.quadraticAttenuation=0.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraLeft=this.shadowCameraLeft;a.shadowCameraRight=this.shadowCameraRight;a.shadowCameraTop=this.shadowCameraTop;a.shadowCameraBottom=this.shadowCameraBottom;a.shadowCameraVisible=
this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;a.shadowCascade=this.shadowCascade;a.shadowCascadeOffset.copy(this.shadowCascadeOffset);a.shadowCascadeCount=this.shadowCascadeCount;a.shadowCascadeBias=this.shadowCascadeBias.slice(0);a.shadowCascadeWidth=this.shadowCascadeWidth.slice(0);a.shadowCascadeHeight=this.shadowCascadeHeight.slice(0);a.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0);
a.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0);return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};
THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};
THREE.SpotLight=function(a,b,c,f,d){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==f?f:Math.PI/3;this.exponent=void 0!==d?d:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);
THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraFov=this.shadowCameraFov;a.shadowCameraVisible=this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=
this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;return a};THREE.Cache=function(){this.files={}};THREE.Cache.prototype={constructor:THREE.Cache,add:function(a,b){this.files[a]=b},get:function(a){return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.imageLoader=new THREE.ImageLoader;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+
"%"):b+((a.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b){for(var c=[],f=0;f<a.length;++f)c[f]=this.createMaterial(a[f],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function f(a,
h,d,k,f,l,u){var w=b+d,v,B=THREE.Loader.Handlers.get(w);null!==B?v=B.load(w):(v=new THREE.Texture,B=g.imageLoader,B.crossOrigin=g.crossOrigin,B.load(w,function(a){if(!1===THREE.Math.isPowerOfTwo(a.width)||!1===THREE.Math.isPowerOfTwo(a.height)){var b=c(a.width),h=c(a.height),d=document.createElement("canvas");d.width=b;d.height=h;d.getContext("2d").drawImage(a,0,0,b,h);v.image=d}else v.image=a;v.needsUpdate=!0}));v.sourceFile=d;k&&(v.repeat.set(k[0],k[1]),1!==k[0]&&(v.wrapS=THREE.RepeatWrapping),
1!==k[1]&&(v.wrapT=THREE.RepeatWrapping));f&&v.offset.set(f[0],f[1]);l&&(d={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==d[l[0]]&&(v.wrapS=d[l[0]]),void 0!==d[l[1]]&&(v.wrapT=d[l[1]]));u&&(v.anisotropy=u);a[h]=v}function d(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var g=this,h="MeshLambertMaterial",k={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var l=a.shading.toLowerCase();"phong"===l?h="MeshPhongMaterial":
"basic"===l&&(h="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(k.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)k.transparent=a.transparent;void 0!==a.depthTest&&(k.depthTest=a.depthTest);void 0!==a.depthWrite&&(k.depthWrite=a.depthWrite);void 0!==a.visible&&(k.visible=a.visible);void 0!==a.flipSided&&(k.side=THREE.BackSide);void 0!==a.doubleSided&&(k.side=THREE.DoubleSide);void 0!==a.wireframe&&(k.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===
a.vertexColors?k.vertexColors=THREE.FaceColors:a.vertexColors&&(k.vertexColors=THREE.VertexColors));a.colorDiffuse?k.color=d(a.colorDiffuse):a.DbgColor&&(k.color=a.DbgColor);a.colorSpecular&&(k.specular=d(a.colorSpecular));a.colorAmbient&&(k.ambient=d(a.colorAmbient));a.colorEmissive&&(k.emissive=d(a.colorEmissive));a.transparency&&(k.opacity=a.transparency);a.specularCoef&&(k.shininess=a.specularCoef);a.mapDiffuse&&b&&f(k,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,
a.mapDiffuseAnisotropy);a.mapLight&&b&&f(k,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&f(k,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&f(k,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&f(k,"specularMap",a.mapSpecular,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapAlpha&&
b&&f(k,"alphaMap",a.mapAlpha,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);a.mapBumpScale&&(k.bumpScale=a.mapBumpScale);a.mapNormal?(h=THREE.ShaderLib.normalmap,l=THREE.UniformsUtils.clone(h.uniforms),l.tNormal.value=k.normalMap,a.mapNormalFactor&&l.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),k.map&&(l.tDiffuse.value=k.map,l.enableDiffuse.value=!0),k.specularMap&&(l.tSpecular.value=k.specularMap,l.enableSpecular.value=!0),k.lightMap&&(l.tAO.value=k.lightMap,
l.enableAO.value=!0),l.diffuse.value.setHex(k.color),l.specular.value.setHex(k.specular),l.ambient.value.setHex(k.ambient),l.shininess.value=k.shininess,void 0!==k.opacity&&(l.opacity.value=k.opacity),h=new THREE.ShaderMaterial({fragmentShader:h.fragmentShader,vertexShader:h.vertexShader,uniforms:l,lights:!0,fog:!0}),k.transparent&&(h.transparent=!0)):h=new THREE[h](k);void 0!==a.DbgName&&(h.name=a.DbgName);return h}};
THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=0,c=this.handlers.length;b<c;b+=2){var f=this.handlers[b+1];if(this.handlers[b].test(a))return f}return null}};THREE.XHRLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,f){var d=this,g=d.cache.get(a);void 0!==g?b&&b(g):(g=new XMLHttpRequest,g.open("GET",a,!0),g.addEventListener("load",function(h){d.cache.add(a,this.response);b&&b(this.response);d.manager.itemEnd(a)},!1),void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1),void 0!==f&&g.addEventListener("error",function(a){f(a)},!1),void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(g.responseType=
this.responseType),g.send(null),d.manager.itemStart(a))},setResponseType:function(a){this.responseType=a},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.ImageLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,f){var d=this,g=d.cache.get(a);if(void 0!==g)b(g);else return g=document.createElement("img"),void 0!==b&&g.addEventListener("load",function(h){d.cache.add(a,this);b(this);d.manager.itemEnd(a)},!1),void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1),void 0!==f&&g.addEventListener("error",function(a){f(a)},!1),void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),g.src=a,d.manager.itemStart(a),g},setCrossOrigin:function(a){this.crossOrigin=
a}};THREE.LoadingManager=function(a,b,c){var f=this,d=0,g=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++};this.itemEnd=function(a){d++;if(void 0!==f.onProgress)f.onProgress(a,d,g);if(d===g&&void 0!==f.onLoad)f.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,f){var d=new THREE.ImageLoader(this.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)},c,f)},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var f=this[b];f instanceof THREE.Color?f.set(c):f instanceof THREE.Vector3&&c instanceof THREE.Vector3?f.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};
THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;
a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;
a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.wrapAround=this.metal=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=
1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.defines={};this.uniforms={};this.attributes=null;this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=
!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.setValues(a)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a)};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.clone=function(){var a=new THREE.RawShaderMaterial;THREE.ShaderMaterial.prototype.clone.call(this,a);return a};
THREE.Texture=function(a,b,c,f,d,g,h,k,l){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==f?f:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==d?d:THREE.LinearFilter;this.minFilter=void 0!==g?g:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==l?l:1;this.format=void 0!==
h?h:THREE.RGBAFormat;this.type=void 0!==k?k:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this._needsUpdate=!1;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=
this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CubeTexture=function(a,b,c,f,d,g,h,k,l){THREE.Texture.call(this,a,b,c,f,d,g,h,k,l);this.images=a};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.clone=function(a){void 0===a&&(a=new THREE.CubeTexture);THREE.Texture.prototype.clone.call(this,a);a.images=this.images;return a};THREE.CompressedTexture=function(a,b,c,f,d,g,h,k,l,m,p){THREE.Texture.call(this,null,g,h,k,l,m,f,d,p);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,f,d,g,h,k,l,m,p){THREE.Texture.call(this,null,g,h,k,l,m,f,d,p);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};
THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);
THREE.Line.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(f,d){var g=f.linePrecision,g=g*g,h=this.geometry;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==f.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(f.ray).applyMatrix4(a),h instanceof THREE.Geometry))for(var h=h.vertices,k=h.length,l=new THREE.Vector3,m=new THREE.Vector3,p=this.type===THREE.LineStrip?
1:2,n=0;n<k-1;n+=p)if(!(b.distanceSqToSegment(h[n],h[n+1],m,l)>g)){var q=b.origin.distanceTo(m);q<f.near||q>f.far||d.push({distance:q,point:l.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}();THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};
THREE.Mesh=function(a,b,c){THREE.Object3D.call(this,c);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere,f=new THREE.Vector3,d=new THREE.Vector3,g=new THREE.Vector3;return function(h,k){var l=this.geometry;null===l.boundingSphere&&l.computeBoundingSphere();c.copy(l.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==h.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(h.ray).applyMatrix4(a),null===l.boundingBox||!1!==b.isIntersectionBox(l.boundingBox)))if(l instanceof THREE.BufferGeometry){var m=
this.material;if(void 0!==m){var p=l.attributes,n,q,r=h.precision;if(void 0!==p.index){var s=p.index.array,u=l.vb?l.vb:p.position.array,w=l.vb?l.vbstride:3;(l=l.offsets)&&0!==l.length||(l=[{start:0,count:s.length,index:0}]);for(var v=0,B=l.length;v<B;++v)for(var p=l[v].start,z=l[v].index,A=p,C=p+l[v].count;A<C;A+=3){p=z+s[A];n=z+s[A+1];q=z+s[A+2];f.set(u[p*w],u[p*w+1],u[p*w+2]);d.set(u[n*w],u[n*w+1],u[n*w+2]);g.set(u[q*w],u[q*w+1],u[q*w+2]);var G=m.side===THREE.BackSide?b.intersectTriangle(g,d,f,
!0):b.intersectTriangle(f,d,g,m.side!==THREE.DoubleSide);if(null!==G){G.applyMatrix4(this.matrixWorld);var E=h.ray.origin.distanceTo(G);E<r||E<h.near||E>h.far||k.push({distance:E,point:G,indices:[p,n,q],face:null,faceIndex:null,object:this})}}}else for(u=l.vb?l.vb:p.position.array,w=l.vb?l.vbstride:3,A=0,C=u.length;A<C;A+=3)p=A,n=A+1,q=A+2,f.set(u[p*w],u[p*w+1],u[p*w+2]),d.set(u[n*w],u[n*w+1],u[n*w+2]),g.set(u[q*w],u[q*w+1],u[q*w+2]),G=m.side===THREE.BackSide?b.intersectTriangle(g,d,f,!0):b.intersectTriangle(f,
d,g,m.side!==THREE.DoubleSide),null!==G&&(G.applyMatrix4(this.matrixWorld),E=h.ray.origin.distanceTo(G),E<r||E<h.near||E>h.far||k.push({distance:E,point:G,indices:[p,n,q],face:null,faceIndex:null,object:this}))}}else if(l instanceof THREE.Geometry)for(s=this.material instanceof THREE.MeshFaceMaterial,u=!0===s?this.material.materials:null,r=h.precision,w=l.vertices,v=0,B=l.faces.length;v<B;v++)if(z=l.faces[v],m=!0===s?u[z.materialIndex]:this.material,void 0!==m){p=w[z.a];n=w[z.b];q=w[z.c];if(!0===
m.morphTargets){G=l.morphTargets;E=this.morphTargetInfluences;f.set(0,0,0);d.set(0,0,0);g.set(0,0,0);A=0;for(C=G.length;A<C;A++){var I=E[A];if(0!==I){var H=G[A].vertices;f.x+=(H[z.a].x-p.x)*I;f.y+=(H[z.a].y-p.y)*I;f.z+=(H[z.a].z-p.z)*I;d.x+=(H[z.b].x-n.x)*I;d.y+=(H[z.b].y-n.y)*I;d.z+=(H[z.b].z-n.z)*I;g.x+=(H[z.c].x-q.x)*I;g.y+=(H[z.c].y-q.y)*I;g.z+=(H[z.c].z-q.z)*I}}f.add(p);d.add(n);g.add(q);p=f;n=d;q=g}G=m.side===THREE.BackSide?b.intersectTriangle(q,n,p,!0):b.intersectTriangle(p,n,q,m.side!==THREE.DoubleSide);
null!==G&&(G.applyMatrix4(this.matrixWorld),E=h.ray.origin.distanceTo(G),E<r||E<h.near||E>h.far||k.push({distance:E,point:G,face:z,faceIndex:v,object:this}))}}}();THREE.Mesh.prototype.clone=function(a,b){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a,b);return a};
THREE.Scene=function(a){THREE.Object3D.call(this,a);this.children||(this.children=[]);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}this.dispatchEvent({type:"objectAdded",object:a});a.dispatchEvent({type:"addedToScene",scene:this});if(a.children)for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));this.dispatchEvent({type:"objectRemoved",object:a});a.dispatchEvent({type:"removedFromScene",scene:this});if(a.children)for(b=
0;b<a.children.length;b++)this.__removeObject(a.children[b])};THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n";THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif";
THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n\tmvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;";
THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif";
THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\tuniform samplerCube envMap;\n\tuniform float flipEnvMap;\n\tuniform int combine;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tuniform bool useRefract;\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";
THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif";THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif";
THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\tuniform bool useRefract;\n\n#endif\n";
THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n";
THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\tvec3 reflectVec;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\tif ( useRefract ) {\n\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t} else { \n\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t}\n\n\t#else\n\n\t\treflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tcubeColor.xyz *= cubeColor.xyz;\n\n\t#endif\n\n\tif ( combine == 1 ) {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n\t} else if ( combine == 2 ) {\n\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n\t} else {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n\t}\n\n#endif";
THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif";
THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n\tobjectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n\tobjectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n\tobjectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;";
THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;";
THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif";THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";
THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif";THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tif ( useRefract ) {\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t} else {\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t}\n\n#endif";
THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#endif\n\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#endif\n\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif";
THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";
THREE.UniformsUtils={merge:function(a){var b,c,f,d={};for(b=0;b<a.length;b++)for(c in f=this.clone(a[b]),f)d[c]=f[c];return d},clone:function(a){var b,c,f,d={};for(b in a)for(c in d[b]={},a[b])f=a[b][c],d[b][c]=f instanceof THREE.Color||f instanceof THREE.Vector2||f instanceof THREE.Vector3||f instanceof THREE.Vector4||f instanceof THREE.Matrix4||f instanceof THREE.Texture?f.clone():f instanceof Array?f.slice():f;return d}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:0.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",
value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},
hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},
opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,
THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,
THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,
{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,
THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,
THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\tgl_FragColor.xyz *= vLightFront;\n\t\telse\n\t\t\tgl_FragColor.xyz *= vLightBack;\n\t#else\n\t\tgl_FragColor.xyz *= vLightFront;\n\t#endif",
THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},
specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,
THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,
THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",
THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,
THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,
"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,
"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,
"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",
value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},
specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:0.98},reflectivity:{type:"f",value:0.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\n\tuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\n\tvec3 specularTex = vec3( 1.0 );\n\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\n\tnormalTex.xy *= uNormalScale;\n\tnormalTex = normalize( normalTex );\n\tif( enableDiffuse ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\n\t\t\ttexelColor.xyz *= texelColor.xyz;\n\t\t\tgl_FragColor = gl_FragColor * texelColor;\n\t\t#else\n\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n\t\t#endif\n\t}\n\tif( enableAO ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 aoColor = texture2D( tAO, vUv );\n\t\t\taoColor.xyz *= aoColor.xyz;\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n\t\t#else\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n\t\t#endif\n\t}",
THREE.ShaderChunk.alphatest_fragment,"\tif( enableSpecular )\n\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\n\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\n\tvec3 finalNormal = tsb * normalTex;\n\t#ifdef FLIP_SIDED\n\t\tfinalNormal = -finalNormal;\n\t#endif\n\tvec3 normal = normalize( finalNormal );\n\tvec3 viewPosition = normalize( vViewPosition );\n\t#if MAX_POINT_LIGHTS > 0\n\t\tvec3 pointDiffuse = vec3( 0.0 );\n\t\tvec3 pointSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat pointDistance = 1.0;\n\t\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\n\t\t\tpointVector = normalize( pointVector );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\n\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n\t\t\t#endif\n\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\n\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\n\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\tvec3 spotDiffuse = vec3( 0.0 );\n\t\tvec3 spotSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat spotDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\n\t\t\tspotVector = normalize( spotVector );\n\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\t\t\t\t#ifdef WRAP_AROUND\n\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\n\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\t\t\t\t#else\n\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t#endif\n\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\n\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\n\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n\t\t\t}\n\t\t}\n\t#endif\n\t#if MAX_DIR_LIGHTS > 0\n\t\tvec3 dirDiffuse = vec3( 0.0 );\n\t\tvec3 dirSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\t\tvec3 dirVector = normalize( lDirection.xyz );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\n\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n\t\t\t#endif\n\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\n\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\tvec3 hemiDiffuse = vec3( 0.0 );\n\t\tvec3 hemiSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\t\tvec3 lVector = normalize( lDirection.xyz );\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\t\t\themiDiffuse += diffuse * hemiColor;\n\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\t\t\tvec3 lVectorGround = -lVector;\n\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\t\t}\n\t#endif\n\tvec3 totalDiffuse = vec3( 0.0 );\n\tvec3 totalSpecular = vec3( 0.0 );\n\t#if MAX_DIR_LIGHTS > 0\n\t\ttotalDiffuse += dirDiffuse;\n\t\ttotalSpecular += dirSpecular;\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\ttotalDiffuse += hemiDiffuse;\n\t\ttotalSpecular += hemiSpecular;\n\t#endif\n\t#if MAX_POINT_LIGHTS > 0\n\t\ttotalDiffuse += pointDiffuse;\n\t\ttotalSpecular += pointSpecular;\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\ttotalDiffuse += spotDiffuse;\n\t\ttotalSpecular += spotSpecular;\n\t#endif\n\t#ifdef METAL\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\t#else\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\t#endif\n\tif ( enableReflection ) {\n\t\tvec3 vReflect;\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tif ( useRefract ) {\n\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\n\t\t} else {\n\t\t\tvReflect = reflect( cameraToVertex, normal );\n\t\t}\n\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n\t\t#ifdef GAMMA_INPUT\n\t\t\tcubeColor.xyz *= cubeColor.xyz;\n\t\t#endif\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n\t}",
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\n\tuniform sampler2D tDisplacement;\n\tuniform float uDisplacementScale;\n\tuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"\t#ifdef USE_SKINNING\n\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\n\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\n\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n\t#else\n\t\tvNormal = normalize( normalMatrix * normal );\n\t\tvTangent = normalize( normalMatrix * tangent.xyz );\n\t#endif\n\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\n\tvUv = uv * uRepeat + uOffset;\n\tvec3 displacedPosition;\n\t#ifdef VERTEX_TEXTURES\n\t\tif ( enableDisplacement ) {\n\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\n\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\n\t\t\tdisplacedPosition = position + normalize( normal ) * df;\n\t\t} else {\n\t\t\t#ifdef USE_SKINNING\n\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\t\tdisplacedPosition = skinned.xyz;\n\t\t\t#else\n\t\t\t\tdisplacedPosition = position;\n\t\t\t#endif\n\t\t}\n\t#else\n\t\t#ifdef USE_SKINNING\n\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\tdisplacedPosition = skinned.xyz;\n\t\t#else\n\t\t\tdisplacedPosition = position;\n\t\t#endif\n\t#endif\n\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\n\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.logdepthbuf_vertex,"\tvWorldPosition = worldPosition.xyz;\n\tvViewPosition = -mvPosition.xyz;\n\t#ifdef USE_SHADOWMAP\n\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\t\t}\n\t#endif\n}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",
THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}};
THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(a,b){this.width=a;this.height=b},clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;
a.shareDepthFrom=this.shareDepthFrom;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);
THREE.WebGLProgram=function(){var a=0;return function(b,c,f,d){var g=b.context,h=f.defines,k=f.__webglShader.uniforms,l=f.attributes,m=f.__webglShader.vertexShader,p=f.__webglShader.fragmentShader,n=f.index0AttributeName;void 0===n&&!0===d.morphTargets&&(n="position");var q="SHADOWMAP_TYPE_BASIC";d.shadowMapType===THREE.PCFShadowMap?q="SHADOWMAP_TYPE_PCF":d.shadowMapType===THREE.PCFSoftShadowMap&&(q="SHADOWMAP_TYPE_PCF_SOFT");var r,s;r=[];for(var u in h)s=h[u],!1!==s&&(s="#define "+u+" "+s,r.push(s));
r=r.join("\n");h=g.createProgram();f instanceof THREE.RawShaderMaterial?b=f="":(f=["precision "+d.precision+" float;","precision "+d.precision+" int;",r,d.supportsVertexTextures?"#define VERTEX_TEXTURES":"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+d.maxDirLights,"#define MAX_POINT_LIGHTS "+d.maxPointLights,"#define MAX_SPOT_LIGHTS "+d.maxSpotLights,"#define MAX_HEMI_LIGHTS "+d.maxHemiLights,"#define MAX_SHADOWS "+d.maxShadows,"#define MAX_BONES "+
d.maxBones,d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.lightMap?"#define USE_LIGHTMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?"#define USE_COLOR":"",d.skinning?"#define USE_SKINNING":"",d.useVertexTexture?"#define BONE_TEXTURE":"",d.morphTargets?"#define USE_MORPHTARGETS":"",d.morphNormals?"#define USE_MORPHNORMALS":"",d.wrapAround?"#define WRAP_AROUND":
"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+q:"",d.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",d.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",d.sizeAttenuation?"#define USE_SIZEATTENUATION":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n"].join("\n"),
b=["precision "+d.precision+" float;","precision "+d.precision+" int;",d.bumpMap||d.normalMap?"#extension GL_OES_standard_derivatives : enable":"",r,"#define MAX_DIR_LIGHTS "+d.maxDirLights,"#define MAX_POINT_LIGHTS "+d.maxPointLights,"#define MAX_SPOT_LIGHTS "+d.maxSpotLights,"#define MAX_HEMI_LIGHTS "+d.maxHemiLights,"#define MAX_SHADOWS "+d.maxShadows,d.alphaTest?"#define ALPHATEST "+d.alphaTest:"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"",d.useFog&&d.fog?"#define USE_FOG":
"",d.useFog&&d.fogExp?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.lightMap?"#define USE_LIGHTMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?"#define USE_COLOR":"",d.metal?"#define METAL":"",d.wrapAround?"#define WRAP_AROUND":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":
"",d.shadowMapEnabled?"#define "+q:"",d.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",d.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"));m=new THREE.WebGLShader(g,g.VERTEX_SHADER,f+m);p=new THREE.WebGLShader(g,g.FRAGMENT_SHADER,b+p);g.attachShader(h,m);g.attachShader(h,p);void 0!==n&&g.bindAttribLocation(h,0,n);g.linkProgram(h);!1===g.getProgramParameter(h,g.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),
console.error("gl.VALIDATE_STATUS",g.getProgramParameter(h,g.VALIDATE_STATUS)),console.error("gl.getError()",g.getError()));""!==g.getProgramInfoLog(h)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",g.getProgramInfoLog(h));g.deleteShader(m);g.deleteShader(p);n="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" ");d.useVertexTexture?(n.push("boneTexture"),n.push("boneTextureWidth"),n.push("boneTextureHeight")):
n.push("boneGlobalMatrices");d.logarithmicDepthBuffer&&n.push("logDepthBufFC");for(var w in k)n.push(w);k=n;w={};n=0;for(b=k.length;n<b;n++)q=k[n],w[q]=g.getUniformLocation(h,q);this.uniforms=w;n="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(k=0;k<d.maxMorphTargets;k++)n.push("morphTarget"+k);for(k=0;k<d.maxMorphNormals;k++)n.push("morphNormal"+k);for(var v in l)n.push(v);d=n;l={};v=0;for(k=d.length;v<k;v++)w=d[v],l[w]=g.getAttribLocation(h,w);this.attributes=
l;this.id=a++;this.code=c;this.usedTimes=1;this.program=h;this.vertexShader=m;this.fragmentShader=p;return this}}();
THREE.WebGLShader=function(){var a=function(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")};return function(b,c,f){c=b.createShader(c);b.shaderSource(c,f);b.compileShader(c);!1===b.getShaderParameter(c,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(c)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b.getShaderInfoLog(c)),console.warn(a(f)));return c}}();
THREE.RenderableVertex=function(){this.position=new THREE.Vector3;this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};
THREE.RenderableFace=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.normalModel=new THREE.Vector3;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.color=new THREE.Color;this.material=null;this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];this.z=0};THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0};
THREE.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0};
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var f;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),f=b.matrix,b=b.geometry);a.merge(b,f,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:"",loadTexture:function(a,b,c,f){var d=new THREE.ImageLoader;d.crossOrigin=this.crossOrigin;var g=new THREE.Texture(void 0,b);d.load(a,function(a){g.image=a;g.needsUpdate=!0;c&&c(g)},void 0,function(a){f&&f(a)});g.sourceFile=a;return g},loadTextureCube:function(a,b,c,f){var d=new THREE.ImageLoader;d.crossOrigin=this.crossOrigin;var g=new THREE.CubeTexture([],b);g.flipY=!1;var h=0;b=function(b){d.load(a[b],function(a){g.images[b]=a;h+=1;6===h&&(g.needsUpdate=!0,c&&c(g))})};
f=0;for(var k=a.length;f<k;++f)b(f);return g},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]};b|=1;var f=a.width,d=a.height,g=document.createElement("canvas");
g.width=f;g.height=d;var h=g.getContext("2d");h.drawImage(a,0,0);for(var k=h.getImageData(0,0,f,d).data,l=h.createImageData(f,d),m=l.data,p=0;p<f;p++)for(var n=0;n<d;n++){var q=0>n-1?0:n-1,r=n+1>d-1?d-1:n+1,s=0>p-1?0:p-1,u=p+1>f-1?f-1:p+1,w=[],v=[0,0,k[4*(n*f+p)]/255*b];w.push([-1,0,k[4*(n*f+s)]/255*b]);w.push([-1,-1,k[4*(q*f+s)]/255*b]);w.push([0,-1,k[4*(q*f+p)]/255*b]);w.push([1,-1,k[4*(q*f+u)]/255*b]);w.push([1,0,k[4*(n*f+u)]/255*b]);w.push([1,1,k[4*(r*f+u)]/255*b]);w.push([0,1,k[4*(r*f+p)]/255*
b]);w.push([-1,1,k[4*(r*f+s)]/255*b]);q=[];s=w.length;for(r=0;r<s;r++){var u=w[r],B=w[(r+1)%s],u=[u[0]-v[0],u[1]-v[1],u[2]-v[2]],B=[B[0]-v[0],B[1]-v[1],B[2]-v[2]];q.push(c([u[1]*B[2]-u[2]*B[1],u[2]*B[0]-u[0]*B[2],u[0]*B[1]-u[1]*B[0]]))}w=[0,0,0];for(r=0;r<q.length;r++)w[0]+=q[r][0],w[1]+=q[r][1],w[2]+=q[r][2];w[0]/=q.length;w[1]/=q.length;w[2]/=q.length;v=4*(n*f+p);m[v]=(w[0]+1)/2*255|0;m[v+1]=(w[1]+1)/2*255|0;m[v+2]=255*w[2]|0;m[v+3]=255}h.putImageData(l,0,0);return g},generateDataTexture:function(a,
b,c){var f=a*b,d=new Uint8Array(3*f),g=Math.floor(255*c.r),h=Math.floor(255*c.g);c=Math.floor(255*c.b);for(var k=0;k<f;k++)d[3*k]=g,d[3*k+1]=h,d[3*k+2]=c;a=new THREE.DataTexture(d,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,f=0,d=b.length;f<d;f++)c.add(new THREE.Mesh(a,b[f]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var f=new THREE.Matrix4;f.getInverse(c.matrixWorld);a.applyMatrix(f);b.remove(a);c.add(a)}};
THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(a){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing.";}},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=
a},drawText:function(a){var b=this.getFace(),c=this.size/b.resolution,f=0,d=String(a).split(""),g=d.length,h=[];for(a=0;a<g;a++){var k=new THREE.Path,k=this.extractGlyphPoints(d[a],b,c,f,k),f=f+k.offset;h.push(k.path)}return{paths:h,offset:f/2}},extractGlyphPoints:function(a,b,c,f,d){var g=[],h,k,l,m,p,n,q,r,s,u,w,v=b.glyphs[a]||b.glyphs["?"];if(v){if(v.o)for(b=v._cachedOutline||(v._cachedOutline=v.o.split(" ")),m=b.length,a=0;a<m;)switch(l=b[a++],l){case "m":l=b[a++]*c+f;p=b[a++]*c;d.moveTo(l,p);
break;case "l":l=b[a++]*c+f;p=b[a++]*c;d.lineTo(l,p);break;case "q":l=b[a++]*c+f;p=b[a++]*c;r=b[a++]*c+f;s=b[a++]*c;d.quadraticCurveTo(r,s,l,p);if(h=g[g.length-1])for(n=h.x,q=h.y,h=1,k=this.divisions;h<=k;h++){var B=h/k;THREE.Shape.Utils.b2(B,n,r,l);THREE.Shape.Utils.b2(B,q,s,p)}break;case "b":if(l=b[a++]*c+f,p=b[a++]*c,r=b[a++]*c+f,s=b[a++]*c,u=b[a++]*c+f,w=b[a++]*c,d.bezierCurveTo(r,s,u,w,l,p),h=g[g.length-1])for(n=h.x,q=h.y,h=1,k=this.divisions;h<=k;h++)B=h/k,THREE.Shape.Utils.b3(B,n,r,u,l),THREE.Shape.Utils.b3(B,
q,s,w,p)}return{offset:v.ha*c,path:d}}}};
THREE.FontUtils.generateShapes=function(a,b){b=b||{};var c=void 0!==b.curveSegments?b.curveSegments:4,f=void 0!==b.font?b.font:"helvetiker",d=void 0!==b.weight?b.weight:"normal",g=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=f;THREE.FontUtils.weight=d;THREE.FontUtils.style=g;c=THREE.FontUtils.drawText(a).paths;f=[];d=0;for(g=c.length;d<g;d++)Array.prototype.push.apply(f,c[d].toShapes());return f};
(function(a){var b=function(a){for(var b=a.length,d=0,g=b-1,h=0;h<b;g=h++)d+=a[g].x*a[h].y-a[h].x*a[g].y;return 0.5*d};a.Triangulate=function(a,f){var d=a.length;if(3>d)return null;var g=[],h=[],k=[],l,m,p;if(0<b(a))for(m=0;m<d;m++)h[m]=m;else for(m=0;m<d;m++)h[m]=d-1-m;var n=2*d;for(m=d-1;2<d;){if(0>=n--){console.log("Warning, unable to triangulate polygon!");break}l=m;d<=l&&(l=0);m=l+1;d<=m&&(m=0);p=m+1;d<=p&&(p=0);var q;a:{var r=void 0,s=void 0,u=void 0,w=void 0,v=void 0,B=void 0,z=void 0,A=void 0,
r=a[h[l]].x,s=a[h[l]].y,u=a[h[m]].x,w=a[h[m]].y,v=a[h[p]].x,B=a[h[p]].y;if(1E-10>(u-r)*(B-s)-(w-s)*(v-r))q=!1;else{var C=void 0,G=void 0,E=void 0,I=void 0,H=void 0,Q=void 0,N=void 0,F=void 0,D=void 0,S=void 0,D=F=N=A=z=void 0,C=v-u,G=B-w,E=r-v,I=s-B,H=u-r,Q=w-s;for(q=0;q<d;q++)if(z=a[h[q]].x,A=a[h[q]].y,!(z===r&&A===s||z===u&&A===w||z===v&&A===B)&&(N=z-r,F=A-s,D=z-u,S=A-w,z-=v,A-=B,D=C*S-G*D,N=H*F-Q*N,F=E*A-I*z,-1E-10<=D&&-1E-10<=F&&-1E-10<=N)){q=!1;break a}q=!0}}if(q){g.push([a[h[l]],a[h[m]],a[h[p]]]);
k.push([h[l],h[m],h[p]]);l=m;for(p=m+1;p<d;l++,p++)h[l]=h[p];d--;n=2*d}}return f?k:g};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;
THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(a){if(!0!==a.initialized){for(var b=0;b<a.hierarchy.length;b++){for(var c=0;c<a.hierarchy[b].keys.length;c++)if(0>a.hierarchy[b].keys[c].time&&(a.hierarchy[b].keys[c].time=
0),void 0!==a.hierarchy[b].keys[c].rot&&!(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)){var f=a.hierarchy[b].keys[c].rot;a.hierarchy[b].keys[c].rot=(new THREE.Quaternion).fromArray(f)}if(a.hierarchy[b].keys.length&&void 0!==a.hierarchy[b].keys[0].morphTargets){f={};for(c=0;c<a.hierarchy[b].keys.length;c++)for(var d=0;d<a.hierarchy[b].keys[c].morphTargets.length;d++){var g=a.hierarchy[b].keys[c].morphTargets[d];f[g]=-1}a.hierarchy[b].usedMorphTargets=f;for(c=0;c<a.hierarchy[b].keys.length;c++){var h=
{};for(g in f){for(d=0;d<a.hierarchy[b].keys[c].morphTargets.length;d++)if(a.hierarchy[b].keys[c].morphTargets[d]===g){h[g]=a.hierarchy[b].keys[c].morphTargetsInfluences[d];break}d===a.hierarchy[b].keys[c].morphTargets.length&&(h[g]=0)}a.hierarchy[b].keys[c].morphTargetsInfluences=h}}for(c=1;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].time===a.hierarchy[b].keys[c-1].time&&(a.hierarchy[b].keys.splice(c,1),c--);for(c=0;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].index=c}a.initialized=
!0;return a}},parse:function(a){var b=function(a,c){c.push(a);for(var h=0;h<a.children.length;h++)b(a.children[h],c)},c=[];if(a instanceof THREE.SkinnedMesh)for(var f=0;f<a.skeleton.bones.length;f++)c.push(a.skeleton.bones[f]);else b(a,c);return c},play:function(a){-1===this.animations.indexOf(a)&&this.animations.push(a)},stop:function(a){a=this.animations.indexOf(a);-1!==a&&this.animations.splice(a,1)},update:function(a){for(var b=0;b<this.animations.length;b++)this.animations[b].update(a)}};
THREE.Animation=function(a,b){this.root=a;this.data=THREE.AnimationHandler.init(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=!0;this.weight=0;this.interpolationType=THREE.AnimationHandler.LINEAR};THREE.Animation.prototype.keyTypes=["pos","rot","scl"];THREE.Animation.prototype.play=function(a,b){this.currentTime=void 0!==a?a:0;this.weight=void 0!==b?b:1;this.isPlaying=!0;this.reset();THREE.AnimationHandler.play(this)};
THREE.Animation.prototype.stop=function(){this.isPlaying=!1;THREE.AnimationHandler.stop(this)};
THREE.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a];c.matrixAutoUpdate=!0;void 0===c.animationCache&&(c.animationCache={});void 0===c.animationCache[this.data.name]&&(c.animationCache[this.data.name]={},c.animationCache[this.data.name].prevKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].nextKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].originalMatrix=c.matrix);for(var c=c.animationCache[this.data.name],f=0;3>f;f++){for(var d=
this.keyTypes[f],g=this.data.hierarchy[a].keys[0],h=this.getNextKeyWith(d,a,1);h.time<this.currentTime&&h.index>g.index;)g=h,h=this.getNextKeyWith(d,a,h.index+1);c.prevKey[d]=g;c.nextKey[d]=h}}};
THREE.Animation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3,f=new THREE.Quaternion,d=function(a,b){var c=[],d=[],f,n,q,r,s,u;f=(a.length-1)*b;n=Math.floor(f);f-=n;c[0]=0===n?n:n-1;c[1]=n;c[2]=n>a.length-2?n:n+1;c[3]=n>a.length-3?n:n+2;n=a[c[0]];r=a[c[1]];s=a[c[2]];u=a[c[3]];c=f*f;q=f*c;d[0]=g(n[0],r[0],s[0],u[0],f,c,q);d[1]=g(n[1],r[1],s[1],u[1],f,c,q);d[2]=g(n[2],r[2],s[2],u[2],f,c,q);return d},g=function(a,b,c,d,f,g,q){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*
q+(-3*(b-c)-2*a-d)*g+a*f+b};return function(h){if(!1!==this.isPlaying&&(this.currentTime+=h*this.timeScale,0!==this.weight)){h=this.data.length;if(!0===this.loop&&this.currentTime>h)this.currentTime%=h,this.reset();else if(!1===this.loop&&this.currentTime>h){this.stop();return}h=0;for(var k=this.hierarchy.length;h<k;h++)for(var l=this.hierarchy[h],g=l.animationCache[this.data.name],p=0;3>p;p++){var n=this.keyTypes[p],q=g.prevKey[n],r=g.nextKey[n];if(r.time<=this.currentTime){q=this.data.hierarchy[h].keys[0];
for(r=this.getNextKeyWith(n,h,1);r.time<this.currentTime&&r.index>q.index;)q=r,r=this.getNextKeyWith(n,h,r.index+1);g.prevKey[n]=q;g.nextKey[n]=r}l.matrixAutoUpdate=!0;l.matrixWorldNeedsUpdate=!0;var s=(this.currentTime-q.time)/(r.time-q.time),u=q[n],w=r[n];0>s&&(s=0);1<s&&(s=1);if("pos"===n)if(this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=u[0]+(w[0]-u[0])*s,c.y=u[1]+(w[1]-u[1])*s,c.z=u[2]+(w[2]-u[2])*s,l instanceof THREE.Bone?(q=this.weight/(this.weight+l.accumulatedPosWeight),l.position.lerp(c,
q),l.accumulatedPosWeight+=this.weight):l.position.copy(c);else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",h,q.index-1).pos,a[1]=u,a[2]=w,a[3]=this.getNextKeyWith("pos",h,r.index+1).pos,s=0.33*s+0.33,r=d(a,s),q=1,l instanceof THREE.Bone&&(q=this.weight/(this.weight+l.accumulatedPosWeight),l.accumulatedPosWeight+=this.weight),n=l.position,n.x+=(r[0]-n.x)*q,n.y+=(r[1]-n.y)*q,n.z+=(r[2]-
n.z)*q,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(s=d(a,1.01*s),b.set(s[0],s[1],s[2]),b.sub(n),b.y=0,b.normalize(),s=Math.atan2(b.x,b.z),l.rotation.set(0,s,0))}else"rot"===n?(THREE.Quaternion.slerp(u,w,f,s),l instanceof THREE.Bone?0===l.accumulatedRotWeight?(l.quaternion.copy(f),l.accumulatedRotWeight=this.weight):(q=this.weight/(this.weight+l.accumulatedRotWeight),THREE.Quaternion.slerp(l.quaternion,f,l.quaternion,q),l.accumulatedRotWeight+=this.weight):l.quaternion.copy(f)):
"scl"===n&&(c.x=u[0]+(w[0]-u[0])*s,c.y=u[1]+(w[1]-u[1])*s,c.z=u[2]+(w[2]-u[2])*s,l instanceof THREE.Bone?(q=this.weight/(this.weight+l.accumulatedSclWeight),l.scale.lerp(c,q),l.accumulatedSclWeight+=this.weight):l.scale.copy(c))}return!0}}}();
THREE.Animation.prototype.getNextKeyWith=function(a,b,c){var f=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<f.length-1?c:f.length-1:c%f.length;c<f.length;c++)if(void 0!==f[c][a])return f[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){var f=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+f.length;0<=c;c--)if(void 0!==f[c][a])return f[c];return this.data.hierarchy[b].keys[f.length-1]};
THREE.KeyFrameAnimation=function(a){this.root=a.node;this.data=THREE.AnimationHandler.init(a);this.hierarchy=THREE.AnimationHandler.parse(this.root);this.currentTime=0;this.timeScale=0.001;this.isPlaying=!1;this.loop=this.isPaused=!0;a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,f=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var d=0;d<c.length;d++){var g=c[d],h=this.getNextKeyWith(g,a,0);h&&h.apply(g)}f.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
f.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a){this.currentTime=void 0!==a?a:0;if(!1===this.isPlaying){this.isPlaying=!0;var b=this.hierarchy.length,c,f;for(a=0;a<b;a++)c=this.hierarchy[a],f=this.data.hierarchy[a],void 0===f.animationCache&&(f.animationCache={},f.animationCache.prevKey=null,f.animationCache.nextKey=null,f.animationCache.originalMatrix=c.matrix),c=this.data.hierarchy[a].keys,c.length&&(f.animationCache.prevKey=c[0],f.animationCache.nextKey=c[1],this.startTime=Math.min(c[0].time,
this.startTime),this.endTime=Math.max(c[c.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.play(this)};THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.stop(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var f=c.animationCache.originalMatrix;f.copy(b.matrix);b.matrix=f;delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(!1!==this.isPlaying){this.currentTime+=a*this.timeScale;a=this.data.length;!0===this.loop&&this.currentTime>a&&(this.currentTime%=a);this.currentTime=Math.min(this.currentTime,a);a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],f=this.data.hierarchy[a],d=f.keys,f=f.animationCache;if(d.length){var g=f.prevKey,h=f.nextKey;if(h.time<=this.currentTime){for(;h.time<this.currentTime&&h.index>g.index;)g=h,h=d[g.index+1];f.prevKey=
g;f.nextKey=h}h.time>=this.currentTime?g.interpolate(h,this.currentTime):g.interpolate(h,h.time);this.data.hierarchy[a].node.updateMatrix();c.matrixWorldNeedsUpdate=!0}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};
THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};THREE.MorphAnimation=function(a){this.mesh=a;this.frames=a.morphTargetInfluences.length;this.currentTime=0;this.duration=1E3;this.loop=!0;this.isPlaying=!1};
THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var a=0,b=0;return function(c){if(!1!==this.isPlaying){this.currentTime+=c;!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration);this.currentTime=Math.min(this.currentTime,this.duration);c=this.duration/this.frames;var f=Math.floor(this.currentTime/c);f!=b&&(this.mesh.morphTargetInfluences[a]=0,this.mesh.morphTargetInfluences[b]=1,this.mesh.morphTargetInfluences[f]=
0,a=b,b=f);this.mesh.morphTargetInfluences[f]=this.currentTime%c/c;this.mesh.morphTargetInfluences[a]=1-this.mesh.morphTargetInfluences[f]}}}()};
THREE.BoxGeometry=function(a,b,c,f,d,g){function h(a,b,h,c,d,f,g,u){var w,v=k.widthSegments,B=k.heightSegments,z=d/2,A=f/2,C=k.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)w="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)w="y",B=k.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)w="x",v=k.depthSegments;var G=v+1,E=B+1,I=d/v,H=f/B,Q=new THREE.Vector3;Q[w]=0<g?1:-1;for(d=0;d<E;d++)for(f=0;f<G;f++){var N=new THREE.Vector3;N[a]=(f*I-z)*h;N[b]=(d*H-A)*c;N[w]=g;k.vertices.push(N)}for(d=
0;d<B;d++)for(f=0;f<v;f++)A=f+G*d,a=f+G*(d+1),b=f+1+G*(d+1),h=f+1+G*d,c=new THREE.Vector2(f/v,1-d/B),g=new THREE.Vector2(f/v,1-(d+1)/B),w=new THREE.Vector2((f+1)/v,1-(d+1)/B),z=new THREE.Vector2((f+1)/v,1-d/B),A=new THREE.Face3(A+C,a+C,h+C),A.normal.copy(Q),A.vertexNormals.push(Q.clone(),Q.clone(),Q.clone()),A.materialIndex=u,k.faces.push(A),k.faceVertexUvs[0].push([c,g,z]),A=new THREE.Face3(a+C,b+C,h+C),A.normal.copy(Q),A.vertexNormals.push(Q.clone(),Q.clone(),Q.clone()),A.materialIndex=u,k.faces.push(A),
k.faceVertexUvs[0].push([g.clone(),w,z.clone()])}THREE.Geometry.call(this);this.parameters={width:a,height:b,depth:c,widthSegments:f,heightSegments:d,depthSegments:g};this.widthSegments=f||1;this.heightSegments=d||1;this.depthSegments=g||1;var k=this;f=a/2;d=b/2;g=c/2;h("z","y",-1,-1,c,b,f,0);h("z","y",1,-1,c,b,-f,1);h("x","z",1,1,a,c,d,2);h("x","z",1,-1,a,c,-d,3);h("x","y",1,-1,a,b,g,4);h("x","y",-1,-1,a,b,-g,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.CircleGeometry=function(a,b,c,f){THREE.Geometry.call(this);this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:f};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;f=void 0!==f?f:2*Math.PI;var d,g=[];d=new THREE.Vector3;var h=new THREE.Vector2(0.5,0.5);this.vertices.push(d);g.push(h);for(d=0;d<=b;d++){var k=new THREE.Vector3,l=c+d/b*f;k.x=a*Math.cos(l);k.y=a*Math.sin(l);this.vertices.push(k);g.push(new THREE.Vector2((k.x/a+1)/2,(k.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(d=1;d<=
b;d++)this.faces.push(new THREE.Face3(d,d+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([g[d].clone(),g[d+1].clone(),h.clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,b,c,f,d,g){console.warn("THEE.CubeGeometry has been renamed to THREE.BoxGeometry.");return new THREE.BoxGeometry(a,b,c,f,d,g)};
THREE.CylinderGeometry=function(a,b,c,f,d,g){THREE.Geometry.call(this);this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:f,heightSegments:d,openEnded:g};a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;f=f||8;d=d||1;g=void 0!==g?g:!1;var h=c/2,k,l,m=[],p=[];for(l=0;l<=d;l++){var n=[],q=[],r=l/d,s=r*(b-a)+a;for(k=0;k<=f;k++){var u=k/f,w=new THREE.Vector3;w.x=s*Math.sin(u*Math.PI*2);w.y=-r*c+h;w.z=s*Math.cos(u*Math.PI*2);this.vertices.push(w);n.push(this.vertices.length-1);q.push(new THREE.Vector2(u,
1-r))}m.push(n);p.push(q)}c=(b-a)/c;for(k=0;k<f;k++)for(0!==a?(n=this.vertices[m[0][k]].clone(),q=this.vertices[m[0][k+1]].clone()):(n=this.vertices[m[1][k]].clone(),q=this.vertices[m[1][k+1]].clone()),n.setY(Math.sqrt(n.x*n.x+n.z*n.z)*c).normalize(),q.setY(Math.sqrt(q.x*q.x+q.z*q.z)*c).normalize(),l=0;l<d;l++){var r=m[l][k],s=m[l+1][k],u=m[l+1][k+1],w=m[l][k+1],v=n.clone(),B=n.clone(),z=q.clone(),A=q.clone(),C=p[l][k].clone(),G=p[l+1][k].clone(),E=p[l+1][k+1].clone(),I=p[l][k+1].clone();this.faces.push(new THREE.Face3(r,
s,w,[v,B,A]));this.faceVertexUvs[0].push([C,G,I]);this.faces.push(new THREE.Face3(s,u,w,[B.clone(),z,A.clone()]));this.faceVertexUvs[0].push([G.clone(),E,I.clone()])}if(!1===g&&0<a)for(this.vertices.push(new THREE.Vector3(0,h,0)),k=0;k<f;k++)r=m[0][k],s=m[0][k+1],u=this.vertices.length-1,v=new THREE.Vector3(0,1,0),B=new THREE.Vector3(0,1,0),z=new THREE.Vector3(0,1,0),C=p[0][k].clone(),G=p[0][k+1].clone(),E=new THREE.Vector2(G.x,0),this.faces.push(new THREE.Face3(r,s,u,[v,B,z])),this.faceVertexUvs[0].push([C,
G,E]);if(!1===g&&0<b)for(this.vertices.push(new THREE.Vector3(0,-h,0)),k=0;k<f;k++)r=m[l][k+1],s=m[l][k],u=this.vertices.length-1,v=new THREE.Vector3(0,-1,0),B=new THREE.Vector3(0,-1,0),z=new THREE.Vector3(0,-1,0),C=p[l][k+1].clone(),G=p[l][k].clone(),E=new THREE.Vector2(G.x,1),this.faces.push(new THREE.Face3(r,s,u,[v,B,z])),this.faceVertexUvs[0].push([C,G,E]);this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,f=0;f<c;f++)this.addShape(a[f],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,h){b||console.log("die");return b.clone().multiplyScalar(h).add(a)}function f(a,b,h){var c=THREE.Math.sign,d=1,d=a.x-b.x,k=a.y-b.y,f=h.x-a.x,l=h.y-a.y,g=d*d+k*k;if(1E-10<Math.abs(d*l-k*f)){var m=Math.sqrt(g),c=Math.sqrt(f*f+l*l),g=b.x-k/m;b=b.y+d/m;f=((h.x-l/c-g)*l-(h.y+f/c-b)*f)/(d*l-k*f);h=g+d*f-a.x;a=b+k*f-a.y;d=h*h+a*a;if(2>=d)return new THREE.Vector2(h,a);d=Math.sqrt(d/2)}else a=!1,1E-10<d?1E-10<f&&(a=!0):-1E-10>d?-1E-10>f&&
(a=!0):c(k)==c(l)&&(a=!0),a?(h=-k,a=d,d=Math.sqrt(g)):(h=d,a=k,d=Math.sqrt(g/2));return new THREE.Vector2(h/d,a/d)}function d(h,c){var d,k;for(R=h.length;0<=--R;){d=R;k=R-1;0>k&&(k=h.length-1);for(var f=0,l=r+2*p,f=0;f<l;f++){var g=X*f,m=X*(f+1),n=c+d+g,g=c+k+g,q=c+k+m,m=c+d+m,U=h,s=f,Z=l,u=d,w=k,n=n+F,g=g+F,q=q+F,m=m+F;N.faces.push(new THREE.Face3(n,g,m,null,null,B));N.faces.push(new THREE.Face3(g,q,m,null,null,B));n=z.generateSideWallUV(N,a,U,b,n,g,q,m,s,Z,u,w);N.faceVertexUvs[0].push([n[0],n[1],
n[3]]);N.faceVertexUvs[0].push([n[1],n[2],n[3]])}}}function g(a,b,h){N.vertices.push(new THREE.Vector3(a,b,h))}function h(h,c,d,k){h+=F;c+=F;d+=F;N.faces.push(new THREE.Face3(h,c,d,null,null,v));h=k?z.generateBottomUV(N,a,b,h,c,d):z.generateTopUV(N,a,b,h,c,d);N.faceVertexUvs[0].push(h)}var k=void 0!==b.amount?b.amount:100,l=void 0!==b.bevelThickness?b.bevelThickness:6,m=void 0!==b.bevelSize?b.bevelSize:l-2,p=void 0!==b.bevelSegments?b.bevelSegments:3,n=void 0!==b.bevelEnabled?b.bevelEnabled:!0,q=
void 0!==b.curveSegments?b.curveSegments:12,r=void 0!==b.steps?b.steps:1,s=b.extrudePath,u,w=!1,v=b.material,B=b.extrudeMaterial,z=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,A,C,G,E;s&&(u=s.getSpacedPoints(r),w=!0,n=!1,A=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(s,r,!1),C=new THREE.Vector3,G=new THREE.Vector3,E=new THREE.Vector3);n||(m=l=p=0);var I,H,Q,N=this,F=this.vertices.length,s=a.extractPoints(q),q=s.shape,D=s.holes;if(s=!THREE.Shape.Utils.isClockWise(q)){q=
q.reverse();H=0;for(Q=D.length;H<Q;H++)I=D[H],THREE.Shape.Utils.isClockWise(I)&&(D[H]=I.reverse());s=!1}var S=THREE.Shape.Utils.triangulateShape(q,D),J=q;H=0;for(Q=D.length;H<Q;H++)I=D[H],q=q.concat(I);var Z,K,M,ea,U,X=q.length,O,ba=S.length,s=[],R=0;M=J.length;Z=M-1;for(K=R+1;R<M;R++,Z++,K++)Z===M&&(Z=0),K===M&&(K=0),s[R]=f(J[R],J[Z],J[K]);var V=[],W,da=s.concat();H=0;for(Q=D.length;H<Q;H++){I=D[H];W=[];R=0;M=I.length;Z=M-1;for(K=R+1;R<M;R++,Z++,K++)Z===M&&(Z=0),K===M&&(K=0),W[R]=f(I[R],I[Z],I[K]);
V.push(W);da=da.concat(W)}for(Z=0;Z<p;Z++){M=Z/p;ea=l*(1-M);K=m*Math.sin(M*Math.PI/2);R=0;for(M=J.length;R<M;R++)U=c(J[R],s[R],K),g(U.x,U.y,-ea);H=0;for(Q=D.length;H<Q;H++)for(I=D[H],W=V[H],R=0,M=I.length;R<M;R++)U=c(I[R],W[R],K),g(U.x,U.y,-ea)}K=m;for(R=0;R<X;R++)U=n?c(q[R],da[R],K):q[R],w?(G.copy(A.normals[0]).multiplyScalar(U.x),C.copy(A.binormals[0]).multiplyScalar(U.y),E.copy(u[0]).add(G).add(C),g(E.x,E.y,E.z)):g(U.x,U.y,0);for(M=1;M<=r;M++)for(R=0;R<X;R++)U=n?c(q[R],da[R],K):q[R],w?(G.copy(A.normals[M]).multiplyScalar(U.x),
C.copy(A.binormals[M]).multiplyScalar(U.y),E.copy(u[M]).add(G).add(C),g(E.x,E.y,E.z)):g(U.x,U.y,k/r*M);for(Z=p-1;0<=Z;Z--){M=Z/p;ea=l*(1-M);K=m*Math.sin(M*Math.PI/2);R=0;for(M=J.length;R<M;R++)U=c(J[R],s[R],K),g(U.x,U.y,k+ea);H=0;for(Q=D.length;H<Q;H++)for(I=D[H],W=V[H],R=0,M=I.length;R<M;R++)U=c(I[R],W[R],K),w?g(U.x,U.y+u[r-1].y,u[r-1].x+ea):g(U.x,U.y,k+ea)}(function(){if(n){var a;a=0*X;for(R=0;R<ba;R++)O=S[R],h(O[2]+a,O[1]+a,O[0]+a,!0);a=r+2*p;a*=X;for(R=0;R<ba;R++)O=S[R],h(O[0]+a,O[1]+a,O[2]+a,
!1)}else{for(R=0;R<ba;R++)O=S[R],h(O[2],O[1],O[0],!0);for(R=0;R<ba;R++)O=S[R],h(O[0]+X*r,O[1]+X*r,O[2]+X*r,!1)}})();(function(){var a=0;d(J,a);a+=J.length;H=0;for(Q=D.length;H<Q;H++)I=D[H],d(I,a),a+=I.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,f,d,g){b=a.vertices[d].x;d=a.vertices[d].y;c=a.vertices[g].x;g=a.vertices[g].y;return[new THREE.Vector2(a.vertices[f].x,a.vertices[f].y),new THREE.Vector2(b,d),new THREE.Vector2(c,g)]},generateBottomUV:function(a,b,c,f,d,g){return this.generateTopUV(a,b,c,f,d,g)},generateSideWallUV:function(a,b,c,f,d,g,h,k,l,m,p,n){b=a.vertices[d].x;c=a.vertices[d].y;d=a.vertices[d].z;f=a.vertices[g].x;l=a.vertices[g].y;g=a.vertices[g].z;m=a.vertices[h].x;
p=a.vertices[h].y;h=a.vertices[h].z;n=a.vertices[k].x;var q=a.vertices[k].y;a=a.vertices[k].z;return 0.01>Math.abs(c-l)?[new THREE.Vector2(b,1-d),new THREE.Vector2(f,1-g),new THREE.Vector2(m,1-h),new THREE.Vector2(n,1-a)]:[new THREE.Vector2(c,1-d),new THREE.Vector2(l,1-g),new THREE.Vector2(p,1-h),new THREE.Vector2(q,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,f=a.length;c<f;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,f=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,d,g,h,k=this.vertices.length;d=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var l=d.shape,m=d.holes;if(!THREE.Shape.Utils.isClockWise(l))for(l=l.reverse(),d=0,g=m.length;d<g;d++)h=m[d],THREE.Shape.Utils.isClockWise(h)&&(m[d]=h.reverse());var p=THREE.Shape.Utils.triangulateShape(l,m);d=0;for(g=m.length;d<g;d++)h=m[d],
l=l.concat(h);m=l.length;g=p.length;for(d=0;d<m;d++)h=l[d],this.vertices.push(new THREE.Vector3(h.x,h.y,0));for(d=0;d<g;d++)m=p[d],l=m[0]+k,h=m[1]+k,m=m[2]+k,this.faces.push(new THREE.Face3(l,h,m,null,null,c)),this.faceVertexUvs[0].push(f.generateBottomUV(this,a,b,l,h,m))};
THREE.LatheGeometry=function(a,b,c,f){THREE.Geometry.call(this);b=b||12;c=c||0;f=f||2*Math.PI;for(var d=1/(a.length-1),g=1/b,h=0,k=b;h<=k;h++)for(var l=c+h*g*f,m=Math.cos(l),p=Math.sin(l),l=0,n=a.length;l<n;l++){var q=a[l],r=new THREE.Vector3;r.x=m*q.x-p*q.y;r.y=p*q.x+m*q.y;r.z=q.z;this.vertices.push(r)}c=a.length;h=0;for(k=b;h<k;h++)for(l=0,n=a.length-1;l<n;l++){b=p=l+c*h;f=p+c;var m=p+1+c,p=p+1,q=h*g,r=l*d,s=q+g,u=r+d;this.faces.push(new THREE.Face3(b,f,p));this.faceVertexUvs[0].push([new THREE.Vector2(q,
r),new THREE.Vector2(s,r),new THREE.Vector2(q,u)]);this.faces.push(new THREE.Face3(f,m,p));this.faceVertexUvs[0].push([new THREE.Vector2(s,r),new THREE.Vector2(s,u),new THREE.Vector2(q,u)])}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.PlaneGeometry=function(a,b,c,f){THREE.Geometry.call(this);this.parameters={width:a,height:b,widthSegments:c,heightSegments:f};var d=a/2,g=b/2;c=c||1;f=f||1;var h=c+1,k=f+1,l=a/c,m=b/f,p=new THREE.Vector3(0,0,1);for(a=0;a<k;a++){var n=a*m-g;for(b=0;b<h;b++)this.vertices.push(new THREE.Vector3(b*l-d,-n,0))}for(a=0;a<f;a++)for(b=0;b<c;b++){var q=b+h*a,d=b+h*(a+1),g=b+1+h*(a+1),k=b+1+h*a,l=new THREE.Vector2(b/c,1-a/f),m=new THREE.Vector2(b/c,1-(a+1)/f),n=new THREE.Vector2((b+1)/c,1-(a+1)/f),r=new THREE.Vector2((b+
1)/c,1-a/f),q=new THREE.Face3(q,d,k);q.normal.copy(p);q.vertexNormals.push(p.clone(),p.clone(),p.clone());this.faces.push(q);this.faceVertexUvs[0].push([l,m,r]);q=new THREE.Face3(d,g,k);q.normal.copy(p);q.vertexNormals.push(p.clone(),p.clone(),p.clone());this.faces.push(q);this.faceVertexUvs[0].push([m.clone(),n,r.clone()])}};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.RingGeometry=function(a,b,c,f,d,g){THREE.Geometry.call(this);a=a||0;b=b||50;d=void 0!==d?d:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;f=void 0!==f?Math.max(1,f):8;var h,k=[],l=a,m=(b-a)/f;for(a=0;a<f+1;a++){for(h=0;h<c+1;h++){var p=new THREE.Vector3,n=d+h/c*g;p.x=l*Math.cos(n);p.y=l*Math.sin(n);this.vertices.push(p);k.push(new THREE.Vector2((p.x/b+1)/2,(p.y/b+1)/2))}l+=m}b=new THREE.Vector3(0,0,1);for(a=0;a<f;a++)for(d=a*(c+1),h=0;h<c;h++)g=n=h+d,m=n+c+1,p=n+c+2,this.faces.push(new THREE.Face3(g,
m,p,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([k[g].clone(),k[m].clone(),k[p].clone()]),g=n,m=n+c+2,p=n+1,this.faces.push(new THREE.Face3(g,m,p,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([k[g].clone(),k[m].clone(),k[p].clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,l)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry=function(a,b,c,f,d,g,h){THREE.Geometry.call(this);this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:f,phiLength:d,thetaStart:g,thetaLength:h};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);f=void 0!==f?f:0;d=void 0!==d?d:2*Math.PI;g=void 0!==g?g:0;h=void 0!==h?h:Math.PI;var k,l,m=[],p=[];for(l=0;l<=c;l++){var n=[],q=[];for(k=0;k<=b;k++){var r=k/b,s=l/c,u=new THREE.Vector3;u.x=-a*Math.cos(f+r*d)*Math.sin(g+s*h);u.y=a*Math.cos(g+s*h);u.z=
a*Math.sin(f+r*d)*Math.sin(g+s*h);this.vertices.push(u);n.push(this.vertices.length-1);q.push(new THREE.Vector2(r,1-s))}m.push(n);p.push(q)}for(l=0;l<c;l++)for(k=0;k<b;k++){f=m[l][k+1];d=m[l][k];g=m[l+1][k];h=m[l+1][k+1];var n=this.vertices[f].clone().normalize(),q=this.vertices[d].clone().normalize(),r=this.vertices[g].clone().normalize(),s=this.vertices[h].clone().normalize(),u=p[l][k+1].clone(),w=p[l][k].clone(),v=p[l+1][k].clone(),B=p[l+1][k+1].clone();Math.abs(this.vertices[f].y)===a?(u.x=(u.x+
w.x)/2,this.faces.push(new THREE.Face3(f,g,h,[n,r,s])),this.faceVertexUvs[0].push([u,v,B])):Math.abs(this.vertices[g].y)===a?(v.x=(v.x+B.x)/2,this.faces.push(new THREE.Face3(f,d,g,[n,q,r])),this.faceVertexUvs[0].push([u,w,v])):(this.faces.push(new THREE.Face3(f,d,h,[n,q,s])),this.faceVertexUvs[0].push([u,w,B]),this.faces.push(new THREE.Face3(d,g,h,[q.clone(),r,s.clone()])),this.faceVertexUvs[0].push([w.clone(),v,B.clone()]))}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,
a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){b=b||{};var c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);
THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,a,b,THREE.LinePieces)};THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);
THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,0.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));return function(c,f,d,g,h,k){THREE.Object3D.call(this);void 0===g&&(g=16776960);void 0===d&&(d=1);void 0===h&&(h=0.2*d);void 0===k&&(k=0.2*h);this.position.copy(f);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:g}));this.line.matrixAutoUpdate=!1;this.add(this.line);
this.cone=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:g}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(d,h,k)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){0.99999<c.y?this.quaternion.set(0,0,0,1):-0.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=0.2*a);void 0===c&&(c=0.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.set(a);this.cone.material.color.set(a)};
THREE.BoxHelper=function(a){var b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3));THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,f=this.geometry.attributes.position.array;f[0]=b.x;f[1]=b.y;f[2]=b.z;f[3]=c.x;f[4]=b.y;f[5]=b.z;f[6]=c.x;f[7]=b.y;f[8]=b.z;f[9]=c.x;f[10]=c.y;f[11]=b.z;f[12]=c.x;f[13]=c.y;f[14]=b.z;f[15]=b.x;f[16]=c.y;f[17]=b.z;f[18]=b.x;f[19]=c.y;f[20]=b.z;f[21]=b.x;f[22]=b.y;f[23]=b.z;f[24]=b.x;f[25]=b.y;f[26]=c.z;f[27]=c.x;f[28]=b.y;f[29]=c.z;f[30]=c.x;f[31]=b.y;
f[32]=c.z;f[33]=c.x;f[34]=c.y;f[35]=c.z;f[36]=c.x;f[37]=c.y;f[38]=c.z;f[39]=b.x;f[40]=c.y;f[41]=c.z;f[42]=b.x;f[43]=c.y;f[44]=c.z;f[45]=b.x;f[46]=b.y;f[47]=c.z;f[48]=b.x;f[49]=b.y;f[50]=b.z;f[51]=b.x;f[52]=b.y;f[53]=c.z;f[54]=c.x;f[55]=b.y;f[56]=b.z;f[57]=c.x;f[58]=b.y;f[59]=c.z;f[60]=c.x;f[61]=c.y;f[62]=b.z;f[63]=c.x;f[64]=c.y;f[65]=c.z;f[66]=b.x;f[67]=c.y;f[68]=b.z;f[69]=b.x;f[70]=c.y;f[71]=c.z;this.geometry.attributes.position.needsUpdate=!0;this.geometry.computeBoundingSphere();this.matrixAutoUpdate=
!1;this.matrixWorld=a.matrixWorld};THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.vertices.push(new THREE.Vector3);f.colors.push(new THREE.Color(b));void 0===g[a]&&(g[a]=[]);g[a].push(f.vertices.length-1)}var f=new THREE.Geometry,d=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,f,d,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function f(f,h,k,l){a.set(h,k,l);c.unprojectVector(a,b);f=d.pointMap[f];if(void 0!==f)for(h=0,k=f.length;h<k;h++)d.geometry.vertices[f[h]].copy(a)}var d=this;b.projectionMatrix.copy(this.camera.projectionMatrix);f("c",0,0,-1);f("t",0,0,1);f("n1",-1,-1,-1);f("n2",1,-1,-1);f("n3",-1,1,-1);f("n4",1,1,-1);f("f1",-1,-1,1);f("f2",1,-1,1);f("f3",-1,1,1);f("f4",1,1,1);f("u1",0.7,
1.1,-1);f("u2",-0.7,1.1,-1);f("u3",0,2,-1);f("cf1",-1,0,1);f("cf2",1,0,1);f("cf3",0,-1,1);f("cf4",0,1,1);f("cn1",-1,0,-1);f("cn2",1,0,-1);f("cn3",0,-1,-1);f("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var f=new THREE.LineBasicMaterial({fog:!1});f.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(c,f);this.add(this.lightPlane);
c=new THREE.Geometry;c.vertices.push(new THREE.Vector3,new THREE.Vector3);f=new THREE.LineBasicMaterial({fog:!1});f.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,f);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(a,b){var c=void 0!==b?b:16777215,f=[0,0],d={},g=function(a,b){return a-b},h=["a","b","c"],k=new THREE.BufferGeometry,l=a.geometry.clone();l.mergeVertices();l.computeFaceNormals();for(var m=l.vertices,l=l.faces,p=0,n=0,q=l.length;n<q;n++)for(var r=l[n],s=0;3>s;s++){f[0]=r[h[s]];f[1]=r[h[(s+1)%3]];f.sort(g);var u=f.toString();void 0===d[u]?(d[u]={vert1:f[0],vert2:f[1],face1:n,face2:void 0},p++):d[u].face2=n}k.addAttribute("position",new THREE.Float32Attribute(6*p,3));f=k.attributes.position.array;
g=0;for(u in d)if(h=d[u],void 0===h.face2||0.9999>l[h.face1].normal.dot(l[h.face2].normal))p=m[h.vert1],f[g++]=p.x,f[g++]=p.y,f[g++]=p.z,p=m[h.vert2],f[g++]=p.x,f[g++]=p.y,f[g++]=p.z;THREE.Line.call(this,k,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper=function(a,b,c,f){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;f=void 0!==f?f:1;b=new THREE.Geometry;c=0;for(var d=this.object.geometry.faces.length;c<d;c++)b.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:f}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(){var a=this.geometry.vertices,b=this.object,c=b.geometry.vertices,f=b.geometry.faces,d=b.matrixWorld;b.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(d);for(var g=b=0,h=f.length;b<h;b++,g+=2){var k=f[b];a[g].copy(c[k.a]).add(c[k.b]).add(c[k.c]).divideScalar(3).applyMatrix4(d);a[g+1].copy(k.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a[g])}this.geometry.verticesNeedUpdate=!0;return this};
THREE.GridHelper=function(a,b){var c=new THREE.Geometry,f=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var d=-a;d<=a;d+=b){c.vertices.push(new THREE.Vector3(-a,0,d),new THREE.Vector3(a,0,d),new THREE.Vector3(d,0,-a),new THREE.Vector3(d,0,a));var g=0===d?this.color1:this.color2;c.colors.push(g,g,g,g)}THREE.Line.call(this,c,f,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),f=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});f.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,f);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,f=c*Math.tan(this.light.angle);this.cone.scale.set(f,f,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,f){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:16711680;f=void 0!==f?f:1;c=new THREE.Geometry;a=a.geometry.faces;for(var d=0,g=a.length;d<g;d++)for(var h=0,k=a[d].vertexNormals.length;h<k;h++)c.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:f}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var f=this.geometry.vertices,d=this.object.geometry.vertices,g=this.object.geometry.faces,h=this.object.matrixWorld,k=0,l=0,m=g.length;l<m;l++)for(var p=g[l],n=0,q=p.vertexNormals.length;n<q;n++){var r=p.vertexNormals[n];f[k].copy(d[p[a[n]]]).applyMatrix4(h);b.copy(r).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
b.add(f[k]);k+=1;f[k].copy(b);k+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.VertexTangentsHelper=function(a,b,c,f){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:255;f=void 0!==f?f:1;c=new THREE.Geometry;a=a.geometry.faces;for(var d=0,g=a.length;d<g;d++)for(var h=0,k=a[d].vertexTangents.length;h<k;h++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:f}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var f=this.geometry.vertices,d=this.object.geometry.vertices,g=this.object.geometry.faces,h=this.object.matrixWorld,k=0,l=0,m=g.length;l<m;l++)for(var p=g[l],n=0,q=p.vertexTangents.length;n<q;n++){var r=p.vertexTangents[n];f[k].copy(d[p[a[n]]]).applyMatrix4(h);b.copy(r).transformDirection(h).multiplyScalar(this.size);b.add(f[k]);k+=1;f[k].copy(b);
k+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215,f=[0,0],d={},g=function(a,b){return a-b},h=["a","b","c"],k=new THREE.BufferGeometry;if(a.geometry instanceof THREE.Geometry){for(var l=a.geometry.vertices,m=a.geometry.faces,p=0,n=new Uint32Array(6*m.length),q=0,r=m.length;q<r;q++)for(var s=m[q],u=0;3>u;u++){f[0]=s[h[u]];f[1]=s[h[(u+1)%3]];f.sort(g);var w=f.toString();void 0===d[w]&&(n[2*p]=f[0],n[2*p+1]=f[1],d[w]=!0,p++)}f=new Float32Array(6*p);q=0;for(r=p;q<r;q++)for(u=0;2>u;u++)p=
l[n[2*q+u]],h=6*q+3*u,f[h+0]=p.x,f[h+1]=p.y,f[h+2]=p.z;k.addAttribute("position",new THREE.BufferAttribute(f,3))}else if(a.geometry instanceof THREE.BufferGeometry){if(void 0!==a.geometry.attributes.index){for(var l=a.geometry.attributes.position.array,r=a.geometry.attributes.index.array,m=a.geometry.offsets,p=0,n=new Uint32Array(2*r.length),s=0,v=m.length;s<v;++s)for(var u=m[s].start,w=m[s].count,h=m[s].index,q=u,B=u+w;q<B;q+=3)for(u=0;3>u;u++)f[0]=h+r[q+u],f[1]=h+r[q+(u+1)%3],f.sort(g),w=f.toString(),
void 0===d[w]&&(n[2*p]=f[0],n[2*p+1]=f[1],d[w]=!0,p++);f=new Float32Array(6*p);q=0;for(r=p;q<r;q++)for(u=0;2>u;u++)h=6*q+3*u,p=3*n[2*q+u],f[h+0]=l[p],f[h+1]=l[p+1],f[h+2]=l[p+2]}else for(l=a.geometry.attributes.position.array,p=l.length/3,n=p/3,f=new Float32Array(6*p),q=0,r=n;q<r;q++)for(u=0;3>u;u++)h=18*q+6*u,n=9*q+3*u,f[h+0]=l[n],f[h+1]=l[n+1],f[h+2]=l[n+2],p=9*q+(u+1)%3*3,f[h+3]=l[p],f[h+4]=l[p+1],f[h+5]=l[p+2];k.addAttribute("position",new THREE.BufferAttribute(f,3))}THREE.Line.call(this,k,new THREE.LineBasicMaterial({color:c}),
THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);
THREE.ShadowMapPlugin=function(){function a(b,h,c){if(h.visible){var d=b.__webglObjects[h.id];if(d&&h.castShadow&&(!1===h.frustumCulled||!0===k.intersectsObject(h)))for(var f=0,l=d.length;f<l;f++){var g=d[f];h._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,h.matrixWorld);q.push(g)}f=0;for(l=h.children.length;f<l;f++)a(b,h.children[f],c)}}var b,c,f,d,g,h,k=new THREE.Frustum,l=new THREE.Matrix4,m=new THREE.Vector3,p=new THREE.Vector3,n=new THREE.Vector3,q=[];this.init=function(a){b=a.context;
c=a;a=THREE.ShaderLib.depthRGBA;var k=THREE.UniformsUtils.clone(a.uniforms);f=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k});d=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k,morphTargets:!0});g=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k,skinning:!0});h=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:k,
morphTargets:!0,skinning:!0});f._shadowPass=!0;d._shadowPass=!0;g._shadowPass=!0;h._shadowPass=!0};this.render=function(a,b){c.shadowMapEnabled&&c.shadowMapAutoUpdate&&this.update(a,b)};this.update=function(r,s){var u,w,v,B,z,A,C,G,E=[];B=0;b.clearColor(1,1,1,1);b.disable(b.BLEND);b.enable(b.CULL_FACE);b.frontFace(b.CCW);c.shadowMapCullFace===THREE.CullFaceFront?b.cullFace(b.FRONT):b.cullFace(b.BACK);c.setDepthTest(!0);u=0;for(w=r.__lights.length;u<w;u++)if(v=r.__lights[u],v.castShadow)if(v instanceof
THREE.DirectionalLight&&v.shadowCascade)for(z=0;z<v.shadowCascadeCount;z++){var I;if(v.shadowCascadeArray[z])I=v.shadowCascadeArray[z];else{C=v;var H=z;I=new THREE.DirectionalLight;I.isVirtual=!0;I.onlyShadow=!0;I.castShadow=!0;I.shadowCameraNear=C.shadowCameraNear;I.shadowCameraFar=C.shadowCameraFar;I.shadowCameraLeft=C.shadowCameraLeft;I.shadowCameraRight=C.shadowCameraRight;I.shadowCameraBottom=C.shadowCameraBottom;I.shadowCameraTop=C.shadowCameraTop;I.shadowCameraVisible=C.shadowCameraVisible;
I.shadowDarkness=C.shadowDarkness;I.shadowBias=C.shadowCascadeBias[H];I.shadowMapWidth=C.shadowCascadeWidth[H];I.shadowMapHeight=C.shadowCascadeHeight[H];I.pointsWorld=[];I.pointsFrustum=[];G=I.pointsWorld;A=I.pointsFrustum;for(var Q=0;8>Q;Q++)G[Q]=new THREE.Vector3,A[Q]=new THREE.Vector3;G=C.shadowCascadeNearZ[H];C=C.shadowCascadeFarZ[H];A[0].set(-1,-1,G);A[1].set(1,-1,G);A[2].set(-1,1,G);A[3].set(1,1,G);A[4].set(-1,-1,C);A[5].set(1,-1,C);A[6].set(-1,1,C);A[7].set(1,1,C);I.originalCamera=s;A=new THREE.Gyroscope;
A.position.copy(v.shadowCascadeOffset);A.add(I);A.add(I.target);s.add(A);v.shadowCascadeArray[z]=I;console.log("Created virtualLight",I)}H=v;G=z;C=H.shadowCascadeArray[G];C.position.copy(H.position);C.target.position.copy(H.target.position);C.lookAt(C.target);C.shadowCameraVisible=H.shadowCameraVisible;C.shadowDarkness=H.shadowDarkness;C.shadowBias=H.shadowCascadeBias[G];A=H.shadowCascadeNearZ[G];H=H.shadowCascadeFarZ[G];C=C.pointsFrustum;C[0].z=A;C[1].z=A;C[2].z=A;C[3].z=A;C[4].z=H;C[5].z=H;C[6].z=
H;C[7].z=H;E[B]=I;B++}else E[B]=v,B++;u=0;for(w=E.length;u<w;u++){v=E[u];v.shadowMap||(z=THREE.LinearFilter,c.shadowMapType===THREE.PCFSoftShadowMap&&(z=THREE.NearestFilter),v.shadowMap=new THREE.WebGLRenderTarget(v.shadowMapWidth,v.shadowMapHeight,{minFilter:z,magFilter:z,format:THREE.RGBAFormat}),v.shadowMapSize=new THREE.Vector2(v.shadowMapWidth,v.shadowMapHeight),v.shadowMatrix=new THREE.Matrix4);if(!v.shadowCamera){if(v instanceof THREE.SpotLight)v.shadowCamera=new THREE.PerspectiveCamera(v.shadowCameraFov,
v.shadowMapWidth/v.shadowMapHeight,v.shadowCameraNear,v.shadowCameraFar);else if(v instanceof THREE.DirectionalLight)v.shadowCamera=new THREE.OrthographicCamera(v.shadowCameraLeft,v.shadowCameraRight,v.shadowCameraTop,v.shadowCameraBottom,v.shadowCameraNear,v.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}r.add(v.shadowCamera);!0===r.autoUpdate&&r.updateMatrixWorld()}v.shadowCameraVisible&&!v.cameraHelper&&(v.cameraHelper=new THREE.CameraHelper(v.shadowCamera),v.shadowCamera.add(v.cameraHelper));
if(v.isVirtual&&I.originalCamera==s){z=s;B=v.shadowCamera;A=v.pointsFrustum;C=v.pointsWorld;m.set(Infinity,Infinity,Infinity);p.set(-Infinity,-Infinity,-Infinity);for(H=0;8>H;H++)G=C[H],G.copy(A[H]),THREE.ShadowMapPlugin.__projector.unprojectVector(G,z),G.applyMatrix4(B.matrixWorldInverse),G.x<m.x&&(m.x=G.x),G.x>p.x&&(p.x=G.x),G.y<m.y&&(m.y=G.y),G.y>p.y&&(p.y=G.y),G.z<m.z&&(m.z=G.z),G.z>p.z&&(p.z=G.z);B.left=m.x;B.right=p.x;B.top=p.y;B.bottom=m.y;B.updateProjectionMatrix()}B=v.shadowMap;A=v.shadowMatrix;
z=v.shadowCamera;z.position.setFromMatrixPosition(v.matrixWorld);n.setFromMatrixPosition(v.target.matrixWorld);z.lookAt(n);z.updateMatrixWorld();z.matrixWorldInverse.getInverse(z.matrixWorld);v.cameraHelper&&(v.cameraHelper.visible=v.shadowCameraVisible);v.shadowCameraVisible&&v.cameraHelper.update();A.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);A.multiply(z.projectionMatrix);A.multiply(z.matrixWorldInverse);l.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse);k.setFromMatrix(l);c.setRenderTarget(B);
c.clear();q.length=0;a(r,r,z);v=0;for(B=q.length;v<B;v++)C=q[v],A=C.object,C=C.buffer,H=A.material instanceof THREE.MeshFaceMaterial?A.material.materials[0]:A.material,G=void 0!==A.geometry.morphTargets&&0<A.geometry.morphTargets.length&&H.morphTargets,Q=A instanceof THREE.SkinnedMesh&&H.skinning,G=A.customDepthMaterial?A.customDepthMaterial:Q?G?h:g:G?d:f,c.setMaterialFaces(H),C instanceof THREE.BufferGeometry?c.renderBufferDirect(z,r.__lights,null,G,C,A):c.renderBuffer(z,r.__lights,null,G,C,A);H=
r.__webglObjectsImmediate;v=0;for(B=H.length;v<B;v++)C=H[v],A=C.object,A.visible&&A.castShadow&&(A._modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,A.matrixWorld),c.renderImmediateObject(z,r.__lights,null,f,A))}u=c.getClearColor();w=c.getClearAlpha();b.clearColor(u.r,u.g,u.b,w);b.enable(b.BLEND);c.shadowMapCullFace===THREE.CullFaceFront&&b.cullFace(b.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;THREE.DDSLoader=function(){};
THREE.DDSLoader.prototype={constructor:THREE.DDSLoader,load:function(a,b,c){var f=this,d=[],g=new THREE.CompressedTexture;g.image=d;g.flipY=!1;g.generateMipmaps=!1;if(a instanceof Array){var h=0,k=new THREE.XHRLoader;k.setResponseType("arraybuffer");c=function(c){k.load(a[c],function(a){a=f.parse(a,!0);d[c]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};h+=1;6===h&&(1==a.mipmapCount&&(g.minFilter=THREE.LinearFilter),g.format=a.format,g.needsUpdate=!0,b&&b(g))})};for(var l=0,m=a.length;l<
m;++l)c(l)}else k=new THREE.XHRLoader,k.setResponseType("arraybuffer"),k.load(a,function(a){a=f.parse(a,!0);if(a.isCubemap)for(var h=a.mipmaps.length/a.mipmapCount,c=0;c<h;c++){d[c]={mipmaps:[]};for(var k=0;k<a.mipmapCount;k++)d[c].mipmaps.push(a.mipmaps[c*a.mipmapCount+k]),d[c].format=a.format,d[c].width=a.width,d[c].height=a.height}else g.image.width=a.width,g.image.height=a.height,g.mipmaps=a.mipmaps;1==a.mipmapCount&&(g.minFilter=THREE.LinearFilter);g.format=a.format;g.needsUpdate=!0;b&&b(g)});
return g},parse:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}function f(a,b,h,c){var d=h*c*4;a=new Uint8Array(a,b,d);for(var d=new Uint8Array(d),k=b=0,f=0;f<c;f++)for(var l=0;l<h;l++){var g=a[k];k++;var m=a[k];k++;var p=a[k];k++;var n=a[k];k++;d[b]=p;b++;d[b]=m;b++;d[b]=g;b++;d[b]=n;b++}return d}var d={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},g=c("DXT1"),h=c("DXT3"),k=c("DXT5");if(!a||31>a.byteLength)return console.error("THREE.DDSLoader.parse: Invalid DDS header."),
d;var l=new Int32Array(a,0,31);if(542327876!==l[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),d;if(!l[20]&4)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),d;var m=l[21],p=!1;switch(m){case g:g=8;d.format=THREE.RGB_S3TC_DXT1_Format;break;case h:g=16;d.format=THREE.RGBA_S3TC_DXT3_Format;break;case k:g=16;d.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(32==l[22]&&l[23]&16711680&&l[24]&65280&&l[25]&255&&l[26]&
4278190080)p=!0,g=64,d.format=THREE.RGBAFormat;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",String.fromCharCode(m&255,m>>8&255,m>>16&255,m>>24&255)),d}d.mipmapCount=1;l[2]&131072&&!1!==b&&(d.mipmapCount=Math.max(1,l[7]));d.isCubemap=l[28]&512?!0:!1;d.width=l[4];d.height=l[3];for(var l=l[1]+4,h=d.width,k=d.height,m=d.isCubemap?6:1,n=0;n<m;n++){for(var q=0;q<d.mipmapCount;q++){if(p)var r=f(a,l,h,k),s=r.length;else s=Math.max(4,h)/4*Math.max(4,k)/4*g,r=new Uint8Array(a,
l,s);d.mipmaps.push({data:r,width:h,height:k});l+=s;h=Math.max(0.5*h,1);k=Math.max(0.5*k,1)}h=d.width;k=d.height}return d}};
"undefined"!==typeof window&&!function(a,b,c){var f=a.L,d={version:"0.7.2",noConflict:function(){return a.L=f,this}};a.L=d;d.Util={extend:function(a){var b,c,d,f,g=Array.prototype.slice.call(arguments,1);c=0;for(d=g.length;d>c;c++)for(b in f=g[c]||{},f)f.hasOwnProperty(b)&&(a[b]=f[b]);return a},bind:function(a,b){var c=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0;return function(b){return b._leaflet_id=
b._leaflet_id||++a,b._leaflet_id}}(),invokeEach:function(a,b,c){var d,f;if("object"==typeof a){f=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(f));return!0}return!1},limitExecByInterval:function(a,b,c){var d,f;return function q(){var g=arguments;return d?void(f=!0):(d=!0,setTimeout(function(){d=!1;f&&(q.apply(c,g),f=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?
a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return d.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=d.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[],f;for(f in a)d.push(encodeURIComponent(c?f.toUpperCase():f)+"="+encodeURIComponent(a[f]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,h){var d=b[h];if(d===c)throw Error("No value provided for variable "+a);return"function"==
typeof d&&(d=d(b)),d})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function b(h){var c,d,k=["webkit","moz","o","ms"];for(c=0;c<k.length&&!d;c++)d=a[k[c]+h];return d}function c(b){var h=+new Date,d=Math.max(0,16-(h-f));return f=h+d,a.setTimeout(b,d)}var f=0,g=a.requestAnimationFrame||b("RequestAnimationFrame")||c,p=a.cancelAnimationFrame||b("CancelAnimationFrame")||
b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};d.Util.requestAnimFrame=function(b,h,f,l){return b=d.bind(b,h),f&&g===c?void b():g.call(a,b,l)};d.Util.cancelAnimFrame=function(b){b&&p.call(a,b)}})();d.extend=d.Util.extend;d.bind=d.Util.bind;d.stamp=d.Util.stamp;d.setOptions=d.Util.setOptions;d.Class=function(){};d.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments);this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;
var f=new c;f.constructor=b;b.prototype=f;for(var g in this)this.hasOwnProperty(g)&&"prototype"!==g&&(b[g]=this[g]);a.statics&&(d.extend(b,a.statics),delete a.statics);a.includes&&(d.Util.extend.apply(null,[f].concat(a.includes)),delete a.includes);a.options&&f.options&&(a.options=d.extend({},f.options,a.options));d.extend(f,a);f._initHooks=[];var n=this;return b.__super__=n.prototype,f.callInitHooks=function(){if(!this._initHooksCalled){n.prototype.callInitHooks&&n.prototype.callInitHooks.call(this);
this._initHooksCalled=!0;for(var a=0,b=f._initHooks.length;b>a;a++)f._initHooks[a].call(this)}},b};d.Class.include=function(a){d.extend(this.prototype,a)};d.Class.mergeOptions=function(a){d.extend(this.prototype.options,a)};d.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1);this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push("function"==typeof a?a:function(){this[a].apply(this,b)})};d.Mixin={};d.Mixin.Events={addEventListener:function(a,
b,c){if(d.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var f,g,n,q,r,s,u,w=this._leaflet_events=this._leaflet_events||{},v=c&&c!==this&&d.stamp(c);a=d.Util.splitWords(a);f=0;for(g=a.length;g>f;f++)n={action:b,context:c||this},q=a[f],v?(r=q+"_idx",s=r+"_len",u=w[r]=w[r]||{},u[v]||(u[v]=[],w[s]=(w[s]||0)+1),u[v].push(n)):(w[q]=w[q]||[],w[q].push(n));return this},hasEventListeners:function(a){var b=this._leaflet_events;return!!b&&(a in b&&0<b[a].length||a+"_idx"in b&&0<b[a+"_idx_len"])},
removeEventListener:function(a,b,c){if(!this._leaflet_events)return this;if(!a)return this.clearAllEventListeners();if(d.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var f,g,n,q,r,s,u,w,v,B=this._leaflet_events,z=c&&c!==this&&d.stamp(c);a=d.Util.splitWords(a);f=0;for(g=a.length;g>f;f++)if(n=a[f],s=n+"_idx",u=s+"_len",w=B[s],b){if(q=z&&w?w[z]:B[n]){for(r=q.length-1;0<=r;r--)q[r].action!==b||c&&q[r].context!==c||(v=q.splice(r,1),v[0].action=d.Util.falseFn);c&&w&&0===q.length&&(delete w[z],
B[u]--)}}else delete B[n],delete B[s],delete B[u];return this},clearAllEventListeners:function(){return delete this._leaflet_events,this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,f,g,n,q,r=d.Util.extend({},b,{type:a,target:this});n=this._leaflet_events;if(n[a])for(c=n[a].slice(),f=0,g=c.length;g>f;f++)c[f].action.call(c[f].context,r);n=n[a+"_idx"];for(q in n)if(c=n[q].slice())for(f=0,g=c.length;g>f;f++)c[f].action.call(c[f].context,r);return this},addOneTimeEventListener:function(a,
b,c){if(d.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var f=d.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,f,c)},this);return this.addEventListener(a,b,c).addEventListener(a,f,c)}};d.Mixin.Events.on=d.Mixin.Events.addEventListener;d.Mixin.Events.off=d.Mixin.Events.removeEventListener;d.Mixin.Events.once=d.Mixin.Events.addOneTimeEventListener;d.Mixin.Events.fire=d.Mixin.Events.fireEvent;(function(){var h="ActiveXObject"in a,f=h&&!b.addEventListener,
g=navigator.userAgent.toLowerCase(),m=-1!==g.indexOf("webkit"),p=-1!==g.indexOf("chrome"),n=-1!==g.indexOf("phantom"),q=-1!==g.indexOf("android"),r=-1!==g.search("android [23]"),g=-1!==g.indexOf("gecko"),s=typeof orientation!=c+"",u=a.navigator&&a.navigator.msPointerEnabled&&a.navigator.msMaxTouchPoints&&!a.PointerEvent,w=a.PointerEvent&&a.navigator.pointerEnabled&&a.navigator.maxTouchPoints||u,v="devicePixelRatio"in a&&1<a.devicePixelRatio||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&
a.matchMedia("(min-resolution:144dpi)").matches,B=b.documentElement,z=h&&"transition"in B.style,A="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!r,C="MozPerspective"in B.style,G="OTransition"in B.style,E=!a.L_DISABLE_3D&&(z||A||C||G)&&!n,I;if(I=!a.L_NO_TOUCH){if(n=!n)w||"ontouchstart"in B?n=!0:(n=b.createElement("div"),B=!1,n=n.setAttribute?(n.setAttribute("ontouchstart","return;"),"function"==typeof n.ontouchstart&&(B=!0),n.removeAttribute("ontouchstart"),B):!1);I=n}d.Browser={ie:h,ielt9:f,
webkit:m,gecko:g&&!m&&!a.opera&&!h,android:q,android23:r,chrome:p,ie3d:z,webkit3d:A,gecko3d:C,opera3d:G,any3d:E,mobile:s,mobileWebkit:s&&m,mobileWebkit3d:s&&A,mobileOpera:s&&a.opera,touch:I,msPointer:u,pointer:w,retina:v}})();d.Point=function(a,b,c){this.x=c?Math.round(a):a;this.y=c?Math.round(b):b};d.Point.prototype={clone:function(){return new d.Point(this.x,this.y)},add:function(a){return this.clone()._add(d.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(d.point(a))},
_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),
this.y=Math.floor(this.y),this},distanceTo:function(a){a=d.point(a);var b=a.x-this.x;a=a.y-this.y;return Math.sqrt(b*b+a*a)},equals:function(a){return a=d.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=d.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+d.Util.formatNum(this.x)+", "+d.Util.formatNum(this.y)+")"}};d.point=function(a,b,f){return a instanceof d.Point?a:d.Util.isArray(a)?new d.Point(a[0],a[1]):a===c||null===
a?a:new d.Point(a,b,f)};d.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,f=c.length;f>d;d++)this.extend(c[d])};d.Bounds.prototype={extend:function(a){return a=d.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new d.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new d.Point(this.min.x,
this.max.y)},getTopRight:function(){return new d.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof d.Point?d.point(a):d.bounds(a),a instanceof d.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=d.bounds(a);var b=this.min,c=this.max,f=a.min;a=a.max;var g=a.y>=b.y&&f.y<=c.y;return a.x>=b.x&&f.x<=c.x&&g},isValid:function(){return!(!this.min||
!this.max)}};d.bounds=function(a,b){return!a||a instanceof d.Bounds?a:new d.Bounds(a,b)};d.Transformation=function(a,b,c,d){this._a=a;this._b=b;this._c=c;this._d=d};d.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new d.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}};d.DomUtil={get:function(a){return"string"==typeof a?
b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c];(!d&&a.currentStyle&&(d=a.currentStyle[c]),d&&"auto"!==d||!b.defaultView)||(d=(d=b.defaultView.getComputedStyle(a,null))?d[c]:null);return"auto"===d?null:d},getViewportOffset:function(a){var c,f=0,g=0,p=a,n=b.body,q=b.documentElement;do{if(f+=p.offsetTop||0,g+=p.offsetLeft||0,f+=parseInt(d.DomUtil.getStyle(p,"borderTopWidth"),10)||0,g+=parseInt(d.DomUtil.getStyle(p,"borderLeftWidth"),10)||0,c=d.DomUtil.getStyle(p,"position"),p.offsetParent===
n&&"absolute"===c)break;if("fixed"===c){f+=n.scrollTop||q.scrollTop||0;g+=n.scrollLeft||q.scrollLeft||0;break}if("relative"===c&&!p.offsetLeft){c=d.DomUtil.getStyle(p,"width");var r=d.DomUtil.getStyle(p,"max-width"),s=p.getBoundingClientRect();"none"===c&&"none"===r||(g+=s.left+p.clientLeft);f+=s.top+(n.scrollTop||q.scrollTop||0);break}p=p.offsetParent}while(p);p=a;do{if(p===n)break;f-=p.scrollTop||0;g-=p.scrollLeft||0;p=p.parentNode}while(p);return new d.Point(g,f)},documentIsLtr:function(){return d.DomUtil._docIsLtrCached||
(d.DomUtil._docIsLtrCached=!0,d.DomUtil._docIsLtr="ltr"===d.DomUtil.getStyle(b.body,"direction")),d.DomUtil._docIsLtr},create:function(a,c,d){a=b.createElement(a);return a.className=c,d&&d.appendChild(a),a},hasClass:function(a,b){if(a.classList!==c)return a.classList.contains(b);var f=d.DomUtil._getClass(a);return 0<f.length&&RegExp("(^|\\s)"+b+"(\\s|$)").test(f)},addClass:function(a,b){if(a.classList!==c)for(var f=d.Util.splitWords(b),g=0,p=f.length;p>g;g++)a.classList.add(f[g]);else d.DomUtil.hasClass(a,
b)||(f=d.DomUtil._getClass(a),d.DomUtil._setClass(a,(f?f+" ":"")+b))},removeClass:function(a,b){a.classList!==c?a.classList.remove(b):d.DomUtil._setClass(a,d.Util.trim((" "+d.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===c?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1;
try{c=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){if(1===b)return}b=Math.round(100*b);c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"}},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},getTranslateString:function(a){var b=d.Browser.webkit3d;return"translate"+(b?"3d":"")+"("+a.x+"px,"+a.y+"px"+((b?",0":"")+")")},getScaleString:function(a,b){return d.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*
a)))+(" scale("+a+") ")},setPosition:function(a,b,c){a._leaflet_pos=b;!c&&d.Browser.any3d?a.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}};d.DomUtil.TRANSFORM=d.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);d.DomUtil.TRANSITION=d.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);d.DomUtil.TRANSITION_END=
"webkitTransition"===d.DomUtil.TRANSITION||"OTransition"===d.DomUtil.TRANSITION?d.DomUtil.TRANSITION+"End":"transitionend";(function(){if("onselectstart"in b)d.extend(d.DomUtil,{disableTextSelection:function(){d.DomEvent.on(a,"selectstart",d.DomEvent.preventDefault)},enableTextSelection:function(){d.DomEvent.off(a,"selectstart",d.DomEvent.preventDefault)}});else{var h=d.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);d.extend(d.DomUtil,{disableTextSelection:function(){if(h){var a=
b.documentElement.style;this._userSelect=a[h];a[h]="none"}},enableTextSelection:function(){h&&(b.documentElement.style[h]=this._userSelect,delete this._userSelect)}})}d.extend(d.DomUtil,{disableImageDrag:function(){d.DomEvent.on(a,"dragstart",d.DomEvent.preventDefault)},enableImageDrag:function(){d.DomEvent.off(a,"dragstart",d.DomEvent.preventDefault)}})})();d.LatLng=function(a,b,d){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=
a;this.lng=b;d!==c&&(this.alt=parseFloat(d))};d.extend(d.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1E-9});d.LatLng.prototype={equals:function(a){if(!a)return!1;a=d.latLng(a);return Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=d.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+d.Util.formatNum(this.lat,a)+", "+d.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=d.latLng(a);var b=d.LatLng.DEG_TO_RAD,c=(a.lng-this.lng)*b,f=this.lat*b,g=a.lat*b;a=Math.sin((a.lat-
this.lat)*b/2);c=Math.sin(c/2);f=a*a+c*c*Math.cos(f)*Math.cos(g);return 12756274*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new d.LatLng(this.lat,c)}};d.latLng=function(a,b){return a instanceof d.LatLng?a:d.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new d.LatLng(a[0],a[1],a[2]):null:a===c||null===a?a:"object"==typeof a&&"lat"in a?new d.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===c?null:new d.LatLng(a,
b)};d.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,f=c.length;f>d;d++)this.extend(c[d])};d.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=d.latLng(a);return a=null!==b?b:d.latLngBounds(a),a instanceof d.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=
new d.LatLng(a.lat,a.lng),this._northEast=new d.LatLng(a.lat,a.lng)):a instanceof d.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,f=Math.abs(b.lat-c.lat)*a;a*=Math.abs(b.lng-c.lng);return new d.LatLngBounds(new d.LatLng(b.lat-f,b.lng-a),new d.LatLng(c.lat+f,c.lng+a))},getCenter:function(){return new d.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},
getNorthEast:function(){return this._northEast},getNorthWest:function(){return new d.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new d.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof d.LatLng?d.latLng(a):d.latLngBounds(a);var b,c,f=this._southWest,
g=this._northEast;return a instanceof d.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=f.lat&&c.lat<=g.lat&&b.lng>=f.lng&&c.lng<=g.lng},intersects:function(a){a=d.latLngBounds(a);var b=this._southWest,c=this._northEast,f=a.getSouthWest();a=a.getNorthEast();var g=a.lng>=b.lng&&f.lng<=c.lng;return a.lat>=b.lat&&f.lat<=c.lat&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join()},equals:function(a){return a?(a=d.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&
this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}};d.latLngBounds=function(a,b){return!a||a instanceof d.LatLngBounds?a:new d.LatLngBounds(a,b)};d.Projection={};d.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=d.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,c=Math.max(Math.min(c,a.lat),-c);a=a.lng*b;b*=c;return b=Math.log(Math.tan(Math.PI/4+b/2)),new d.Point(a,b)},unproject:function(a){var b=d.LatLng.RAD_TO_DEG,
c=a.x*b;a=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new d.LatLng(a,c)}};d.Projection.LonLat={project:function(a){return new d.Point(a.lng,a.lat)},unproject:function(a){return new d.LatLng(a.y,a.x)}};d.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),c=this.transformation.untransform(a,c);return this.projection.unproject(c)},project:function(a){return this.projection.project(a)},
scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){a=this.scale(a);return d.point(a,a)}};d.CRS.Simple=d.extend({},d.CRS,{projection:d.Projection.LonLat,transformation:new d.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}});d.CRS.EPSG3857=d.extend({},d.CRS,{code:"EPSG:3857",projection:d.Projection.SphericalMercator,transformation:new d.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(a){return this.projection.project(a).multiplyBy(6378137)}});d.CRS.EPSG900913=
d.extend({},d.CRS.EPSG3857,{code:"EPSG:900913"});d.CRS.EPSG4326=d.extend({},d.CRS,{code:"EPSG:4326",projection:d.Projection.LonLat,transformation:new d.Transformation(1/360,0.5,-1/360,0.5)});d.Map=d.Class.extend({includes:d.Mixin.Events,options:{crs:d.CRS.EPSG3857,fadeAnimation:d.DomUtil.TRANSITION&&!d.Browser.android23,trackResize:!0,markerZoomAnimation:d.DomUtil.TRANSITION&&d.Browser.any3d},initialize:function(a,b){b=d.setOptions(this,b);this._initContainer(a);this._initLayout();this._onResize=
d.bind(this._onResize,this);this._initEvents();b.maxBounds&&this.setMaxBounds(b.maxBounds);b.center&&b.zoom!==c&&this.setView(d.latLng(b.center),b.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(b.layers)},setView:function(a,b){return b=b===c?this.getZoom():b,this._resetView(d.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),
this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var f=this.getZoomScale(b),g=this.getSize().divideBy(2);a=(a instanceof d.Point?a:this.latLngToContainerPoint(a)).subtract(g).multiplyBy(1-1/f);g=this.containerPointToLatLng(g.add(a));return this.setView(g,b,{zoom:c})},fitBounds:function(a,b){b=b||{};a=a.getBounds?a.getBounds():d.latLngBounds(a);var c=d.point(b.paddingTopLeft||b.padding||
[0,0]),f=d.point(b.paddingBottomRight||b.padding||[0,0]),g=this.getBoundsZoom(a,!1,c.add(f)),c=f.subtract(c).divideBy(2),f=this.project(a.getSouthWest(),g),n=this.project(a.getNorthEast(),g),c=this.unproject(f.add(n).divideBy(2).add(c),g);return g=b&&b.maxZoom?Math.min(b.maxZoom,g):g,this.setView(c,g,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(d.point(a)),
this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=d.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=d.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&
isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&a instanceof d.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=d.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],
this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&a instanceof d.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return a?d.stamp(a)in this._layers:!1},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=d.extend({animate:!1,pan:!0},!0===a?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0;this._initialCenter=
null;var c=this.getSize(),f=b.divideBy(2).round(),g=c.divideBy(2).round(),f=f.subtract(g);return f.x||f.y?(a.animate&&a.pan?this.panBy(f):(a.pan&&this._rawPanBy(f),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},
remove:function(){this._loaded&&this.fire("unload");this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=c}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),
a=this.unproject(a.getTopRight());return new d.LatLngBounds(b,a)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom===c?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=d.latLngBounds(a);var f,g=this.getMinZoom()-(b?1:0),n=this.getMaxZoom(),q=this.getSize(),r=a.getNorthWest();a=a.getSouthEast();f=!0;c=d.point(c||[0,0]);do g++,
f=this.project(a,g).subtract(this.project(r,g)).add(c),f=b?f.x<q.x||f.y<q.y:q.contains(f);while(f&&n>=g);return f&&b?null:b?g:g-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new d.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new d.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},
getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(d.latLng(a),b)},unproject:function(a,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(d.point(a),b)},layerPointToLatLng:function(a){a=d.point(a).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(a){return this.project(d.latLng(a))._round()._subtract(this.getPixelOrigin())},
containerPointToLayerPoint:function(a){return d.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return d.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){a=this.containerPointToLayerPoint(d.point(a));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(d.latLng(a)))},mouseEventToContainerPoint:function(a){return d.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},
mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){a=this._container=d.DomUtil.get(a);if(!a)throw Error("Map container not found.");if(a._leaflet)throw Error("Map container is already initialized.");a._leaflet=!0},_initLayout:function(){var a=this._container;d.DomUtil.addClass(a,"leaflet-container"+(d.Browser.touch?" leaflet-touch":"")+(d.Browser.retina?" leaflet-retina":"")+(d.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?
" leaflet-fade-anim":""));var b=d.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);a.shadowPane=this._createPane("leaflet-shadow-pane");
a.overlayPane=this._createPane("leaflet-overlay-pane");a.markerPane=this._createPane("leaflet-marker-pane");a.popupPane=this._createPane("leaflet-popup-pane");this.options.markerZoomAnimation||(d.DomUtil.addClass(a.markerPane," leaflet-zoom-hide"),d.DomUtil.addClass(a.shadowPane," leaflet-zoom-hide"),d.DomUtil.addClass(a.popupPane," leaflet-zoom-hide"))},_createPane:function(a,b){return d.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},
_addLayers:function(a){a=a?d.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,f){var g=this._zoom!==b;f||(this.fire("movestart"),g&&this.fire("zoomstart"));this._zoom=b;this._initialCenter=a;this._initialTopLeftPoint=this._getNewTopLeftPoint(a);c?this._initialTopLeftPoint._add(this._getMapPanePos()):d.DomUtil.setPosition(this._mapPane,new d.Point(0,0));this._tileLayersToLoad=this._tileLayersNum;a=!this._loaded;this._loaded=!0;a&&(this.fire("load"),
this.eachLayer(this._layerAdd,this));this.fire("viewreset",{hard:!c});this.fire("move");(g||f)&&this.fire("zoomend");this.fire("moveend",{hard:!c})},_rawPanBy:function(a){d.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,d=-1/0,f=this._getZoomSpan();for(a in this._zoomBoundLayers){var g=this._zoomBoundLayers[a];isNaN(g.options.minZoom)||(b=Math.min(b,g.options.minZoom));
isNaN(g.options.maxZoom)||(d=Math.max(d,g.options.maxZoom))}a===c?this._layersMaxZoom=this._layersMinZoom=c:(this._layersMaxZoom=d,this._layersMinZoom=b);f!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.");},_initEvents:function(b){if(d.DomEvent){b=b||"on";d.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,f,g="dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu".split(" ");
c=0;for(f=g.length;f>c;c++)d.DomEvent[b](this._container,g[c],this._fireMouseEvent,this);this.options.trackResize&&d.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){d.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=d.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||d.DomEvent._skipped(a)||
(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!d.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&d.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),f=this.containerPointToLayerPoint(c),g=this.layerPointToLatLng(f);this.fire(b,{latlng:g,layerPoint:f,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--;
this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this);this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return d.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},
_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){c=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(c)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;a=
this.project(a,b);var f=this.getSize().divideBy(2),f=new d.Bounds(a.subtract(f),a.add(f));c=this._getBoundsOffset(f,c,b);return this.unproject(a.add(c),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),c=new d.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(c,b))},_getBoundsOffset:function(a,b,c){var f=this.project(b.getNorthWest(),c).subtract(a.min);b=this.project(b.getSouthEast(),c).subtract(a.max);a=this._rebound(f.x,-b.x);f=this._rebound(f.y,-b.y);
return new d.Point(a,f)},_rebound:function(a,b){return 0<a+b?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}});d.map=function(a,b){return new d.Map(a,b)};d.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=d.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,a.lat),-c),c=this.R_MAJOR;a=a.lng*b*c;var b=
f*b,f=this.R_MINOR/c,f=Math.sqrt(1-f*f),g=f*Math.sin(b),g=Math.pow((1-g)/(1+g),0.5*f),f=Math.tan(0.5*(0.5*Math.PI-b))/g;return b=-c*Math.log(f),new d.Point(a,b)},unproject:function(a){var b,c=d.LatLng.RAD_TO_DEG,f=this.R_MAJOR,g=a.x*c/f,n=this.R_MINOR/f,n=Math.sqrt(1-n*n);a=Math.exp(-a.y/f);var f=Math.PI/2-2*Math.atan(a),q=15;for(b=0.1;1E-7<Math.abs(b)&&0<--q;)b=n*Math.sin(f),b=Math.PI/2-2*Math.atan(a*Math.pow((1-b)/(1+b),0.5*n))-f,f+=b;return new d.LatLng(f*c,g)}};d.CRS.EPSG3395=d.extend({},d.CRS,
{code:"EPSG:3395",projection:d.Projection.Mercator,transformation:function(){var a=0.5/(Math.PI*d.Projection.Mercator.R_MAJOR);return new d.Transformation(a,0.5,-a,0.5)}()});d.TileLayer=d.Class.extend({includes:d.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:d.Browser.mobile,updateWhenIdle:d.Browser.mobile},initialize:function(a,b){b=d.setOptions(this,b);b.detectRetina&&d.Browser.retina&&0<b.maxZoom&&
(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,0<b.minZoom&&b.minZoom--,this.options.maxZoom--);b.bounds&&(b.bounds=d.latLngBounds(b.bounds));this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a;this._animated=a._zoomAnimated;this._initContainer();a.on({viewreset:this._reset,moveend:this._update},this);this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||(this._limitedUpdate=
d.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this));this._reset();this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container);a.off({viewreset:this._reset,moveend:this._update},this);this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this);this._map=this._container=null},bringToFront:function(){var a=
this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=
a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,f,g=a.children,q=-b(1/0,-1/0);d=0;for(f=g.length;f>d;d++)g[d]!==this._container&&(c=parseInt(g[d].style.zIndex,10),isNaN(c)||(q=b(q,c)));this.options.zIndex=this._container.style.zIndex=
(isFinite(q)?q:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(d.Browser.ielt9)for(a in b)d.DomUtil.setOpacity(b[a],this.options.opacity);else d.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;this._container||((this._container=d.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated)?(this._bgBuffer=d.DomUtil.create("div","leaflet-tile-container",this._container),this._tileContainer=d.DomUtil.create("div",
"leaflet-tile-container",this._container)):this._tileContainer=this._container,a.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={};this._tilesToLoad=0;this.options.reuseTiles&&(this._unusedTiles=[]);this._tileContainer.innerHTML="";this._animated&&a&&a.hard&&this._clearBgBuffer();this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,
c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),a=a.getZoom(),c=this._getTileSize();a>this.options.maxZoom||a<this.options.minZoom||(b=d.bounds(b.min.divideBy(c)._floor(),b.max.divideBy(c)._floor()),this._addTilesFromCenterOut(b),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(b))}},_addTilesFromCenterOut:function(a){var c,
f,g,p=[],n=a.getCenter();for(c=a.min.y;c<=a.max.y;c++)for(f=a.min.x;f<=a.max.x;f++)g=new d.Point(f,c),this._tileShouldBeLoaded(g)&&p.push(g);a=p.length;if(0!==a){p.sort(function(a,b){return a.distanceTo(n)-b.distanceTo(n)});c=b.createDocumentFragment();this._tilesToLoad||this.fire("loading");this._tilesToLoad+=a;for(f=0;a>f;f++)this._addTile(p[f],c);this._tileContainer.appendChild(c)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=
this._getWrapTileNum();if(b.noWrap&&(0>a.x||a.x>=c.x)||0>a.y||a.y>=c.y)return!1}return b.bounds&&(c=b.tileSize,a=a.multiplyBy(c),c=a.add([c,c]),a=this._map.unproject(a),c=this._map.unproject(c),b.continuousWorld||b.noWrap||(a=a.wrap(),c=c.wrap()),!b.bounds.intersects([a,c]))?!1:!0},_removeOtherTiles:function(a){var b,c,d;for(d in this._tiles)b=d.split(":"),c=parseInt(b[0],10),b=parseInt(b[1],10),(c<a.min.x||c>a.max.x||b<a.min.y||b>a.max.y)&&this._removeTile(d)},_removeTile:function(a){var b=this._tiles[a];
this.fire("tileunload",{tile:b,url:b.src});this.options.reuseTiles?(d.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b);d.Browser.android||(b.onload=null,b.src=d.Util.emptyImageUrl);delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),f=this._getTile();d.DomUtil.setPosition(f,c,d.Browser.chrome);this._tiles[a.x+":"+a.y]=f;this._loadTile(f,a);f.parentNode!==this._tileContainer&&b.appendChild(f)},
_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return d.Util.template(this._url,d.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},
_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x);this.options.tms&&(a.y=b.y-a.y-1);a.z=this._getZoomForUrl()},_getSubdomain:function(a){a=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[a]},_getTile:function(){if(this.options.reuseTiles&&0<this._unusedTiles.length){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=
d.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=d.Util.falseFn,d.Browser.ielt9&&this.options.opacity!==c&&d.DomUtil.setOpacity(a,this.options.opacity),d.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this;a.onload=this._tileOnLoad;a.onerror=this._tileOnError;this._adjustTilePoint(b);a.src=this.getTileUrl(b);this.fire("tileloadstart",{tile:a,url:a.src})},
_tileLoaded:function(){this._tilesToLoad--;this._animated&&d.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated");this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(d.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==d.Util.emptyImageUrl&&(d.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src}));a._tileLoaded()},_tileOnError:function(){var a=
this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b);a._tileLoaded()}});d.tileLayer=function(a,b){return new d.TileLayer(a,b)};d.TileLayer.WMS=d.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=d.extend({},this.defaultWmsParams),f=b.tileSize||this.options.tileSize;c.width=c.height=b.detectRetina&&d.Browser.retina?2*f:
f;for(var g in b)this.options.hasOwnProperty(g)||"crs"===g||(c[g]=b[g]);this.wmsParams=c;d.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code;d.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,f=a.multiplyBy(c),c=f.add([c,c]),f=this._crs.project(b.unproject(f,a.z)),b=this._crs.project(b.unproject(c,a.z)),
b=1.3<=this._wmsVersion&&this._crs===d.CRS.EPSG4326?[b.y,f.x,f.y,b.x].join():[f.x,b.y,b.x,f.y].join();a=d.Util.template(this._url,{s:this._getSubdomain(a)});return a+d.Util.getParamString(this.wmsParams,a,!0)+"&BBOX="+b},setParams:function(a,b){return d.extend(this.wmsParams,a),b||this.redraw(),this}});d.tileLayer.wms=function(a,b){return new d.TileLayer.WMS(a,b)};d.TileLayer.Canvas=d.TileLayer.extend({options:{async:!1},initialize:function(a){d.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),
this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=d.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=d.Util.falseFn,a},_loadTile:function(a,b){a._layer=this;a._tilePoint=b;this._redrawTile(a);this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}});
d.tileLayer.canvas=function(a){return new d.TileLayer.Canvas(a)};d.ImageOverlay=d.Class.extend({includes:d.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a;this._bounds=d.latLngBounds(b);d.setOptions(this,c)},onAdd:function(a){this._map=a;this._image||this._initImage();a._panes.overlayPane.appendChild(this._image);a.on("viewreset",this._reset,this);a.options.zoomAnimation&&d.Browser.any3d&&a.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image);
a.off("viewreset",this._reset,this);a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a;this._image.src=
this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=d.DomUtil.create("img","leaflet-image-layer");this._map.options.zoomAnimation&&d.Browser.any3d?d.DomUtil.addClass(this._image,"leaflet-zoom-animated"):d.DomUtil.addClass(this._image,"leaflet-zoom-hide");this._updateOpacity();d.extend(this._image,{galleryimg:"no",onselectstart:d.Util.falseFn,onmousemove:d.Util.falseFn,onload:d.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=
this._map,c=this._image,f=b.getZoomScale(a.zoom),g=this._bounds.getNorthWest(),n=this._bounds.getSouthEast(),g=b._latLngToNewLayerPoint(g,a.zoom,a.center);a=b._latLngToNewLayerPoint(n,a.zoom,a.center)._subtract(g);a=g._add(a._multiplyBy(0.5*(1-1/f)));c.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(a)+" scale("+f+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);d.DomUtil.setPosition(a,
b);a.style.width=c.x+"px";a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){d.DomUtil.setOpacity(this._image,this.options.opacity)}});d.imageOverlay=function(a,b,c){return new d.ImageOverlay(a,b,c)};d.Icon=d.Class.extend({options:{className:""},initialize:function(a){d.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);
if(!c){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,f=this.options,g=d.point(f[b+"Size"]);c=d.point("shadow"===b?f.shadowAnchor||f.iconAnchor:f.iconAnchor);!c&&g&&(c=g.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+f.className;c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px");g&&(a.style.width=g.x+"px",
a.style.height=g.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return d.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}});d.icon=function(a){return new d.Icon(a)};d.Icon.Default=d.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];d.Browser.retina&&"icon"===a&&(a+="-2x");
b=d.Icon.Default.imagePath;if(!b)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return b+"/marker-"+a+".png"}});d.Icon.Default.imagePath=function(){var a,c,d,f,g=b.getElementsByTagName("script"),n=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;a=0;for(c=g.length;c>a;a++)if(d=g[a].src,d.match(n))return f=d.split(n)[0],(f?f+"/":"")+"images"}();d.Marker=d.Class.extend({includes:d.Mixin.Events,options:{icon:new d.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,
zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){d.setOptions(this,b);this._latlng=d.latLng(a)},onAdd:function(a){this._map=a;a.on("viewreset",this.update,this);this._initIcon();this.update();this.fire("add");a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable();this._removeIcon();this._removeShadow();this.fire("remove");
a.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=d.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();
this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",f=a.icon.createIcon(this._icon),b=!1;f!==this._icon&&(this._icon&&this._removeIcon(),b=!0,a.title&&(f.title=a.title),a.alt&&(f.alt=a.alt));d.DomUtil.addClass(f,c);a.keyboard&&(f.tabIndex="0");this._icon=f;this._initInteraction();a.riseOnHover&&d.DomEvent.on(f,"mouseover",this._bringToFront,this).on(f,"mouseout",this._resetZIndex,
this);var f=a.icon.createShadow(this._shadow),g=!1;f!==this._shadow&&(this._removeShadow(),g=!0);f&&d.DomUtil.addClass(f,c);this._shadow=f;1>a.opacity&&this._updateOpacity();a=this._map._panes;b&&a.markerPane.appendChild(this._icon);f&&g&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&d.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&
this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null},_setPos:function(a){d.DomUtil.setPosition(this._icon,a);this._shadow&&d.DomUtil.setPosition(this._shadow,a);this._zIndex=a.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick",
"mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.addClass(a,"leaflet-clickable");d.DomEvent.on(a,"click",this._onMouseClick,this);d.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)d.DomEvent.on(a,b[c],this._fireMouseEvent,this);d.Handler.MarkerDrag&&(this.dragging=new d.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&d.DomEvent.stopPropagation(a);
b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng});"contextmenu"===a.type&&this.hasEventListeners(a.type)&&d.DomEvent.preventDefault(a);"mousedown"!==a.type?d.DomEvent.stopPropagation(a):d.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=
a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){d.DomUtil.setOpacity(this._icon,this.options.opacity);this._shadow&&d.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});d.marker=function(a,b){return new d.Marker(a,b)};d.DivIcon=d.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){a=a&&"DIV"===a.tagName?a:b.createElement("div");
var c=this.options;return a.innerHTML=!1!==c.html?c.html:"",c.bgPos&&(a.style.backgroundPosition=-c.bgPos.x+"px "+-c.bgPos.y+"px"),this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});d.divIcon=function(a){return new d.DivIcon(a)};d.Map.mergeOptions({closePopupOnClick:!0});d.Popup=d.Class.extend({includes:d.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,
b){d.setOptions(this,a);this._source=b;this._animated=d.Browser.any3d&&this.options.zoomAnimation;this._isOpen=!1},onAdd:function(a){this._map=a;this._container||this._initLayout();var b=a.options.fadeAnimation;b&&d.DomUtil.setOpacity(this._container,0);a._panes.popupPane.appendChild(this._container);a.on(this._getEvents(),this);this.update();b&&d.DomUtil.setOpacity(this._container,1);this.fire("open");a.fire("popupopen",{popup:this});this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),
this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container);d.Util.falseFn(this._container.offsetWidth);a.off(this._getEvents(),this);a.options.fadeAnimation&&d.DomUtil.setOpacity(this._container,0);this._map=null;this.fire("close");a.fire("popupclose",{popup:this});this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=d.latLng(a),this._map&&(this._updatePosition(),
this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:
this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b=this._container=d.DomUtil.create("div","leaflet-popup "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"));this.options.closeButton&&(a=this._closeButton=d.DomUtil.create("a","leaflet-popup-close-button",b),a.href="#close",a.innerHTML="&#215;",d.DomEvent.disableClickPropagation(a),
d.DomEvent.on(a,"click",this._onCloseButtonClick,this));a=this._wrapper=d.DomUtil.create("div","leaflet-popup-content-wrapper",b);d.DomEvent.disableClickPropagation(a);this._contentNode=d.DomUtil.create("div","leaflet-popup-content",a);d.DomEvent.disableScrollPropagation(this._contentNode);d.DomEvent.on(a,"contextmenu",d.DomEvent.stopPropagation);this._tipContainer=d.DomUtil.create("div","leaflet-popup-tip-container",b);this._tip=d.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==
typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="";b.whiteSpace="nowrap";var c=a.offsetWidth,c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth);b.width=c+1+"px";b.whiteSpace="";b.height="";var c=a.offsetHeight,f=this.options.maxHeight;
f&&c>f?(b.height=f+"px",d.DomUtil.addClass(a,"leaflet-popup-scrolled")):d.DomUtil.removeClass(a,"leaflet-popup-scrolled");this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=d.point(this.options.offset);b&&d.DomUtil.setPosition(this._container,a);this._containerBottom=-c.y-(b?0:a.y);this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x);this._container.style.bottom=this._containerBottom+
"px";this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);d.DomUtil.setPosition(this._container,a)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,f=new d.Point(this._containerLeft,-b-this._containerBottom);this._animated&&f._add(d.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(f),g=d.point(this.options.autoPanPadding),
n=d.point(this.options.autoPanPaddingTopLeft||g),g=d.point(this.options.autoPanPaddingBottomRight||g),q=a.getSize(),r=0,s=0;f.x+c+g.x>q.x&&(r=f.x+c-q.x+g.x);0>f.x-r-n.x&&(r=f.x-n.x);f.y+b+g.y>q.y&&(s=f.y+b-q.y+g.y);0>f.y-s-n.y&&(s=f.y-n.y);(r||s)&&a.fire("autopanstart").panBy([r,s])}},_onCloseButtonClick:function(a){this._close();d.DomEvent.stop(a)}});d.popup=function(a,b){return new d.Popup(a,b)};d.Map.include({openPopup:function(a,b,c){(this.closePopup(),a instanceof d.Popup)||(a=(new d.Popup(c)).setLatLng(b).setContent(a));
return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}});d.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():
this.openPopup()),this},bindPopup:function(a,b){var c=d.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(d.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=d.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof d.Popup?(d.setOptions(a,b),this._popup=a):this._popup=(new d.Popup(b,this)).setContent(a),this},setPopupContent:function(a){return this._popup&&
this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}});d.LayerGroup=d.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);
return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){a=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(a){return a?a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],
c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a;this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a);this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[],b;for(b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return d.stamp(a)}});
d.layerGroup=function(a){return new d.LayerGroup(a)};d.FeatureGroup=d.LayerGroup.extend({includes:d.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?
(a in this._layers&&(a=this._layers[a]),a.off(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},
bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new d.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof d.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=d.extend({layer:a.target,target:this},a);this.fire(a.type,a)}});d.featureGroup=function(a){return new d.FeatureGroup(a)};d.Path=d.Class.extend({includes:[d.Mixin.Events],statics:{CLIP_PADDING:function(){var b=((d.Browser.mobile?1280:2E3)/Math.max(a.outerWidth,a.outerHeight)-
1)/2;return Math.max(0,Math.min(0.5,b))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:0.5,fill:!1,fillColor:null,fillOpacity:0.2,clickable:!0},initialize:function(a){d.setOptions(this,a)},onAdd:function(a){this._map=a;this._container||(this._initElements(),this._initEvents());this.projectLatlngs();this._updatePath();this._container&&this._map._pathRoot.appendChild(this._container);this.fire("add");a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},
this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;d.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null);a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return d.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}});
d.Map.include({_updatePathViewport:function(){var a=d.Path.CLIP_PADDING,b=this.getSize(),c=d.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),a=c.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new d.Bounds(c,a)}});d.Path.SVG_NS="http://www.w3.org/2000/svg";d.Browser.svg=!(!b.createElementNS||!b.createElementNS(d.Path.SVG_NS,"svg").createSVGRect);d.Path=d.Path.extend({statics:{SVG:d.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;
return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return b.createElementNS(d.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");this.options.className&&d.DomUtil.addClass(this._path,
this.options.className);this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round"));this.options.fill&&this._path.setAttribute("fill-rule","evenodd");this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents);this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none");this._updateStyle()},_updateStyle:function(){this.options.stroke?
(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke",
"none");this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0");this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!d.Browser.svg&&d.Browser.vml||d.DomUtil.addClass(this._path,"leaflet-clickable");d.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=
"dblclick mousedown mouseover mouseout mousemove contextmenu".split(" "),b=0;b<a.length;b++)d.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),f=b.containerPointToLayerPoint(c),b=b.layerPointToLatLng(f);this.fire(a.type,{latlng:b,layerPoint:f,containerPoint:c,originalEvent:a});
"contextmenu"===a.type&&d.DomEvent.preventDefault(a);"mousemove"!==a.type&&d.DomEvent.stopPropagation(a)}}});d.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=d.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&d.Browser.any3d?(d.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):d.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",
this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom);a=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(a)+" scale("+b+") ";this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,a=c.x-b.x,c=c.y-b.y,f=this._pathRoot,
g=this._panes.overlayPane;d.Browser.mobileWebkit&&g.removeChild(f);d.DomUtil.setPosition(f,b);f.setAttribute("width",a);f.setAttribute("height",c);f.setAttribute("viewBox",[b.x,b.y,a,c].join(" "));d.Browser.mobileWebkit&&g.appendChild(f)}}});d.Path.include({bindPopup:function(a,b){return a instanceof d.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new d.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),
this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng);this._map.openPopup(this._popup)}});
d.Browser.vml=!d.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(d){return!1}}();d.Path=d.Browser.svg||!d.Browser.vml?d.Path:d.Path.extend({statics:{VML:!0,CLIP_PADDING:0.02},_createElement:function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+
a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");d.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:""));this.options.clickable&&d.DomUtil.addClass(a,"leaflet-clickable");a.coordsize="1 1";this._path=this._createElement("path");a.appendChild(this._path);this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,
b=this._fill,c=this.options,f=this._container;f.stroked=c.stroke;f.filled=c.fill;c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",f.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,a.dashStyle=c.dashArray?d.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):"",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(f.removeChild(a),this._stroke=null);c.fill?(b||(b=this._fill=
this._createElement("fill"),f.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(f.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none";this._path.v=this.getPathString()+" ";a.display=""}});d.Map.include(d.Browser.svg||!d.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=b.createElement("div");a.className="leaflet-vml-container";this._panes.overlayPane.appendChild(a);this.on("moveend",this._updatePathViewport);
this._updatePathViewport()}}});d.Browser.canvas=!!b.createElement("canvas").getContext;d.Path=d.Path.SVG&&!a.L_PREFER_CANVAS||!d.Browser.canvas?d.Path:d.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return d.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);this.options.clickable&&
(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this));this._requestUpdate();this._map=null},_requestUpdate:function(){this._map&&!d.Path._updateRequest&&(d.Path._updateRequest=d.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){d.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=
a.weight,this._ctx.strokeStyle=a.color);a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b,c,f,g,n;this._ctx.beginPath();a=0;for(c=this._parts.length;c>a;a++){b=0;for(f=this._parts[a].length;f>b;b++)g=this._parts[a][b],n=(0===b?"move":"line")+"To",this._ctx[n](g.x,g.y);this instanceof d.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath();a.save();
this._updateStyle();b.fill&&(a.globalAlpha=b.fillOpacity,a.fill());b.stroke&&(a.globalAlpha=b.opacity,a.stroke());a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=
!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}});d.Map.include(d.Path.SVG&&!a.L_PREFER_CANVAS||!d.Browser.canvas?{}:{_initPathRoot:function(){var a,c=this._pathRoot;c||(c=this._pathRoot=b.createElement("canvas"),c.style.position="absolute",a=this._canvasCtx=c.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(c),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",
this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,a=a.max.subtract(b),c=this._pathRoot;d.DomUtil.setPosition(c,b);c.width=a.x;c.height=a.y;c.getContext("2d").translate(-b.x,-b.y)}}});d.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,
c),this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var d=a.length,f=new (typeof Uint8Array!=c+""?Uint8Array:Array)(d);f[0]=f[d-1]=1;this._simplifyDPStep(a,f,b,0,d-1);var g,n=[];for(g=0;d>g;g++)f[g]&&n.push(a[g]);return n},_simplifyDPStep:function(a,b,c,d,f){var g,q,r,s=0;for(q=d+1;f-1>=q;q++)r=this._sqClosestPointOnSegment(a[q],
a[d],a[f],!0),r>s&&(g=q,s=r);s>c&&(b[g]=1,this._simplifyDPStep(a,b,c,d,g),this._simplifyDPStep(a,b,c,g,f))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,f=0,g=a.length;g>d;d++)this._sqDist(a[d],a[f])>b&&(c.push(a[d]),f=d);return g-1>f&&c.push(a[g-1]),c},clipSegment:function(a,b,c,d){var f,g,q=d?this._lastCode:this._getBitCode(a,c),r=this._getBitCode(b,c);for(this._lastCode=r;;){if(!(q|r))return[a,b];if(q&r)return!1;d=q||r;f=this._getEdgeIntersection(a,b,d,c);g=this._getBitCode(f,c);d===q?(a=f,
q=g):(b=f,r=g)}},_getEdgeIntersection:function(a,b,c,f){var g=b.x-a.x;b=b.y-a.y;var n=f.min;f=f.max;return 8&c?new d.Point(a.x+g*(f.y-a.y)/b,f.y):4&c?new d.Point(a.x+g*(n.y-a.y)/b,n.y):2&c?new d.Point(f.x,a.y+b*(f.x-a.x)/g):1&c?new d.Point(n.x,a.y+b*(n.x-a.x)/g):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,f){var g,n=
b.x;b=b.y;var q=c.x-n,r=c.y-b,s=q*q+r*r;return 0<s&&(g=((a.x-n)*q+(a.y-b)*r)/s,1<g?(n=c.x,b=c.y):0<g&&(n+=q*g,b+=r*g)),q=a.x-n,r=a.y-b,f?q*q+r*r:new d.Point(n,b)}};d.Polyline=d.Path.extend({initialize:function(a,b){d.Path.prototype.initialize.call(this,b);this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=
0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(d.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,f=1/0,g=this._parts,n=null,q=0,r=g.length;r>
q;q++)for(var s=g[q],u=1,w=s.length;w>u;u++){b=s[u-1];c=s[u];var v=d.LineUtil._sqClosestPointOnSegment(a,b,c,!0);f>v&&(f=v,n=d.LineUtil._sqClosestPointOnSegment(a,b,c))}return n&&(n.distance=Math.sqrt(f)),n},getBounds:function(){return new d.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,f,g=b?a:[];c=0;for(f=a.length;f>c;c++){if(d.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;g[c]=d.latLng(a[c])}return g},_initEvents:function(){d.Path.prototype._initEvents.call(this)},
_getPathPartStr:function(a){for(var b,c=d.Path.VML,f=0,g=a.length,n="";g>f;f++)b=a[f],c&&b._round(),n+=(f?"L":"M")+b.x+" "+b.y;return n},_clipPoints:function(){var a,b,c,f=this._originalPoints,g=f.length;if(this.options.noClip)return void(this._parts=[f]);var n=this._parts=[],q=this._map._pathViewport,r=d.LineUtil;for(b=a=0;g-1>a;a++)(c=r.clipSegment(f[a],f[a+1],q,a))&&(n[b]=n[b]||[],n[b].push(c[0]),(c[1]!==f[a+1]||a===g-2)&&(n[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,
b=d.LineUtil,c=0,f=a.length;f>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),d.Path.prototype._updatePath.call(this))}});d.polyline=function(a,b){return new d.Polyline(a,b)};d.PolyUtil={};d.PolyUtil.clipPolygon=function(a,b){var c,f,g,n,q,r,s,u,w=[1,4,2,8],v=d.LineUtil;f=0;for(r=a.length;r>f;f++)a[f]._code=v._getBitCode(a[f],b);for(n=0;4>n;n++){s=w[n];c=[];f=0;r=a.length;for(g=r-1;r>f;g=f++)q=a[f],g=a[g],q._code&
s?g._code&s||(u=v._getEdgeIntersection(g,q,s,b),u._code=v._getBitCode(u,b),c.push(u)):(g._code&s&&(u=v._getEdgeIntersection(g,q,s,b),u._code=v._getBitCode(u,b),c.push(u)),c.push(q));a=c}return a};d.Polygon=d.Polyline.extend({options:{fill:!0},initialize:function(a,b){d.Polyline.prototype.initialize.call(this,a,b);this._initWithHoles(a)},_initWithHoles:function(a){var b,c;if(a&&d.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),a=0,b=
this._holes.length;b>a;a++)c=this._holes[a]=this._convertLatLngs(this._holes[a]),c[0].equals(c[c.length-1])&&c.pop();a=this._latlngs;2<=a.length&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(d.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,f;a=0;for(c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,f=this._holes[a].length;f>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&
d.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):d.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=[];if(this._parts=[this._originalPoints].concat(this._holePoints),!this.options.noClip){for(var b=0,c=this._parts.length;c>b;b++){var f=d.PolyUtil.clipPolygon(this._parts[b],this._map._pathViewport);f.length&&a.push(f)}this._parts=a}},_getPathPartStr:function(a){return d.Polyline.prototype._getPathPartStr.call(this,a)+(d.Browser.svg?"z":"x")}});
d.polygon=function(a,b){return new d.Polygon(a,b)};(function(){function a(b){return d.FeatureGroup.extend({initialize:function(a,b){this._layers={};this._options=b;this.setLatLngs(a)},setLatLngs:function(a){var c=0,d=a.length;for(this.eachLayer(function(b){d>c?b.setLatLngs(a[c++]):this.removeLayer(b)},this);d>c;)this.addLayer(new b(a[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}d.MultiPolyline=a(d.Polyline);d.MultiPolygon=
a(d.Polygon);d.multiPolyline=function(a,b){return new d.MultiPolyline(a,b)};d.multiPolygon=function(a,b){return new d.MultiPolygon(a,b)}})();d.Rectangle=d.Polygon.extend({initialize:function(a,b){d.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=d.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});d.rectangle=function(a,b){return new d.Rectangle(a,
b)};d.Circle=d.Path.extend({initialize:function(a,b,c){d.Path.prototype.initialize.call(this,c);this._latlng=d.latLng(a);this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=d.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,a=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b);this._radius=Math.max(this._point.x-a.x,1)},getBounds:function(){var a=
this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new d.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":d.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-0.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/
40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(d.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}});d.circle=function(a,b,c){return new d.Circle(a,b,c)};d.CircleMarker=d.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){d.Circle.prototype.initialize.call(this,a,null,b);this._radius=this.options.radius},
projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){d.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setLatLng:function(a){return d.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}});d.circleMarker=function(a,b){return new d.CircleMarker(a,
b)};d.Polyline.include(d.Path.CANVAS?{_containsPoint:function(a,b){var c,f,g,n,q,r,s,u=this.options.weight/2;d.Browser.touch&&(u+=10);c=0;for(n=this._parts.length;n>c;c++)for(s=this._parts[c],f=0,q=s.length,g=q-1;q>f;g=f++)if((b||0!==f)&&(r=d.LineUtil.pointToSegmentDistance(a,s[g],s[f]),u>=r))return!0;return!1}}:{});d.Polygon.include(d.Path.CANVAS?{_containsPoint:function(a){var b,c,f,g,n,q,r,s=!1;if(d.Polyline.prototype._containsPoint.call(this,a,!0))return!0;g=0;for(q=this._parts.length;q>g;g++)for(b=
this._parts[g],n=0,r=b.length,f=r-1;r>n;f=n++)c=b[n],f=b[f],c.y>a.y!=f.y>a.y&&a.x<(f.x-c.x)*(a.y-c.y)/(f.y-c.y)+c.x&&(s=!s);return s}}:{});d.Circle.include(d.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath();this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this.options.stroke?this.options.weight/2:0;return a.distanceTo(this._point)<=this._radius+b}}:{});d.CircleMarker.include(d.Path.CANVAS?{_updateStyle:function(){d.Path.prototype._updateStyle.call(this)}}:
{});d.GeoJSON=d.FeatureGroup.extend({initialize:function(a,b){d.setOptions(this,b);this._layers={};a&&this.addData(a)},addData:function(a){var b,c,f=d.Util.isArray(a)?a:a.features;if(f){a=0;for(b=f.length;b>a;a++)c=f[a],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(f[a]);return this}f=this.options;if(!f.filter||f.filter(a))return b=d.GeoJSON.geometryToLayer(a,f.pointToLayer,f.coordsToLatLng,f),b.feature=d.GeoJSON.asFeature(a),b.defaultOptions=b.options,this.resetStyle(b),f.onEachFeature&&
f.onEachFeature(a,b),this.addLayer(b)},resetStyle:function(a){var b=this.options.style;b&&(d.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature));a.setStyle&&a.setStyle(b)}});d.extend(d.GeoJSON,{geometryToLayer:function(a,b,c,f){var g,n,q,r="Feature"===a.type?a.geometry:a,s=r.coordinates,u=[];switch(c=c||this.coordsToLatLng,r.type){case "Point":return g=
c(s),b?b(a,g):new d.Marker(g);case "MultiPoint":n=0;for(q=s.length;q>n;n++)g=c(s[n]),u.push(b?b(a,g):new d.Marker(g));return new d.FeatureGroup(u);case "LineString":return n=this.coordsToLatLngs(s,0,c),new d.Polyline(n,f);case "Polygon":if(2===s.length&&!s[1].length)throw Error("Invalid GeoJSON object.");return n=this.coordsToLatLngs(s,1,c),new d.Polygon(n,f);case "MultiLineString":return n=this.coordsToLatLngs(s,1,c),new d.MultiPolyline(n,f);case "MultiPolygon":return n=this.coordsToLatLngs(s,2,
c),new d.MultiPolygon(n,f);case "GeometryCollection":n=0;for(q=r.geometries.length;q>n;n++)u.push(this.geometryToLayer({geometry:r.geometries[n],type:"Feature",properties:a.properties},b,c,f));return new d.FeatureGroup(u);default:throw Error("Invalid GeoJSON object.");}},coordsToLatLng:function(a){return new d.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,f,g,q=[];f=0;for(g=a.length;g>f;f++)d=b?this.coordsToLatLngs(a[f],b-1,c):(c||this.coordsToLatLng)(a[f]),q.push(d);return q},latLngToCoords:function(a){var b=
[a.lng,a.lat];return a.alt!==c&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,f=a.length;f>c;c++)b.push(d.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?d.extend({},a.feature,{geometry:b}):d.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var g={toGeoJSON:function(){return d.GeoJSON.getFeature(this,{type:"Point",coordinates:d.GeoJSON.latLngToCoords(this.getLatLng())})}};d.Marker.include(g);
d.Circle.include(g);d.CircleMarker.include(g);d.Polyline.include({toGeoJSON:function(){return d.GeoJSON.getFeature(this,{type:"LineString",coordinates:d.GeoJSON.latLngsToCoords(this.getLatLngs())})}});d.Polygon.include({toGeoJSON:function(){var a,b,c,f=[d.GeoJSON.latLngsToCoords(this.getLatLngs())];if(f[0].push(f[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=d.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),f.push(c);return d.GeoJSON.getFeature(this,{type:"Polygon",coordinates:f})}});
(function(){function a(b){return function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),d.GeoJSON.getFeature(this,{type:b,coordinates:a})}}d.MultiPolyline.include({toGeoJSON:a("MultiLineString")});d.MultiPolygon.include({toGeoJSON:a("MultiPolygon")});d.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,f=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var g=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&
(b=a.toGeoJSON(),f.push(g?b.geometry:d.GeoJSON.asFeature(b)))}),g?d.GeoJSON.getFeature(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}})})();d.geoJson=function(a,b){return new d.GeoJSON(a,b)};d.DomEvent={addListener:function(a,b,c,f){var g,n,q,r=d.stamp(c),s="_leaflet_"+b+r;return a[s]?this:(g=function(b){return c.call(f||a,b||d.DomEvent._getEvent())},d.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,g,r):(d.Browser.touch&&"dblclick"===b&&
this.addDoubleTapListener&&this.addDoubleTapListener(a,g,r),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",g,!1),a.addEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?(n=g,q="mouseenter"===b?"mouseover":"mouseout",g=function(b){return d.DomEvent._checkMouse(a,b)?n(b):void 0},a.addEventListener(q,g,!1)):"click"===b&&d.Browser.android?(n=g,g=function(a){return d.DomEvent._filterClick(a,n)},a.addEventListener(b,g,!1)):a.addEventListener(b,g,!1):"attachEvent"in a&&
a.attachEvent("on"+b,g),a[s]=g,this))},removeListener:function(a,b,c){c=d.stamp(c);var f="_leaflet_"+b+c,g=a[f];return g?(d.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,c):d.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,c):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",
g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[f]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,d.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=d.DomEvent.stopPropagation;return d.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=d.DomEvent.stopPropagation,c=d.Draggable.START.length-1;0<=c;c--)d.DomEvent.on(a,d.Draggable.START[c],
b);return d.DomEvent.on(a,"click",d.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return d.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new d.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new d.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/
120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){d.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=
a.timeStamp||a.originalEvent.timeStamp,f=d.DomEvent._lastClick&&c-d.DomEvent._lastClick;return f&&100<f&&1E3>f||a.target._simulatedClick&&!a._simulated?void d.DomEvent.stop(a):(d.DomEvent._lastClick=c,b(a))}};d.DomEvent.on=d.DomEvent.addListener;d.DomEvent.off=d.DomEvent.removeListener;d.Draggable=d.Class.extend({includes:d.Mixin.Events,statics:{START:d.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},
MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a;this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=d.Draggable.START.length-1;0<=a;a--)d.DomEvent.on(this._dragStartTarget,d.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=d.Draggable.START.length-1;0<=a;a--)d.DomEvent.off(this._dragStartTarget,d.Draggable.START[a],this._onDown,
this);this._moved=this._enabled=!1}},_onDown:function(a){if(this._moved=!1,!(a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(d.DomEvent.stopPropagation(a),d.Draggable._disabled||(d.DomUtil.disableImageDrag(),d.DomUtil.disableTextSelection(),this._moving)))){var c=a.touches?a.touches[0]:a;this._startPoint=new d.Point(c.clientX,c.clientY);this._startPos=this._newPos=d.DomUtil.getPosition(this._element);d.DomEvent.on(b,d.Draggable.MOVE[a.type],this._onMove,this).on(b,d.Draggable.END[a.type],this._onUp,
this)}},_onMove:function(a){if(a.touches&&1<a.touches.length)return void(this._moved=!0);var c=a.touches&&1===a.touches.length?a.touches[0]:a,c=(new d.Point(c.clientX,c.clientY)).subtract(this._startPoint);(c.x||c.y)&&(d.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=d.DomUtil.getPosition(this._element).subtract(c),d.DomUtil.addClass(b.body,"leaflet-dragging"),d.DomUtil.addClass(a.target||a.srcElement,"leaflet-drag-target")),this._newPos=this._startPos.add(c),
this._moving=!0,d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))},_updatePosition:function(){this.fire("predrag");d.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(a){d.DomUtil.removeClass(b.body,"leaflet-dragging");d.DomUtil.removeClass(a.target||a.srcElement,"leaflet-drag-target");for(var c in d.Draggable.MOVE)d.DomEvent.off(b,d.Draggable.MOVE[c],this._onMove).off(b,d.Draggable.END[c],
this._onUp);d.DomUtil.enableImageDrag();d.DomUtil.enableTextSelection();this._moved&&this._moving&&(d.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));this._moving=!1}});d.Handler=d.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});d.Map.mergeOptions({dragging:!0,
inertia:!d.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:d.Browser.touch?32:18,easeLinearity:0.25,worldCopyJump:!1});d.Map.Drag=d.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new d.Draggable(a._mapPane,a._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,
this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop();a.fire("movestart").fire("dragstart");a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b);this._times.push(a);
200<a-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(a).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,f=(d-b+c)%a+b-c,a=(d+b+c)%a-b-c,c=Math.abs(f+c)<Math.abs(a+c)?f:a;this._draggable._newPos.x=c},
_onDragEnd:function(a){var b=this._map,c=b.options,f=+new Date-this._lastTime,g=!c.inertia||f>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),g)b.fire("moveend");else{a=this._lastPos.subtract(this._positions[0]);var n=c.easeLinearity;a=a.multiplyBy(n/((this._lastTime+f-this._times[0])/1E3));g=a.distanceTo([0,0]);f=Math.min(c.inertiaMaxSpeed,g);a=a.multiplyBy(f/g);var q=f/(c.inertiaDeceleration*n),r=a.multiplyBy(-q/2).round();r.x&&r.y?(r=b._limitOffset(r,b.options.maxBounds),d.Util.requestAnimFrame(function(){b.panBy(r,
{duration:q,easeLinearity:n,noMoveStart:!0})})):b.fire("moveend")}}});d.Map.addInitHook("addHandler","dragging",d.Map.Drag);d.Map.mergeOptions({doubleClickZoom:!0});d.Map.DoubleClickZoom=d.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,
c)}});d.Map.addInitHook("addHandler","doubleClickZoom",d.Map.DoubleClickZoom);d.Map.mergeOptions({scrollWheelZoom:!0});d.Map.ScrollWheelZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);d.DomEvent.on(this._map._container,"MozMousePixelScroll",d.DomEvent.preventDefault);this._delta=0},removeHooks:function(){d.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);d.DomEvent.off(this._map._container,"MozMousePixelScroll",
d.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=d.DomEvent.getWheelDelta(a);this._delta+=b;this._lastMousePos=this._map.mouseEventToContainerPoint(a);this._startTime||(this._startTime=+new Date);b=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(d.bind(this._performZoom,this),b);d.DomEvent.preventDefault(a);d.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom(),b=0<b?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,
4),-4),b=a._limitZoom(c+b)-c;this._delta=0;this._startTime=null;b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}});d.Map.addInitHook("addHandler","scrollWheelZoom",d.Map.ScrollWheelZoom);d.extend(d.DomEvent,{_touchstart:d.Browser.msPointer?"MSPointerDown":d.Browser.pointer?"pointerdown":"touchstart",_touchend:d.Browser.msPointer?"MSPointerUp":d.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,c,f){function g(a){var b;if(d.Browser.pointer?
(v.push(a.pointerId),b=v.length):b=a.touches.length,!(1<b)){b=Date.now();var c=b-(n||b);q=a.touches?a.touches[0]:a;r=0<c&&s>=c;n=b}}function p(a){if(d.Browser.pointer){a=v.indexOf(a.pointerId);if(-1===a)return;v.splice(a,1)}if(r){if(d.Browser.pointer){var b={},f;for(f in q)a=q[f],b[f]="function"==typeof a?a.bind(q):a;q=b}q.type="dblclick";c(q);n=null}}var n,q,r=!1,s=250,u=this._touchstart,w=this._touchend,v=[];a["_leaflet_"+u+f]=g;a["_leaflet_"+w+f]=p;f=d.Browser.pointer?b.documentElement:a;return a.addEventListener(u,
g,!1),f.addEventListener(w,p,!1),d.Browser.pointer&&f.addEventListener(d.DomEvent.POINTER_CANCEL,p,!1),this},removeDoubleTapListener:function(a,c){return a.removeEventListener(this._touchstart,a["_leaflet_"+this._touchstart+c],!1),(d.Browser.pointer?b.documentElement:a).removeEventListener(this._touchend,a["_leaflet_"+this._touchend+c],!1),d.Browser.pointer&&b.documentElement.removeEventListener(d.DomEvent.POINTER_CANCEL,a["_leaflet_"+this._touchend+c],!1),this}});d.extend(d.DomEvent,{POINTER_DOWN:d.Browser.msPointer?
"MSPointerDown":"pointerdown",POINTER_MOVE:d.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:d.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:d.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case "touchstart":return this.addPointerListenerStart(a,b,c,d);case "touchend":return this.addPointerListenerEnd(a,b,c,d);case "touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type";
}},addPointerListenerStart:function(a,c,f,g){var p=this._pointers;c=function(a){d.DomEvent.preventDefault(a);for(var b=!1,c=0;c<p.length;c++)if(p[c].pointerId===a.pointerId){b=!0;break}b||p.push(a);a.touches=p.slice();a.changedTouches=[a];f(a)};(a["_leaflet_touchstart"+g]=c,a.addEventListener(this.POINTER_DOWN,c,!1),this._pointerDocumentListener)||(a=function(a){for(var b=0;b<p.length;b++)if(p[b].pointerId===a.pointerId){p.splice(b,1);break}},b.documentElement.addEventListener(this.POINTER_UP,a,!1),
b.documentElement.addEventListener(this.POINTER_CANCEL,a,!1),this._pointerDocumentListener=!0);return this},addPointerListenerMove:function(a,b,c,d){function f(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice();a.changedTouches=[a];c(a)}}var g=this._pointers;return a["_leaflet_touchmove"+d]=f,a.addEventListener(this.POINTER_MOVE,f,!1),this},addPointerListenerEnd:function(a,
b,c,d){var f=this._pointers;b=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice();a.changedTouches=[a];c(a)};return a["_leaflet_touchend"+d]=b,a.addEventListener(this.POINTER_UP,b,!1),a.addEventListener(this.POINTER_CANCEL,b,!1),this},removePointerListener:function(a,b,c){c=a["_leaflet_"+b+c];switch(b){case "touchstart":a.removeEventListener(this.POINTER_DOWN,c,!1);break;case "touchmove":a.removeEventListener(this.POINTER_MOVE,c,!1);break;
case "touchend":a.removeEventListener(this.POINTER_UP,c,!1),a.removeEventListener(this.POINTER_CANCEL,c,!1)}return this}});d.Map.mergeOptions({touchZoom:d.Browser.touch&&!d.Browser.android23,bounceAtZoomLimits:!0});d.Map.TouchZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){d.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===
a.touches.length&&!c._animatingZoom&&!this._zooming){var f=c.mouseEventToLayerPoint(a.touches[0]),g=c.mouseEventToLayerPoint(a.touches[1]),p=c._getCenterLayerPoint();this._startCenter=f.add(g)._divideBy(2);this._startDist=f.distanceTo(g);this._moved=!1;this._zooming=!0;this._centerOffset=p.subtract(this._startCenter);c._panAnim&&c._panAnim.stop();d.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this);d.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=
this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),f=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(f)/this._startDist;this._delta=c._add(f)._divideBy(2)._subtract(this._startCenter);1===this._scale||!b.options.bounceAtZoomLimits&&(b.getZoom()===b.getMinZoom()&&1>this._scale||b.getZoom()===b.getMaxZoom()&&1<this._scale)||(this._moved||(d.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=
!0),d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),d.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),b=a.layerPointToLatLng(b),c=a.getScaleZoom(this._scale);a._animateZoom(b,c,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1;d.DomUtil.removeClass(a._mapPane,
"leaflet-touching");d.Util.cancelAnimFrame(this._animRequest);d.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var c=this._getScaleOrigin(),f=a.layerPointToLatLng(c),g=a.getZoom(),p=a.getScaleZoom(this._scale)-g,p=0<p?Math.ceil(p):Math.floor(p),g=a._limitZoom(g+p),p=a.getZoomScale(g)/this._scale;a._animateZoom(f,g,c,p)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}});d.Map.addInitHook("addHandler",
"touchZoom",d.Map.TouchZoom);d.Map.mergeOptions({tap:!0,tapTolerance:15});d.Map.Tap=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){d.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(d.DomEvent.preventDefault(a),this._fireClick=!0,1<a.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0];a=c.target;this._startPos=this._newPos=
new d.Point(c.clientX,c.clientY);a.tagName&&"a"===a.tagName.toLowerCase()&&d.DomUtil.addClass(a,"leaflet-active");this._holdTimeout=setTimeout(d.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1E3);d.DomEvent.on(b,"touchmove",this._onMove,this).on(b,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),d.DomEvent.off(b,"touchmove",this._onMove,this).off(b,"touchend",this._onUp,this),this._fireClick&&a&&
a.changedTouches){a=a.changedTouches[0];var c=a.target;c&&c.tagName&&"a"===c.tagName.toLowerCase()&&d.DomUtil.removeClass(c,"leaflet-active");this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){a=a.touches[0];this._newPos=new d.Point(a.clientX,a.clientY)},_simulateEvent:function(c,d){var f=b.createEvent("MouseEvents");f._simulated=!0;d.target._simulatedClick=!0;f.initMouseEvent(c,
!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);d.target.dispatchEvent(f)}});d.Browser.touch&&!d.Browser.pointer&&d.Map.addInitHook("addHandler","tap",d.Map.Tap);d.Map.mergeOptions({boxZoom:!0});d.Map.BoxZoom=d.Handler.extend({initialize:function(a){this._map=a;this._container=a._container;this._pane=a._panes.overlayPane;this._moved=!1},addHooks:function(){d.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){d.DomEvent.off(this._container,
"mousedown",this._onMouseDown);this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!a.shiftKey||1!==a.which&&1!==a.button?!1:(d.DomUtil.disableTextSelection(),d.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void d.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).on(b,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=d.DomUtil.create("div","leaflet-zoom-box",
this._pane),d.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,f=this._map.mouseEventToLayerPoint(a);a=f.subtract(b);b=new d.Point(Math.min(f.x,b.x),Math.min(f.y,b.y));d.DomUtil.setPosition(c,b);this._moved=!0;c.style.width=Math.max(0,Math.abs(a.x)-4)+"px";c.style.height=Math.max(0,Math.abs(a.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=
"");d.DomUtil.enableTextSelection();d.DomUtil.enableImageDrag();d.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp).off(b,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map;a=b.mouseEventToLayerPoint(a);this._startLayerPoint.equals(a)||(a=new d.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(a)),b.fitBounds(a),b.fire("boxzoomend",{boxZoomBounds:a}))},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});d.Map.addInitHook("addHandler",
"boxZoom",d.Map.BoxZoom);d.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1});d.Map.Keyboard=d.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a;this._setPanOffset(a.options.keyboardPanOffset);this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0");d.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",
this._onBlur,this).on(a,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;d.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,f=c.scrollTop||d.scrollTop,
c=c.scrollLeft||d.scrollLeft;this._map._container.focus();a.scrollTo(c,f)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},f=this.keyCodes;b=0;for(c=f.left.length;c>b;b++)d[f.left[b]]=[-1*a,0];b=0;for(c=f.right.length;c>b;b++)d[f.right[b]]=[a,0];b=0;for(c=f.down.length;c>b;b++)d[f.down[b]]=[0,a];b=0;for(c=f.up.length;c>b;b++)d[f.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,
c,d=this._zoomKeys={},f=this.keyCodes;b=0;for(c=f.zoomIn.length;c>b;b++)d[f.zoomIn[b]]=a;b=0;for(c=f.zoomOut.length;c>b;b++)d[f.zoomOut[b]]=-a},_addHooks:function(){d.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){d.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]);c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in
this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}d.DomEvent.stop(a)}});d.Map.addInitHook("addHandler","keyboard",d.Map.Keyboard);d.Handler.MarkerDrag=d.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new d.Draggable(a,a));this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable();d.DomUtil.addClass(this._marker._icon,
"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable();d.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=d.DomUtil.getPosition(a._icon),
f=a._map.layerPointToLatLng(c);b&&d.DomUtil.setPosition(b,c);a._latlng=f;a.fire("move",{latlng:f}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}});d.Control=d.Class.extend({options:{position:"topright"},initialize:function(a){d.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},
addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition();a=a._controlCorners[c];return d.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?a.insertBefore(b,a.firstChild):a.appendChild(b),this},removeFrom:function(a){var b=this.getPosition();return a._controlCorners[b].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}});d.control=function(a){return new d.Control(a)};
d.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(g,h){b[g+h]=d.DomUtil.create("div",c+g+" "+c+h,f)}var b=this._controlCorners={},c="leaflet-",f=this._controlContainer=d.DomUtil.create("div",c+"control-container",this._container);a("top","left");a("top","right");a("bottom","left");a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});d.Control.Zoom=
d.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b=d.DomUtil.create("div","leaflet-control-zoom leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,"leaflet-control-zoom-in",b,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,"leaflet-control-zoom-out",b,this._zoomOut,this),this._updateDisabled(),
a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,f,g,n){c=d.DomUtil.create("a",c,f);c.innerHTML=a;c.href="#";c.title=b;a=d.DomEvent.stopPropagation;return d.DomEvent.on(c,"click",a).on(c,"mousedown",a).on(c,"dblclick",a).on(c,"click",d.DomEvent.preventDefault).on(c,"click",
g,n).on(c,"click",this._refocusOnMap,n),c},_updateDisabled:function(){var a=this._map;d.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled");d.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMinZoom()&&d.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMaxZoom()&&d.DomUtil.addClass(this._zoomInButton,"leaflet-disabled")}});d.Map.mergeOptions({zoomControl:!0});d.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new d.Control.Zoom,
this.addControl(this.zoomControl))});d.control.zoom=function(a){return new d.Control.Zoom(a)};d.Control.Attribution=d.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){d.setOptions(this,a);this._attributions={}},onAdd:function(a){this._container=d.DomUtil.create("div","leaflet-control-attribution");d.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&
this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?
(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[],b;for(b in this._attributions)this._attributions[b]&&a.push(b);b=[];this.options.prefix&&b.push(this.options.prefix);a.length&&b.push(a.join(", "));this._container.innerHTML=b.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}});
d.Map.mergeOptions({attributionControl:!0});d.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new d.Control.Attribution).addTo(this))});d.control.attribution=function(a){return new d.Control.Attribution(a)};d.Control.Scale=d.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b=d.DomUtil.create("div","leaflet-control-scale"),c=this.options;return this._addScales(c,"leaflet-control-scale",
b),a.on(c.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=d.DomUtil.create("div",b+"-line",c));a.imperial&&(this._iScale=d.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,a=6378137*Math.PI*Math.cos(b*Math.PI/180)*(a.getNorthEast().lng-a.getSouthWest().lng)/180,b=this._map.getSize(),
c=this.options,d=0;0<b.x&&(d=c.maxWidth/b.x*a);this._updateScales(c,d)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b);a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px";this._mScale.innerHTML=1E3>b?b+" m":b/1E3+" km"},_updateImperial:function(a){var b,c,d;a*=3.2808399;var f=this._iScale;5280<a?(b=a/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):
(d=this._getRoundNum(a),f.style.width=this._getScaleWidth(d/a)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1);a/=b;return a=10<=a?10:5<=a?5:3<=a?3:2<=a?2:1,b*a}});d.control.scale=function(a){return new d.Control.Scale(a)};d.Control.Layers=d.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){d.setOptions(this,c);this._layers=
{};this._lastZIndex=0;this._handlingClick=!1;for(var f in a)this._addLayer(a[f],f);for(f in b)this._addLayer(b[f],f,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,
b,!0),this._update(),this},removeLayer:function(a){a=d.stamp(a);return delete this._layers[a],this._update(),this},_initLayout:function(){var a=this._container=d.DomUtil.create("div","leaflet-control-layers");a.setAttribute("aria-haspopup",!0);d.Browser.touch?d.DomEvent.on(a,"click",d.DomEvent.stopPropagation):d.DomEvent.disableClickPropagation(a).disableScrollPropagation(a);var b=this._form=d.DomUtil.create("form","leaflet-control-layers-list");if(this.options.collapsed){d.Browser.android||d.DomEvent.on(a,
"mouseover",this._expand,this).on(a,"mouseout",this._collapse,this);var c=this._layersLink=d.DomUtil.create("a","leaflet-control-layers-toggle",a);c.href="#";c.title="Layers";d.Browser.touch?d.DomEvent.on(c,"click",d.DomEvent.stop).on(c,"click",this._expand,this):d.DomEvent.on(c,"focus",this._expand,this);d.DomEvent.on(b,"click",function(){setTimeout(d.bind(this._onInputClick,this),0)},this);this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=d.DomUtil.create("div",
"leaflet-control-layers-base",b);this._separator=d.DomUtil.create("div","leaflet-control-layers-separator",b);this._overlaysList=d.DomUtil.create("div","leaflet-control-layers-overlays",b);a.appendChild(b)},_addLayer:function(a,b,c){var f=d.stamp(a);this._layers[f]={layer:a,name:b,overlay:c};this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var a,b,c=!1,
d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[d.stamp(a.layer)];b&&(this._handlingClick||this._update(),(a=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null)&&this._map.fire(a,b))},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';c&&(d+=' checked="checked"');
var d=d+"/>",f=b.createElement("div");return f.innerHTML=d,f.firstChild},_addItem:function(a){var c,f=b.createElement("label"),g=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=g):c=this._createRadioElement("leaflet-base-layers",g);c.layerId=d.stamp(a.layer);d.DomEvent.on(c,"click",this._onInputClick,this);g=b.createElement("span");g.innerHTML=" "+a.name;f.appendChild(c);f.appendChild(g);return(a.overlay?
this._overlaysList:this._baseLayersList).appendChild(f),f},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),f=d.length;this._handlingClick=!0;for(a=0;f>a;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1;this._refocusOnMap()},_expand:function(){d.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=
this._container.className.replace(" leaflet-control-layers-expanded","")}});d.control.layers=function(a,b,c){return new d.Control.Layers(a,b,c)};d.PosAnimation=d.Class.extend({includes:d.Mixin.Events,run:function(a,b,c,f){this.stop();this._el=a;this._inProgress=!0;this._newPos=b;this.fire("start");a.style[d.DomUtil.TRANSITION]="all "+(c||0.25)+"s cubic-bezier(0,0,"+(f||0.5)+",1)";d.DomEvent.on(a,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this);d.DomUtil.setPosition(a,b);d.Util.falseFn(a.offsetWidth);
this._stepTimer=setInterval(d.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(d.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),d.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,f=a.getComputedStyle(this._el);if(d.Browser.any3d){if(c=f[d.DomUtil.TRANSFORM].match(this._transformRe),
!c)return;b=parseFloat(c[1]);c=parseFloat(c[2])}else b=parseFloat(f.left),c=parseFloat(f.top);return new d.Point(b,c,!0)},_onTransitionEnd:function(){d.DomEvent.off(this._el,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this);this._inProgress&&(this._inProgress=!1,this._el.style[d.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}});d.Map.include({setView:function(a,b,f){if(b=b===c?this._zoom:this._limitZoom(b),a=this._limitCenter(d.latLng(a),
b,this.options.maxBounds),f=f||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!f.reset&&!0!==f)if(f.animate!==c&&(f.zoom=d.extend({animate:f.animate},f.zoom),f.pan=d.extend({animate:f.animate},f.pan)),this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,f.zoom):this._tryAnimatedPan(a,f.pan))return clearTimeout(this._sizeTimer),this;return this._resetView(a,b),this},panBy:function(a,b){if(a=d.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new d.PosAnimation,
this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),!1!==b.animate){d.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||0.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){d.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");
this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!0===(b&&b.animate)||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}});d.PosAnimation=d.DomUtil.TRANSITION?d.PosAnimation:d.PosAnimation.extend({run:function(a,b,c,f){this.stop();this._el=a;this._inProgress=!0;this._duration=c||0.25;this._easeOutPower=1/Math.max(f||0.5,0.2);this._startPos=d.DomUtil.getPosition(a);this._offset=b.subtract(this._startPos);this._startTime=+new Date;this.fire("start");
this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=d.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var a=+new Date-this._startTime,b=1E3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){a=this._startPos.add(this._offset.multiplyBy(a));d.DomUtil.setPosition(this._el,a);this.fire("step")},_complete:function(){d.Util.cancelAnimFrame(this._animId);
this._inProgress=!1;this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}});d.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});d.DomUtil.TRANSITION&&d.Map.addInitHook(function(){(this._zoomAnimated=this.options.zoomAnimation&&d.DomUtil.TRANSITION&&d.Browser.any3d&&!d.Browser.android23&&!d.Browser.mobileOpera)&&d.DomEvent.on(this._mapPane,d.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)});d.Map.include(d.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&
0<=a.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||!1===c.animate||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),f=this._getCenterOffset(a)._divideBy(1-1/d),g=this._getCenterLayerPoint()._add(f);return!0===
c.animate||this.getSize().contains(f)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,g,d,null,!0),!0):!1},_animateZoom:function(a,b,c,f,g,n){this._animatingZoom=!0;d.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=a;this._animateToZoom=b;d.Draggable&&(d.Draggable._disabled=!0);this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:f,delta:g,backwards:n})},_onZoomTransitionEnd:function(){this._animatingZoom=!1;d.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");
this._resetView(this._animateToCenter,this._animateToZoom,!0,!0);d.Draggable&&(d.Draggable._disabled=!1)}}:{});d.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=d.DomUtil.TRANSFORM,f=a.delta?d.DomUtil.getTranslateString(a.delta):b.style[c],g=d.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?g+" "+f:f+" "+g},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="";a.parentNode.appendChild(a);
d.Util.falseFn(b.offsetWidth);this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[d.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),f=this._getLoadedTilesPercentage(a);return b&&0.5<c&&0.5>f?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[d.DomUtil.TRANSFORM]="",
this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c=a.getElementsByTagName("img"),d=0;a=0;for(b=c.length;b>a;a++)c[a].complete&&d++;return d/b},_stopLoadingImages:function(a){var b,c,f=Array.prototype.slice.call(a.getElementsByTagName("img"));a=0;for(b=f.length;b>a;a++)c=f[a],c.complete||(c.onload=d.Util.falseFn,c.onerror=d.Util.falseFn,c.src=d.Util.emptyImageUrl,c.parentNode.removeChild(c))}});
d.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1E4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=d.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=d.bind(this._handleGeolocationResponse,this),c=d.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,
c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code;a=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:b,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,
c=a.coords.longitude,f=new d.LatLng(b,c),g=180*a.coords.accuracy/40075017,n=g/Math.cos(d.LatLng.DEG_TO_RAD*b),b=d.latLngBounds([b-g,c-n],[b+g,c+n]),c=this._locateOptions;c.setView&&(c=Math.min(this.getBoundsZoom(b),c.maxZoom),this.setView(f,c));var f={latlng:f,bounds:b,timestamp:a.timestamp},q;for(q in a.coords)"number"==typeof a.coords[q]&&(f[q]=a.coords[q]);this.fire("locationfound",f)}})}(window,document);
(function(){function a(a){throw a;}function b(a,b){var c=a.split("."),d=u;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||b===r?d=d[f]?d[f]:d[f]={}:d[f]=b}function c(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,f,g,h,k,l,m,p,n,q;for(n=0;n<b;++n)a[n]>c&&(c=a[n]),a[n]<d&&(d=a[n]);f=1<<c;g=new (w?Uint32Array:Array)(f);h=1;k=0;for(l=2;h<=c;){for(n=0;n<b;++n)if(a[n]===h){m=0;p=k;for(q=0;q<h;++q)m=m<<1|p&1,p>>=1;for(q=m;q<f;q+=l)g[q]=h<<16|n;++k}++h;k<<=
1;l<<=1}return[g,c,d]}function f(b,c){this.l=[];this.m=32768;this.d=this.f=this.c=this.t=0;this.input=w?new Uint8Array(b):b;this.u=!1;this.n=C;this.K=!1;if(c||!(c={}))c.index&&(this.c=c.index),c.bufferSize&&(this.m=c.bufferSize),c.bufferType&&(this.n=c.bufferType),c.resize&&(this.K=c.resize);switch(this.n){case A:this.a=32768;this.b=new (w?Uint8Array:Array)(32768+this.m+258);break;case C:this.a=0;this.b=new (w?Uint8Array:Array)(this.m);this.e=this.W;this.B=this.R;this.q=this.V;break;default:a(Error("invalid inflate mode"))}}
function d(b,c){for(var d=b.f,f=b.d,g=b.input,h=b.c,k;f<c;)k=g[h++],k===r&&a(Error("input buffer is broken")),d|=k<<f,f+=8;b.f=d>>>c;b.d=f-c;b.c=h;return d&(1<<c)-1}function g(a,b){for(var c=a.f,d=a.d,f=a.input,g=a.c,h=b[0],k=b[1],l;d<k;){l=f[g++];if(l===r)break;c|=l<<d;d+=8}f=h[c&(1<<k)-1];h=f>>>16;a.f=c>>h;a.d=d-h;a.c=g;return f&65535}function h(a){function b(a,c,f){var h,k,l,m;for(m=0;m<a;)switch(h=g(this,c),h){case 16:for(l=3+d(this,2);l--;)f[m++]=k;break;case 17:for(l=3+d(this,3);l--;)f[m++]=
0;k=0;break;case 18:for(l=11+d(this,7);l--;)f[m++]=0;k=0;break;default:k=f[m++]=h}return f}var f=d(a,5)+257,h=d(a,5)+1,k=d(a,4)+4,l=new (w?Uint8Array:Array)(G.length),m;for(m=0;m<k;++m)l[G[m]]=d(a,3);k=c(l);l=new (w?Uint8Array:Array)(f);m=new (w?Uint8Array:Array)(h);a.q(c(b.call(a,f,k,l)),c(b.call(a,h,k,m)))}function k(a){a=a||{};this.files=[];this.v=a.comment}function l(a,b){b=b||{};this.input=w&&a instanceof Array?new Uint8Array(a):a;this.c=0;this.ba=b.verify||!1;this.j=b.password}function m(a,
b){this.input=a;this.offset=b}function p(a,b){this.input=a;this.offset=b}function n(b){var c=[],d={},f,g,h,k;if(!b.i){if(b.o===r){f=b.input;if(!b.D)a:{g=b.input;for(h=g.length-12;0<h;--h)if(g[h]===J[0]&&g[h+1]===J[1]&&g[h+2]===J[2]&&g[h+3]===J[3]){b.D=h;break a}a(Error("End of Central Directory Record not found"))}g=b.D;f[g++]===J[0]&&f[g++]===J[1]&&f[g++]===J[2]&&f[g++]===J[3]||a(Error("invalid signature"));b.ha=f[g++]|f[g++]<<8;b.ja=f[g++]|f[g++]<<8;b.ka=f[g++]|f[g++]<<8;b.aa=f[g++]|f[g++]<<8;b.Q=
(f[g++]|f[g++]<<8|f[g++]<<16|f[g++]<<24)>>>0;b.o=(f[g++]|f[g++]<<8|f[g++]<<16|f[g++]<<24)>>>0;b.w=f[g++]|f[g++]<<8;b.v=w?f.subarray(g,g+b.w):f.slice(g,g+b.w)}f=b.o;h=0;for(k=b.aa;h<k;++h)g=new m(b.input,f),g.parse(),f+=g.length,c[h]=g,d[g.filename]=h;b.Q<f-b.o&&a(Error("invalid file header size"));b.i=c;b.G=d}}function q(a,b,c){c^=a.s(b);a.k(b,c);return c}var r=void 0,s,u=this,w="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;new (w?Uint8Array:Array)(256);
for(s=0;256>s;++s)for(var v=s,B=7,v=v>>>1;v;v>>>=1)--B;s=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,
3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,
314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,
3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,
1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,
1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var z=w?new Uint32Array(s):s;s=[];for(v=0;288>v;v++)switch(!0){case 143>=v:s.push([v+48,8]);break;case 255>=v:s.push([v-144+400,9]);break;case 279>=v:s.push([v-256+0,7]);break;case 287>=v:s.push([v-280+192,8]);break;default:a("invalid literal: "+
v)}s=function(){function b(c){switch(!0){case 3===c:return[257,c-3,0];case 4===c:return[258,c-4,0];case 5===c:return[259,c-5,0];case 6===c:return[260,c-6,0];case 7===c:return[261,c-7,0];case 8===c:return[262,c-8,0];case 9===c:return[263,c-9,0];case 10===c:return[264,c-10,0];case 12>=c:return[265,c-11,1];case 14>=c:return[266,c-13,1];case 16>=c:return[267,c-15,1];case 18>=c:return[268,c-17,1];case 22>=c:return[269,c-19,2];case 26>=c:return[270,c-23,2];case 30>=c:return[271,c-27,2];case 34>=c:return[272,
c-31,2];case 42>=c:return[273,c-35,3];case 50>=c:return[274,c-43,3];case 58>=c:return[275,c-51,3];case 66>=c:return[276,c-59,3];case 82>=c:return[277,c-67,4];case 98>=c:return[278,c-83,4];case 114>=c:return[279,c-99,4];case 130>=c:return[280,c-115,4];case 162>=c:return[281,c-131,5];case 194>=c:return[282,c-163,5];case 226>=c:return[283,c-195,5];case 257>=c:return[284,c-227,5];case 258===c:return[285,c-258,0];default:a("invalid length: "+c)}}var c=[],d,f;for(d=3;258>=d;d++)f=b(d),c[d]=f[2]<<24|f[1]<<
16|f[0];return c}();w&&new Uint32Array(s);var A=0,C=1;f.prototype.r=function(){for(;!this.u;){var b=d(this,3);b&1&&(this.u=!0);b>>>=1;switch(b){case 0:var b=this.input,c=this.c,f=this.b,g=this.a,k=r,l=r,m=r,p=f.length,k=r;this.d=this.f=0;k=b[c++];k===r&&a(Error("invalid uncompressed block header: LEN (first byte)"));l=k;k=b[c++];k===r&&a(Error("invalid uncompressed block header: LEN (second byte)"));l|=k<<8;k=b[c++];k===r&&a(Error("invalid uncompressed block header: NLEN (first byte)"));m=k;k=b[c++];
k===r&&a(Error("invalid uncompressed block header: NLEN (second byte)"));m|=k<<8;l===~m&&a(Error("invalid uncompressed block header: length verify"));c+l>b.length&&a(Error("input buffer is broken"));switch(this.n){case A:for(;g+l>f.length;){k=p-g;l-=k;if(w)f.set(b.subarray(c,c+k),g),g+=k,c+=k;else for(;k--;)f[g++]=b[c++];this.a=g;f=this.e();g=this.a}break;case C:for(;g+l>f.length;)f=this.e({H:2});break;default:a(Error("invalid inflate mode"))}if(w)f.set(b.subarray(c,c+l),g),g+=l,c+=l;else for(;l--;)f[g++]=
b[c++];this.c=c;this.a=g;this.b=f;break;case 1:this.q(N,F);break;case 2:h(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.B()};s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var G=w?new Uint16Array(s):s;s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];var E=w?new Uint16Array(s):s;s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];var I=w?new Uint8Array(s):s;s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,
769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var H=w?new Uint16Array(s):s;s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var Q=w?new Uint8Array(s):s;s=new (w?Uint8Array:Array)(288);v=0;for(B=s.length;v<B;++v)s[v]=143>=v?8:255>=v?9:279>=v?7:8;var N=c(s);s=new (w?Uint8Array:Array)(30);v=0;for(B=s.length;v<B;++v)s[v]=5;var F=c(s);s=f.prototype;s.q=function(a,b){var c=this.b,f=this.a;this.C=a;for(var h=c.length-258,k,l,m;256!==(k=g(this,a));)if(256>k)f>=h&&(this.a=
f,c=this.e(),f=this.a),c[f++]=k;else for(k-=257,m=E[k],0<I[k]&&(m+=d(this,I[k])),k=g(this,b),l=H[k],0<Q[k]&&(l+=d(this,Q[k])),f>=h&&(this.a=f,c=this.e(),f=this.a);m--;)c[f]=c[f++-l];for(;8<=this.d;)this.d-=8,this.c--;this.a=f};s.V=function(a,b){var c=this.b,f=this.a;this.C=a;for(var h=c.length,k,l,m;256!==(k=g(this,a));)if(256>k)f>=h&&(c=this.e(),h=c.length),c[f++]=k;else for(k-=257,m=E[k],0<I[k]&&(m+=d(this,I[k])),k=g(this,b),l=H[k],0<Q[k]&&(l+=d(this,Q[k])),f+m>h&&(c=this.e(),h=c.length);m--;)c[f]=
c[f++-l];for(;8<=this.d;)this.d-=8,this.c--;this.a=f};s.e=function(){var a=new (w?Uint8Array:Array)(this.a-32768),b=this.a-32768,c,d,f=this.b;if(w)a.set(f.subarray(32768,a.length));else for(c=0,d=a.length;c<d;++c)a[c]=f[c+32768];this.l.push(a);this.t+=a.length;if(w)f.set(f.subarray(b,b+32768));else for(c=0;32768>c;++c)f[c]=f[b+c];this.a=32768;return f};s.W=function(a){var b,c=this.input.length/this.c+1|0,d,f,g,h=this.input,k=this.b;a&&("number"===typeof a.H&&(c=a.H),"number"===typeof a.P&&(c+=a.P));
2>c?(d=(h.length-this.c)/this.C[2],g=d/2*258|0,f=g<k.length?k.length+g:k.length<<1):f=k.length*c;w?(b=new Uint8Array(f),b.set(k)):b=k;return this.b=b};s.B=function(){var a=0,b=this.b,c=this.l,d,f=new (w?Uint8Array:Array)(this.t+(this.a-32768)),g,h,k,l;if(0===c.length)return w?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);g=0;for(h=c.length;g<h;++g)for(d=c[g],k=0,l=d.length;k<l;++k)f[a++]=d[k];g=32768;for(h=this.a;g<h;++g)f[a++]=b[g];this.l=[];return this.buffer=f};s.R=function(){var a,
b=this.a;w?this.K?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b);return this.buffer=a};k.prototype.L=function(a){this.j=a};k.prototype.s=function(a){a=a[2]&65535|2;return a*(a^1)>>8&255};k.prototype.k=function(a,b){a[0]=(z[(a[0]^b)&255]^a[0]>>>8)>>>0;a[1]=(6681*(20173*(a[1]+(a[0]&255))>>>0)>>>0)+1>>>0;a[2]=(z[(a[2]^a[1]>>>24)&255]^a[2]>>>8)>>>0};k.prototype.T=function(a){var b=[305419896,591751049,878082192],c,d;w&&(b=new Uint32Array(b));
c=0;for(d=a.length;c<d;++c)this.k(b,a[c]&255);return b};var D=[80,75,1,2],S=[80,75,3,4],J=[80,75,5,6];m.prototype.parse=function(){var b=this.input,c=this.offset;b[c++]===D[0]&&b[c++]===D[1]&&b[c++]===D[2]&&b[c++]===D[3]||a(Error("invalid file header signature"));this.version=b[c++];this.ia=b[c++];this.Z=b[c++]|b[c++]<<8;this.I=b[c++]|b[c++]<<8;this.A=b[c++]|b[c++]<<8;this.time=b[c++]|b[c++]<<8;this.U=b[c++]|b[c++]<<8;this.p=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.z=(b[c++]|b[c++]<<8|b[c++]<<
16|b[c++]<<24)>>>0;this.J=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.h=b[c++]|b[c++]<<8;this.g=b[c++]|b[c++]<<8;this.F=b[c++]|b[c++]<<8;this.ea=b[c++]|b[c++]<<8;this.ga=b[c++]|b[c++]<<8;this.fa=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;this.$=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.filename=String.fromCharCode.apply(null,w?b.subarray(c,c+=this.h):b.slice(c,c+=this.h));this.X=w?b.subarray(c,c+=this.g):b.slice(c,c+=this.g);this.v=w?b.subarray(c,c+this.F):b.slice(c,c+this.F);this.length=
c-this.offset};p.prototype.parse=function(){var b=this.input,c=this.offset;b[c++]===S[0]&&b[c++]===S[1]&&b[c++]===S[2]&&b[c++]===S[3]||a(Error("invalid local file header signature"));this.Z=b[c++]|b[c++]<<8;this.I=b[c++]|b[c++]<<8;this.A=b[c++]|b[c++]<<8;this.time=b[c++]|b[c++]<<8;this.U=b[c++]|b[c++]<<8;this.p=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.z=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.J=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;this.h=b[c++]|b[c++]<<8;this.g=b[c++]|b[c++]<<
8;this.filename=String.fromCharCode.apply(null,w?b.subarray(c,c+=this.h):b.slice(c,c+=this.h));this.X=w?b.subarray(c,c+=this.g):b.slice(c,c+=this.g);this.length=c-this.offset};s=l.prototype;s.Y=function(){var a=[],b,c,d;this.i||n(this);d=this.i;b=0;for(c=d.length;b<c;++b)a[b]=d[b].filename;return a};s.r=function(b,c){var d;this.G||n(this);d=this.G[b];d===r&&a(Error(b+" not found"));var g;g=c||{};var h=this.input,k=this.i,l,m,F,s;k||n(this);k[d]===r&&a(Error("wrong index"));k=k[d].$;d=new p(this.input,
k);d.parse();k+=d.length;l=d.z;if(0!==(d.I&1)){g.password||this.j||a(Error("please set password"));g=this.S(g.password||this.j);F=k;for(s=k+12;F<s;++F)q(this,g,h[F]);k+=12;l-=12;F=k;for(s=k+l;F<s;++F)h[F]=q(this,g,h[F])}switch(d.A){case 0:m=w?this.input.subarray(k,k+l):this.input.slice(k,k+l);break;case 8:m=(new f(this.input,{index:k,bufferSize:d.J})).r();break;default:a(Error("unknown compression type"))}if(this.ba){h=r;l="number"===typeof h?h:h=0;g=m.length;k=-1;for(l=g&7;l--;++h)k=k>>>8^z[(k^m[h])&
255];for(l=g>>3;l--;h+=8)k=k>>>8^z[(k^m[h])&255],k=k>>>8^z[(k^m[h+1])&255],k=k>>>8^z[(k^m[h+2])&255],k=k>>>8^z[(k^m[h+3])&255],k=k>>>8^z[(k^m[h+4])&255],k=k>>>8^z[(k^m[h+5])&255],k=k>>>8^z[(k^m[h+6])&255],k=k>>>8^z[(k^m[h+7])&255];h=(k^4294967295)>>>0;d.p!==h&&a(Error("wrong crc: file=0x"+d.p.toString(16)+", data=0x"+h.toString(16)))}return m};s.L=function(a){this.j=a};s.k=k.prototype.k;s.S=k.prototype.T;s.s=k.prototype.s;b("Zlib.Unzip",l);b("Zlib.Unzip.prototype.decompress",l.prototype.r);b("Zlib.Unzip.prototype.getFilenames",
l.prototype.Y);b("Zlib.Unzip.prototype.setPassword",l.prototype.L)}).call(this);
(function(){function a(a){throw a;}function b(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||b===p?d=d[f]?d[f]:d[f]={}:d[f]=b}function c(a,b,c){var d="number"===typeof b?b:b=0,f="number"===typeof c?c:a.length;c=-1;for(d=f&7;d--;++b)c=c>>>8^w[(c^a[b])&255];for(d=f>>3;d--;b+=8)c=c>>>8^w[(c^a[b])&255],c=c>>>8^w[(c^a[b+1])&255],c=c>>>8^w[(c^a[b+2])&255],c=c>>>8^w[(c^a[b+3])&255],c=c>>>8^w[(c^a[b+4])&255],c=c>>>8^w[(c^a[b+5])&
255],c=c>>>8^w[(c^a[b+6])&255],c=c>>>8^w[(c^a[b+7])&255];return(c^4294967295)>>>0}function f(){}function d(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,f,g,h,k,l,m,p,n,s;for(n=0;n<b;++n)a[n]>c&&(c=a[n]),a[n]<d&&(d=a[n]);f=1<<c;g=new (q?Uint32Array:Array)(f);h=1;k=0;for(l=2;h<=c;){for(n=0;n<b;++n)if(a[n]===h){m=0;p=k;for(s=0;s<h;++s)m=m<<1|p&1,p>>=1;for(s=m;s<f;s+=l)g[s]=h<<16|n;++k}++h;k<<=1;l<<=1}return[g,c,d]}function g(b,c){this.i=[];this.j=32768;this.d=this.f=this.c=this.n=0;this.input=q?
new Uint8Array(b):b;this.o=!1;this.k=B;this.w=!1;if(c||!(c={}))c.index&&(this.c=c.index),c.bufferSize&&(this.j=c.bufferSize),c.bufferType&&(this.k=c.bufferType),c.resize&&(this.w=c.resize);switch(this.k){case v:this.a=32768;this.b=new (q?Uint8Array:Array)(32768+this.j+258);break;case B:this.a=0;this.b=new (q?Uint8Array:Array)(this.j);this.e=this.D;this.q=this.A;this.l=this.C;break;default:a(Error("invalid inflate mode"))}}function h(b,c){for(var d=b.f,f=b.d,g=b.input,h=b.c,k;f<c;)k=g[h++],k===p&&
a(Error("input buffer is broken")),d|=k<<f,f+=8;b.f=d>>>c;b.d=f-c;b.c=h;return d&(1<<c)-1}function k(a,b){for(var c=a.f,d=a.d,f=a.input,g=a.c,h=b[0],k=b[1],l;d<k;){l=f[g++];if(l===p)break;c|=l<<d;d+=8}f=h[c&(1<<k)-1];h=f>>>16;a.f=c>>h;a.d=d-h;a.c=g;return f&65535}function l(a){function b(a,c,d){var f,g,l,m;for(m=0;m<a;)switch(f=k(this,c),f){case 16:for(l=3+h(this,2);l--;)d[m++]=g;break;case 17:for(l=3+h(this,3);l--;)d[m++]=0;g=0;break;case 18:for(l=11+h(this,7);l--;)d[m++]=0;g=0;break;default:g=d[m++]=
f}return d}var c=h(a,5)+257,f=h(a,5)+1,g=h(a,4)+4,l=new (q?Uint8Array:Array)(z.length),m;for(m=0;m<g;++m)l[z[m]]=h(a,3);g=d(l);l=new (q?Uint8Array:Array)(c);m=new (q?Uint8Array:Array)(f);a.l(d(b.call(a,c,g,l)),d(b.call(a,f,g,m)))}function m(a){this.input=a;this.c=0;this.m=[];this.s=!1}var p=void 0,n=this,q="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;new (q?Uint8Array:Array)(256);var r;for(r=0;256>r;++r)for(var s=r,u=7,s=s>>>1;s;s>>>=1)--u;r=
[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,
651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,
4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,
167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,
3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,
2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var w=q?new Uint32Array(r):r;f.prototype.getName=function(){return this.name};f.prototype.getData=function(){return this.data};f.prototype.G=function(){return this.H};b("Zlib.GunzipMember",f);b("Zlib.GunzipMember.prototype.getName",f.prototype.getName);b("Zlib.GunzipMember.prototype.getData",
f.prototype.getData);b("Zlib.GunzipMember.prototype.getMtime",f.prototype.G);r=[];for(s=0;288>s;s++)switch(!0){case 143>=s:r.push([s+48,8]);break;case 255>=s:r.push([s-144+400,9]);break;case 279>=s:r.push([s-256+0,7]);break;case 287>=s:r.push([s-280+192,8]);break;default:a("invalid literal: "+s)}r=function(){function b(c){switch(!0){case 3===c:return[257,c-3,0];case 4===c:return[258,c-4,0];case 5===c:return[259,c-5,0];case 6===c:return[260,c-6,0];case 7===c:return[261,c-7,0];case 8===c:return[262,
c-8,0];case 9===c:return[263,c-9,0];case 10===c:return[264,c-10,0];case 12>=c:return[265,c-11,1];case 14>=c:return[266,c-13,1];case 16>=c:return[267,c-15,1];case 18>=c:return[268,c-17,1];case 22>=c:return[269,c-19,2];case 26>=c:return[270,c-23,2];case 30>=c:return[271,c-27,2];case 34>=c:return[272,c-31,2];case 42>=c:return[273,c-35,3];case 50>=c:return[274,c-43,3];case 58>=c:return[275,c-51,3];case 66>=c:return[276,c-59,3];case 82>=c:return[277,c-67,4];case 98>=c:return[278,c-83,4];case 114>=c:return[279,
c-99,4];case 130>=c:return[280,c-115,4];case 162>=c:return[281,c-131,5];case 194>=c:return[282,c-163,5];case 226>=c:return[283,c-195,5];case 257>=c:return[284,c-227,5];case 258===c:return[285,c-258,0];default:a("invalid length: "+c)}}var c=[],d,f;for(d=3;258>=d;d++)f=b(d),c[d]=f[2]<<24|f[1]<<16|f[0];return c}();q&&new Uint32Array(r);var v=0,B=1;g.prototype.g=function(){for(;!this.o;){var b=h(this,3);b&1&&(this.o=!0);b>>>=1;switch(b){case 0:var b=this.input,c=this.c,d=this.b,f=this.a,g=p,k=p,m=p,n=
d.length,g=p;this.d=this.f=0;g=b[c++];g===p&&a(Error("invalid uncompressed block header: LEN (first byte)"));k=g;g=b[c++];g===p&&a(Error("invalid uncompressed block header: LEN (second byte)"));k|=g<<8;g=b[c++];g===p&&a(Error("invalid uncompressed block header: NLEN (first byte)"));m=g;g=b[c++];g===p&&a(Error("invalid uncompressed block header: NLEN (second byte)"));m|=g<<8;k===~m&&a(Error("invalid uncompressed block header: length verify"));c+k>b.length&&a(Error("input buffer is broken"));switch(this.k){case v:for(;f+
k>d.length;){g=n-f;k-=g;if(q)d.set(b.subarray(c,c+g),f),f+=g,c+=g;else for(;g--;)d[f++]=b[c++];this.a=f;d=this.e();f=this.a}break;case B:for(;f+k>d.length;)d=this.e({t:2});break;default:a(Error("invalid inflate mode"))}if(q)d.set(b.subarray(c,c+k),f),f+=k,c+=k;else for(;k--;)d[f++]=b[c++];this.c=c;this.a=f;this.b=d;break;case 1:this.l(I,H);break;case 2:l(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.q()};r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var z=q?new Uint16Array(r):
r;r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];var A=q?new Uint16Array(r):r;r=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];var C=q?new Uint8Array(r):r;r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var G=q?new Uint16Array(r):r;r=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var E=q?new Uint8Array(r):r;r=new (q?Uint8Array:Array)(288);s=
0;for(u=r.length;s<u;++s)r[s]=143>=s?8:255>=s?9:279>=s?7:8;var I=d(r);r=new (q?Uint8Array:Array)(30);s=0;for(u=r.length;s<u;++s)r[s]=5;var H=d(r);g.prototype.l=function(a,b){var c=this.b,d=this.a;this.r=a;for(var f=c.length-258,g,l,m;256!==(g=k(this,a));)if(256>g)d>=f&&(this.a=d,c=this.e(),d=this.a),c[d++]=g;else for(g-=257,m=A[g],0<C[g]&&(m+=h(this,C[g])),g=k(this,b),l=G[g],0<E[g]&&(l+=h(this,E[g])),d>=f&&(this.a=d,c=this.e(),d=this.a);m--;)c[d]=c[d++-l];for(;8<=this.d;)this.d-=8,this.c--;this.a=
d};g.prototype.C=function(a,b){var c=this.b,d=this.a;this.r=a;for(var f=c.length,g,l,m;256!==(g=k(this,a));)if(256>g)d>=f&&(c=this.e(),f=c.length),c[d++]=g;else for(g-=257,m=A[g],0<C[g]&&(m+=h(this,C[g])),g=k(this,b),l=G[g],0<E[g]&&(l+=h(this,E[g])),d+m>f&&(c=this.e(),f=c.length);m--;)c[d]=c[d++-l];for(;8<=this.d;)this.d-=8,this.c--;this.a=d};g.prototype.e=function(){var a=new (q?Uint8Array:Array)(this.a-32768),b=this.a-32768,c,d,f=this.b;if(q)a.set(f.subarray(32768,a.length));else for(c=0,d=a.length;c<
d;++c)a[c]=f[c+32768];this.i.push(a);this.n+=a.length;if(q)f.set(f.subarray(b,b+32768));else for(c=0;32768>c;++c)f[c]=f[b+c];this.a=32768;return f};g.prototype.D=function(a){var b,c=this.input.length/this.c+1|0,d,f,g,h=this.input,k=this.b;a&&("number"===typeof a.t&&(c=a.t),"number"===typeof a.z&&(c+=a.z));2>c?(d=(h.length-this.c)/this.r[2],g=d/2*258|0,f=g<k.length?k.length+g:k.length<<1):f=k.length*c;q?(b=new Uint8Array(f),b.set(k)):b=k;return this.b=b};g.prototype.q=function(){var a=0,b=this.b,c=
this.i,d,f=new (q?Uint8Array:Array)(this.n+(this.a-32768)),g,h,k,l;if(0===c.length)return q?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);g=0;for(h=c.length;g<h;++g)for(d=c[g],k=0,l=d.length;k<l;++k)f[a++]=d[k];g=32768;for(h=this.a;g<h;++g)f[a++]=b[g];this.i=[];return this.buffer=f};g.prototype.A=function(){var a,b=this.a;q?this.w?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b);return this.buffer=a};m.prototype.F=function(){this.s||
this.g();return this.m.slice()};m.prototype.g=function(){for(var b=this.input.length;this.c<b;){var d=new f,h=p,k=p,l=p,m=h=l=p,n=p,h=h=p,s=this.input,k=this.c;d.u=s[k++];d.v=s[k++];31===d.u&&139===d.v||a(Error("invalid file signature:"+d.u+","+d.v));d.p=s[k++];switch(d.p){case 8:break;default:a(Error("unknown compression method: "+d.p))}d.h=s[k++];h=s[k++]|s[k++]<<8|s[k++]<<16|s[k++]<<24;d.H=new Date(1E3*h);d.N=s[k++];d.M=s[k++];0<(d.h&4)&&(d.I=s[k++]|s[k++]<<8,k+=d.I);if(0<(d.h&8)){n=[];for(m=0;0<
(h=s[k++]);)n[m++]=String.fromCharCode(h);d.name=n.join("")}if(0<(d.h&16)){n=[];for(m=0;0<(h=s[k++]);)n[m++]=String.fromCharCode(h);d.J=n.join("")}0<(d.h&2)&&(d.B=c(s,0,k)&65535,d.B!==(s[k++]|s[k++]<<8)&&a(Error("invalid header crc16")));h=s[s.length-4]|s[s.length-3]<<8|s[s.length-2]<<16|s[s.length-1]<<24;s.length-k-4-4<512*h&&(l=h);k=new g(s,{index:k,bufferSize:l});d.data=l=k.g();k=k.c;d.K=h=(s[k++]|s[k++]<<8|s[k++]<<16|s[k++]<<24)>>>0;c(l,p,p)!==h&&a(Error("invalid CRC-32 checksum: 0x"+c(l,p,p).toString(16)+
" / 0x"+h.toString(16)));d.L=h=(s[k++]|s[k++]<<8|s[k++]<<16|s[k++]<<24)>>>0;(l.length&4294967295)!==h&&a(Error("invalid input size: "+(l.length&4294967295)+" / "+h));this.m.push(d);this.c=k}this.s=!0;b=this.m;d=l=k=0;for(s=b.length;d<s;++d)l+=b[d].data.length;if(q)for(l=new Uint8Array(l),d=0;d<s;++d)l.set(b[d].data,k),k+=b[d].data.length;else{l=[];for(d=0;d<s;++d)l[d]=b[d].data;l=Array.prototype.concat.apply([],l)}return l};b("Zlib.Gunzip",m);b("Zlib.Gunzip.prototype.decompress",m.prototype.g);b("Zlib.Gunzip.prototype.getMembers",
m.prototype.F)}).call(this);function InputStream(a){this.buffer=a;this.offset=0;this.byteLength=a.length;this.convBuf=new ArrayBuffer(8);this.convUint8=new Uint8Array(this.convBuf);this.convUint16=new Uint16Array(this.convBuf);this.convInt32=new Int32Array(this.convBuf);this.convUint32=new Uint32Array(this.convBuf);this.convFloat32=new Float32Array(this.convBuf);this.convFloat64=new Float64Array(this.convBuf)}InputStream.prototype.seek=function(a){this.offset=a};
InputStream.prototype.getBytes=function(a){var b=new Uint8Array(this.buffer.buffer,this.offset,a);this.offset+=a;return b};InputStream.prototype.getVarints=function(){var a,b=0,c=0;do a=this.buffer[this.offset++],b|=(a&127)<<c,c+=7;while(a&128);return b};InputStream.prototype.getUint8=function(){return this.buffer[this.offset++]};InputStream.prototype.getUint16=function(){this.convUint8[0]=this.buffer[this.offset++];this.convUint8[1]=this.buffer[this.offset++];return this.convUint16[0]};
InputStream.prototype.getInt16=function(){var a=this.getUint16();32767<a&&(a|=4294901760);return a};InputStream.prototype.getInt32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convInt32[0]};InputStream.prototype.getUint32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convUint32[0]};
InputStream.prototype.getFloat32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convFloat32[0]};InputStream.prototype.getFloat64=function(){for(var a=this.buffer,b=this.convUint8,c=this.offset,f=0;8>f;f++)b[f]=a[c+f];this.offset+=8;return this.convFloat64[0]};InputStream.prototype.getString=function(a){for(var b=this.buffer,c="",f=this.offset,d=this.offset+a;f<d;f++)c+=String.fromCharCode(b[f]);this.offset+=a;return decodeURIComponent(escape(c))};
InputStream.prototype.reset=function(a){this.buffer=a;this.offset=0;this.byteLength=a.length};
VBUtils={deduceUVRepetition:function(a){for(var b in a.vblayout)if(0==b.indexOf("uv"))for(var c=a.vbstride,f=a.vb,d=a.vb.length/c,g=0,h=a.vblayout[b].offset;g<d;g++,h+=c){var k=f[h],l=f[h+1];if(2<k||0>k||2<l||0>l){a.vblayout[b].isPattern=!0;break}}},computeBounds3D:function(a){var b=Infinity,c=Infinity,f=Infinity,d=-Infinity,g=-Infinity,h=-Infinity,k,l,m,p,n,q=a.vbstride,r=a.vblayout.position.offset,s=a.vb,u=a.vb.length/q;k=0;for(l=r;k<u;k++,l+=q)m=s[l],p=s[l+1],n=s[l+2],b>m&&(b=m),c>p&&(c=p),f>n&&
(f=n),d<m&&(d=m),g<p&&(g=p),h<n&&(h=n);k=a.boundingBox=new THREE.Box3;k.min.set(b,c,f);k.max.set(d,g,h);b=0.5*(b+d);c=0.5*(c+g);f=0.5*(f+h);a=a.boundingSphere=new THREE.Sphere;a.center.set(b,c,f);k=h=0;for(l=r;k<u;k++,l+=q)m=s[l],p=s[l+1],n=s[l+2],r=m-b,p-=c,n-=f,n=r*r+p*p+n*n,n>h&&(h=n);a.radius=Math.sqrt(h)}};
var VBB_LINE_SEGMENT=16,VBB_ARC_CIRCULAR=32,VBB_ARC_ELLIPTICAL=48,VBB_TEX_QUAD=64,VBB_ONE_TRIANGLE=80,VBB_INSTANCED_FLAG=0,VBB_SEG_START_RIGHT=1,VBB_SEG_START_LEFT=2,VBB_SEG_END_RIGHT=3,VBB_SEG_END_LEFT=4,TAU=2*Math.PI,VBB_COLOR_OFFSET=6,VBB_DBID_OFFSET=7,VBB_FLAGS_OFFSET=8;
function VertexBufferBuilder(a){this.useInstancing=a;this.stride=9;this.vb=new ArrayBuffer(4*this.stride*(this.useInstancing?16384:65536));this.vbf=new Float32Array(this.vb);this.vbi=new Int32Array(this.vb);this.vcount=0;this.ib=this.useInstancing?null:new Uint16Array(65536);this.icount=0;this.minx=this.miny=Infinity;this.maxx=this.maxy=-Infinity;this.dbIds={};this.numTriangleGeoms=this.numCirculars=this.numEllipticals=0}
VertexBufferBuilder.prototype.expandStride=function(){var a=this.stride;if(!(12<=a)){for(var b=this.stride+3,c=new ArrayBuffer(this.vb.byteLength/a*b),f=new Uint8Array(this.vb),d=new Uint8Array(c),g=0,h=this.vcount;g<h;g++)for(var k=g*a*4,l=g*b*4,m=0;m<4*a;m++)d[l+m]=f[k+m];this.vb=c;this.vbf=new Float32Array(c);this.vbi=new Int32Array(c);this.stride=b}};
VertexBufferBuilder.prototype.addToBounds=function(a,b){a<this.minx&&(this.minx=a);a>this.maxx&&(this.maxx=a);b<this.miny&&(this.miny=b);b>this.maxy&&(this.maxy=b)};VertexBufferBuilder.prototype.setVertexFlag=function(a,b,c,f){this.vbi[a*this.stride+VBB_FLAGS_OFFSET]=f|c|b<<16};
VertexBufferBuilder.prototype.addVertexTriangleGeom=function(a,b,c,f,d,g,h,k){for(var l=this.vcount,m=this.useInstancing?1:4,p=0;p<m;p++){var n=(l+p)*this.stride,q=this.vbf;q[n]=a;q[n+1]=b;q[n+2]=c;q[n+3]=f;q[n+4]=d;q[n+5]=g;this.vbi[n+VBB_COLOR_OFFSET]=h;this.vbi[n+VBB_DBID_OFFSET]=k;this.vcount++;this.dbIds[k]=1}return l};
VertexBufferBuilder.prototype.addVertexLine=function(a,b,c,f,d,g,h){for(var k=this.vcount,l=this.useInstancing?1:4,m=0;m<l;m++){var p=(k+m)*this.stride,n=this.vbf;n[p]=a;n[p+1]=b;n[p+2]=c;n[p+3]=f;n[p+4]=d;n[p+5]=0;this.vbi[p+VBB_COLOR_OFFSET]=g;this.vbi[p+VBB_DBID_OFFSET]=h;this.dbIds[h]=1;this.vcount++}return k};
VertexBufferBuilder.prototype.addVertexArc=function(a,b,c,f,d,g,h,k,l,m){for(var p=this.vcount,n=this.useInstancing?1:4,q=0;q<n;q++){var r=(p+q)*this.stride,s=this.vbf;s[r]=a;s[r+1]=b;s[r+2]=c;s[r+3]=f;s[r+4]=k;s[r+5]=d;this.vbi[r+VBB_COLOR_OFFSET]=l;this.vbi[r+VBB_DBID_OFFSET]=m;d!=g&&(s[r+9]=g,s[r+10]=h);this.dbIds[m]=1;this.vcount++}return p};
VertexBufferBuilder.prototype.addVertex=function(a,b,c,f,d,g,h,k){if(!this.useInstancing){var l=this.vcount,m=l*this.stride,p=this.vbf;p[m]=a;p[m+1]=b;p[m+2]=c;p[m+3]=f;p[m+4]=d;p[m+5]=0;this.vbi[m+VBB_COLOR_OFFSET]=g;this.vbi[m+VBB_DBID_OFFSET]=h;this.setVertexFlag(l,k,0,0);this.vcount++;this.dbIds[h]=1;return l}};VertexBufferBuilder.prototype.addVertexPolytriangle=function(a,b,c,f,d,g,h,k){this.useInstancing||(this.addVertex(a,b,c,f,d,g,h,k),this.addToBounds(a,b))};
VertexBufferBuilder.prototype.setVertexColor=function(a,b){this.useInstancing||(this.vbi[a*this.stride+VBB_COLOR_OFFSET]=b)};VertexBufferBuilder.prototype.addTriangle=function(a,b,c){if(!this.useInstancing){var f=this.ib,d=this.icount;if(d+3>=f.length){for(var g=new Uint16Array(2*f.length),h=0;h<d;h++)g[h]=f[h];this.ib=f=g}f[d]=a;f[d+1]=b;f[d+2]=c;this.icount+=3}};
VertexBufferBuilder.prototype.finalizeQuad=function(a,b,c){this.useInstancing?this.setVertexFlag(a,c,VBB_INSTANCED_FLAG,b):(this.addTriangle(a,a+1,a+2),this.addTriangle(a,a+2,a+3),this.setVertexFlag(a,c,VBB_SEG_START_RIGHT,b),this.setVertexFlag(a+1,c,VBB_SEG_END_RIGHT,b),this.setVertexFlag(a+2,c,VBB_SEG_END_LEFT,b),this.setVertexFlag(a+3,c,VBB_SEG_START_LEFT,b))};
VertexBufferBuilder.prototype.addSegment=function(a,b,c,f,d,g,h,k){var l=c-a,m=f-b,p=0;if(l||m)p=Math.atan2(m,l);l=Math.sqrt(l*l+m*m);d=this.addVertexLine(a,b,p,l,0.5*d,g,h);this.finalizeQuad(d,VBB_LINE_SEGMENT,k);this.addToBounds(a,b);this.addToBounds(c,f)};
VertexBufferBuilder.prototype.addTriangleGeom=function(a,b,c,f,d,g,h,k,l){this.numTriangleGeoms++;h=this.addVertexTriangleGeom(a,b,c,f,d,g,h,k,l);this.finalizeQuad(h,VBB_ONE_TRIANGLE,l);this.addToBounds(a,b);this.addToBounds(c,f);this.addToBounds(d,g)};
VertexBufferBuilder.prototype.addCircularArc=function(a,b,c,f,d,g,h,k,l){this.numCirculars++;var m=Math.abs(c-f);if(1E-4<m&&1E-4<Math.abs(m-TAU)){var m=a+d*Math.cos(c),p=b+d*Math.sin(c);this.addSegment(m,p,m,p,g,h,k,l);m=a+d*Math.cos(f);p=b+d*Math.sin(f);this.addSegment(m,p,m,p,g,h,k,l)}else this.addToBounds(a-d,b-d),this.addToBounds(a+d,b+d);a=this.addVertexArc(a,b,c,f,d,d,0,0.5*g,h,k);this.finalizeQuad(a,VBB_ARC_CIRCULAR,l)};
VertexBufferBuilder.prototype.addEllipticalArc=function(a,b,c,f,d,g,h,k,l,m,p){this.expandStride();this.numEllipticals++;var n=Math.abs(c-f);if(1E-4<Math.abs(n-TAU)){var n=a+d*Math.cos(c),q=b+g*Math.sin(c);this.addSegment(n,q,n,q,k,l,m,p);n=a+d*Math.cos(f);q=b+g*Math.sin(f);this.addSegment(n,q,n,q,k,l,m,p)}else this.addToBounds(a-d,b-g),this.addToBounds(a+d,b+g);a=this.addVertexArc(a,b,c,f,d,g,h,0.5*k,l,m);this.finalizeQuad(a,VBB_ARC_ELLIPTICAL,p)};
VertexBufferBuilder.prototype.addTexturedQuad=function(a,b,c,f,d,g){var h=0.5*f;d=this.addVertexLine(a,b+h,0,c,h,4278255615,d);this.finalizeQuad(d,VBB_TEX_QUAD,g);this.addToBounds(a,b);this.addToBounds(a+c,b+f)};VertexBufferBuilder.prototype.isFull=function(a){a||(a=3);return this.useInstancing?32767<4*this.vcount+a:32767<this.vcount+a};
VertexBufferBuilder.prototype.toMesh=function(){var a={};a.vb=new Float32Array(this.vb.slice(0,this.vcount*this.stride*4));a.vbstride=this.stride;var b=this.useInstancing?1:0;a.vblayout={fields1:{offset:0,itemSize:3,bytesPerItem:4,divisor:b},fields2:{offset:3,itemSize:3,bytesPerItem:4,divisor:b},color4b:{offset:VBB_COLOR_OFFSET,itemSize:4,bytesPerItem:1,divisor:b,normalize:!0},dbId4b:{offset:VBB_DBID_OFFSET,itemSize:4,bytesPerItem:1,divisor:b,normalize:!0},flags4b:{offset:VBB_FLAGS_OFFSET,itemSize:4,
bytesPerItem:1,divisor:b,normalize:!1}};9<this.stride&&(a.vblayout.extraParams={offset:9,itemSize:3,bytesPerItem:4,divisor:b,normalize:!1});if(this.useInstancing){for(var c in a.vblayout)a.vblayout[c].divisor=1;a.numInstances=this.vcount;b=new Int32Array(4);b[0]=VBB_SEG_START_RIGHT;b[1]=VBB_SEG_END_RIGHT;b[2]=VBB_SEG_END_LEFT;b[3]=VBB_SEG_START_LEFT;a.vblayout.instFlags4b={offset:0,itemSize:4,bytesPerItem:1,normalize:!1,divisor:0};a.vblayout.instFlags4b.array=b.buffer;b=a.indices=new Uint16Array(6);
b[0]=0;b[1]=1;b[2]=2;b[3]=0;b[4]=2;b[5]=3}else a.indices=new Uint16Array(this.ib.buffer.slice(0,2*this.icount));a.dbIds=this.dbIds;b=a.boundingBox=new THREE.Box3;c=Math.max(this.maxx-this.minx,this.maxy-this.miny);b.min.set(this.minx,this.miny,0.001*-c);b.max.set(this.maxx,this.maxy,0.001*c);b=a.boundingSphere=new THREE.Sphere;b.center.copy(a.boundingBox.center());b.radius=0.5*a.boundingBox.size().length();return a};
function readOpenCTM_RAW(a,b){var c=a.getString(4);if("INDX"!=c)return null;for(var f=b.vertexCount,d=b.triangleCount,g=b.indices=new Uint16Array(3*d),c=0,d=3*d;c<d;c++)g[c]=a.getInt32();c=a.getString(4);if("VERT"!=c)return null;for(var g=b.vbstride,d=b.vb,c=0,h=b.vblayout.position.offset;c<f;c++,h+=g)d[h]=a.getFloat32(),d[h+1]=a.getFloat32(),d[h+2]=a.getFloat32();if(b.flags&1){c=a.getString(4);if("NORM"!=c)return null;c=0;for(h=b.vblayout.normal.offset;c<f;c++,h+=g)d[h]=a.getFloat32(),d[h+1]=a.getFloat32(),
d[h+2]=a.getFloat32()}for(var k=0;k<b.texMapCount;k++){c=a.getString(4);if("TEXC"!=c)return null;c={name:a.getString(a.getInt32()),file:a.getString(a.getInt32())};b.uvs.push(c);h="uv";k&&(h+=(k+1).toString());c=0;for(h=b.vblayout[h].offset;c<f;c++,h+=g)d[h]=a.getFloat32(),d[h+1]=a.getFloat32()}for(k=0;k<b.attribMapCount;k++){c=a.getString(4);if("ATTR"!=c)return null;c={name:a.getString(a.getInt32())};if(-1!=c.name.indexOf("Color"))for(c=0,h=b.vblayout.color.offset;c<f;c++,h+=g)d[h]=a.getFloat32(),
d[h+1]=a.getFloat32(),d[h+2]=a.getFloat32(),a.getFloat32();else b.attrs.push(c),a.getBytes(16*f)}}
var readOpenCTM=function(a){if("OCTM"!=a.getString(4)||5!=a.getInt32())return null;var b=a.getString(3);a.getUint8();var c={stream:null,vertices:null,indices:null,normals:null,colors:null,uvs:[],attrs:[]};c.vertexCount=a.getInt32();c.triangleCount=a.getInt32();c.texMapCount=a.getInt32();c.attribMapCount=a.getInt32();c.flags=a.getInt32();c.comment=a.getString(a.getInt32());c.vbstride=3;c.flags&1&&(c.vbstride+=3);c.vbstride+=2*(c.texMapCount||0);0<c.attribMapCount&&(c.vbstride+=3);c.vblayout={};var f=
0;c.vblayout.position={offset:f,itemSize:3};f+=3;c.flags&1&&(c.vblayout.normal={offset:f,itemSize:3},f+=3);if(c.texMapCount)for(var d=0;d<c.texMapCount;d++){var g="uv";d&&(g+=(d+1).toString());c.vblayout[g]={offset:f,itemSize:2};f+=2}c.attribMapCount&&(c.vblayout.color={offset:f,itemSize:3});c.vb=new Float32Array(c.vertexCount*c.vbstride);return"RAW"==b?(readOpenCTM_RAW(a,c),VBUtils.deduceUVRepetition(c),VBUtils.computeBounds3D(c),c):"MG2"==b?(readOpenCTM_MG2(a,c),VBUtils.deduceUVRepetition(c),VBUtils.computeBounds3D(c),
c):null},readLines=function(a,b){var c={isLines:!0,vertices:null,indices:null,colors:null,normals:null,uvs:[],attrs:[]},f,d;1<b.version?(c.vertexCount=a.readU16(),f=a.readU16(),d=a.readU16()):(c.vertexCount=a.readU32V(),f=a.readU32V(),d=a.readU32V());var g=0!=a.stream.getUint8();c.vbstride=3;g&&(c.vbstride+=3);c.vblayout={};var h=0;c.vblayout.position={offset:h,itemSize:3};g&&(c.vblayout.color={offset:h+3,itemSize:3});c.vb=new Float32Array(c.vertexCount*c.vbstride);for(var k=c.vb,l=c.vbstride,m=a.stream,
p=0,h=c.vblayout.position.offset,n=c.vertexCount;p<n;p++,h+=l)k[h]=m.getFloat32(),k[h+1]=m.getFloat32(),k[h+2]=m.getFloat32();if(g)for(p=0,h=c.vblayout.color.offset,g=c.vertexCount;p<g;p++,h+=l)k[h]=m.getFloat32(),k[h+1]=m.getFloat32(),k[h+2]=m.getFloat32(),m.getFloat32();p=function(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.length)};1<b.version?(f=new Uint16Array(p(m.getBytes(2*f))),m=new Uint16Array(p(m.getBytes(2*d)))):(f=new Int32Array(p(m.getBytes(4*f))),m=new Int32Array(p(m.getBytes(4*
d))));c.indices=new Uint16Array(2*(m[d-1]-d+1));for(p=h=0;p+1<d;p++)for(k=m[p];k+1<m[p+1];k++)c.indices[h++]=f[k],c.indices[h++]=f[k+1];VBUtils.computeBounds3D(c);return c};function readGeometry(a,b,c){return(b=a.seekToEntry(b))?"Autodesk.CloudPlatform.OpenCTM"==b.entryType?readOpenCTM(a.stream):"Autodesk.CloudPlatform.Lines"==b.entryType?readLines(a,b):null:null}
function convertMaterials(a){var b=function(a,b){var c=new THREE.Color;if(!a||!a.colors)return c.setRGB(1,0,0);var d=a.colors[b];if(!d)return c.setRGB(0,0,0);d=d.values;if(!d||!d.length)return c.setRGB(1,0,0);d=d[0];return c.setRGB(d.r,d.g,d.b)},c=function(a,b){if(!a||!a.scalars)return 0;var c=a.scalars[b];return c?c.values[0]:void 0},f=function(a,b){if(!a||!a.booleans)return 0;var c=a.booleans;return c?c[b]:void 0},d=a.materials.materials;a.simplemats={};for(var g in d){var h=d[g],k=h.materials,
l=k[h.userassets[0]];if(l&&"SimplePhong"==l.definition){var h=l.properties,m={};m.tag=l.tag;m.proteinType=l.proteinType;void 0===m.proteinType&&(m.proteinType=null);m.ambient=b(h,"generic_ambient");m.color=b(h,"generic_diffuse");m.specular=b(h,"generic_specular");m.emissive=b(h,"generic_emissive");var p=c(h,"generic_glossiness");p||(p=30);m.shininess=p;(p=c(h,"generic_transparency"))||(p=0);m.opacity=1-p;(p=c(h,"generic_reflectivity_at_0deg"))||(p=0);m.reflectivity=p;p=f(h,"generic_is_metal");void 0!==
p&&(m.metal=p);p=f(h,"generic_backface_cull");void 0!==p&&(m.doubleSided=!p);m.transparent=l.transparent;var l=l.textures,n;for(n in l){var p=k[l[n].connections[0]].properties,q=p.uris.unifiedbitmap_Bitmap.values[0],r=null;if(q)if("generic_diffuse"==n){if(r="map",!m.color||0==m.color.r&&0==m.color.g&&0==m.color.b)m.color=new THREE.Color(1,1,1)}else"generic_bump"==n?(r=f(h,"generic_bump_is_normal")?"normalMap":"bumpMap",m.bumpScale=c(h,"generic_bump_amount")):"generic_specular"==n?r="specularMap":
"generic_reflection"!=n&&"generic_alpha"==n&&(r="alphaMap");r&&(m["uri_"+r]=q,(q=c(p,"texture_UScale"))&&(m["uscale_"+r]=q),(q=c(p,"texture_VScale"))&&(m["vscale_"+r]=q))}a.simplemats[g]=m}}}function readLightDefinition(a,b){var c=a.seekToEntry(b);if(!c||1<c.version)return null;c=a.stream;return{position:a.readVector3f(),dir:a.readVector3f(),r:c.getFloat32(),g:c.getFloat32(),b:c.getFloat32(),intensity:c.getFloat32(),spotAngle:c.getFloat32(),size:c.getFloat32(),type:c.getUint8()}}
function readCameraDefinition(a,b){var c=a.seekToEntry(b.definition);if(!c||2<c.version)return null;var f=a.stream,d={isPerspective:!f.getUint8(),position:a.readVector3f(),target:a.readVector3f(),up:a.readVector3f(),aspect:f.getFloat32(),fov:THREE.Math.radToDeg(f.getFloat32())};2>c.version&&(f.getFloat32(),f.getFloat32());d.orthoScale=f.getFloat32();return d}
function FragList(){this.numLoaded=this.length=0;this.mesh2frag=this.fragId2dbId=this.entityIndexes=this.packIds=this.materials=this.transforms=this.boxes=null}
function readGeometryMetadata(a,b){var c=a.getEntryCounts(),f=a.stream;b.length=c;for(var d=b.fragTypes=new Uint8Array(c),g=b.primCounts=new Uint16Array(c),h=b.packIds=new Int32Array(c),k=b.entityIndexes=new Int32Array(c),l=0;l<c&&a.seekToEntry(l);l++)d[l]=f.getUint8(),f.seek(f.offset+24),g[l]=f.getUint16(),h[l]=parseInt(a.readString()),k[l]=a.readU32V()}
function readFragments(a,b){function c(a){a*=6;for(var b=0;6>b;b++)h[a++]=g.getFloat32()}function f(a,b,c){a*=6;for(var d=0;6>d;d++)h[a++]=g.getFloat32()+b[c+d%3]}var d=a.getEntryCounts(),g=a.stream;b.length=d;b.numLoaded=0;for(var h=b.boxes=new Float32Array(6*d),k=b.transforms=new Float32Array(16*d),l=b.materials=new Int32Array(d),m=b.packIds=new Int32Array(d),p=b.entityIndexes=new Int32Array(d),n=b.geomDataIndexes=new Int32Array(d),d=b.fragId2dbId=new Int32Array(d),q=0,r=b.length;q<r;q++){var s=
a.seekToEntry(q);if(!s)break;if(5<s.version)break;4<s.version&&a.readU8();l[q]=a.readU32V();2<s.version?n[q]=a.readU32V():(m[q]=parseInt(a.readString()),p[q]=a.readU32V());a.readTransform(q,k,16*q);3<s.version?f(q,k,16*q+12):c(q);1<s.version&&(d[q]=a.readU32V())}}
function filterFragments(a,b){a.length=b.length;a.numLoaded=0;for(var c=a.length,f=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],d=new Float32Array(6*c),g=new Float32Array(16*c),h=new Int32Array(c),k=new Int32Array(c),c=new Int32Array(c),l={},m=0;m<b.length;++m){for(var p=b[m],n=6*p,q=6*m,r=0;6>r;++r)d[q++]=a.boxes[n++];n=16*p;q=16*m;for(r=0;16>r;++r)g[q++]=a.transforms[n++];h[m]=a.materials[p];k[m]=a.packIds[p];c[m]=a.entityIndexes[p];r=a.packIds[p]+":"+a.entityIndexes[p];p=l[r];void 0==
p?l[r]=m:Array.isArray(p)?p.push(m):l[r]=[p,m];p=6*m;for(r=0;3>r;++r)d[p+r]<f[r]&&(f[r]=d[p+r]);for(r=3;6>r;++r)d[p+r]>f[r]&&(f[r]=d[p+r])}a.boxes=d;a.transforms=g;a.materials=h;a.packIds=k;a.entityIndexes=c;a.mesh2frag=l;return f}function readInstance(a,b){var c=a.seekToEntry(b);if(!c||2<c.version)return null;1<c.version&&a.readU8();return{definition:a.stream.getUint32(),transform:a.readTransform(),instanceNodePath:a.readPathID()}}
function Package(){this.fragments=this.metadata=this.simplemats=this.materials=this.manifest=null;this.geompacks=[];this.instances=[];this.cameras=[];this.lights=[];this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[]};this.animations=this.bbox=null;this.pendingRequests=0}
Package.prototype.loadAsyncResource=function(a,b,c,f){function d(b){g.pendingRequests--;this.response&&(b=new Uint8Array(this.response),31==b[0]&&139==b[1]&&(b=(new Zlib.Gunzip(b)).decompress()),f(b));0==g.pendingRequests&&g.postLoad(a)}if(c)f(c);else{var g=this;this.pendingRequests++;(new Xhr(a.errorHandler,a.auth,a.viewing_url)).get(a.basePath+b,a.headers,"arraybuffer",d,"",a.queryParams)}};
Package.prototype.load=function(a,b){var c=this,f=new Zlib.Unzip(b),d=f.decompress("manifest.json");if(!d)return!1;var g=new InputStream(d),h=JSON.parse(g.getString(d.byteLength)),d=f.decompress("metadata.json"),g=new InputStream(d);3<d.byteLength&&0!==d[3]&&(this.metadata=JSON.parse(g.getString(d.byteLength)).metadata)&&(g=this.metadata["world bounding box"],this.bbox=new THREE.Box3({x:g.minXYZ[0],y:g.minXYZ[1],z:g.minXYZ[2]},{x:g.maxXYZ[0],y:g.maxXYZ[1],z:g.maxXYZ[2]}),this.metadata.hasOwnProperty("double sided geometry")&&
this.metadata["double sided geometry"].value&&(this.doubleSided=!0));this.manifest=h;this.primitiveCount=this.packFileTotalSize=0;for(var k=h.typesets,g={},d=0;d<k.length;d++){var l=k[d];g[l.id]=l.types}h=h.assets;for(d=0;d<h.length;d++){l=h[d];k=l.type;0==k.indexOf("Autodesk.CloudPlatform.")&&(k=k.substr(23));var m=l.URI,p=l.typeset?g[l.typeset]:null;0!=m.indexOf("embed:/")&&("PackFile"==k?"Autodesk.CloudPlatform.Geometry"==(p?p[0]["class"]:null)&&(this.packFileTotalSize+=l.usize||0,this.geompacks.push({id:l.id,
uri:m})):"PropertyAttributes"==k?this.propertydb.attrs.push(m):"PropertyAVs"==k?this.propertydb.avs.push(m):"PropertyIDs"==k?this.propertydb.ids.push(m):"PropertyOffsets"==k?this.propertydb.offsets.push(m):"PropertyValues"==k&&this.propertydb.values.push(m));var l=l.URI,n;0==l.indexOf("embed:/")&&(l=l.substr(7),n=f.decompress(l));"ProteinMaterials"==k?-1==l.indexOf("Protein")?this.loadAsyncResource(a,l,n,function(a){var b=new InputStream(a);a=a.byteLength;0<a?(c.materials=JSON.parse(b.getString(a)),
convertMaterials(c)):c.materials=null}):this.loadAsyncResource(a,l,n,function(a){var b=new InputStream(a);a=a.byteLength;c.proteinMaterials=0<a?JSON.parse(b.getString(a)):null}):"FragmentList"==k?this.loadAsyncResource(a,l,n,function(a){a=new PackFileReader(a);var b=c.fragments=new FragList;readFragments(a,b)}):"GeometryMetadataList"==k?this.loadAsyncResource(a,l,n,function(a){a=new PackFileReader(a);c.geomMetadata={};readGeometryMetadata(a,c.geomMetadata)}):"PackFile"==k?-1!=l.indexOf("CameraDefinitions.bin")?
this.loadAsyncResource(a,l,n,function(a){c.camDefPack=new PackFileReader(a)}):-1!=l.indexOf("CameraList.bin")?this.loadAsyncResource(a,l,n,function(a){c.camInstPack=new PackFileReader(a)}):-1!=l.indexOf("LightDefinitions.bin")?this.loadAsyncResource(a,l,n,function(a){c.lightDefPack=new PackFileReader(a)}):-1!=l.indexOf("LightList.bin")&&this.loadAsyncResource(a,l,n,function(a){c.lightInstPack=new PackFileReader(a)}):"Animations"==k&&this.loadAsyncResource(a,l,n,function(a){var b=new InputStream(a);
a=a.byteLength;c.animations=0<a?JSON.parse(b.getString(a)):null})}0==this.pendingRequests&&this.postLoad(a)};
Package.prototype.postLoad=function(a){if(this.camDefPack&&this.camInstPack){for(var b=0,c=this.camInstPack.getEntryCounts();b<c;b++){var f=readInstance(this.camInstPack,b),d=readCameraDefinition(this.camDefPack,f);f.transform&&(f=(new THREE.Matrix4).copy(f.transform),d.position.applyMatrix4(f),d.target.applyMatrix4(f),d.up.transformDirection(f));this.cameras.push(d)}delete this.camDefPack;delete this.camInstPack}if(this.lightDefPack&&this.lightInstPack){b=0;for(c=this.lightInstPack.getEntryCounts();b<
c;b++)f=readInstance(this.lightInstPack,b),this.lights.push(readLightDefinition(this.lightDefPack,f.definition));delete this.lightInstPack;delete this.lightDefPack}d=this.fragments;if(this.geomMetadata){c=this.geomMetadata;b=0;for(f=d.length;b<f;b++){var g=d.geomDataIndexes[b];d.entityIndexes[b]=c.entityIndexes[g];d.packIds[b]=c.packIds[g];this.primitiveCount+=c.primCounts[g]}delete this.geomMetadata}for(var g=d.mesh2frag={},c=d.packIds,h=d.entityIndexes,b=0,f=d.length;b<f;b++){var k=c[b]+":"+h[b],
l=g[k];void 0===l?g[k]=b:Array.isArray(l)?l.push(b):g[k]=[l,b]}if(!this.bbox){c=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];f=d.boxes;g=0;for(d=d.length;g<d;g++){h=6*g;for(b=0;3>b;b++)f[h+b]<c[b]&&(c[b]=f[h+b]);for(b=3;6>b;b++)f[h+b]>c[b]&&(c[b]=f[h+b])}this.bbox=new THREE.Box3(new THREE.Vector3(c[0],c[1],c[2]),new THREE.Vector3(c[3],c[4],c[5]))}g=a.objectIds;if(null!=g){c=[];d=[];for(b=0;b<g.length;++b)for(f=0;f<this.fragments.length;++f)this.fragments.fragId2dbId[f]==g[b]&&(c.push(this.fragments.packIds[f]),
d.push(f));f=1;g=c.length;for(b=1;b<g;){for(;b<g&&c[b]==c[b-1];)++b;if(g==b)break;c[f++]=c[b++]}c.splice(f-1,g-f);g=[];for(b=0;b<this.geompacks.length;++b)for(f=0;f<c.length;++f)parseInt(this.geompacks[b].id)==c[f]&&g.push(this.geompacks[b]);this.geompacks=g;b=filterFragments(this.fragments,d);this.bbox=new THREE.Box3(new THREE.Vector3(b[0],b[1],b[2]),new THREE.Vector3(b[3],b[4],b[5]))}a.loadDoneCB(!0)};
function PackFileReader(a){31==a[0]&&139==a[1]&&(a=(new Zlib.Gunzip(a)).decompress());this.tempQuat=new THREE.Quaternion;this.tempTrans=new THREE.Vector3;this.tempScale=new THREE.Vector3;this.tempMat=new THREE.Matrix4;a=this.stream=new InputStream(a);var b=a.getInt32();this.type=a.getString(b);this.version=a.getInt32();this.types=null;this.entryOffsets=[];a.seek(a.byteLength-8);var c=a.getUint32();this.typesOffset=a.getUint32();a.seek(this.typesOffset);var f=this.readU32V();this.types=[];for(b=0;b<
f;++b)this.types.push({entryClass:this.readString(),entryType:this.readString(),version:this.readU32V()});a.seek(c);c=this.readU32V();f=this.entryOffsets;for(b=0;b<c;++b)f.push(a.getUint32());a.seek(0)}PackFileReader.prototype.readVarint=function(){var a,b=0,c=0;do a=this.stream.getUint8(),b|=(a&127)<<c,c+=7;while(a&128);return b};PackFileReader.prototype.readU32V=PackFileReader.prototype.readVarint;PackFileReader.prototype.readU16=function(){return this.stream.getUint16()};
PackFileReader.prototype.readU8=function(){return this.stream.getUint8()};PackFileReader.prototype.readString=function(){return this.stream.getString(this.readU32V())};PackFileReader.prototype.readVector3f=function(){var a=this.stream;return new THREE.Vector3(a.getFloat32(),a.getFloat32(),a.getFloat32())};
PackFileReader.prototype.readTransform=function(a,b,c){function f(a){a.set(h.getFloat32(),h.getFloat32(),h.getFloat32(),h.getFloat32())}function d(a){a.set(h.getFloat64(),h.getFloat64(),h.getFloat64())}function g(){p.identity();for(var a=0;3>a;++a)for(var b=0;3>b;++b)p.elements[4*a+b]=h.getFloat32()}var h=this.stream,k=this.tempTrans,l=this.tempQuat,m=this.tempScale,p=this.tempMat;switch(h.getUint8()){case 4:p.identity();break;case 0:d(k);p.makeTranslation(k.x,k.y,k.z);break;case 1:f(l);d(k);p.compose(k,
l,m.set(1,1,1));break;case 2:var n=h.getFloat32();f(l);d(k);p.compose(k,l,m.set(n,n,n));break;case 3:g(),d(k),p.setPosition(k)}if(void 0!==a)for(a=p.elements,k=0;16>k;k++)b[c++]=a[k];else return(new THREE.Matrix4).copy(p)};PackFileReader.prototype.getEntryCounts=function(){return this.entryOffsets.length};
PackFileReader.prototype.seekToEntry=function(a){var b=this.getEntryCounts();if(a>=b)return null;this.stream.seek(this.entryOffsets[a]);a=this.stream.getUint32();return a>=this.types.length?null:this.types[a]};
PackFileReader.prototype.readPathID=function(){var a=this.stream;if(2>this.version){var b=a.getUint16();if(!b)return null;a.getUint16();if(1==b)return"";for(var c=a.getUint16(),f=2;f<b;++f)c+="/"+a.getUint16()}else{b=this.readU32V();if(!b)return null;this.readU32V();if(1==b)return"";c=this.readU32V();for(f=2;f<b;++f)c+="/"+this.readU32V()}return c};
function PropertyDatabase(a){function b(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);a=decodeURIComponent(escape(b));return JSON.parse(a)}function c(a,b){for(var c=b,d="";c<a.length-1;){var f=a[c];if(44==f&&(10==a[c+1]||13==a[c+1]))break;if(10==f||13==f)break;d+=String.fromCharCode(f);c++}c=decodeURIComponent(escape(d));return JSON.parse(c)}function f(a,b){for(var c=0,d=0,f=a.length;d<f;d++)44==a[d]&&c++;c++;for(var f=new Uint32Array(c+(b?1:0)),d=0,g=a.length;91!=a[d]&&d<g;)d++;
if(d==a.length)return null;d++;for(var h=!1,k=c=0;d<g;){var l=a[d];48<=l&&57>=l?(k=10*k+(l-48),h=!0):44==l||93==l?h&&(f[c++]=k,h=!1,k=0):(h=!1,k=0);d++}return f}function d(a){for(var b=0,c=a.length-1,d=0;d<c;d++)44!=a[d]||10!=a[d+1]&&13!=a[d+1]||b++;if(!b)return null;b++;for(var f=new Uint32Array(b),b=d=0;91!=a[d]&&d<c;)d++;d++;f[b++]=d;for(var g=!1;d<c;)10==a[d]||13==a[d]?g=!0:g&&(g=!1,f[b++]=d),d++;return f}var g,h,k,l,m,p,n,q,r,s,u,w,v,B;for(B in a.attrs){g=b(a.attrs[B]);for(var z=0;z<g.length;z++)switch(g[z][1]){case "__parent__":r=
z;break;case "__child__":q=z;break;case "__name__":s=z;break;case "__instanceof__":u=z;break;case "__viewable_in__":w=z;break;case "__externalref__":v=z}break}for(B in a.avs){k=f(a.avs[B],0);delete a.avs;break}for(B in a.offsets){h=f(a.offsets[B],1);h[h.length-1]=k.length/2;delete a.offsets;break}for(B in a.values){l=a.values[B];m=d(l);break}for(B in a.ids){p=a.ids[B];n=d(p);break}this.getObjectCount=function(){return h.length-1};this.getValueAt=function(a){return c(l,m[a])};this.getIntValueAt=function(a){var b=
0;a=m[a];for(34==l[a]&&a++;a<l.length-1;){var c=l[a];if(44==c&&(10==l[a+1]||13==l[a+1]))break;if(10==c||13==c||34==c)break;48<=c&&57>=c&&(b+=10*b+(c-48));a++}return b};this.getIdAt=function(a){return c(p,n[a])};this.getObjectProperties=function(a){var b={dbId:a,name:"",properties:[]},c=null,d=2*h[a+1];for(a=2*h[a];a<d;a+=2){var f=k[a];if(f==s)f=this.getValueAt(k[a+1]),b.name=f;else if(f==u)(f=this.getObjectProperties(this.getValueAt(k[a+1])))&&f.properties&&(c=f);else if(f!=r&&f!=q&&f!=w&&f!=v){var f=
g[f],l=f[6]?f[6]:0;b.properties.push({displayName:f[5]?f[5]:f[0],displayValue:this.getValueAt(k[a+1]),displayCategory:f[1],type:f[2],units:f[3],hidden:l&1})}}if(c){d={};f=b.properties;for(a=0;a<f.length;a++)d[f[a].displayName]=1;b.name||(b.name=c.name);c=c.properties;for(a=0;a<c.length;a++)d.hasOwnProperty(c[a].displayName)||f.push(c[a])}return b};this.findRootNodes=function(){for(var a=[],b=1,c=h.length;b<c;b++){for(var d=!1,f=!1,g=!1,l=2*h[b+1],m=2*h[b];m<l;m+=2){var p=k[m];p==r?this.getIntValueAt(k[m+
1])&&(f=!0):p==q?d=!0:p==s&&(g=!0)}d&&g&&!f&&a.push(b)}return a};this.getNodeNameAndChildren=function(a,b){for(var c=a.dbId,d=2*h[c+1],f,c=2*h[c];c<d;c+=2){var g=k[c];g!=r&&(g!=q||b?g==s?(g=this.getValueAt(k[c+1]),a.name=g):g==u&&(g={dbId:this.getValueAt(k[c+1]),name:null},this.getNodeNameAndChildren(g,!0),g&&g.name&&!a.name&&(a.name=g.name)):(g=this.getValueAt(k[c+1]),g={dbId:g,parent:a},f?f.push(g):f=[g]))}return f};this.buildObjectTree=function(a,b,c,d){c>d[0]&&(d[0]=c);var f=this.getNodeNameAndChildren(a);
if(f){for(var g=0;g<f.length;g++)this.buildObjectTree(f[g],b,c+1,d);for(g=0;g<f.length;g++)if(f[g].children||void 0!==f[g].fragIds)a.children?a.children.push(f[g]):a.children=[f[g]]}else b=b[a.dbId],void 0!==b&&(a.fragIds=b)};this.bruteForceSearch=function(a){a=a.toLowerCase();for(var b=[],c=[],d=0,f=m.length;d<f;d++){var g=this.getValueAt(d);"string"==typeof g?-1!=g.toLowerCase().indexOf(a)&&c.push(d):-1!=g.toString().toLowerCase().indexOf(a)&&c.push(d)}a=1;for(f=h.length;a<f;a++)for(g=2*h[a+1],
d=2*h[a];d<g;d+=2)if(-1!=c.indexOf(k[d+1])){b.push(a);break}return b}}
function F2D(a,b,c,f){function d(a){a=a.children;if(void 0!==a){for(var b=0;b<a.length;++b)d(a[b]);a.sort(function(a,b){var c=a.isLayer,d=b.isLayer;return c&&!d?-1:!c&&d?1:a.name.localeCompare(b.name,void 0,{sensitivity:"base",numeric:!0})})}}function g(a){var b=0;if(a.isLayer)b=1;else{for(var c=a.children,d=0;d<c.length;++d)b+=g(c[d]);a.childCount=b}return b}this.metadata=a;this.scaleY=this.scaleX=1;this.bbox=new THREE.Box3;this.is2d=!0;this.layersMap={};this.layersRoot={name:"root",id:"root",children:[],
isLayer:!1,childCount:0};this.fontDefs={};this.fontId=this.fontCount=0;this.manifestAvailable=!1;this.objectMemberQueue=[];this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[],rcv_offsets:[],rcvs:[],viewables:[]};if(a){var h=a.page_dimensions;this.paperWidth=h.page_width;this.paperHeight=h.page_height;this.scaleX=this.paperWidth/h.plot_width;this.scaleY=this.paperHeight/h.plot_height;this.hidePaper=h.hide_paper;this.bbox.min.set(0,0,0);this.bbox.max.set(this.paperWidth,this.paperHeight,0);
var k=this.layersRoot,l=0,m=0,h=function(a,b,c){var d=k,f=a.length;if(1<f)for(var g=0;g<f-1;++g){var h=a[g],p;a:{p=d.children;for(var n=0;n<p.length;++n){var q=p[n];if(q.name===h){p=q;break a}}p=null}p||(p={name:h,id:"group-"+l++,children:[],isLayer:!1,childCount:0},d.children.push(p));d=p}d.children.push({name:b,index:c,id:m++,isLayer:!0})},p=0;this.layersMap[0]=p++;for(var n in a.layers){var q=parseInt(n),r=a.layers[n];(r="string"===typeof r?r:r.name)||(r=n);h(r.split("|"),r,q);this.layersMap[q]=
p++}this.layerCount=p}this.hidePaper=this.hidePaper||f&&f.modelSpace;d(this.layersRoot);g(this.layersRoot);this.opCount=0;this.fontFaces=[];this.fontFamilies=[];this.clip=null;this.maxObjectNumber=this.imageNumber=this.objectNumber=0;this.objectStack=[];this.objectNameStack=[];this.parseObjState={polyTriangle:{},clip:{},raster:{},text:{},fontDef:{},uknown:{}};this.layer=0;this.bgColor=f.bgColor?f.bgColor:4294967295;this.contrastColor=this.color=this.fillColor=4278190080;this.currentVbb=new VertexBufferBuilder(!1);
this.meshes=[];this.numPolytriangles=this.numTriangles=this.numCircles=this.numEllipses=this.numPolylines=this.numLineSegs=0;this.error=!1;this.offsetY=this.offsetX=0;if(b){this.manifestAvailable=!0;this.imageId2URI={};a=b.assets;b=0;for(f=a.length;b<f;++b)n=a[b],-1!=n.mime.indexOf("image/")&&(h=n.id,h=h.substr(0,h.indexOf(".")),this.imageId2URI[h]=c+n.URI),"Autodesk.CloudPlatform.PropertyAttributes"==n.type&&this.propertydb.attrs.push(n.URI),"Autodesk.CloudPlatform.PropertyValues"==n.type&&this.propertydb.values.push(n.URI),
"Autodesk.CloudPlatform.PropertyIDs"==n.type&&this.propertydb.ids.push(n.URI),"Autodesk.CloudPlatform.PropertyViewables"==n.type&&this.propertydb.viewables.push(n.URI),"Autodesk.CloudPlatform.PropertyOffsets"==n.type&&(-1!=n.id.indexOf("rcv")?this.propertydb.rcv_offsets.push(n.URI):this.propertydb.offsets.push(n.URI)),"Autodesk.CloudPlatform.PropertyAVs"==n.type&&this.propertydb.avs.push(n.URI),"Autodesk.CloudPlatform.PropertyRCVs"==n.type&&this.propertydb.rcvs.push(n.URI);debug(JSON.stringify(this.propertydb))}}
F2D.prototype.load=function(a,b){31==b[0]&&139==b[1]&&(b=(new Zlib.Gunzip(b)).decompress());this.data=b;this.parse();a.loadDoneCB(!0)};F2D.prototype.loadFrames=function(a){a.data?this.data=new Uint8Array(a.data):a.finalFrame&&(this.data=null);this.parseFrames(a.finalFrame);a.loadDoneCB(!0)};
var F2dDataType={dt_object:0,dt_void:1,dt_byte:2,dt_int:3,dt_float:4,dt_double:5,dt_varint:6,dt_point_varint:7,dt_byte_array:32,dt_int_array:33,dt_float_array:34,dt_double_drray:35,dt_varint_array:36,dt_point_varint_array:37,dt_arc:38,dt_circle:39,dt_circular_arc:40,dt_string:63,dt_last_data_type:127},F2dSemanticType={st_object_member:0,st_fill:1,st_fill_off:2,st_clip_off:3,st_layer:4,st_link:5,st_line_weight:6,st_miter_angle:7,st_miter_length:8,st_line_pattern_ref:9,st_back_color:10,st_color:11,
st_markup:12,st_object_id:13,st_markup_id:14,st_reset_rel_offset:15,st_font_ref:16,st_begin_object:32,st_clip:33,st_line_caps:34,st_line_join:35,st_line_pattern_def:36,st_font_def:37,st_sheet:42,st_arc:43,st_polyline:44,st_raster:45,st_text:46,st_polytriangle:47,st_dot:48,st_end_object:63,st_last_semantic_type:127};
F2D.prototype.flushBuffer=function(a,b){if(this.currentVbb.vcount){var c;if(c=b||this.currentVbb.isFull(a))c=this.currentVbb.toMesh(),this.bbox.union(c.boundingBox),this.meshes.push(c),c.material={skipEllipticals:!this.currentVbb.numEllipses,skipCircles:!this.currentVbb.numCirculars,skipTriangleGeoms:!this.currentVbb.numTriangleGeoms},this.currentImage&&(c.material.image=this.currentImage,c.material.image.name=this.imageNumber++,this.currentImage=null),this.currentVbb=new VertexBufferBuilder}};
F2D.prototype.tx=function(a){return this.sx(a)};F2D.prototype.ty=function(a){return this.sy(a)};F2D.prototype.sx=function(a){return a*this.scaleX};F2D.prototype.sy=function(a){return a*this.scaleY};F2D.prototype.invertColor=function(a){var b,c,f;b=255-(a>>16&255);c=255-(a>>8&255);f=255-(a&255);return(a>>24&255)<<24|b<<16|c<<8|f};F2D.prototype.mapColor=function(a){return a};F2D.prototype.restoreSignBitFromLSB=function(a){return a&1?-(a>>>1):a>>>1};
F2D.prototype.parsePointPositions=function(){var a=this.stream.getVarints(),b=this.stream.getVarints(),a=this.restoreSignBitFromLSB(a),b=this.restoreSignBitFromLSB(b),a=a+this.offsetX,b=b+this.offsetY;this.offsetX=a;this.offsetY=b;return[this.tx(a),this.ty(b)]};F2D.prototype.parserAssert=function(a,b,c){return a!=b?(debug("Expect "+b+"; actual type is "+a+"; in function "+c),this.error=!0):!1};F2D.prototype.unhandledTypeWarning=function(a,b){debug("Unhandled semantic type : "+b+" in function "+a)};
F2D.prototype.parseObject=function(){var a=this.stream.getVarints();this.objectStack.push(a);switch(a){case F2dSemanticType.st_sheet:this.objectNameStack.push("sheet");this.objectMemberQueue.unshift("paperColor");break;case F2dSemanticType.st_clip:this.objectNameStack.push("clip");this.objectMemberQueue.unshift("contourCounts","points");break;case F2dSemanticType.st_polytriangle:this.objectNameStack.push("polyTriangle");this.objectMemberQueue.unshift("points","indices","colors");break;case F2dSemanticType.st_raster:this.objectNameStack.push("raster");
this.objectMemberQueue.unshift("position","width","height","imageId");break;case F2dSemanticType.st_text:this.objectNameStack.push("text");this.objectMemberQueue.unshift("string","position","height","widthScale","rotation","oblique","charWidths");break;case F2dSemanticType.st_font_def:this.objectNameStack.push("fontDef");this.objectMemberQueue.unshift("name","fullName","flags","spacing","panose");break;case F2dSemanticType.st_end_object:this.objectStack.pop();if(this.objectStack.length){switch(this.objectStack.pop()){case F2dSemanticType.st_polytriangle:this.actOnPolyTriangle();
break;case F2dSemanticType.st_clip:this.actOnClip();break;case F2dSemanticType.st_raster:this.actOnRaster();break;case F2dSemanticType.st_text:this.actOnText();break;case F2dSemanticType.st_font_def:this.actOnFontDef()}var a=this.objectNameStack.pop(),a=this.parseObjState[a],b;for(b in a)a[b]=null}else this.parserAssert(0,1,"parseEndObject (Stack Empty)");this.objectMemberQueue.length=0;break;default:this.objectNameStack.push("unknown"),this.error=!0,this.unhandledTypeWarning("parseObject",a)}};
F2D.prototype.initSheet=function(a){this.bgColor=a;if(!this.hidePaper&&this.metadata){var b=this.paperWidth,c=this.paperHeight,f=this.currentVbb,d=0.0075*b;this.addPolyTriangle([0,0,b,0,b,c,0,c,d,-d,b+d,-d,b+d,0,d,0,b,0,b+d,0,b+d,c-d,b,c-d],[a,a,a,a,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11],4294967295,0,0,!1);f.addSegment(0,0,b,0,1E-6,4278190080,0,0);f.addSegment(b,0,b,c,1E-6,4278190080,0,0);f.addSegment(b,c,0,
c,1E-6,4278190080,0,0);f.addSegment(0,c,0,0,1E-6,4278190080,0,0)}};F2D.prototype.setObjectMember=function(a){if(!this.objectMemberQueue.length)return debug("Unexpected object member. "+a),!1;var b=this.objectMemberQueue.shift(),c=this.objectNameStack[this.objectNameStack.length-1];return"sheet"==c&&"paperColor"==b?(this.initSheet(a),!0):c?(this.parseObjState[c][b]=a,!0):!1};
F2D.prototype.parseString=function(){var a=this.stream,b=a.getVarints(),c=a.getVarints(),a=a.getString(c);switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return;break;default:debug("Unexpected opcode semantic type for string.")}return a};F2D.prototype.actOnFontDef=function(){var a=this.parseObjState.fontDef;this.fontDefs[++this.fontCount]=a;this.fontId=this.fontCount};
F2D.prototype.parsePoint=function(){var a=this.stream.getVarints(),b=this.parsePointPositions();switch(a){case F2dSemanticType.st_object_member:if(this.setObjectMember(b))return;break;default:debug("Unexpected opcode semantic type for point.")}return b};
F2D.prototype.parsePointsArray=function(){var a=this.stream,b=a.getVarints();if(a=a.getVarints()){for(var a=a/2,c=[],f,d=0;d<a;++d)f=this.parsePointPositions(),c.push(f[0]),c.push(f[1]);switch(b){case F2dSemanticType.st_polyline:this.actOnPolylinePointsArray(c);return;case F2dSemanticType.st_dot:this.actOnDot(c);return;case F2dSemanticType.st_object_member:if(this.setObjectMember(c))return;break;default:debug("Unexpected opcode semantic type for points array.")}return c}};
F2D.prototype.parseIntArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),f=[],d=0;d<c;++d)f.push(a.getUint32());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(f))return;break;default:this.unhandledTypeWarning("parseIntArray",b)}return f};
F2D.prototype.parseByteArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),f=[],d=0;d<c;++d)f.push(a.getUint8());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(f))return;break;default:this.unhandledTypeWarning("parseByteArray",b)}return f};
F2D.prototype.parseVarintArray=function(){for(var a=this.stream,b=a.getVarints(),c=[],f=a.getVarints(),d=0;d<f;++d)c.push(a.getVarints());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(c))return;break;default:this.unhandledTypeWarning("parseVarIntArray",b)}return c};
F2D.prototype.parseInt=function(){var a=this.stream,b=a.getVarints(),a=a.getUint32();switch(b){case F2dSemanticType.st_color:this.color=a;break;case F2dSemanticType.st_fill:this.fill=!0;this.fillColor=a;break;case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return;default:this.unhandledTypeWarning("parseInt",b)}return a};
F2D.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case F2dSemanticType.st_fill_off:this.fill=!1;break;default:this.unhandledTypeWarning("parseVoid",a)}};
F2D.prototype.parseVarint=function(){var a=this.stream,b=a.getVarints(),a=a.getVarints();switch(b){case F2dSemanticType.st_line_weight:this.lineWeight=this.tx(a);break;case F2dSemanticType.st_object_id:case F2dSemanticType.st_markup_id:this.objectNumber=a;this.maxObjectNumber=Math.max(this.maxObjectNumber,a);break;case F2dSemanticType.st_layer:this.layer=this.layersMap[a];break;case F2dSemanticType.st_font_ref:this.fontId=a;break;case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return}return a};
F2D.prototype.parseFloat=function(){var a=this.stream,b=a.getVarints(),a=a.getFloat32();switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return}return a};F2D.prototype.parseCircularArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,F2dSemanticType.st_arc,"parseCircularArc")){var b=this.parsePointPositions(),c=a.getVarints(),f=a.getFloat32(),a=a.getFloat32();this.actOnCircularArc(b[0],b[1],f,a,this.sx(c))}};
F2D.prototype.parseCircle=function(){var a=this.stream,b=a.getVarints();this.parserAssert(b,F2dSemanticType.st_arc,"parseCircle")||(b=this.parsePointPositions(),a=a.getVarints(),this.actOnCompleteCircle(b[0],b[1],this.sx(a)))};
F2D.prototype.parseArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,F2dSemanticType.st_arc,"parseArc")){var b=this.parsePointPositions(),c=a.getVarints(),f=a.getVarints(),d=a.getFloat32(),g=a.getFloat32(),a=a.getFloat32();this.actOnArc(b[0],b[1],g,a,this.sx(c),this.sy(f),d)}};
F2D.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case F2dDataType.dt_void:this.parseVoid();break;case F2dDataType.dt_int:this.parseInt();break;case F2dDataType.dt_object:this.parseObject();break;case F2dDataType.dt_varint:this.parseVarint();break;case F2dDataType.dt_point_varint:this.parsePoint();break;case F2dDataType.dt_float:this.parseFloat();break;case F2dDataType.dt_point_varint_array:this.parsePointsArray();break;case F2dDataType.dt_circular_arc:this.parseCircularArc();
break;case F2dDataType.dt_circle:this.parseCircle();break;case F2dDataType.dt_arc:this.parseArc();break;case F2dDataType.dt_int_array:this.parseIntArray();break;case F2dDataType.dt_varint_array:this.parseVarintArray();break;case F2dDataType.dt_byte_array:this.parseByteArray();break;case F2dDataType.dt_string:this.parseString();break;default:this.error=!0,debug("Data type not supported yet: "+a)}};
F2D.prototype.parse=function(){var a=this.stream=new InputStream(this.data),b=a.getString(3);if("F2D"!=b)debug("Invalid F2D header : "+b);else if(b=a.getString(2),"01"!=b)debug("Only support f2d major version 1; actual version is : "+b);else if("."!=a.getString(1))debug("Invalid version delimiter.");else{for(a.getString(2);a.offset<a.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}this.flushBuffer(0,!0);this.data=this.stream=this.currentVbb=null;debug("F2d parse: data types count : "+
this.opCount)}};F2D.prototype.parseFrames=function(a){if(this.data)for(var b=this.stream=new InputStream(this.data);b.offset<b.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}else a||debug("Unexpected F2D parse state: If there is no data, we only expect a flush command, but flush was false.");a&&this.flushBuffer(0,!0);this.data=this.stream=null};
F2D.prototype.actOnPolylinePointsArray=function(a){this.flushBuffer();this.numPolylines++;for(var b=a.length/2,c=a[0],f=a[1],d=1;d<b;++d){var g=a[2*d],h=a[2*d+1];this.currentVbb.addSegment(c,f,g,h,this.lineWeight,this.color,this.objectNumber,this.layer);c=g;f=h}this.numLineSegs+=b-1};F2D.prototype.actOnDot=function(a){this.actOnCompleteCircle(a[0],a[1],this.sx(1))};
F2D.prototype.actOnCompleteCircle=function(a,b,c){this.flushBuffer();this.numCircles++;this.fill?this.currentVbb.addSegment(a,b,a,b,2*c,this.color,this.objectNumber,this.layer,!0,!1,!0):this.currentVbb.addCircularArc(a,b,0,2*Math.PI,c,this.lineWeight,this.color,this.objectNumber,this.layer)};F2D.prototype.actOnCircularArc=function(a,b,c,f,d){this.numCircles++;this.flushBuffer();this.currentVbb.addCircularArc(a,b,c,f,d,this.lineWeight,this.color,this.objectNumber,this.layer)};
F2D.prototype.actOnArc=function(a,b,c,f,d,g,h){this.numEllipses++;this.flushBuffer();this.currentVbb.addEllipticalArc(a,b,c,f,d,g,h,this.lineWeight,this.color,this.objectNumber,this.layer)};
F2D.prototype.actOnRaster=function(){if(this.manifestAvailable){this.flushBuffer(4,!0);var a=this.parseObjState.raster,b=a.position,c=a.height,f=a.imageId,d=b[0],b=b[1],a=this.sx(a.width),c=this.sy(c),f={dataURI:this.imageId2URI[f],width:a,height:c};this.currentVbb.addTexturedQuad(d,b-c,a,c,this.objectNumber,this.layer);this.currentImage=f;this.flushBuffer(0,!0)}};F2D.prototype.actOnClip=function(){};F2D.prototype.actOnText=function(){};
F2D.prototype.addPolyTriangle=function(a,b,c,f,d,g,h){function k(a,b){if(a>b){var c=a;a=b;b=c}if(n[a]){var c=n[a],d=c.lastIndexOf(b);-1==d?c.push(b):c[d]=-1}else n[a]=[b]}function l(){for(var c=0,d=n.length;c<d;c++){var f=n[c];if(f)for(var g=0;g<f.length;g++){var h=f[g];-1!=h&&(p.flushBuffer(4),p.currentVbb.addSegment(a[2*c],a[2*c+1],a[2*h],a[2*h+1],q,b?b[c]:p.color,p.objectNumber,p.layer),b&&b[c]!=b[h]&&debug("Gouraud triangle encountered. Will have incorrect antialiasing."))}}}function m(c,d){if(c>
d){var f=c;c=d;d=f}(f=n[c])&&-1!=f.indexOf(d)&&(p.flushBuffer(4),p.currentVbb.addSegment(a[2*c],a[2*c+1],a[2*d],a[2*d+1],q,b?b[c]:p.color,p.objectNumber,p.layer),b&&b[c]!=b[d]&&debug("Gouraud triangle encountered. Will have incorrect antialiasing."))}var p=this,n=null,q=-1;this.objectStack[this.objectStack.length-1]==F2dSemanticType.st_text&&(q=-0.5);if(h)for(n=Array(a.length/2),f=0,d=c.length;f<d;f+=3){g=c[f];var r=c[f+1],s=c[f+2];k(g,r);k(r,s);k(s,g)}if(this.currentVbb.useInstancing)for(d=c.length,
f=0;f<d;f+=3)g=c[f],r=c[f+1],s=c[f+2],this.flushBuffer(4),this.currentVbb.addTriangleGeom(a[2*g],a[2*g+1],a[2*r],a[2*r+1],a[2*s],a[2*s+1],b?b[g]:this.color,this.objectNumber,this.layer),h&&(m(g,r),m(r,s),m(s,g));else{d=a.length/2;this.flushBuffer(d);g=this.currentVbb;r=g.vcount;for(f=0;f<d;++f)g.addVertexPolytriangle(a[2*f],a[2*f+1],0,0,0,b?b[f]:this.color,this.objectNumber,this.layer);d=c.length;for(f=0;f<d;f+=3)g.addTriangle(r+c[f],r+c[f+1],r+c[f+2]);h&&l()}};
F2D.prototype.actOnPolyTriangle=function(){var a=this.parseObjState.polyTriangle;this.parseObjState.polyTriangle={};var b=a.points,c=a.indices,a=a.colors;b&&c?(this.numPolytriangles++,this.numTriangles+=c.length/3,this.addPolyTriangle(b,a,c,this.color,this.layer,this.objectNumber,!0)):debug("Malformed polytriangle.")};function F2DProbe(){this.data=null;this.frameEnd=this.frameStart=0;this.stream=null;this.opCount=0;this.marker={frameStart:this.frameStart,frameEnd:this.frameEnd}}
F2DProbe.prototype.load=function(a){this.data=a;this.frameStart=0;this.stream?(this.stream.reset(this.data),this.stream.seek(0),this.frameEnd=0):(this.stream=new CheckedInputStream(this.data),this.stream.seek(8),this.frameEnd=this.frameStart=8);this.probe();this.marker.frameStart=this.frameStart;this.marker.frameEnd=this.frameEnd;return this.marker};
var F2dProbeDataType={dt_object:0,dt_void:1,dt_byte:2,dt_int:3,dt_float:4,dt_double:5,dt_varint:6,dt_point_varint:7,dt_byte_array:32,dt_int_array:33,dt_float_array:34,dt_double_drray:35,dt_varint_array:36,dt_point_varint_array:37,dt_arc:38,dt_circle:39,dt_circular_arc:40,dt_string:63,dt_last_data_type:127},F2dProbeSemanticType={st_object_member:0,st_fill:1,st_fill_off:2,st_clip_off:3,st_layer:4,st_link:5,st_line_weight:6,st_miter_angle:7,st_miter_length:8,st_line_pattern_ref:9,st_back_color:10,st_color:11,
st_markup:12,st_object_id:13,st_markup_id:14,st_reset_rel_offset:15,st_font_ref:16,st_begin_object:32,st_clip:33,st_line_caps:34,st_line_join:35,st_line_pattern_def:36,st_font_def:37,st_sheet:42,st_arc:43,st_polyline:44,st_raster:45,st_text:46,st_polytriangle:47,st_dot:48,st_end_object:63,st_last_semantic_type:127};F2DProbe.prototype.readColor=function(){var a=this.stream;a.getVarints();a.getVarints();a.skipUint32()};F2DProbe.prototype.parsePointPositions=function(){this.stream.getVarints();this.stream.getVarints()};
F2DProbe.prototype.unhandledTypeWarning=function(a,b){debug("Unhandled semantic type when probing F2d : "+b+" in function "+a)};F2DProbe.prototype.parseObject=function(){this.stream.getVarints()};F2DProbe.prototype.parseString=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)};F2DProbe.prototype.parsePoint=function(){this.stream.getVarints();this.parsePointPositions()};
F2DProbe.prototype.parseVarintArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.getVarints()};F2DProbe.prototype.parseByteArray=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)};F2DProbe.prototype.parseEndOfObject=function(){var a=this.stream;a.getVarints();a.getVarints()};F2DProbe.prototype.parsePointsArray=function(a){a=this.stream;a.getVarints();if(a=a.getVarints()){a/=2;for(var b=0;b<a;++b)this.parsePointPositions()}};
F2DProbe.prototype.parsePoint=function(a){this.stream.getVarints();this.parsePointPositions()};F2DProbe.prototype.parseInt=function(){var a=this.stream,b=a.getVarints();switch(b){case F2dProbeSemanticType.st_color:a.skipUint32();break;case F2dProbeSemanticType.st_fill:a.skipUint32();break;default:a.skipUint32(),this.unhandledTypeWarning("parseInt",b)}};
F2DProbe.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case F2dProbeSemanticType.st_fill_off:break;default:this.unhandledTypeWarning("parseVoid",a)}};F2DProbe.prototype.parseVarint=function(){this.stream.getVarints();this.stream.getVarints()};F2DProbe.prototype.parseIntArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.skipUint32()};F2DProbe.prototype.parseFloat=function(){var a=this.stream;a.getVarints();a.getFloat32()};
F2DProbe.prototype.parseCircularArc=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints();a.getFloat32();a.getFloat32()};F2DProbe.prototype.parseCircle=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints()};F2DProbe.prototype.parseArc=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints();a.getVarints();a.getFloat32();a.getFloat32();a.getFloat32()};
F2DProbe.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case F2dProbeDataType.dt_void:this.parseVoid();break;case F2dProbeDataType.dt_int:this.parseInt();break;case F2dProbeDataType.dt_object:this.parseObject();break;case F2dProbeDataType.dt_varint:this.parseVarint();break;case F2dProbeDataType.dt_float:this.parseFloat();break;case F2dProbeDataType.dt_point_varint:this.parsePoint();break;case F2dProbeDataType.dt_point_varint_array:this.parsePointsArray();break;case F2dProbeDataType.dt_circular_arc:this.parseCircularArc();
break;case F2dProbeDataType.dt_circle:this.parseCircle();break;case F2dProbeDataType.dt_arc:this.parseArc();break;case F2dProbeDataType.dt_varint_array:this.parseVarintArray();break;case F2dProbeDataType.dt_int_array:this.parseIntArray();break;case F2dProbeDataType.dt_byte_array:this.parseByteArray();break;case F2dProbeDataType.dt_string:this.parseString();break;default:this.error=!0,debug("Bad op code encountered : "+a+" , bail out.")}this.error||(this.frameEnd=this.stream.offset)};
F2DProbe.prototype.probe=function(){var a=this.stream;try{for(;a.offset<a.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}}catch(b){}};function CheckedInputStream(a){this.buffer=a;this.offset=0;this.byteLength=a.length;this.convBuf=new ArrayBuffer(8);this.convUint8=new Uint8Array(this.convBuf);this.convUint16=new Uint16Array(this.convBuf);this.convInt32=new Int32Array(this.convBuf);this.convUint32=new Uint32Array(this.convBuf)}
function OutOfBoundsBufferAccessException(a){this.offset=a;this.message="try to access an offset that is out of bounds: "+this.offset;this.toString=function(){return this.message}}CheckedInputStream.prototype.boundsCheck=function(a){if(a>=this.byteLength)throw new OutOfBoundsBufferAccessException(a);};CheckedInputStream.prototype.seek=function(a){this.boundsCheck(a);this.offset=a};
CheckedInputStream.prototype.getBytes=function(a){this.boundsCheck(this.offset+a);var b=new Uint8Array(this.buffer.buffer,this.offset,a);this.offset+=a;return b};CheckedInputStream.prototype.skipBytes=function(a){this.boundsCheck(this.offset+a);this.offset+=a};CheckedInputStream.prototype.getVarints=function(){var a,b=0,c=0;do this.boundsCheck(this.offset),a=this.buffer[this.offset++],b|=(a&127)<<c,c+=7;while(a&128);return b};
CheckedInputStream.prototype.getUint8=function(){this.boundsCheck(this.offset+1);return this.buffer[this.offset++]};CheckedInputStream.prototype.getUint16=function(){this.boundsCheck(this.offset+2);this.convUint8[0]=this.buffer[this.offset++];this.convUint8[1]=this.buffer[this.offset++];return this.convUint16[0]};CheckedInputStream.prototype.getInt16=function(){var a=this.getUint16();32767<a&&(a|=4294901760);return a};
CheckedInputStream.prototype.getInt32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convInt32[0]};CheckedInputStream.prototype.getUint32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convUint32[0]};
CheckedInputStream.prototype.skipUint32=function(){this.boundsCheck(this.offset+4);this.offset+=4};CheckedInputStream.prototype.getFloat32=function(){this.boundsCheck(this.offset+4);this.offset+=4;return 0};CheckedInputStream.prototype.getFloat64=function(){this.boundsCheck(this.offset+8);this.offset+=8;return 0};CheckedInputStream.prototype.reset=function(a){this.buffer=a;this.offset=0;this.byteLength=a.length};AutodeskNamespace("Autodesk.Viewing.Private");var VIEWER2D_NAVIGATION_MODE={PAN:1,ZOOM:2};
Autodesk.Viewing.Private.Viewer2DImpl=function(a,b){this.api=a;this.config=b;this.parent=b.domElement;this.navigationMode=null};Autodesk.Viewing.Private.Viewer2DImpl.prototype.constructor=Autodesk.Viewing.Private.Viewer2DImpl;
Autodesk.Viewing.Private.Viewer2DImpl.prototype.initialize=function(){var a=document.createElement("canvas");a.width=1;a.height=1;this.selCtx=a.getContext("2d");this.selCtx.globalCompositeOperation="copy";this.selCtx.imageSmoothingEnabled=!1;this.container=document.createElement("div");this.container.style.width="100%";this.container.style.height="100%";this.parent.appendChild(this.container);return 0};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.load=function(a){var b=this.config.tileSize?this.config.tileSize:1024,c=this.config.maxZoom?this.config.maxZoom:5,f=a.indexOf("urn:");-1!=f&&(a=a.substr(0,f)+encodeURIComponent(a.substr(f)));var f=[a],d=[];for(a=0;a<f.length;a++){var g=L.tileLayer(f[a]+"/{z}/{x}/c{y}.png",{maxZoom:c,noWrap:!0,continuousWorld:!1,detectRetina:!0,tileSize:b});d.push(g)}var h=this.map=L.map(this.container,{center:new L.LatLng(0,0),zoom:0,zoomControl:!1,attributionControl:!1,
layers:[d[0]]});h.options.crs.scale=function(a){return b*Math.pow(2,a)};c={};for(a=0;a<f.length;a++)c[f[a]]=d[3*a];L.control.layers(c,void 0).addTo(h);c=document.getElementsByClassName("leaflet-control-layers");for(a=0;a<c.length;a++)c[a].style.visibility="hidden";h.on("baselayerchange",function(a){console.log(a);var b=[],c;for(c in h._layers){var d=h._layers[c];d!=a.layer&&b.push(d)}for(c=0;c<b.length;c++)h.removeLayer(b[c]);a.layer.idTileLayer&&(h.addLayer(a.layer.idTileLayer),h.addLayer(a.layer.canvasLayer))});
var k=this,l=!1,m,p,n,q,r;this.mousemove=function(a){if(l&&k.navigationMode===VIEWER2D_NAVIGATION_MODE.ZOOM){var b=a.clientX-m,c=a.clientY-p,c=-c;if(2<Math.abs(b)||2<Math.abs(c))b=Math.abs(b)>Math.abs(c)?b:c,b=Math.round(n+b/r),b=Math.max(h.getMinZoom(),Math.min(b,h.getMaxZoom())),h.setZoomAround(q,b,{animate:!0}),a.preventDefault(),a.stopPropagation()}};h.on("mousedown",function(a){l=!0;if(k.navigationMode===VIEWER2D_NAVIGATION_MODE.ZOOM){m=a.originalEvent.clientX;p=a.originalEvent.clientY;n=h.getZoom();
q=h.getCenter();var b=h.getSize(),b=b.x<b.y?b.x:b.y,c=h.getMaxZoom()-h.getMinZoom();r=b/(2*c);h.scrollWheelZoom.disable();window.addEventListener("mousemove",k.mousemove,!1);a.originalEvent.preventDefault();a.originalEvent.stopPropagation()}});h.on("mouseup",function(a){l=!1;k.navigationMode===VIEWER2D_NAVIGATION_MODE.ZOOM&&(h.scrollWheelZoom.enable(),window.removeEventListener("mousemove",k.mousemove,!1),a.originalEvent.preventDefault(),a.originalEvent.stopPropagation())});this.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN);
this.keyup=function(a){var b=document.activeElement.nodeName;if("INPUT"!==b&&"TEXTAREA"!==b){b=!1;if(27===a.keyCode)k.api.fireEvent({type:Autodesk.Viewing.ESCAPE_EVENT}),b=!0;else if(36===a.keyCode||70===a.keyCode||72===a.keyCode)k.goHome(),b=!0;b&&(a.preventDefault(),a.stopPropagation())}};window.addEventListener("keyup",this.keyup,!1);h.fitWorld();return!0};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.uninitialize=function(){window.removeEventListener("mousemove",this.mousemove,!1);window.removeEventListener("keyup",this.keyup,!1);this.map.remove()};Autodesk.Viewing.Private.Viewer2DImpl.prototype.resize=function(){this.map.invalidateSize(!1)};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.setNavigationMode=function(a){var b=!1;this.navigationMode!==a&&(this.navigationMode=a,this.map&&(a===VIEWER2D_NAVIGATION_MODE.PAN?(this.map.dragging.enable(),window.removeEventListener("mousemove",this.mousemove,!1)):a===VIEWER2D_NAVIGATION_MODE.ZOOM&&this.map.dragging.disable()),this.api.fireEvent({type:Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,value:a}),b=!0);return b};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.goHome=function(){this.map.setView([0,0],0,{reset:!0})};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.inWorkerThread="undefined"!==typeof self&&"undefined"===typeof window;Autodesk.Viewing.Private.RefreshTokenHandler=function(){};Autodesk.Viewing.Private.RefreshTokenHandler.prototype.shouldRefreshToken=function(a,b,c){return 401===a};Autodesk.Viewing.Private.RefreshTokenHandler.prototype.refreshToken=function(a,b){};
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler=function(){Autodesk.Viewing.Private.RefreshTokenHandler.call(this)};Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype=Object.create(Autodesk.Viewing.Private.RefreshTokenHandler.prototype);Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.constructor=Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler;
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.shouldRefreshToken=function(a,b,c){b=!1;401===a?(a="string"===typeof c&&""!==c?JSON.parse(c):c,b=""===c||a.hasOwnProperty("errorCode")&&"AUTH-006"===a.errorCode):b=403===a;return b};
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.refreshToken=function(a,b){var c=null;Autodesk.Viewing.Private.refreshToken&&(c=Autodesk.Viewing.Private.refreshToken());c?0===Autodesk.Viewing.Private.env.indexOf("Autodesk")?Autodesk.Viewing.Private.setApigeeTokenInCookie(c,a,b):Autodesk.Viewing.Private.setAuthTokenInCookie(c,a,b):b&&b(null)};Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler=function(){Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.call(this)};
Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype=Object.create(Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype);Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype.constructor=Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler;
Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype.refreshToken=function(a,b){Autodesk.Viewing.Private.inWorkerThread?(self.addEventListener("message",function(c){c.data&&c.data.tokenRefreshed?a(c):b(c)}),self.postMessage({refreshToken:!0})):Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.refreshToken.call(this,a,b)};Autodesk.Viewing.Private.Xhr=function(a,b){this.request=new XMLHttpRequest;this.withCredentials=a;this.refreshTokenHandler=b};
Autodesk.Viewing.Private.Xhr.prototype.generateUrl=function(a,b){var c=this.getDefaultQueryParameters();b&&(c+="&"+b);c&&(a=a+"?"+c);return a};Autodesk.Viewing.Private.Xhr.prototype.getDefaultHeaders=function(){return{}};Autodesk.Viewing.Private.Xhr.prototype.getDefaultQueryParameters=function(){return""};Autodesk.Viewing.Private.Xhr.prototype.addHeaders=function(a){var b=this.getDefaultHeaders();a&&0<a.length&&b.push.apply(b,a);for(var c in b)this.request.setRequestHeader(c,b[c])};
Autodesk.Viewing.Private.Xhr.prototype.get=function(a,b,c,f){var d=this;f=f?f:{};a=d.generateUrl(a,f?f.queryParams:null);try{var g=f.hasOwnProperty("asynchronous")?f.asynchronous:!0;d.request.open("GET",a,g);f.hasOwnProperty("responseType")&&(d.request.responseType=f.responseType);d.request.withCredentials=d.withCredentials;d.addHeaders(f.hasOwnProperty("headers")?f.headers:[]);var h=function(g){(f.hasOwnProperty("retryOnAuthenticationFail")?f.retryOnAuthenticationFail:1)&&d.refreshTokenHandler&&
d.refreshTokenHandler.shouldRefreshToken(d.request.status,d.request.statusText,"text"===d.request.responseType||""===d.request.responseType?d.request.responseText:"")?d.refreshTokenHandler.refreshToken(function(g){d.request=new XMLHttpRequest;f.retryOnAuthenticationFail=!1;d.get(a,b,c,f)},function(b){c(d.request.status,d.request.statusText,{url:a})}):c(d.request.status,d.request.statusText,{url:a})},k=function(a){200===d.request.status?b(d.request.response?d.request.response:d.request.responseText):
h(a)};g&&(d.request.onload=k,d.request.onerror=h,d.request.ontimeout=h);d.request.send();g||k(null)}catch(l){c(d.request.status,d.request.statusText,{url:a,exception:l})}};
Autodesk.Viewing.Private.ViewingServiceXhr=function(a,b,c){var f=c&&c.hasOwnProperty("refreshTokenHandler")?c.refreshTokenHandler:new Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler;this.withCredentials=!0;c&&c.hasOwnProperty("withCredentials")&&(this.withCredentials=c.withCredentials);Autodesk.Viewing.Private.Xhr.call(this,this.withCredentials,f);this.api=b;this.baseUrl=a;this.options=c};Autodesk.Viewing.Private.ViewingServiceXhr.prototype=Object.create(Autodesk.Viewing.Private.Xhr.prototype);
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.constructor=Autodesk.Viewing.Private.ViewingServiceXhr;
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.generateUrl=function(a,b){if(0===a.indexOf("urn:")){"items"!==this.api&&(a=a.substr(4));var c=this.options&&this.options.hasOwnProperty("encodeUrn")?this.options.encodeUrn:!0;a="bubbles"===this.api&&0==Autodesk.Viewing.Private.env.indexOf("Autodesk")?this.baseUrl+"/"+(c?encodeURIComponent(a):a):this.baseUrl+"/"+this.api+"/"+(c?encodeURIComponent(a):a)}return Autodesk.Viewing.Private.Xhr.prototype.generateUrl.call(this,a,b)};
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.getDefaultHeaders=function(){return{}};Autodesk.Viewing.Private.ViewingServiceXhr.prototype.getDefaultQueryParameters=function(){return this.withCredentials?"domain="+(Autodesk.Viewing.Private.inWorkerThread?self.location.hostname:window.location.hostname):""};
var Xhr=function(){var a=function(a,c,f){this.xhr=new XMLHttpRequest;this.errorHandler=a;this.success=!1;this.viewing_url=f;this.auth=c};a.prototype.generateUrl=function(a,c,f){var d=a.indexOf("urn:");0===d&&this.viewing_url&&((f=f&&f.feature?f.feature:null)?"render"==f?(a=a.substr(4),a=this.viewing_url+"/"+f+"/"+encodeURIComponent(a)):"bubbles"==f?(a=a.substr(4),a=this.viewing_url+"/"+f+"/"+encodeURIComponent(a)):"comments"==f?(a=a.substr(4),a=this.viewing_url+"/"+f+"/file/"+encodeURIComponent(a)):
a=this.viewing_url+"/"+f+"/"+encodeURIComponent(a.substr(d)):a=this.viewing_url+"/items/"+encodeURIComponent(a.substr(d)));c&&(a=a+"?"+c);return a};a.prototype.addHeaders=function(a){for(var c in a)this.xhr.setRequestHeader(c,a[c])};a.prototype.get=function(a,c,f,d,g,h){a=this.generateUrl(a,h,{feature:g});try{this.xhr.open("GET",a,!!d),this.xhr.responseType=f,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),d&&(this.xhr.onload=d),this.addHeaders(c),this.xhr.send()}catch(k){return this.errorHandler&&
this.errorHandler.networkFailure(a,k),null}this.errorCheck(a,200);return this.xhr.response};a.prototype.post=function(a,c,f,d,g,h){a=this.generateUrl(a,null,{feature:h});c["Content-Type"]||(c["Content-Type"]="application/json");try{this.xhr.open("POST",a,!!g),this.xhr.responseType=d,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),g&&(this.xhr.onload=g),this.addHeaders(c),this.xhr.send(f)}catch(k){return this.errorHandler&&this.errorHandler.networkFailure(a,k),null}this.errorCheck(a,200,201);
return this.xhr.response};a.prototype.getRange=function(a,c,f,d,g,h){a=this.generateUrl(path);c.Range="bytes="+d+"-"+g;try{this.xhr.open("GET",a,!!h),this.xhr.responseType=f,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),h&&(this.xhr.onload=h),this.addHeaders(c),this.xhr.send()}catch(k){return this.errorHandler&&this.errorHandler.networkFailure(a,k),null}this.errorCheck(a,206);return this.xhr.response};a.prototype.head=function(a){a=this.generateUrl(path);try{this.xhr.open("GET",a,!1),this.success=
!1,this.auth&&(this.xhr.withCredentials=!0),this.addHeaders([]),this.xhr.send()}catch(c){return this.errorHandler&&this.errorHandler.networkFailure(a,c),null}this.errorCheck(a,200);a=[];a["Accept-Ranges"]=this.xhr.getResponseHeader("Accept-Ranges");a["Content-Length"]=this.xhr.getResponseHeader("Content-Length");return a};a.prototype.errorCheck=function(a,c){if(4===this.xhr.readyState&&this.xhr.status){var f;for(f=1;f<arguments.length&&this.xhr.status!==arguments[f];f++);f===arguments.length&&this.errorHandler?
this.errorHandler.unsuccessfulResponse(a,this.xhr.status,this.xhr.statusText):this.success=!0}else this.success=!0};return a}(),XhrErrorHandler=function(){var a=function(a){this.host=a;this.ignoreFileNotFound=!1};a.prototype.networkFailure=function(a,c){this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FAILURE,"Network failure",{url:a,exception:c.toString(),stack:c.stack})};a.prototype.unsuccessfulResponse=function(a,c,f){403==c?this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED,
"Access denied to remote resource",{url:a,httpStatus:c,httpStatusText:f}):404==c?this.ignoreFileNotFound||this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:a,httpStatus:c,httpStatusText:f}):500<=c&&600>c?this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:a,httpStatus:c,httpStatusText:f}):this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",
{url:a,httpStatus:c,httpStatusText:f})};return a}();AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.Logger=function(a){this.queue=[];this.console=a.console;this.viewingservice=a.viewingservice;this.webstorage=a.webstorage;this.endpoint=a.endpoint+"/logs/";this.flushThreshold=a.flushThreshold;this.viewingservice&&(this.xhr=new XMLHttpRequest);this.lastFlushTime=Date.now()};Autodesk.Viewing.Private.Logger.prototype.bindURN=function(a){this.urn=a};
Autodesk.Viewing.Private.Logger.prototype.flush=function(){if(this.queue.length){var a=JSON.stringify(this.queue);if(this.viewingservice)try{var b=this.xhr;b.open("POST",this.endpoint+encodeURIComponent(this.urn),!0);b.setRequestHeader("Access-Control-Allow-Credentials","true");b.setRequestHeader("Access-Control-Allow-Origin","*");b.setRequestHeader("Content-Type","text/plain");b.withCredentials=!0;b.send(a)}catch(c){}this.queue=[];this.lastFlushTime=Date.now()}};
Autodesk.Viewing.Private.Logger.prototype.log=function(a,b){this.queue.push(a);(this.queue.length>this.flushThreshold||b)&&this.flush()};var propdb=null,propdbFailed=!1;
function loadPropertyPacks(a,b,c){function f(b){if(!b){if(h){propdbFailed=!0;c(null);return}h=!0;b=[];b.push({filename:"objects_attrs.json",storage:d.attrs});b.push({filename:"objects_vals.json",storage:d.values});b.push({filename:"objects_avs.json",storage:d.avs});b.push({filename:"objects_offs.json",storage:d.offsets});g=b}0===g.length?(propdb=new PropertyDatabase(d),c(propdb),propdbFailed=!1):(b=g.shift(),requestFile(b.filename,a,f,b.storage))}if(propdb)c(propdb);else if(propdbFailed)c(null);else if(b=
a.propertydb){var d={ids:{},attrs:{},offsets:{},values:{},avs:{}},g=[];g.push({filename:b.attrs.length?b.attrs[0]:"objects_attrs.json.gz",storage:d.attrs});g.push({filename:b.values.length?b.values[0]:"objects_vals.json.gz",storage:d.values});g.push({filename:b.avs.length?b.avs[0]:"objects_avs.json.gz",storage:d.avs});g.push({filename:b.offsets.length?b.offsets[0]:"objects_offs.json.gz",storage:d.offsets});var h=!1;b=g.shift();requestFile(b.filename,a,f,b.storage)}else propdbFailed=!0,c(null)}
function doPropertyGet(a,b){var c=b.dbId;loadPropertyPacks(b,c,function(b){b&&(b=b.getObjectProperties(c),a.postMessage({result:b,dbId:c}))})}
function computeTreeBBoxes(a,b,c){var f=6*a.dbId;b[f]=b[f+1]=b[f+2]=Infinity;b[f+3]=b[f+4]=b[f+5]=-Infinity;var d=a.children;if(d)for(var g=0,h=d.length;g<h;g++){computeTreeBBoxes(d[g],b,c);for(var k=6*(d[g].dbId|0),l=0;3>l;l++)b[f+l]>b[k+l]&&(b[f+l]=b[k+l]),b[f+l+3]<b[k+l+3]&&(b[f+l+3]=b[k+l+3])}if(void 0!==a.fragIds)if(!Array.isArray(a.fragIds))for(d=6*(a.fragIds|0),l=0;3>l;l++)b[f+l]>c[d+l]&&(b[f+l]=c[d+l]),b[f+l+3]<c[d+l+3]&&(b[f+l+3]=c[d+l+3]);else if(a.fragIds.length)for(g=0;g<a.fragIds.length;g++)for(d=
6*(a.fragIds[g]|0),l=0;3>l;l++)b[f+l]>c[d+l]&&(b[f+l]=c[d+l]),b[f+l+3]<c[d+l+3]&&(b[f+l+3]=c[d+l+3])}function buildDbIdToFragMap(a){for(var b={},c=0,f=a.length;c<f;c++){var d=a[c],g=b[d];void 0===g?b[d]=c:Array.isArray(g)?g.push(c):b[d]=[g,c]}return b}
function doObjectTreeParse(a,b){loadPropertyPacks(b,null,function(c){if(c){var f;b.fragToDbId&&(f=buildDbIdToFragMap(b.fragToDbId));var d=c.findRootNodes(),g,h=[0],k=c.getObjectCount();if(d&&d.length)if(1==d.length)g={dbId:d[0]},c.buildObjectTree(g,f,0,h);else{g={dbId:0,children:[]};for(var l=0;l<d.length;l++){var m={dbId:d[l]};g.children.push(m);c.buildObjectTree(m,f,0,h)}}a.postMessage({instanceTree:g,maxTreeDepth:h[0],objectCount:k});b.fragBoxes&&(c=new Float32Array(6*c.getObjectCount()),computeTreeBBoxes(g,
c,b.fragBoxes),a.postMessage({instanceBoxes:c}))}else a.postMessage({instanceTree:null,maxTreeDepth:0})})}
function requestFile(a,b,c,f){var d=b.url+a,g=null,g=-1!==d.indexOf(".gz",d.length-3)?function(b){try{var g=new Uint8Array(b);31==g[0]&&139==g[1]&&(g=(new Zlib.Gunzip(g)).decompress());f[a]=g;c(g)}catch(l){self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malformed data received when requesting file",{url:d,exception:l.toString(),stack:l.stack}),c(null)}}:function(b){f[a]=rawbuf;c(new Uint8Array(b))};(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(d,
g,function(a,d,f){if(404!==a)b.onFailureCallback(a,d,f);c(null)},{responseType:"arraybuffer",asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}function doPropertySearch(a,b){loadPropertyPacks(b,null,function(c){c&&(c=c.bruteForceSearch(b.searchText),a.postMessage(c))})}
function doGeomLoad(a,b){(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(b.url,function(c){a.postMessage({url:b.url,workerId:b.workerId,progress:0.5});try{var f=new PackFileReader(new Uint8Array(c))}catch(d){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while reading pack file",{url:b.url,exception:d.toString(),stack:d.stack});a.postMessage(null);return}for(var g=c=!1,h={packId:b.packId,meshIndex:0,mesh:null,workerId:b.workerId,
progress:0},k=0,l=f.getEntryCounts();k<l;k++){try{var m=readGeometry(f,k,null)}catch(p){g||(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while reading geometry",{url:b.url,exception:p.toString(),stack:p.stack}),c=g=!0),m=null}h.meshIndex=k;h.mesh=m;h.progress=0.5+(k+1)/l*0.5;if(m){var n=[];n.push(m.vb.buffer);a.postMessage(h,n)}else c||(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unable to load geometry",{url:b.url}),c=!0),a.postMessage(h)}},b.onFailureCallback,{responseType:"arraybuffer",
asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}
function doLoadSvf(a,b){(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(b.url,function(c){a.postMessage({progress:0.5});var f=new Package;b.loadDoneCB=function(c){c?a.postMessage({svf:f}):(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Failure while loading SVF",{url:b.url}),a.postMessage(null))};try{f.load(b,new Uint8Array(c))}catch(d){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while loading SVF",{url:b.url,exception:d.toString(),
stack:d.stack}),a.postMessage(null)}},b.onFailureCallback,{responseType:"arraybuffer",asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}var ENABLE_OCTM_MG2=!1,IS_WORKER="undefined"!==typeof self&&"undefined"===typeof window;
if(IS_WORKER){var f2d=null;IS_CONCAT_BUILD||(importScripts("../AutodeskNamespace.js"),importScripts("../compatibility.js"),importScripts("../render/adsk_three.js"),importScripts("../lmvtk/gunzip.min.js"),importScripts("../lmvtk/unzip.min.js"),ENABLE_OCTM_MG2&&(importScripts("../lmvtk/inflate.min.js"),importScripts("../lmvtk/octm_mg2.js")),importScripts("../lmvtk/InputStream.js"),importScripts("../lmvtk/VbUtils.js"),importScripts("../lmvtk/VertexBufferBuilder.js"),importScripts("../lmvtk/PackReader.js"),
importScripts("../lmvtk/Geoms.js"),importScripts("../lmvtk/Materials.js"),importScripts("../lmvtk/Lights.js"),importScripts("../lmvtk/Cameras.js"),importScripts("../lmvtk/Fragments.js"),importScripts("../lmvtk/Instances.js"),importScripts("../lmvtk/Package.js"),importScripts("../lmvtk/PackReader.js"),importScripts("../lmvtk/Propdb.js"),importScripts("../lmvtk/F2d.js"),importScripts("../lmvtk/F2dProbe.js"),importScripts("../lmvtk/CheckedInputStream.js"),importScripts("../net/Xhr.js"),importScripts("GeomWorker.js"),
importScripts("SvfWorker.js"),importScripts("PropWorker.js"),importScripts("F2dParseWorker.js"),importScripts("F2dStreamWorker.js"),importScripts("CloudRenderingWorker.js"),importScripts("../application/Viewer.js"),importScripts("../ErrorCodes.js"));self.addEventListener("message",function(a){var b=a.data;if(b.hasOwnProperty("operation")){b.basePath="";if(b.url){var c=b.url.lastIndexOf("/");-1!=c&&(b.basePath=b.url.substr(0,c+1))}b.onFailureCallback=function(a,b,c){403==a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED,
"Access denied to remote resource",{url:c.url,httpStatus:a,httpStatusText:b}):404==a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:c.url,httpStatus:a,httpStatusText:b}):500<=a&&600>a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:c.url,httpStatus:a,httpStatusText:b}):c.exception?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FAILURE,"Network failure",{url:c.url,exception:c.exception.toString(),
stack:c.exception.stack}):self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",{url:c.url,httpStatus:a,httpStatusText:b})};b.errorHandler=new XhrErrorHandler(self);a=a.data.operation;"LOAD_GEOMETRY"==a?doGeomLoad(self,b):"LOAD_SVF"==a?doLoadSvf(self,b):"GET_PROPERTIES"==a?doPropertyGet(self,b):"SEARCH_PROPERTIES"==a?doPropertySearch(self,b):"GET_OBJECT_TREE"==a?doObjectTreeParse(self,b):"PARSE_F2D"==a?doParseF2D(self,b):"PARSE_F2D_FRAME"==
a?doParseF2DFrame(self,b):"STREAM_F2D"==a?doStreamF2D(self,b):"CLOUD_RENDERING"==a?doCloudRendering(self,b):"SVF_TO_SPD"==a&&doSvfToSpd(self,b)}},!1);self.raiseError=function(a,b,c){self.postMessage({error:{code:a,msg:b,args:c}})};var debug=function(a){self.postMessage({debug:1,message:a})}}
function doParseF2D(a,b){if(b.data){a.postMessage({progress:0.5});var c=new F2D(b.metadata,b.manifest,b.basePath,b.f2dLoadOptions);b.loadDoneCB=function(b){b?a.postMessage({f2d:c}):(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{}),a.postMessage(null))};try{c.load(b,new Uint8Array(b.data))}catch(f){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{exception:f.toString(),stack:f.stack}),a.postMessage(null)}}else a.postMessage(null)}
function doParseF2DFrame(a,b){f2d||(a.postMessage({progress:0.5}),f2d=new F2D(b.metadata,b.manifest,b.basePath,b.f2dLoadOptions),f2d.F2D_MESH_COUNT_OLD=0,a.postMessage({f2dframe:f2d}));b.loadDoneCB=function(c){if(c){if(f2d.meshes.length){c={f2dframe:!0,meshes:f2d.meshes,baseIndex:f2d.F2D_MESH_COUNT_OLD,maxObjectNumber:f2d.maxObjectNumber,bbox:f2d.bbox};b.finalFrame&&(c.finalFrame=!0);for(var d=[],g=0,h=f2d.meshes.length;g<h;++g)d.push(f2d.meshes[g].vb.buffer),d.push(f2d.meshes[g].indices.buffer);
a.postMessage(c,d);f2d.F2D_MESH_COUNT_OLD+=f2d.meshes.length;f2d.meshes=[]}}else a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{}),a.postMessage(null)};try{f2d.loadFrames(b)}catch(c){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{exception:c.toString(),stack:c.stack}),a.postMessage(null)}}var ENABLE_F2D_STREAMING_MODE=!0;
function requestFileF2D(a,b){b.errorHandler.ignoreFileNotFound=!0;var c=new Xhr(b.errorHandler,b.auth,b.viewing_url);if(-1!==a.indexOf(".gz",a.length-3)){var f=c.get(a,b.headers,"arraybuffer");if(c.success)try{var d=new Uint8Array(f);31==d[0]&&139==d[1]&&(d=(new Zlib.Gunzip(d)).decompress());return d}catch(g){return self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malformed data received when requesting file",{url:a,exception:g.toString(),stack:g.stack}),null}else return null}else return f=c.get(a,
b.headers,"arraybuffer"),c.success?new Uint8Array(f):null}
function doStreamF2D(a,b){function c(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);a=decodeURIComponent(escape(b));return JSON.parse(a)}function f(a,b){for(var c=a.length-b,d=new ArrayBuffer(c),f=new Uint8Array(d,0),g=0,h=b;g<c;g++,h++)f[g]=a.charCodeAt(h)&255;return d}var d=b.url,g=requestFileF2D(b.basePath+"metadata.json.gz",b),h=requestFileF2D(b.basePath+"manifest.json.gz",b);g&&(g=c(g));h&&(h=c(h));g||self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"");var k;if(h&&h.assets)for(var l=
h.assets,m=0;m<l.length;m++)if(-1!=d.indexOf(l[m].URI)){k=l[m].usize||0;break}var p=new XMLHttpRequest;p.withCredentials=!!b.auth;var n=new F2DProbe,q=0,r=0,s=!1;p.onreadystatechange=function(){try{if(4==p.readyState){if(ENABLE_F2D_STREAMING_MODE&&0<r){var c=p.responseText,d={type:"F2DSTREAM",finalFrame:!0,finished:!0,progress:1},l=[];s||(d.manifest=h,d.metadata=g,d.basePath=b.basePath,s=!0);if(c.length>r){var m=f(c,r),u=new Uint8Array(m),C=n.load(u),G=m.slice(C.frameStart,C.frameEnd);C.frameEnd>
C.frameStart&&(l.push(G),d.frames=G)}debug("Total text bytes count : "+p.responseText.length);a.postMessage(d,l);return}c=p.responseText;m=f(c,0);d={type:"F2DBLOB",metadata:g,manifest:h,basePath:b.basePath,progress:1,buffer:m};l=[];l.push(m);a.postMessage(d,l)}if(2<p.readyState&&ENABLE_F2D_STREAMING_MODE&&(c=p.responseText,!(r+65536>c.length))){m=f(c,r);if(!q){++q;var E=new Uint8Array(m);if(31==E[0]&&139==E[1]){ENABLE_F2D_STREAMING_MODE=!1;return}}u=new Uint8Array(m);C=n.load(u);C.frameEnd>C.frameStart&&
(G=m.slice(C.frameStart,C.frameEnd),r+=C.frameEnd,l=[],l.push(G),d={type:"F2DSTREAM",frames:G,finalFrame:!1},k&&(d.progress=r/k),s||(d.manifest=h,d.metadata=g,d.basePath=b.basePath,s=!0),a.postMessage(d,l))}}catch(I){debug(I.message)}};try{p.open("GET",d,!0),p.overrideMimeType("text/plain; charset=x-user-defined"),p.send()}catch(u){debug(u.message)}}
var defaultCloudRenderConfig={ConsumerServiceKey:"Viewing",ProductVersion:"2014",UserInfo:{UserID:"",EmailFlag:"true"},Scenes:[{SceneInfo:{SourceFileInfo:{Type:"S3",AccessLevel:"Private"},FileUri:"",SceneId:"FireflyJSDefaultSceneId"},Renderings:[{ImageInfo:{Actions:["Render","ToneMap"],ProductionVersion:"SparkViewer",ImageParams:{RenderResolutionY:1500,RenderResolutionX:2E3,RenderImageFormat:"PNG"},Render:{RenderQuality:"standard",RenderCameraName:"",RenderingType:"image",ExposureType:"Customized"},
ToneMap:{BaseExposure:-9.5,OffsetExposure:0,ExposureValue:14,Shadows:0.2,Midtones:1,Highlights:0.25,WhitePoint:6500,Saturation:1,Type:"Cameraresponse"},EnvironmentOverridePreset:"studio_01",CameraOverride:{Units:"MILLIMETER",FocalDistance:0,Aperture:0,View:{Eye:[-4026.55,2722.32,-527.835],At:[0.834734,-0.454954,-0.310218],Up:[0.233914,-0.0868021,0.968375]},Projection:{isOrthographic:!1,Extent:1,ImageShift:[0,0],NativeAspect:1}}}}]}]};
function doCloudRendering(a,b){var c=new Xhr(b.errorHandler,b.auth,b.viewing_url),f=defaultCloudRenderConfig,d=b.camera,g=b.canvas,h=b.imageNo,k=b.exposureBias,l=b.currentLightPreset,m=new THREE.Vector3;m.x=d.target.x-d.position.x;m.y=d.target.y-d.position.y;m.z=d.target.z-d.position.z;m.normalize();var p=new THREE.Vector3;p.crossVectors(m,d.up);p.normalize();debug("Transform: "+p.x+" "+p.y+" "+p.z+" 0 "+d.up.x+" "+d.up.y+" "+d.up.z+" 0 "+m.x+" "+m.y+" "+m.z+" 0 "+d.position.x+" "+d.position.y+" "+
d.position.z+" 1");var n;1===b.upVector[0]?(p=[d.position.z,d.position.y,d.position.x],m=[m.z,m.y,m.x],n=[d.up.z,d.up.y,d.up.x]):1===b.upVector[1]?(p=[d.position.x,-d.position.z,d.position.y],m=[m.x,-m.z,m.y],n=[d.up.x,-d.up.z,d.up.y]):-1===b.upVector[0]?(p=[d.position.z,-d.position.y,-d.position.x],m=[m.z,-m.y,-m.x],n=[d.up.z,-d.up.y,-d.up.x]):-1===b.upVector[1]?(p=[-d.position.x,-d.position.z,-d.position.y],m=[-m.x,-m.z,-m.y],n=[-d.up.x,-d.up.z,-d.up.y]):-1===b.upVector[2]?(p=[-d.position.x,d.position.y,
-d.position.z],m=[-m.x,m.y,-m.z],n=[-d.up.x,d.up.y,-d.up.z]):(p=[d.position.x,d.position.y,d.position.z],m=[m.x,m.y,m.z],n=[d.up.x,d.up.y,d.up.z]);f.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.Eye=p;f.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.At=m;f.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.Up=n;f.Scenes[0].Renderings[0].ImageInfo.ImageParams.RenderResolutionX=g.width;f.Scenes[0].Renderings[0].ImageInfo.ImageParams.RenderResolutionY=g.height;f.Scenes[0].Renderings[0].ImageInfo.ToneMap.BaseExposure=
k;debug("currentLightPreset = "+l);var q;1===l?q="studio_01":3===l?q="grey_room":4===l?q="photobooth":8===l?q="riverbank":10===l?q="mi360_Plaza":11===l?q="field":12===l?q="crossroads":13===l?q="seaport":14===l?q="mi360_Snow":15===l&&(q="boardwalk");f.Scenes[0].Renderings[0].ImageInfo.EnvironmentOverridePreset=q;debug("Render config is : "+JSON.stringify(f));d=THREE.Math.degToRad(d.fov);0>=d&&(d=1E-4);f.Scenes[0].Renderings[0].ImageInfo.CameraOverride.Projection.Extent=d;debug("fov in radius = "+d);
debug("CameraOverrides: "+JSON.stringify(f.Scenes[0].Renderings[0].ImageInfo.CameraOverride));b.headers["x-ads-mode"]="verbatim";f=c.post(b.url,b.headers,JSON.stringify(f),"text",null,"render");debug(f);var r=JSON.parse(f)[0].JobId;debug("rendering job kicked off with render job id: "+r);a.postMessage({progress:"progress"});var s=setInterval(function(){var d=c.get(b.url,b.headers,"text",null,"render",b.queryParams?b.queryParams+"&jobid="+r:"jobid="+r);debug("from rendering worker : "+d);var d=JSON.parse(d).renderings[0],
f=d.JobInfo.JobStatus;"Complete"==f?(debug("rendering job :"+r+" finished."),d={renderings:{thumbnail:d.Storage.Output.Thumbnail,preview:d.Storage.Output.Preview,image:d.Storage.Output.Image,renderResolutionX:d.ImageParams.RenderResolutionX,renderResolutionY:d.ImageParams.RenderResolutionY,imageNo:h}},a.postMessage(d),clearInterval(s)):"Error"==f&&(d={error:{imageNo:h}},a.postMessage(d),clearInterval(s))},1E4)}
function doSvfToSpd(a,b){var c=new Xhr(b.errorHandler,b.auth,b.viewing_url),f={urn:"dXJuOmFkc2suczM6ZGVyaXZlZC5maWxlOlZpZXdpbmdTZXJ2aWNlVGVzdEFwcC91c2Vycy9NaWNoYWVsX0hhbmAvQVZFTlRBRE9SIExQNzAwLmYzZA",registerType:{rendering:{}}};f.urn=b.svfUrn;debug("svf to spd config : "+JSON.stringify(f));var d=c.post(b.url,b.headers,JSON.stringify(f),"text",null,"bubbles");debug(d);a.postMessage({translationProgress:"progress"});var g,h=setInterval(function(){var d=c.get(b.url+f.urn,b.headers,"text",null,"bubbles",
null);debug("from Svf to Spd worker : "+d);var d=JSON.parse(d),d=getValues(d,"urn"),l;for(l in d)if(-1!=d[l].indexOf(".spd")){g=d[l];break}void 0!=g&&(a.postMessage({translation:{spdUrn:g,camera:b.camera,imageNo:b.imageNo}}),clearInterval(h))},1E3);setTimeout(function(){void 0===g&&(a.postMessage({translationError:{imageNo:b.imageNo}}),clearInterval(h))},3E4)}
function getValues(a,b){var c=[],f;for(f in a)a.hasOwnProperty(f)&&("object"==typeof a[f]?c=c.concat(getValues(a[f],b)):f==b&&c.push(a[f]));return c}
var Autocam=Autocam||function(a,b,c,f,d){function g(b){u=!0;a.target.copy(n.center);a.pivot.copy(n.pivot);a.worldup?a.worldup.copy(n.sceneUpDirection):a.up.copy(n.sceneUpDirection);f&&f(b);u=!1}function h(a,b){var c=new THREE.Vector2(0,0);c.x=a/window.innerWidth;c.y=b/window.innerHeight;return c}function k(a,b,c){var d,f,g,h=0,k=null,l=null,m=n.snapOrbitDeadZone,p=n.orbitMultiplier;"h"==a?(a=n.snapOrbitThresholdH,d=n.snapOrbitAccelerationAX,f=n.snapOrbitAccelerationBX,g=1-n.snapOrbitAccelerationPointX,
l=n.lockDeltaX,k=n.lockedX):(a=n.snapOrbitThresholdV,d=n.snapOrbitAccelerationAY,f=n.snapOrbitAccelerationBY,g=1-n.snapOrbitAccelerationPointY,l=n.lockDeltaY,k=n.lockedY);k?(l+=c,l<-m?h=(l+m)*p*1/f:l>m&&(h=(l-m)*p*1/f)):(h=Math.abs(b)>a?c*p:Math.abs(b)>g*a?0<c*b?c*p*d:c*p*1/d:0<c*b?c*p*f:c*p*1/f,0<h*b&&Math.abs(h)>Math.abs(b)&&(this.lockDeltaX=this.lockDeltaY=0,h=b));return h}function l(a,b){var c=!1,d=window.innerWidth,f=a.x%d,g=window.innerHeight,h=a.y%g,g=0<h?h-b.y:g+h-b.y;30>Math.abs(0<f?f-b.x:
d+f-b.x)&&30>Math.abs(g)&&(c=!0);return c}function m(a,b,c){if(!Z||!a){if(a){var d=new THREE.Vector2;d.x=(b.x-c.x)/window.innerWidth;b.x=c.x+(b.x-c.x)%window.innerWidth;d.y=(b.y-c.y)/window.innerHeight;b.y=c.y+(b.y-c.y)%window.innerHeight}Z=a}}function p(a){var b=n.sceneFrontDirection.clone().cross(n.sceneUpDirection),c=Math.abs(Math.abs(a.dot(n.sceneUpDirection))-1),d=Math.abs(Math.abs(a.dot(n.sceneFrontDirection))-1);a=Math.abs(Math.abs(a.dot(b))-1);return 1E-5>c||1E-5>d||1E-5>a}var n=this,q=null,
r=null,s=null,u=!1;this.camera=a;this.renderer="WEBGL";this.startState={};this.navApi=b;this.orthographicFaces=!1;var w=Date.now(),v,B=!1;this.showPivot=function(a){d&&d(a)};this.setViewCubeContainer=function(a){s=a};this.setWorldUpVector=function(a){!u&&a&&0<a.lengthSq()&&!a.normalize().equals(this.sceneUpDirection)&&(this.sceneUpDirection.copy(a),this.sceneFrontDirection.copy(this.getWorldFrontVector()),this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize(),q&&requestAnimationFrame(q.render))};
this.getWorldUpVector=function(){return this.sceneUpDirection.clone()};this.getWorldRightVector=function(){var a=this.sceneUpDirection.clone();Math.abs(a.z)<=Math.abs(a.y)?a.set(a.y,-a.x,0):0<=a.z?a.set(a.z,0,-a.x):a.set(-a.z,0,a.x);return a.normalize()};this.getWorldFrontVector=function(){return this.getWorldUpVector().cross(this.getWorldRightVector()).normalize()};this.goToView=function(a){this.navApi.getIsLocked()||(a={position:a.position.clone(),up:a.up.clone(),center:a.center.clone(),pivot:a.pivot.clone(),
fov:a.fov,worldUp:a.worldUp.clone(),isOrtho:a.isOrtho},n.elapsedTime=0,this.animateTransition(a))};this.getCurrentView=function(){return{position:a.position.clone(),up:a.up.clone(),center:this.center.clone(),pivot:this.pivot.clone(),fov:a.fov,worldUp:this.sceneUpDirection.clone(),isOrtho:!1===a.isPerspective}};this.setCurrentViewAsHome=function(a){a?(this.navApi.setRequestFitToView(!0),B=!0):this.homeVector=this.getCurrentView()};this.setHomeViewFrom=function(a){var b=a.pivot?a.pivot:this.center,
c=a.target?a.target:this.pivot,d=a.worldup?a.worldup:this.sceneUpDirection;this.homeVector={position:a.position.clone(),up:a.up.clone(),center:c.clone(),pivot:b.clone(),fov:a.fov,worldUp:d.clone(),isOrtho:!1===a.isPerspective};this.originalHomeVector={position:a.position.clone(),up:a.up.clone(),center:c.clone(),pivot:b.clone(),fov:a.fov,worldUp:d.clone(),worldFront:this.sceneFrontDirection.clone(),isOrtho:!1===a.isPerspective}};this.toPerspective=function(){a.isPerspective||(a.toPerspective(),g(!1))};
this.toOrthographic=function(){a.isPerspective&&(a.toOrthographic(),g(!1))};this.setOrthographicFaces=function(a){this.orthographicFaces=a};this.goHome=function(){this.navApi.getIsLocked()||(this.navApi.setPivotSetFlag(!1),this.goToView(this.homeVector))};this.resetHome=function(){this.homeVector.position.copy(this.originalHomeVector.position);this.homeVector.up.copy(this.originalHomeVector.up);this.homeVector.center.copy(this.originalHomeVector.center);this.homeVector.pivot.copy(this.originalHomeVector.pivot);
this.homeVector.fov=this.originalHomeVector.fov;this.homeVector.worldUp.copy(this.originalHomeVector.worldUp);this.homeVector.isOrtho=this.originalHomeVector.isOrtho;this.goHome()};this.getView=function(){return this.center.clone().sub(a.position)};this.setCameraUp=function(b){var c=this.dir.clone(),d=c.cross(b).normalize();0===d.lengthSq()&&(c.copy(this.dir),b.z>b.y?c.y+=1E-4:c.z+=1E-4,d=c.cross(b).normalize());a.up.copy(d).cross(this.dir).normalize()};(function U(){requestAnimationFrame(U);var a=
Date.now();v=a-w;w=a})();this.ortho=!1;this.center=a.target?a.target.clone():new THREE.Vector3(0,0,0);this.pivot=a.pivot?a.pivot.clone():this.center.clone();this.sceneUpDirection=a.worldup?a.worldup.clone():a.up.clone();this.sceneFrontDirection=this.getWorldFrontVector();this.dir=this.getView();this.setCameraUp(a.up);this.saveCenter=this.center.clone();this.savePivot=this.pivot.clone();this.saveEye=a.position.clone();this.saveUp=a.up.clone();var z,A,C,G;this.cubeFront=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();
this.setHomeViewFrom(a);var E=new THREE.Quaternion,I=new THREE.Quaternion,H=new THREE.Quaternion,Q=new THREE.Quaternion,N,F;this.userPanSpeed=0.5;this.userLookSpeed=2;this.userHeightSpeed=5;this.walkMultiplier=1;this.userZoomSpeed=1.015;this.orbitMultiplier=5;this.currentlyAnimating=!1;this.alignOrbitUpDirection=this.preserveOrbitUpDirection=a.keepSceneUpright=!0;this.doCustomOrbit=this.constrainOrbitVertical=this.constrainOrbitHorizontal=!1;this.snapOrbitDeadZone=0.045;this.snapOrbitThresholdH=this.snapOrbitThresholdV=
THREE.Math.degToRad(15);this.snapOrbitAccelerationAX=this.snapOrbitAccelerationAY=1.5;this.snapOrbitAccelerationBX=this.snapOrbitAccelerationBY=2;this.snapOrbitAccelerationPointX=this.snapOrbitAccelerationPointY=0.5;this.alignDirTable=Array(26);this.alignDirTable[0]=new THREE.Vector3(-1,0,0);this.alignDirTable[1]=new THREE.Vector3(1,0,0);this.alignDirTable[2]=new THREE.Vector3(0,-1,0);this.alignDirTable[3]=new THREE.Vector3(0,1,0);this.alignDirTable[4]=new THREE.Vector3(0,0,-1);this.alignDirTable[5]=
new THREE.Vector3(0,0,1);this.alignDirTable[6]=new THREE.Vector3(-1,-1,0);this.alignDirTable[7]=new THREE.Vector3(-1,1,0);this.alignDirTable[8]=new THREE.Vector3(1,-1,0);this.alignDirTable[9]=new THREE.Vector3(1,1,0);this.alignDirTable[10]=new THREE.Vector3(0,-1,-1);this.alignDirTable[11]=new THREE.Vector3(0,-1,1);this.alignDirTable[12]=new THREE.Vector3(0,1,-1);this.alignDirTable[13]=new THREE.Vector3(0,1,1);this.alignDirTable[14]=new THREE.Vector3(-1,0,-1);this.alignDirTable[15]=new THREE.Vector3(1,
0,-1);this.alignDirTable[16]=new THREE.Vector3(-1,0,1);this.alignDirTable[17]=new THREE.Vector3(1,0,1);this.alignDirTable[18]=new THREE.Vector3(-1,-1,-1);this.alignDirTable[19]=new THREE.Vector3(-1,-1,1);this.alignDirTable[20]=new THREE.Vector3(-1,1,-1);this.alignDirTable[21]=new THREE.Vector3(-1,1,1);this.alignDirTable[22]=new THREE.Vector3(1,-1,-1);this.alignDirTable[23]=new THREE.Vector3(1,-1,1);this.alignDirTable[24]=new THREE.Vector3(1,1,-1);this.alignDirTable[25]=new THREE.Vector3(1,1,1);this.useSnap=
this.combined=!1;this.lockDeltaX=0;this.lockedX=!1;this.lockDeltaY=this.lastSnapRotateX=0;this.lockedY=!1;this.lastSnapRotateY=0;this.lastSnapDir=new THREE.Vector3(0,0,0);this.bottomLimit=this.topLimit=!1;this.maxSceneBound=this.minSceneBound=0;var D={destinationPercent:1,duration:1,zoomToFitScene:!0,useOffAxis:!1};this.shotParams=D;var S,J;this.zoomDelta=new THREE.Vector2;var Z,K=new THREE.Vector3,M=new THREE.Vector3;this.rewindParams={history:[],startTime:void 0,thumbnailSize:56,thumbnailGapSize:12,
maxHistorySize:25,snappingEnabled:!0,timelineIndex:0,timelineIndexSlide:0,open:!1,openLocation:new THREE.Vector2(0,0),openBracket:new THREE.Vector2(0,0),openBracketA:new THREE.Vector2(0,0),openBracketB:new THREE.Vector2(0,0),openLocationOrigin:new THREE.Vector2(0,0),locationOffset:new THREE.Vector2(0,0),snapOffset:new THREE.Vector2(0,0),slideOffset:new THREE.Vector2(0,0),snapped:!0,resetWeights:!1,recordEnabled:!1,elementIsRecording:!1};this.viewCubeMenuOpen=!1;this.menuSize=new THREE.Vector2(0,0);
this.menuOrigin=new THREE.Vector2(0,0);a.lookAt(this.center);this.setCube=function(a){q=a};this.loadObject=function(a,b,c){loader=new THREE.JSONLoader;loader.load(a,function(a,d){var f=new THREE.MeshPhongMaterial(d);mesh=new THREE.Mesh(a,f);mesh.scale=b;mesh.position.copy(c);mesh.geometry.computeBoundingBox();f=mesh.geometry.boundingBox.clone();M.set(f.max.x,f.max.y,f.max.z);K.set(f.min.x,f.min.y,f.min.z);M.multiply(b);K.multiply(b);scene.add(mesh);objects.push(mesh)})};this.sync=function(b){b.isPerspective!==
a.isPerspective&&(b.isPerspective?a.toPerspective():(a.toOrthographic(),b.saveFov&&(a.saveFov=b.saveFov)));a.fov=b.fov;a.position.copy(b.position);b.target&&(this.center.copy(b.target),a.target.copy(b.target));b.pivot&&(this.pivot.copy(b.pivot),a.pivot.copy(b.pivot));this.dir.copy(this.center).sub(a.position);this.setCameraUp(b.up);b=b.worldup?b.worldup:b.up;1E-4<b.distanceToSquared(this.sceneUpDirection)&&this.setWorldUpVector(b);B&&!this.navApi.getTransitionActive()&&(B=!1,this.setCurrentViewAsHome(!1));
q&&requestAnimationFrame(q.render)};this.refresh=function(){q&&q.refreshCube()};THREE.Box2.prototype.setCenter=function(a){var b=new THREE.Vector2(Math.abs(this.max.x-this.min.x)/2,Math.abs(this.max.y-this.min.y)/2);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this};THREE.Box2.prototype.getIcon2DCoords=function(a,b){var c=this.center;b.set((a.x-c.x)/(this.size().x/2),(a.y-c.y)/(this.size().y/2))};THREE.Matrix3.prototype.makeRotationFromQuaternion=function(a){var b=this.elements,c=a.x,d=
a.y,f=a.z,g=a.w,h=c+c,k=d+d,l=f+f;a=c*h;var m=c*k,c=c*l,p=d*k,d=d*l,f=f*l,h=g*h,k=g*k,g=g*l;b[0]=1-(p+f);b[3]=m-g;b[6]=c+k;b[1]=m+g;b[4]=1-(a+f);b[7]=d-h;b[2]=c-k;b[5]=d+h;b[8]=1-(a+p);return this};THREE.Quaternion.prototype.setFromRotationMatrix3=function(a){var b=a.elements,c=b[0];a=b[3];var d=b[6],f=b[1],g=b[4],h=b[7],k=b[2],l=b[5],b=b[8],m=c+g+b;0<m?(c=0.5/Math.sqrt(m+1),this.w=0.25/c,this.x=(l-h)*c,this.y=(d-k)*c,this.z=(f-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this.w=(l-h)/c,this.x=0.25*c,this.y=
(a+f)/c,this.z=(d+k)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this.w=(d-k)/c,this.x=(a+f)/c,this.y=0.25*c,this.z=(h+l)/c):(c=2*Math.sqrt(1+b-c-g),this.w=(f-a)/c,this.x=(d+k)/c,this.y=(h+l)/c,this.z=0.25*c);return this};THREE.Quaternion.prototype.rotate=function(a){var b=(new THREE.Matrix4).makeRotationFromQuaternion(this).elements,b=(new THREE.Matrix3).set(b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]);return a.applyMatrix3(b)};THREE.Vector3.prototype.findAngleWith=function(a,b){var c=0,d=this.clone().normalize().clone().dot(a.clone().normalize()),
c=this.clone().cross(a).clone().normalize();if(c.clone().length()<Number.MIN_VALUE)c=0<d?0:180;else{b=0<c.clone().dot(b.clone().normalize())?c:-c;var f=(new THREE.Quaternion).setFromAxisAngle(b,90*THREE.Math.degToRad),f=f.clone().rotate(a).clone().normalize().clone().dot(this),c=Math.acos(d)*THREE.Math.radToDeg;Math.abs(c-90)<Number.MIN_VALUE&&(c=90);if(90>c&&0<d*f||90<c&&0>d*f||90==c&&0<f)c*=-1}return c=THREE.Math.degToRad(c)};"contains"in String.prototype||(String.prototype.contains=function(a,
b){return-1!==String.prototype.indexOf.call(this,a,b)});Math.linearClamp=function(a,b,c){return a<=b?0:a>=c?1:(a-b)/(c-b)};Math.easeClamp=function(a,b,c){return a<=b?0:a>=c?1:0.5*(Math.sin(((a-b)/(c-b)-0.5)*Math.PI)+1)};Math.linearInterp=function(a,b,c){return b*(1-a)+c*a};Math.equalityClamp=function(a,b,c){return a<=b?b:a>=c?c:a};Math.round2=function(a){return Math.round(100*a)/100};Math.round1=function(a){return Math.round(10*a)/10};this.animateTransition=function(b){if(b){var c=!1,d=0;this.setCameraOrtho(b.isOrtho);
if(n.elapsedTime>=D.duration)d=1,n.center.copy(b.center),n.pivot.copy(b.pivot),a.position.copy(b.position),a.up.copy(b.up),b.isOrtho||(a.fov=b.fov),(c=!b.worldUp.equals(this.sceneUpDirection))&&this.setWorldUpVector(b.worldUp),this.currentlyAnimating=!1,g(c),this.showPivot(!1),q&&requestAnimationFrame(q.render),this.addHistoryElement(),this.navApi.setTransitionActive(!1);else{this.currentlyAnimating=!0;this.showPivot(!0);this.navApi.setTransitionActive(!0);d=Math.easeClamp(n.elapsedTime/D.duration,
0,D.destinationPercent);oneMinusTime=1-d;n.elapsedTime+=v/500;var c=n.center.clone().multiplyScalar(oneMinusTime).add(b.center.clone().multiplyScalar(d)),f=a.position.clone().multiplyScalar(oneMinusTime).add(b.position.clone().multiplyScalar(d)),h=a.up.clone().multiplyScalar(oneMinusTime).add(b.up.clone().multiplyScalar(d)),k=a.pivot.clone().multiplyScalar(oneMinusTime).add(b.pivot.clone().multiplyScalar(d)),l=this.sceneUpDirection.clone().multiplyScalar(oneMinusTime).add(b.worldUp.clone().multiplyScalar(d)),
d=a.fov*oneMinusTime+b.fov*d;n.center.copy(c);n.pivot.copy(k);a.position.copy(f);a.up.copy(h);b.isOrtho||(a.fov=d);(c=1E-4<l.distanceToSquared(this.sceneUpDirection))&&this.setWorldUpVector(l);a.lookAt(n.center);g(c);q&&requestAnimationFrame(q.render);requestAnimationFrame(function(){n.animateTransition(b)})}}};this.sphericallyInterpolateTransition=function(b){var c,d,f;c=0;this.currentlyAnimating=!0;this.navApi.setTransitionActive(!0);n.elapsedTime>=D.duration?(c=1,this.currentlyAnimating=!1):(c=
Math.easeClamp(n.elapsedTime/D.duration,0,D.destinationPercent),n.elapsedTime+=v/500);1===c?(d=J.position,c=J.center,f=J.up):(f=new THREE.Matrix3,d=E.clone(),d.slerp(I,c),f.makeRotationFromQuaternion(d),d=Math.linearInterp(c,N,F),f=f.elements,c=S.center.clone().multiplyScalar(1-c).add(J.center.clone().multiplyScalar(c)),d=c.clone().sub((new THREE.Vector3(f[0],f[1],f[2])).multiplyScalar(d)),f=new THREE.Vector3(f[3],f[4],f[5]));n.center.copy(c);a.position.copy(d);a.up.copy(f);n.navApi.getUsePivotAlways()||
n.pivot.copy(c);a.lookAt(n.center);!0===this.currentlyAnimating?(this.showPivot(!0),requestAnimationFrame(function(){n.sphericallyInterpolateTransition(b)})):(this.navApi.setTransitionActive(!1),this.showPivot(!1),this.addHistoryElement(),this.orthographicFaces&&this.isFaceView()&&this.setCameraOrtho(!0),b&&b());g(!1);q&&requestAnimationFrame(q.render)};this.getOrientation=function(){if(q){var b=Math.round1(a.up.x),c=Math.round1(a.up.y),d=Math.round1(a.up.z),f=this.sceneFrontDirection.clone(),g=this.sceneUpDirection.clone(),
h=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();f.x=Math.round1(f.x);f.y=Math.round1(f.y);f.z=Math.round1(f.z);g.x=Math.round1(g.x);g.y=Math.round1(g.y);g.z=Math.round1(g.z);h.x=Math.round1(h.x);h.y=Math.round1(h.y);h.z=Math.round1(h.z);var k=h.clone().multiplyScalar(-1),l=g.clone().multiplyScalar(-1),m=f.clone().multiplyScalar(-1);switch(q.currentFace){case "front":if(g.x==b&&g.y==c&&g.z==d)return"up";if(l.x==b&&l.y==c&&l.z==d)return"down";if(h.x==b&&h.y==c&&h.z==d)return"right";
if(k.x==b&&k.y==c&&k.z==d)return"left";break;case "right":if(g.x==b&&g.y==c&&g.z==d)return"up";if(l.x==b&&l.y==c&&l.z==d)return"down";if(m.x==b&&m.y==c&&m.z==d)return"left";if(f.x==b&&f.y==c&&f.z==d)return"right";break;case "left":if(g.x==b&&g.y==c&&g.z==d)return"up";if(l.x==b&&l.y==c&&l.z==d)return"down";if(f.x==b&&f.y==c&&f.z==d)return"left";if(m.x==b&&m.y==c&&m.z==d)return"right";break;case "back":if(g.x==b&&g.y==c&&g.z==d)return"up";if(l.x==b&&l.y==c&&l.z==d)return"down";if(k.x==b&&k.y==c&&k.z==
d)return"right";if(h.x==b&&h.y==c&&h.z==d)return"left";break;case "top":if(m.x==b&&m.y==c&&m.z==d)return"down";if(f.x==b&&f.y==c&&f.z==d)return"up";if(h.x==b&&h.y==c&&h.z==d)return"right";if(k.x==b&&k.y==c&&k.z==d)return"left";break;case "bottom":if(f.x==b&&f.y==c&&f.z==d)return"down";if(m.x==b&&m.y==c&&m.z==d)return"up";if(h.x==b&&h.y==c&&h.z==d)return"right";if(k.x==b&&k.y==c&&k.z==d)return"left"}}};this.setCameraOrtho=function(b){b&&a.isPerspective&&a.toOrthographic();b||a.isPerspective||a.toPerspective()};
this.resetOrientation=function(){this.setCameraOrtho(this.originalHomeVector.isOrtho);this.sceneUpDirection.copy(this.originalHomeVector.worldUp);this.sceneFrontDirection.copy(this.originalHomeVector.worldFront);this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize();this.setCameraUp(this.sceneUpDirection);g(!0)};this.setCurrentViewAsFront=function(){q&&(q.currentFace="front");this.sceneUpDirection.copy(a.up.clone());this.sceneFrontDirection.copy(this.getView()).normalize();
this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize();this.orthographicFaces&&this.setCameraOrtho(!0);g(!0)};this.setCurrentViewAsTop=function(){q&&(q.currentFace="top");this.sceneUpDirection.copy(this.getView()).multiplyScalar(-1).normalize();this.sceneFrontDirection.copy(a.up);this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize();g(!0)};this.calculateCubeTransform=function(b){var c=this.sceneUpDirection.clone(),d=this.sceneFrontDirection.clone(),
f=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();S=a.clone();S.center=n.center.clone();S.pivot=n.pivot.clone();J=a.clone();J.center=n.center.clone();J.pivot=n.pivot.clone();var g=new THREE.Vector3(0,0,0);b.contains("back")&&(g=g.add(d));b.contains("front")&&(g=g.sub(d));b.contains("top")&&(g=g.add(c));b.contains("bottom")&&(g=g.sub(c));b.contains("right")&&(g=g.add(f));b.contains("left")&&(g=g.sub(f));b=c;var h=g.clone().normalize();if(1-Math.abs(h.dot(c))<Number.MIN_VALUE)for(var k=
this.getView().normalize(),d=[d.clone(),d.clone().negate(),f.clone(),f.clone().negate()],c=0<h.dot(c)?1:-1,k=k.clone().add(a.up.clone().multiplyScalar(c)).normalize(),f=-2,h=0;4>h;h++){var l=k.dot(d[h]);l>f&&(f=l,b=d[h].multiplyScalar(c))}F=N=this.getView().length();J.position.copy(J.center.clone().add(g.multiplyScalar(F/g.length())));J.up.copy(b);g=S.center.clone().sub(S.position).normalize();b=g.clone().cross(S.up).normalize();d=b.clone().cross(g).normalize();c=new THREE.Matrix3(g.x,d.x,b.x,g.y,
d.y,b.y,g.z,d.z,b.z);E.setFromRotationMatrix3(c);g=J.center.clone().sub(J.position).normalize();b=g.clone().cross(J.up).normalize();d=b.clone().cross(g).normalize();c.set(g.x,d.x,b.x,g.y,d.y,b.y,g.z,d.z,b.z);H.setFromAxisAngle(g,0);Q.setFromAxisAngle(d,0);I.setFromRotationMatrix3(c);I.multiply(H).multiply(Q).normalize()};this.centerShot=function(b){if(!S||b)n.elapsedTime=0,S=J=a.clone(),S.center=n.center;b=n.pivot.clone();var c=b.clone().sub(S.position),d=S.center.clone().sub(S.position).normalize(),
f=S.up.clone(),h=d.clone().cross(f).normalize(),f=h.clone().cross(d).normalize(),d=h.clone().multiplyScalar(h.dot(c)),c=f.clone().multiplyScalar(f.dot(c)),c=d.clone().add(c);J.position.copy(S.position.clone().add(c));J.center=b;J.pivot=b;b=0;n.elapsedTime>=D.duration?b=1:(b=Math.easeClamp(n.elapsedTime/D.duration,0,D.destinationPercent),n.elapsedTime+=v/2E3);c=a.position.clone().multiplyScalar(1-b).add(J.position.clone().multiplyScalar(b));f=n.center.clone().multiplyScalar(1-b).add(J.center.clone().multiplyScalar(b));
d=n.pivot.clone().multiplyScalar(1-b).add(J.pivot.clone().multiplyScalar(b));a.position.copy(c);n.center.copy(f);n.pivot.copy(d);a.lookAt(n.center);g(!1);1===b?this.addHistoryElement():requestAnimationFrame(function(){n.centerShot(!1)})};this.levelShot=function(){var b=this.getView(),c=b.length(),d=this.sceneUpDirection.clone(),f=a.up.clone().normalize(),b=b.normalize(),g=b.dot(d);1-Math.abs(g)>Number.MIN_VALUE?(f=b.clone().cross(d),b=d.clone().cross(f),b.normalize()):b=f.clone();b.multiplyScalar(c);
c={center:b.add(a.position),up:d,position:a.position,pivot:n.center.clone().add(b),fov:a.fov,worldUp:d};n.elapsedTime=0;n.animateTransition(c)};this.fitToWindow=function(){var b=this.getView(),c=a.up.clone();b.normalize();c.normalize();J=a.clone();J.center=n.center;var d=c,c=d.clone();if(!(Math.abs(c.clone().dot(b))<Number.MIN_VALUE)&&(b.normalize(),c=d.clone().dot(b),c=b.clone().multiplyScalar(c),c=d.clone().sub(c),c.length()<Number.MIN_VALUE)){for(var d=new THREE.Vector3(0,0,0),c=[new THREE.Vector3(0,
1,0),new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,1,1),new THREE.Vector3(1,0,1),new THREE.Vector3(1,1,0),new THREE.Vector3(1,1,1)],f=0;7>f;f++)if(Math.abs(c[f].dot(b))<Number.MIN_VALUE){d=c[f];break}c=d}c.normalize();c.normalize();J.up.copy(c);f=b.clone().cross(c);f.normalize();var g=K.clone(),h=M.clone(),k=[g,h],d=new THREE.Vector3(h.x-g.x,h.y-g.y,h.z-g.z);k[2]=new THREE.Vector3(h.x,g.y,h.z);k[3]=new THREE.Vector3(h.x,g.y,g.z);k[4]=new THREE.Vector3(h.x,h.y,g.z);k[5]=new THREE.Vector3(g.x,
h.y,h.z);k[6]=new THREE.Vector3(g.x,h.y,g.z);k[7]=new THREE.Vector3(g.x,g.y,h.z);for(g=0;8>g;g++)h=k[g].clone().sub(a.position),k[g].setX(h.clone().dot(f)),k[g].setY(h.clone().dot(c)),k[g].setZ(h.clone().dot(b));var g=THREE.Math.degToRad(a.topFov),h=THREE.Math.degToRad(a.bottomFov),l=THREE.Math.degToRad(a.leftFov),m=THREE.Math.degToRad(a.rightFov),p,q,s,r;p=0<=l?Number.MAX_VALUE:Number.MIN_VALUE;q=0<=m?Number.MAX_VALUE:Number.MIN_VALUE;s=0<=g?Number.MAX_VALUE:Number.MIN_VALUE;r=0<=h?Number.MAX_VALUE:
Number.MIN_VALUE;for(var u=1/Math.tan(m),F=-1/Math.tan(l),w=1/Math.tan(g),v=-1/Math.tan(h),Z=0;8>Z;Z++){var D=k[Z].clone(),z=D.z-F*D.x;p=0<=l?Math.min(p,z):Math.max(p,z);z=D.z-u*D.x;q=0<=m?Math.min(q,z):Math.max(q,z);z=D.z-w*D.y;s=0<=g?Math.min(s,z):Math.max(s,z);z=D.z-v*D.y;r=0<=h?Math.min(r,z):Math.max(r,z)}k=(q-p)/(F-u);p=F*k+p;r=(r-s)/(w-v);s=w*r+s;w=0;p<=s?(g=(g-h)/2,Math.abs(g)>Number.MIN_VALUE&&(g=1/Math.tan(g),r=r-s/g+p/g),w=p):(g=(m-l)/2,Math.abs(g)>Number.MIN_VALUE&&(g=1/Math.tan(g),k=k-
p/g+s/g),w=s);g=new THREE.Vector3(k,r,w);f=f.clone().multiplyScalar(g.x);c=c.clone().multiplyScalar(g.y);g=b.clone().multiplyScalar(g.z);g=f.clone().add(c.clone().add(g));J.position.add(g);c=d.clone().sub(J.position).dot(b);J.center=J.position.clone().add(b.multiplyScalar(c));J.pivot=d.clone();b={center:J.center,up:J.up,position:J.position,pivot:J.pivot,fov:a.fov,worldUp:n.sceneUpDirection.clone()};n.elapsedTime=0;n.animateTransition(b)};this.updatePivotPosition=function(b){var c;c=new THREE.Projector;
var d=new THREE.Vector3(b.x/window.innerWidth*2-1,2*-(b.y/window.innerHeight)+1,0.5);c.unprojectVector(d,a);c=(new THREE.Raycaster(a.position,d.sub(a.position).normalize())).intersectObjects(objects);if("zoom"==n.mode)if(void 0!==c[0])b=c[0].point,n.pivot.copy(b);else{b.y=Math.abs(b.y-window.innerHeight);var f=a.position;c=n.center.clone().sub(f);var d=a.up,g=c.clone().cross(d),h=c.clone().length(),k=h*Math.tan(THREE.Math.degToRad(a.leftFov)),l=h*Math.tan(THREE.Math.degToRad(a.rightFov)),m=h*Math.tan(THREE.Math.degToRad(a.topFov)),
h=h*Math.tan(THREE.Math.degToRad(a.bottomFov)),k=b.x*(k+l)/window.innerWidth-k;b=b.y*(m+h)/window.innerHeight-h;d=d.clone().normalize().clone().multiplyScalar(b);g=g.clone().normalize().clone().multiplyScalar(k);n.ortho?b=f.clone().add(g).clone().add(d):(b=f,c=c.clone().add(d).clone().add(g));n.pivot.copy(b.clone().add(c))}else void 0!==c[0]?(wheel.cursorImage("pivot"),b=c[0].point,n.isMouseDown||n.pivot.copy(b)):wheel.cursorImage("SWInvalidArea")};this.onDrawHeight=function(b,c,d,f,g){b=new THREE.Vector3(0,
1,0);b=a.position.clone().dot(b);b=Math.linearClamp(b,n.minSceneBound,n.maxSceneBound)-0.5;s&&(s.find("img#updownImageA").remove(),s.prepend('<img src="'+g+'SWheighthandleA.png" id="updownImageA" style="position:fixed; z-index:9999; top:'+(d-86*b)+"px; left:"+c+'px;"/>'),f||s.prepend('<img src="'+g+'SWheighthandleI.png" id="updownImageI" style="position:fixed; z-index:9998; top:'+(d-86*b)+"px; left:"+c+'px;"/>'))};this.drawDropdownMenu=function(a,b,d,f,g,h,k){var l=0;if(r)h.appendChild(r);else{r=
document.createElement("div");r.className="dropDownMenu";r.style.top="100px";r.style.left="-400px";for(var m=0,p=0;p<a.length;p++){var n;if(null==a[p])n=document.createElement("li"),n.style.height="1px",m+=1,n.style.backgroundColor="#E0E0E0";else{var q=Autodesk.Viewing.i18n.translate(a[p]);if(d[p]){n=document.createElement("div");var s=document.createElement("input"),u=document.createElement("label");s.type="checkbox";s.className="dropDownMenuCheck";u.innerHTML=q;u.className="dropDownMenuCheckText";
n.appendChild(s);n.appendChild(u);n.className="dropDownMenuCheckbox"}else n=document.createElement("li"),n.textContent=q,n.className=b[p]?"dropDownMenuItem":"dropDownMenuItemDisabled";n.id="menuItem"+l;l++;m+=25;n.setAttribute("data-i18n",a[p])}r.appendChild(n)}h.appendChild(r);l=r.getBoundingClientRect().width;this.menuSize.x=l;this.menuSize.y=m}for(p=l=0;p<a.length;p++)null!=a[p]&&(d[p]&&(m=document.getElementById("menuItem"+l))&&(m.children[0].checked=d[p]()),l++);a=g-15;d=f+1;g=c.getBoundingClientRect();
d+this.menuSize.x>g.right&&(d=f-this.menuSize.x-1);a+this.menuSize.y>g.bottom&&(a=g.bottom-this.menuSize.y);a-=k.y;d-=k.x;r.style.top=a+"px";r.style.left=d+"px";this.menuOrigin.x=d;this.menuOrigin.y=a};this.removeDropdownMenu=function(a){a.removeChild(r)};this.isFaceView=function(){var b=this.center.clone().sub(a.position).normalize();return p(b)&&p(a.up)};this.startInteraction=function(a,b){this.startCursor=new THREE.Vector2(a,b);this.startState={saveCenter:this.center.clone(),saveEye:this.camera.position.clone(),
savePivot:this.pivot.clone(),saveUp:this.camera.up.clone()};this.lockDeltaX=0;this.lockedX=!1;this.lockDeltaY=this.lastSnapRotateX=0;this.lockedY=!1;this.lastSnapRotateY=0;this.lastSnapDir=new THREE.Vector3(0,0,0)};this.orbit=function(b,c,d,f){if(!this.navApi.getIsLocked()&&!0!==this.currentlyAnimating){var l="wheel";n.orthographicFaces&&!a.isPerspective&&(a.toPerspective(),f&&f.saveEye.copy(this.camera.position));f&&(l="cube");"cube"==l?(this.saveCenter.copy(f.saveCenter),this.saveEye.copy(f.saveEye),
this.savePivot.copy(f.savePivot),this.saveUp.copy(f.saveUp),this.doCustomOrbit=this.useSnap=!0):(this.saveCenter.copy(this.center),this.savePivot.copy(this.pivot),this.saveEye.copy(a.position),this.saveUp.copy(a.up),this.doCustomOrbit=this.useSnap=!1);n.combined&&void 0==A&&(A=this.saveCenter.clone(),z=this.saveEye.clone(),G=this.savePivot.clone(),C=this.saveUp.clone());if(this.preserveOrbitUpDirection){var l=h(b.x-c.x,b.y-c.y),m=h(d.x,d.y);c=this.sceneUpDirection.clone();var p=this.sceneFrontDirection.clone(),
q=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();d=n.combined?G:this.savePivot;f=n.combined?z:this.saveEye;var s=n.combined?A:this.saveCenter,r=n.combined?C:this.saveUp,u=d.clone().sub(f).normalize(),F=s.clone().sub(f).normalize(),w=F.clone().cross(r);b=f.clone().sub(d).length();f=f.clone().sub(s).length();u=u.clone().multiplyScalar(-1);F=F.clone().multiplyScalar(-1);r=r.clone();this.constrainOrbitHorizontal||(-0.009>c.dot(this.saveUp)&&(l.x=-l.x,m.x=-m.x),s=0,this.lastSnapRotateX=
s=n.combined?m.x*this.orbitMultiplier:this.useSnap?this.lastSnapRotateX+k("h",0,-m.x):l.x*this.orbitMultiplier,s=(new THREE.Quaternion).setFromAxisAngle(c,-s),u.applyQuaternion(s),F.applyQuaternion(s),w.applyQuaternion(s),r.applyQuaternion(s));this.constrainOrbitVertical||(p=p.clone().multiplyScalar(p.dot(w)),q=q.clone().multiplyScalar(q.dot(w)),q=p.clone().add(q),q.clone().normalize(),w=0,n.combined?w=m.y*this.orbitMultiplier:(m=k("v",0,m.y),w=this.useSnap?this.lastSnapRotateY+m:l.y*this.orbitMultiplier),
l=(new THREE.Quaternion).setFromAxisAngle(q,-w),this.navApi.getOrbitPastWorldPoles()||(m=r.clone(),m.applyQuaternion(l).normalize(),0>c.dot(m)&&(m=F.clone(),m.applyQuaternion(l).normalize(),c=m.angleTo(c),Math.abs(c)>0.5*Math.PI&&(c-=0<c?Math.PI:-Math.PI),w-=c,l.setFromAxisAngle(q,-w))),u.applyQuaternion(l).normalize(),F.applyQuaternion(l).normalize(),r.applyQuaternion(l).normalize(),this.lastSnapRotateY=w);d=u.multiplyScalar(b).add(d);a.position.copy(d);a.up.copy(r);this.center.copy(d);this.center.sub(F.multiplyScalar(f));
n.combined&&(A.copy(this.center),z.copy(a.position),G.copy(this.pivot),C.copy(a.up))}a.lookAt(this.center);g(!1)}};this.endInteraction=function(){};this.look=function(b){if(!this.navApi.getIsLocked()){var c=h(b.x,b.y),d=this.userLookSpeed;b=this.getView();var f=a.up,k=b.clone().cross(f).normalize(),l=this.sceneUpDirection.clone(),c=c.clone();c.x*=Math.PI;c.y*=Math.PI/a.aspect;c.multiplyScalar(d);d=(new THREE.Quaternion).setFromAxisAngle(k,-c.y);if(a.keepSceneUpright&&!this.navApi.getOrbitPastWorldPoles()){var m=
f.clone();m.applyQuaternion(d).normalize();0>m.dot(l)&&(m=b.clone(),m.applyQuaternion(d),m=m.angleTo(l),Math.abs(m)>0.5*Math.PI&&(m-=0<m?Math.PI:-Math.PI),c.y-=m,d.setFromAxisAngle(k,-c.y))}b=d.clone().rotate(b);f=d.clone().rotate(f);f.normalize();k=a.keepSceneUpright?l:f;k=(new THREE.Quaternion).setFromAxisAngle(k,-c.x);b=k.clone().rotate(b);f=k.clone().rotate(f);this.center.copy(b.add(a.position));a.up.copy(f);a.lookAt(this.center);g(!1)}};this.pan=function(b){if(!this.navApi.getIsLocked()){b=h(b.x,
b.y);var c=this.getView(),d=a.up.clone().cross(c),f=c.clone().cross(d);d.normalize();f.normalize();c.normalize();var k=this.pivot.clone().sub(a.position),k=c.clone().dot(k),c=k*(Math.tan(THREE.Math.degToRad(a.leftFov))+Math.tan(THREE.Math.degToRad(a.rightFov))),k=k*(Math.tan(THREE.Math.degToRad(a.topFov))+Math.tan(THREE.Math.degToRad(a.bottomFov))),c=b.x*Math.abs(c);b=b.y*Math.abs(k);k=new THREE.Vector3;d=d.clone().multiplyScalar(c);f=f.clone().multiplyScalar(b);k=d.clone().add(f).clone().multiplyScalar(this.userPanSpeed);
a.position.add(k);this.center.add(k);a.lookAt(this.center);g(!1)}};this.zoom=function(b){if(!this.navApi.getIsLocked()){var c=this.userZoomSpeed,d=Number.MAX_VALUE;b=b.x+b.y;var f=Math.pow(c,b),h=this.pivot.clone().sub(this.pivot.clone().sub(this.saveEye).clone().multiplyScalar(f)),k=h.clone().add(n.D.clone().multiplyScalar(n.D.clone().dot(this.pivot.clone().sub(h).clone())));if(!(f>=d)){if(0<b){Math.pow(c,b-0);if(0>b)return;a.position.copy(h);this.center.copy(k);h.clone().sub(this.saveEye).dot(n.D)>
d&&a.position.copy(this.saveEye.sub(n.D).clone().multiplyScalar(d))}else a.position.copy(h),this.center.copy(k);a.lookAt(this.center);g(!1)}}};this.walk=function(b,c,d,f,k){if(!this.navApi.getIsLocked()){d=this.sceneUpDirection.clone();f=this.sceneFrontDirection.clone();k=this.sceneFrontDirection.clone().cross(this.sceneUpDirection);l(b,c)?(wheel.cursorImage("SWWalk"),m(!0,b,c),x=c.x,y=c.y):m(!1,b,c);x=b.x;y=b.y;var p=h(x-c.x,y-c.y),n=-p.x,q=-p.y,s=0>n?-1:1,p=0>q?-1:1,r=Math.abs(n),u=Math.abs(q),
u=new THREE.Vector2(30,30),u=h(u.x,u.y),r=l(b,c)?0:Math.abs(n)-u.x,u=l(b,c)?0:Math.abs(q)-u.y,r=r/0.25,u=u/0.25,r=1>r?Math.easeClamp(r,0,1):Math.pow(r,1),u=1>u?Math.easeClamp(u,0,1):Math.pow(u,1),n=0<r?r*s:0,p=0<u?u*p:0;b=this.getView();c=b.length();b.normalize();b.clone().cross(a.up).normalize();k=k.clone().multiplyScalar(k.clone().dot(b));k=f.clone().multiplyScalar(f.clone().dot(b)).clone().add(k);k=k.clone().length()>Number.MIN_VALUE?k.normalize():a.up;f=1*p*this.walkMultiplier;p=Math.cos(0.65);
1!=p&&(d.clone().dot(a.up)<-Number.MIN_VALUE&&d.clone().dot(b)<-p||d.clone().dot(a.up)>Number.MIN_VALUE&&d.clone().dot(b)>p)&&(k=-k);n=-n*this.walkMultiplier*0.05;p=a.up;if(d.clone().dot(a.up)<-Number.MIN_VALUE||Math.abs(d.clone().dot(a.up))<Number.MIN_VALUE&&d.clone().dot(b)>Number.MIN_VALUE)n=-n;p=d;n=(new THREE.Quaternion).setFromAxisAngle(p,n);n.normalize();b=n.clone().rotate(b);b.normalize();a.up.copy(n.clone().rotate(a.up));a.up.normalize();a.position.add(k.clone().multiplyScalar(f));this.center.copy(a.position.clone().add(b.clone().multiplyScalar(c)));
d.normalize();a.lookAt(this.center);g(!1)}};this.updown=function(b){if(!this.navApi.getIsLocked()){var c=Math.pow(b,2);0>b&&(c=-c);c=h(0,c);c.y=0.01*c.y*(n.maxSceneBound-n.minSceneBound);c=n.userHeightSpeed*c.y;var d=n.m_amount;if(0==b)c=0;else{var f=n.saveEye.clone().sub(worldUp.clone().multiplyScalar(d+c)),d=n.saveEye.clone().sub(worldUp.clone().multiplyScalar(d)),k=0,k=(n.maxSceneBound-n.minSceneBound)/1E3;n.topLimit&&0<b?(k=n.maxSceneBound-k,n.topLimit=!1):n.bottomLimit&&0>b?(k=n.minSceneBound+
k,n.bottomLimit=!1):k=f.dot(worldUp);b=d.dot(worldUp);k<n.minSceneBound?b<n.minSceneBound&&(n.bottomLimit=!0,c=0):k>n.maxSceneBound&&b>n.maxSceneBound&&(n.topLimit=!0,c=0)}n.m_amount+=c;b=new THREE.Vector3(0,1,0);c=n.saveEye.clone().sub(b.clone().multiplyScalar(n.m_amount));f=c.clone().dot(b);a.position.copy(c);f<n.minSceneBound&&a.position.add(b.clone().multiplyScalar(n.minSceneBound-f));f>n.maxSceneBound&&a.position.add(b.clone().multiplyScalar(n.maxSceneBound-f));this.center.copy(a.position.clone().add(n.saveCenter.clone().sub(n.saveEye)));
a.lookAt(this.center);g(!1)}};this.addHistoryElement=function(){};this.addIntermediateHistoryElement=function(){this.rewindParams.history=this.rewindParams.snapped?this.rewindParams.history.slice(0,this.rewindParams.timelineIndex):0<this.rewindParams.slideOffset.x?this.rewindParams.history.slice(0,this.rewindParams.timelineIndex):this.rewindParams.history.slice(0,this.rewindParams.timelineIndex+1);this.addHistoryElement()};this.clearHistory=function(){this.rewindParams.history.length=0;this.rewindParams.timelineIndex=
0;this.rewindParams.timelineIndexSlide=0;this.rewindParams.resetWeights=!0};this.openTimeline=function(a){this.rewindParams.timelineIndexSlide=this.rewindParams.timelineIndex;this.rewindParams.resetWeights&&(this.rewindParams.slideOffset.x=0,this.rewindParams.snapped=this.rewindParams.snappingEnabled);0==this.rewindParams.history.length&&this.addHistoryElement();for(var b=0;b<this.rewindParams.history.length;b++){var c=this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize;this.rewindParams.history[b].thumbnailBounds.setCenter((new THREE.Vector2(a.x+
(b-this.rewindParams.timelineIndex)*c,a.y)).add(this.rewindParams.slideOffset));this.rewindParams.resetWeights&&(this.rewindParams.history[b].weight=b==this.rewindParams.timelineIndex?1:0)}this.rewindParams.resetWeights&&(this.rewindParams.resetWeights=!1);c=2*(this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize);this.rewindParams.open=!0;this.rewindParams.openLocation=a.clone();this.rewindParams.openLocationOrigin=a.clone();this.rewindParams.openBracket=a.clone();this.rewindParams.openBracketA=
new THREE.Vector2(c,a.y);this.rewindParams.openBracketB=new THREE.Vector2(window.innerWidth-c,a.y);this.rewindParams.openBracketA.x>this.rewindParams.openBracketB.x&&(a=this.rewindParams.openBracketA.x,this.rewindParams.openBracketA.x=this.rewindParams.openBracketB.x,this.rewindParams.openBracketB.x=a);this.rewindParams.locationOffset=new THREE.Vector2(0,0);this.rewindParams.snapOffset=new THREE.Vector2(0,0)};this.slideTimeline=function(a){if(this.rewindParams.open&&0!=this.rewindParams.history.length){var b=
a.clone().add(this.rewindParams.locationOffset),c=2*(this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize);a=window.innerWidth-c;var d=this.rewindParams.history[0].thumbnailBounds.center().x,f=this.rewindParams.history[this.rewindParams.history.length-1].thumbnailBounds.center().x,g=0;b.x<this.rewindParams.openBracketA.x&&(g=b.x-this.rewindParams.openBracketA.x,d-=g,c<d&&(g=Math.min(g+(d-c),0)));b.x>this.rewindParams.openBracketB.x&&(g=b.x-this.rewindParams.openBracketB.x,c=f-g,a>c&&
(g=Math.max(g+(c-a),0)));this.rewindParams.openLocation.x+=g;this.rewindParams.openBracketA.x+=g;this.rewindParams.openBracketB.x+=g;this.rewindParams.openBracket.x=b.x-(this.rewindParams.openLocation.x-this.rewindParams.openLocationOrigin.x);a=new THREE.Vector2(-g,0);b=b.clone().sub(this.rewindParams.openLocation.clone().sub(this.rewindParams.openLocationOrigin));a.x+=this.rewindParams.snapOffset.x;this.rewindParams.snapOffset.x=0;c=!1;if(this.rewindParams.snappingEnabled)for(f=0;f<this.rewindParams.history.length;f++)if(d=
this.rewindParams.history[f].thumbnailBounds.center().add(a),4>Math.abs(d.x-b.x)||this.rewindParams.snapped&&16>Math.abs(d.x-b.x)){c=!0;0!=g?(this.rewindParams.snapOffset.x=d.x-b.x,a.x-=this.rewindParams.snapOffset.x):this.rewindParams.openBracket.x+=d.x-b.x;b.x=d.x;break}this.rewindParams.snapped=c;c=-1;for(f=g=0;f<this.rewindParams.history.length;f++){d=this.rewindParams.history[f].thumbnailBounds.clone();this.rewindParams.history[f].thumbnailBounds.setCenter(this.rewindParams.history[f].thumbnailBounds.center().add(a));
if(this.rewindParams.history[f].thumbnail){var h=this.rewindParams.history[f].thumbnailBounds.center().x-this.rewindParams.thumbnailSize/2;$("#rewindFrame"+f).css("left",h);$("#rewindBorder"+f).css("left",h-4)}h=new THREE.Vector2(2*(this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize),2*(this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize));d.setFromCenterAndSize(d.center(),h);h=new THREE.Vector2(0,0);d.getIcon2DCoords(b,h);h=1-Math.abs(Math.equalityClamp(h.x,-1,1));
this.rewindParams.history[f].weight=h;0==f&&b.x<d.center().x&&(this.rewindParams.history[f].weight=1);f==this.rewindParams.history.length-1&&b.x>d.center().x&&(this.rewindParams.history[f].weight=1);g+=this.rewindParams.history[f].weight;this.rewindParams.history[f].weight>c&&(c=this.rewindParams.history[f].weight,this.rewindParams.snappingEnabled&&1==this.rewindParams.history[f].weight?(this.rewindParams.slideOffset.x=0,this.rewindParams.snapped=!0):this.rewindParams.slideOffset.x=this.rewindParams.history[f].thumbnailBounds.center().x-
b.x,this.rewindParams.timelineIndexSlide=f)}for(a=0;a<this.rewindParams.history.length;a++)this.rewindParams.history[a].weight/=g;a=this.rewindParams.history[0].thumbnailBounds.center().x;b=this.rewindParams.history[this.rewindParams.history.length-1].thumbnailBounds.center().x;this.rewindParams.openBracket.x<a?(this.rewindParams.locationOffset.x+=a-this.rewindParams.openBracket.x,this.rewindParams.openBracket.x=a):this.rewindParams.openBracket.x>b&&(this.rewindParams.locationOffset.x+=b-this.rewindParams.openBracket.x,
this.rewindParams.openBracket.x=b)}};this.shiftBackOneElement=function(){0!=this.rewindParams.history.length&&(0<this.rewindParams.timelineIndex||0!=this.rewindParams.slideOffset.x)&&((this.rewindParams.snapped||0<this.rewindParams.slideOffset.x)&&this.rewindParams.timelineIndex--,this.rewindParams.timelineIndexSlide=this.rewindParams.timelineIndex,this.rewindParams.resetWeights=!0,n.elapsedTime=0,this.animateToRewindIndex())};this.animateToRewindIndex=function(){var b=this.rewindParams.timelineIndex,
c=0;n.elapsedTime>=D.duration?c=1:(c=Math.easeClamp(n.elapsedTime/D.duration,0,D.destinationPercent),n.elapsedTime+=v/500);n.center.copy(n.center.clone().multiplyScalar(1-c).clone().add(this.rewindParams.history[b].camera.center.clone().multiplyScalar(c)));a.position.copy(a.position.clone().multiplyScalar(1-c).clone().add(this.rewindParams.history[b].camera.position.clone().multiplyScalar(c)));a.up.copy(this.rewindParams.history[b].camera.up);n.pivot.copy(n.center);a.lookAt(n.center);g(!1);q&&requestAnimationFrame(q.render);
1!==c&&requestAnimationFrame(function(){n.animateToRewindIndex()})};this.closeTimeline=function(){this.rewindParams.timelineIndex!=this.rewindParams.timelineIndexSlide&&(this.rewindParams.timelineIndex=this.rewindParams.timelineIndexSlide);this.rewindParams.open=!1};this.getInterpolatedCamera=function(){var b=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1E4);b.center=new THREE.Vector3(0,0,0);b.pivot=new THREE.Vector3(0,0,0);b.leftFov=0;b.rightFov=0;b.topFov=0;b.bottomFov=
0;b.up.set(0,0,0);for(var c=0;c<this.rewindParams.history.length;c++){var d=this.rewindParams.history[c].camera,f=this.rewindParams.history[c].weight;b.center.add(d.center.clone().multiplyScalar(f));b.position.add(d.position.clone().multiplyScalar(f));b.up.add(d.up.clone().multiplyScalar(f));b.rotation.add(d.rotation.clone().multiplyScalar(f));b.pivot.add(d.pivot.clone().multiplyScalar(f));b.leftFov+=d.leftFov*f;b.rightFov+=d.rightFov*f;b.topFov+=d.topFov*f;b.bottomFov+=d.bottomFov*f}a.position.copy(b.position);
a.up.copy(b.up);a.rotation=b.rotation;a.leftFov=b.leftFov;a.rightFov=b.rightFov;a.topFov=b.topFov;a.bottomFov=b.bottomFov;n.center.copy(b.center);n.pivot.copy(b.pivot);a.lookAt(n.center);a.up.normalize();g(!1)}};
Autocam.ViewCube=function(a,b,c,f){function d(a,b){var c={};0===a.type.indexOf("touch")?0<a.touches.length?(c.clientX=a.touches[0].clientX,c.clientY=a.touches[0].clientY,c.pageX=a.touches[0].pageX,c.pageY=a.touches[0].pageY,c.screenX=a.touches[0].screenX,c.screenY=a.touches[0].screenY,c.movementX=c.screenX-b.prevX,c.movementY=c.screenY-b.prevY,c.which=h.navApi.getUseLeftHandedInput()?3:1):c=b.prevCoords:(c.clientX=a.clientX,c.clientY=a.clientY,c.pageX=a.pageX,c.pageY=a.pageY,c.screenX=a.screenX,c.screenY=
a.screenY,c.which=a.which,ia?(c.movementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,c.movementY=a.movementY||a.mozMovementY||a.webkitMovementY||0):(c.movementX=c.screenX-b.prevX,c.movementY=c.screenY-b.prevY));b.prevX=c.screenX;b.prevY=c.screenY;return b.prevCoords=c}var g=this,h=b,k=b.camera;b.setCube(this);var l=RESOURCE_ROOT+"textures/",m=f?f:l;g.currentFace="front";var p="top,front;top right;top,left;top,back;bottom,front;bottom,right;bottom,left;bottom,back;left,front;front,right;right,back;back,left".split(";"),
n="front,top,right back,top,right front,top,left back,top,left front,bottom,right back,bottom,right front,bottom,left back,bottom,left".split(" "),q=["Go Home",null,"Orthographic","Perspective","Perspective with Ortho Faces",null,"Set current view as Home","Focus and set as Home","Reset Home",null,"Set current view as Front","Set current view as Top","Reset orientation"],r=[!0,null,!0,!0,!0,null,!0,!0,!0,null,!0,!0,!0],s=[null,null,function(){return!h.orthographicFaces&&!k.isPerspective},function(){return!h.orthographicFaces&&
k.isPerspective},function(){return h.orthographicFaces},null,null,null,null,null,null,null,null],u,w,v,B,z,A,C;g.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2E3);g.camera.position.copy(k.position);g.center=new THREE.Vector3(0,0,0);g.camera.lookAt(g.center);var G,E,I,H,Q,N=[],F,D=[],S=[],J=[],Z=[],K=null,M=null,ea=null,U,X,O,ba,R,V=0,W,da=0,ga=!0,ia=!1,ya=!1,ua=-1!=navigator.userAgent.search("Chrome"),za=-1!=navigator.platform.search("Win32"),Ca=!1,Ga=!1,Y=[];this.height=
this.width=0;this.animSpeed=500;this.animate=!0;this.compass=!1;this.viewScaleFactorCompass=1.5;this.viewScale=1;this.draggable=!0;this.wantHomeButton=!1;this.wantContextMenu=this.wantRollArrows=!0;this.inactiveOpacity=0.5;var Fa=function(a){a=a.getBoundingClientRect();return{x:a.left,y:a.top,w:a.width,h:a.height}},Ma=function(){h.navApi.getIsLocked()||(c.style.opacity="1.0",Ga=!1);requestAnimationFrame(g.render)},Ta=function(a){if(Ga||h.viewCubeMenuOpen||h.navApi.getIsLocked())h.navApi.getIsLocked()||
(c.style.opacity=1);else{var b=Math.max(4*Math.abs((a.clientX-W.x)/W.w-0.5)-1,0);a=Math.max(4*Math.abs((a.clientY-W.y)/W.h-0.5)-1,0);b=Math.max(0,Math.min(Math.sqrt(b*b+a*a),1));c.style.opacity=1-b*(1-g.inactiveOpacity)}},sa=function(){h.viewCubeMenuOpen||(c.style.opacity=g.inactiveOpacity,Ga=!0,requestAnimationFrame(g.render))},ha=function(a){var b=new Image;b.crossOrigin="anonymous";var c=new THREE.Texture(b);b.onload=function(){c.needsUpdate=!0;da++;14<=da&&requestAnimationFrame(g.render)};b.src=
a;return c},pa=function(a,b,c){var d=new THREE.Projector,f=new THREE.Vector3;f.copy(a);d.unprojectVector(f,b);return(new THREE.Raycaster(b.position,f.sub(b.position).normalize())).intersectObjects(c)},Oa=function(a,b){var c=a.clientX-b.x,d=a.clientY-b.y,c=c/b.w*2-1,d=(b.h-d)/b.h*2-1;return new THREE.Vector3(c,d,0.5)},Ja=function(a){a.preventDefault();a.stopPropagation();if(!h.navApi.getIsLocked()&&!h.currentlyAnimating){a=d(a,g);W=Fa(c);c.removeEventListener("mousemove",ma,!1);document.addEventListener("mouseup",
ka,!1);document.addEventListener("touchend",ka,!1);h.navApi.getUsePivotAlways()||(h.pivot.copy(h.center),h.navApi.setPivotPoint(h.center),h.navApi.setPivotSetFlag(!1));h.startInteraction(a.pageX,a.pageY);0==h.rewindParams.history.length&&h.addHistoryElement();h.rewindParams.snapped&&h.rewindParams.timelineIndex+1==h.rewindParams.history.length||h.addIntermediateHistoryElement();var b=h.navApi.getUseLeftHandedInput()?1:3;a.which!==b&&(0>=g.animSpeed?console.error("animSpeed cannot be 0 or less, use ViewCube.animate flag to turn on and off animation"):
(a=Oa(a,W),a=pa(a,g.camera,Z),0<a.length&&(xa(),g.draggable&&(document.addEventListener("mousemove",ja,!1),document.addEventListener("touchmove",ja,!1),ia&&(c.requestPointerLock(),ya=ua&&za)))))}},ja=function(a){a.preventDefault();a.stopPropagation();0>=g.animSpeed?(document.removeEventListener("mousemove",ja,!1),document.removeEventListener("touchmove",ja,!1),console.error("animSpeed cannot be 0 or less")):h.currentlyAnimating||(a=d(a,g),ia&&ya&&(ya=!1,a.movementX=a.movementY=0),a.movementX===a.movementY&&
0===a.movementX?h.currentlyAnimating=!1:(ga=!1,Ca=!0,h.showPivot(!0),h.currentCursor=new THREE.Vector2(a.pageX,a.pageY),h.orbit(h.currentCursor,h.startCursor,new THREE.Vector3(-a.movementX,a.movementY,0),h.startState),g.camera.lookAt(g.center),requestAnimationFrame(g.render)))},Ha=function(a){a||(document.removeEventListener("mouseup",ka,!1),document.removeEventListener("touchend",ka,!1));document.removeEventListener("mousemove",ja,!1);document.removeEventListener("touchmove",ja,!1);c.addEventListener("mousemove",
ma,!1)},ka=function(a){a.preventDefault();a.stopPropagation();var b,f,l;if(h.currentlyAnimating||Ca)h.endInteraction(),h.showPivot(!1),Ca=!1,Ha(!1);else{var m=d(a,g);if(h.viewCubeMenuOpen){a=m.clientX-W.x;b=m.clientY-W.y;if(h.menuOrigin.x<=a&&a<=h.menuOrigin.x+h.menuSize.x&&h.menuOrigin.y<=b&&b<=h.menuOrigin.y+h.menuSize.y)switch(Math.floor((b-5-h.menuOrigin.y)/25)){case 0:h.goHome();break;case 1:h.setOrthographicFaces(!1);h.toOrthographic();break;case 2:h.setOrthographicFaces(!1);h.toPerspective();
break;case 3:h.setOrthographicFaces(!0);ga?h.toOrthographic():h.toPerspective();break;case 4:h.setCurrentViewAsHome(!1);break;case 5:h.setCurrentViewAsHome(!0);break;case 6:h.resetHome();break;case 7:h.setCurrentViewAsFront();break;case 8:h.setCurrentViewAsTop();break;case 9:h.resetOrientation()}h.viewCubeMenuOpen=!1;h.removeDropdownMenu(c);(m.clientX<W.x||m.clientX>W.w+W.x||m.clientY<W.y||m.clientY>W.h+W.y)&&sa();g.mouseMoveSave&&g.processMouseMove(g.mouseMoveSave);Ha(!1)}else if(b=h.navApi.getUseLeftHandedInput()?
1:3,m.which===b)h.viewCubeMenuOpen=!0,h.drawDropdownMenu(q,r,s,m.clientX,m.clientY,c,W),Ha(!0);else{l=Oa(m,W);b=pa(l,g.camera,Z);f=pa(l,C,D);l=pa(l,C,J);if(0<f.length&&ga){var p=h.getOrientation();switch(g.currentFace){case "front":switch(p){case "up":f[0].object===D[0]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[1]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[2]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[3]&&
(h.calculateCubeTransform("left"),g.currentFace="left");break;case "right":f[0].object===D[0]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[1]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[2]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[3]&&(h.calculateCubeTransform("top"),g.currentFace="top");break;case "down":f[0].object===D[0]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[1]?(h.calculateCubeTransform("top"),
g.currentFace="top"):f[0].object===D[2]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[3]&&(h.calculateCubeTransform("right"),g.currentFace="right");break;case "left":f[0].object===D[0]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[1]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[2]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[3]&&(h.calculateCubeTransform("bottom"),g.currentFace="bottom")}break;
case "right":switch(p){case "up":f[0].object===D[0]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[1]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[2]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[3]&&(h.calculateCubeTransform("front"),g.currentFace="front");break;case "right":f[0].object===D[0]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[1]?(h.calculateCubeTransform("front"),g.currentFace="front"):
f[0].object===D[2]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[3]&&(h.calculateCubeTransform("top"),g.currentFace="top");break;case "down":f[0].object===D[0]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[1]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[2]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[3]&&(h.calculateCubeTransform("back"),g.currentFace="back");break;case "left":f[0].object===
D[0]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[1]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[2]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[3]&&(h.calculateCubeTransform("bottom"),g.currentFace="bottom")}break;case "left":switch(p){case "up":f[0].object===D[0]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[1]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[2]?(h.calculateCubeTransform("front"),
g.currentFace="front"):f[0].object===D[3]&&(h.calculateCubeTransform("back"),g.currentFace="back");break;case "right":f[0].object===D[0]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[1]?(h.calculateCubeTransform("bavk"),g.currentFace="back"):f[0].object===D[2]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[3]&&(h.calculateCubeTransform("top"),g.currentFace="top");break;case "down":f[0].object===D[0]?(h.calculateCubeTransform("bottom"),g.currentFace=
"bottom"):f[0].object===D[1]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[2]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[3]&&(h.calculateCubeTransform("front"),g.currentFace="front");break;case "left":f[0].object===D[0]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[1]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[2]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[3]&&(h.calculateCubeTransform("bottom"),
g.currentFace="bottom")}break;case "back":switch(p){case "up":f[0].object===D[0]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[1]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[2]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[3]&&(h.calculateCubeTransform("right"),g.currentFace="right");break;case "right":f[0].object===D[0]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[1]?(h.calculateCubeTransform("right"),
g.currentFace="right"):f[0].object===D[2]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[3]&&(h.calculateCubeTransform("top"),g.currentFace="top");break;case "down":f[0].object===D[0]?(h.calculateCubeTransform("bottom"),g.currentFace="bottom"):f[0].object===D[1]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[2]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[3]&&(h.calculateCubeTransform("left"),g.currentFace="left");break;
case "left":f[0].object===D[0]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[1]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[2]?(h.calculateCubeTransform("top"),g.currentFace="top"):f[0].object===D[3]&&(h.calculateCubeTransform("bottom"),g.currentFace="bottom")}break;case "top":switch(p){case "up":f[0].object===D[0]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[1]?(h.calculateCubeTransform("front"),g.currentFace="front"):
f[0].object===D[2]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[3]&&(h.calculateCubeTransform("left"),g.currentFace="left");break;case "right":f[0].object===D[0]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[1]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[2]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[3]&&(h.calculateCubeTransform("back"),g.currentFace="back");break;case "down":f[0].object===
D[0]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[1]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[2]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[3]&&(h.calculateCubeTransform("right"),g.currentFace="right");break;case "left":f[0].object===D[0]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[1]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[2]?(h.calculateCubeTransform("back"),
g.currentFace="back"):f[0].object===D[3]&&(h.calculateCubeTransform("front"),g.currentFace="front")}break;case "bottom":switch(p){case "up":f[0].object===D[0]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[1]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[2]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[3]&&(h.calculateCubeTransform("left"),g.currentFace="left");break;case "right":f[0].object===D[0]?(h.calculateCubeTransform("right"),
g.currentFace="right"):f[0].object===D[1]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[2]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[3]&&(h.calculateCubeTransform("front"),g.currentFace="front");break;case "down":f[0].object===D[0]?(h.calculateCubeTransform("back"),g.currentFace="back"):f[0].object===D[1]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[2]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===
D[3]&&(h.calculateCubeTransform("right"),g.currentFace="right");break;case "left":f[0].object===D[0]?(h.calculateCubeTransform("left"),g.currentFace="left"):f[0].object===D[1]?(h.calculateCubeTransform("right"),g.currentFace="right"):f[0].object===D[2]?(h.calculateCubeTransform("front"),g.currentFace="front"):f[0].object===D[3]&&(h.calculateCubeTransform("back"),g.currentFace="back")}}h.elapsedTime=0;h.sphericallyInterpolateTransition()}if(0<l.length){h.elapsedTime=0;if(g.wantHomeButton&&l[0].object===
J[ba]){h.goHome();Ha(!1);return}if(g.wantContextMenu&&l[0].object===J[R]){h.viewCubeMenuOpen=!0;h.drawDropdownMenu(q,r,s,m.clientX,m.clientY,c,W);Ha(!0);return}g.wantRollArrows&&ga&&(l[0].object===J[U]||l[0].object===J[X])&&(m=l[0].object===J[X],f={center:h.center.clone(),position:k.position.clone(),pivot:k.pivot.clone(),fov:k.fov,worldUp:h.sceneUpDirection.clone(),isOrtho:!1===k.isPerspective},l=h.center.clone().sub(k.position).normalize(),m?f.up=k.up.clone().cross(l):(f.up=k.up.clone().multiplyScalar(-1),
f.up.cross(l)),f.up.normalize(),h.elapsedTime=0,h.animateTransition(f))}0<b.length&&(g.currentFace=b[0].object.name,h.orthographicFaces&&-1!==g.currentFace.indexOf(",")&&h.setCameraOrtho(!1),h.calculateCubeTransform(g.currentFace),h.elapsedTime=0,g.mouseMoveSave=a,h.sphericallyInterpolateTransition(function(){g.mouseMoveSave&&g.processMouseMove(g.mouseMoveSave)}));Ha(!1)}}};this.processMouseMove=function(a){var b,c;if(h.viewCubeMenuOpen||h.currentlyAnimating)g.mouseMoveSave=a;else{g.mouseMoveSave=
null;a=d(a,g);c=Oa(a,W);a=pa(c,g.camera,S);b=pa(c,C,D);c=pa(c,C,J);K&&!Ca&&(K.material.color.setHex(14540253),K=null,requestAnimationFrame(g.render));if(0<b.length&&!Ca){K=b[0].object;for(b=F.children.length;0<=--b;)if(K===D[b]){K=F.children[b];K.material.color.setHex(45055);break}requestAnimationFrame(g.render)}M&&!Ca&&(M.material.opacity=0,M=null,requestAnimationFrame(g.render));0<a.length&&!Ca&&(M=a[0].object,M.material.opacity=0.3,requestAnimationFrame(g.render));0<c.length&&!Ca?ea!==c[0].object&&
(g.wantHomeButton&&c[0].object===J[ba]?(ea=c[0].object,J[ba].material.map=Y[0]):g.wantRollArrows&&c[0].object===J[U]?(ea=c[0].object,J[O].material.map=Y[1]):g.wantRollArrows&&c[0].object===J[X]?(ea=c[0].object,J[O].material.map=Y[2]):g.wantContextMenu&&c[0].object===J[R]?(ea=c[0].object,J[R].material.map=Y[6]):g.wantHomeButton&&ea===J[ba]?(ea=null,J[ba].material.map=Y[3]):!g.wantRollArrows||ea!==J[U]&&ea!==J[X]&&ea!==J[O]?g.wantContextMenu&&ea===J[R]&&(ea=null,J[R].material.map=Y[5]):(ea=null,J[O].material.map=
Y[4]),requestAnimationFrame(g.render)):null===ea||Ca||(g.wantHomeButton&&ea===J[ba]?(ea=null,J[ba].material.map=Y[3]):!g.wantRollArrows||ea!==J[U]&&ea!==J[X]&&ea!==J[O]?g.wantContextMenu&&ea===J[R]&&(ea=null,J[R].material.map=Y[5]):(ea=null,J[O].material.map=Y[4]),requestAnimationFrame(g.render))}};var ma=function(a){h.navApi.getIsLocked()||g.processMouseMove(a)},ca=function(){W=Fa(c);g.width=c.offsetWidth;g.height=c.offsetHeight;g.camera.aspect=g.width/g.height;g.camera.updateProjectionMatrix();
g.camera.topFov=g.camera.bottomFov=g.camera.fov/2;g.camera.leftFov=g.camera.rightFov=g.camera.aspect*g.camera.fov/2;A.setSize(g.width,g.height);requestAnimationFrame(g.render)},na=function(a,b){var c,d=new THREE.Geometry;c=new THREE.Vector3(0,0,0);var f=new THREE.Vector3(60,-60,105),g=new THREE.Vector3(60,60,105),h=new THREE.Vector3(-60,60,105),k=new THREE.Vector3(-60,-60,105);d.vertices.push(c);d.vertices.push(f);d.vertices.push(g);d.vertices.push(h);d.vertices.push(k);d.faces.push(new THREE.Face3(1,
2,3));d.faces.push(new THREE.Face3(1,3,4));d.applyMatrix((new THREE.Matrix4).makeRotationX(a));d.applyMatrix((new THREE.Matrix4).makeRotationY(b));d.computeFaceNormals();d.computeVertexNormals();c=new THREE.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0});return new THREE.Mesh(d,c)},la=function(a,b,c){var d=new THREE.Geometry,f=new THREE.Vector3(60,105,105),g=new THREE.Vector3(-60,105,105),h=new THREE.Vector3(-60,60,105),k=new THREE.Vector3(60,60,105),l=new THREE.Vector3(60,105,
60),m=new THREE.Vector3(-60,105,60),p=new THREE.Vector3(-60,105,105),n=new THREE.Vector3(60,105,105);d.vertices.push(f);d.vertices.push(g);d.vertices.push(h);d.vertices.push(k);d.vertices.push(l);d.vertices.push(m);d.vertices.push(p);d.vertices.push(n);d.faces.push(new THREE.Face3(0,1,2));d.faces.push(new THREE.Face3(0,2,3));d.faces.push(new THREE.Face3(4,5,6));d.faces.push(new THREE.Face3(4,6,7));d.applyMatrix((new THREE.Matrix4).makeRotationX(a));d.applyMatrix((new THREE.Matrix4).makeRotationY(b));
d.applyMatrix((new THREE.Matrix4).makeRotationZ(c));d.computeFaceNormals();d.computeVertexNormals();a=new THREE.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0});return new THREE.Mesh(d,a)},wa=function(a,b){var c,d=new THREE.Geometry;c=new THREE.Vector3(105,105,105);var f=new THREE.Vector3(60,105,105),g=new THREE.Vector3(60,60,105),h=new THREE.Vector3(105,60,105),k=new THREE.Vector3(105,105,60),l=new THREE.Vector3(105,105,105),m=new THREE.Vector3(105,60,105),p=new THREE.Vector3(105,
60,60),n=new THREE.Vector3(105,105,105),q=new THREE.Vector3(105,105,60),s=new THREE.Vector3(60,105,60),r=new THREE.Vector3(60,105,105);d.vertices.push(c);d.vertices.push(f);d.vertices.push(g);d.vertices.push(h);d.vertices.push(k);d.vertices.push(l);d.vertices.push(m);d.vertices.push(p);d.vertices.push(n);d.vertices.push(q);d.vertices.push(s);d.vertices.push(r);d.faces.push(new THREE.Face3(0,1,2));d.faces.push(new THREE.Face3(0,2,3));d.faces.push(new THREE.Face3(4,5,6));d.faces.push(new THREE.Face3(4,
6,7));d.faces.push(new THREE.Face3(8,9,10));d.faces.push(new THREE.Face3(8,10,11));d.applyMatrix((new THREE.Matrix4).makeRotationX(a));d.applyMatrix((new THREE.Matrix4).makeRotationY(b));d.computeFaceNormals();d.computeVertexNormals();c=new THREE.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0});return new THREE.Mesh(d,c)},Ba=function(a){var b=h.cubeFront.clone(),c=h.sceneUpDirection.clone(),d=b.clone().cross(c);c.copy(d).cross(b);b.normalize();c.normalize();d.normalize();var f=
(new THREE.Vector3(b.x,c.x,d.x)).multiplyScalar(a.x);f.add((new THREE.Vector3(b.y,c.y,d.y)).multiplyScalar(a.y));f.add((new THREE.Vector3(b.z,c.z,d.z)).multiplyScalar(a.z));return f};this.render=function(){var a=g.compass?g.viewScaleFactorCompass*g.viewScale:g.viewScale,b=h.center.clone().sub(k.position).normalize(),c=k.up.normalize(),b=Ba(b),c=Ba(c);g.camera.position.copy(b);g.camera.position.multiplyScalar(-a/g.camera.position.length());g.camera.up=c.normalize();g.camera.lookAt(g.center);ga=h.isFaceView();
!ga||Ga||h.currentlyAnimating?xa():(z.add(F),a=g.wantRollArrows?1:0,J[O].material.opacity=a,J[R].material.opacity=a);Q.material.opacity=Ga?0:g.wantContextMenu?1:0;I.material.opacity=Ga?0:g.wantHomeButton?1:0;A.clear();A.render(u,g.camera);A.render(w,g.camera);A.render(B,g.camera);A.render(v,g.camera);A.render(z,C)};var xa=function(){z.remove(F);J[O].material.opacity=0;J[R].material.opacity=0};this.refreshCube=function(){ca()};this.setSize=function(a,b){g.width=a;g.height=b;if(1<c.children.length)for(var d=
1;d<c.children.length;d++)c.children[d].style.bottom=(g.height/5).toString()+"px";ca()};this.useTransparency=function(a){(Ga=a)?(c.onmouseover=Ma,c.onmousemove=Ta,c.onmouseout=sa,sa()):(c.onmouseover=null,c.onmouseout=null,c.onmousemove=null,c.style.opacity="1.0")};(function(){var a=c.getBoundingClientRect();g.width=a.width;g.height=a.height;W=Fa(c);C=new THREE.PerspectiveCamera(70,g.height/g.width,1,1E4);C.position.set(0,0,500);u=new THREE.Scene;w=new THREE.Scene;v=new THREE.Scene;B=new THREE.Scene;
z=new THREE.Scene;ga=!0;V=200;g.viewScale=3.5*V;var a=THREE.LinearFilter,b=(new THREE.DDSLoader).load(m+"VCcrossRGBA8small.dds");b.minFilter=b.maxFilter=a;var d=THREE.ShaderLib.cube,d=new THREE.ShaderMaterial({fragmentShader:d.fragmentShader,vertexShader:d.vertexShader,uniforms:THREE.UniformsUtils.clone(d.uniforms),depthWrite:!1});d.uniforms.tCube.value=b;var f=new THREE.BoxGeometry(V,V,V,2,2,2),b=new THREE.BoxGeometry(V+1,V+1,V+1,2,2,2);G=new THREE.Mesh(f,d);G.position.set(0,0,0);w.add(G);d=ha(l+
"VCedge1.png");d.minFilter=d.maxFilter=a;E=new THREE.Mesh(b,new THREE.MeshBasicMaterial({map:d,overdraw:!1,transparent:!0,shading:THREE.SmoothShading}));E.position.set(0,0,0);B.add(E);var a=V,d=new THREE.Geometry,b=new THREE.Vector3(-30,0,0),f=new THREE.Vector3(30,0,0),k=new THREE.Vector3(0,-30,0);d.vertices.push(b);d.vertices.push(f);d.vertices.push(k);d.faces.push(new THREE.Face3(1,0,2));d.computeFaceNormals();var k=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,opacity:1,
shading:THREE.FlatShading}),q=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,opacity:1,shading:THREE.FlatShading}),s=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,opacity:1,shading:THREE.FlatShading}),r=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,opacity:1,shading:THREE.FlatShading}),b=new THREE.PlaneGeometry(0.5*V,0.3*V,2,2),f=new THREE.MeshBasicMaterial({transparent:!0,opacity:0}),k=new THREE.Mesh(d,k),t=new THREE.Mesh(b,
f);k.position.set(0,a,0);t.position.set(0,0.9*a,0.1);var q=new THREE.Mesh(d,q),M=new THREE.Mesh(b,f);q.position.set(0,-a,0);M.position.set(0,0.9*-a,0.1);q.rotation.z+=Math.PI;M.rotation.z+=Math.PI;var s=new THREE.Mesh(d,s),K=new THREE.Mesh(b,f);s.position.set(a,0,0);K.position.set(0.9*a,0,0.1);s.rotation.z-=Math.PI/2;K.rotation.z-=Math.PI/2;d=new THREE.Mesh(d,r);b=new THREE.Mesh(b,f);d.position.set(-a,0,0);b.position.set(0.9*-a,0,0.1);d.rotation.z+=Math.PI/2;b.rotation.z+=Math.PI/2;F=new THREE.Object3D;
F.position.set(0,0,0);F.add(k);F.add(q);F.add(s);F.add(d);z.add(t);z.add(M);z.add(K);z.add(b);z.add(F);D.push(t);D.push(M);D.push(K);D.push(b);a=new THREE.PlaneGeometry(V/3,V/3,2,2);d=new THREE.MeshBasicMaterial({map:ha(l+"VChome.png"),transparent:!0,shading:THREE.FlatShading});I=new THREE.Mesh(a,d);I.position.set(-V,V,0);ba=J.length;z.add(I);J.push(I);a=new THREE.PlaneGeometry(1.5*V,1.5*V,2,2);d=new THREE.MeshBasicMaterial({map:ha(l+"VCarrows.png"),shading:THREE.FlatShading,transparent:!0});a=new THREE.Mesh(a,
d);a.position.set(0.5*V+20,0.5*V+20,0);d=new THREE.PlaneGeometry(0.6*V,0.45*V,2,2);b=new THREE.MeshBasicMaterial({transparent:!0,opacity:0});d=new THREE.Mesh(d,b);d.position.set(0.5*V+20,V+20,0.1);b=new THREE.PlaneGeometry(0.45*V,0.6*V,2,2);f=new THREE.MeshBasicMaterial({transparent:!0,opacity:0});b=new THREE.Mesh(b,f);b.position.set(V+20,0.5*V+20,0.1);z.add(a);z.add(d);z.add(b);U=J.length;J.push(d);X=J.length;J.push(b);O=J.length;J.push(a);a=new THREE.PlaneGeometry(V/2.3,V/2.3,2,2);d=new THREE.MeshBasicMaterial({map:ha(l+
"VCcontext.png"),transparent:!0,shading:THREE.FlatShading});Q=new THREE.Mesh(a,d);Q.position.set(V,-V,0);R=J.length;z.add(Q);J.push(Q);a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0));a.vertices.push(new THREE.Vector3(-V/2,-V/2-20,-V/2));a.vertices.push(new THREE.Vector3(V/2,-V/2-20,-V/2));a.vertices.push(new THREE.Vector3(V/2,-V/2-20,V/2));a.vertices.push(new THREE.Vector3(-V/2,-V/2-20,V/2));a.faces.push(new THREE.Face3(4,3,2));a.faces.push(new THREE.Face3(4,2,1));d=new THREE.MeshBasicMaterial({color:0,
transparent:!0,opacity:0.5});H=new THREE.Mesh(a,d);u.add(H);d=[];b=[];d[0]=wa(0,0);d[1]=wa(0,Math.PI/2);d[2]=wa(0,-Math.PI/2);d[3]=wa(0,Math.PI);d[4]=wa(Math.PI/2,0);d[5]=wa(Math.PI/2,Math.PI/2);d[6]=wa(Math.PI/2,-Math.PI/2);d[7]=wa(Math.PI/2,Math.PI);b[0]=la(0,0,0);b[1]=la(0,Math.PI/2,0);b[2]=la(0,-Math.PI/2,0);b[3]=la(0,Math.PI,0);b[4]=la(Math.PI/2,0,0);b[5]=la(Math.PI/2,Math.PI/2,0);b[6]=la(Math.PI/2,-Math.PI/2,0);b[7]=la(Math.PI/2,Math.PI,0);b[8]=la(0,0,Math.PI/2);b[9]=la(0,0,-Math.PI/2);b[10]=
la(-Math.PI/2,0,-Math.PI/2);b[11]=la(-Math.PI,0,-Math.PI/2);N.push(na(0,0));N[0].name="front";S.push(N[0]);Z.push(N[0]);v.add(N[0]);N.push(na(0,Math.PI/2));N[1].name="right";S.push(N[1]);Z.push(N[1]);v.add(N[1]);N.push(na(0,Math.PI));N[2].name="back";S.push(N[2]);Z.push(N[2]);v.add(N[2]);N.push(na(0,-Math.PI/2));N[3].name="left";S.push(N[3]);Z.push(N[3]);v.add(N[3]);N.push(na(Math.PI/2,0));N[4].name="bottom";S.push(N[4]);Z.push(N[4]);v.add(N[4]);N.push(na(-Math.PI/2,0));N[5].name="top";S.push(N[5]);
Z.push(N[5]);v.add(N[5]);a=N.length;for(f=0;f<d.length;f++)N.push(d[f]),N[a+f].name=n[f],v.add(N[a+f]),S.push(N[a+f]),Z.push(N[a+f]);a=N.length;for(f=0;f<b.length;f++)N.push(b[f]),N[a+f].name=p[f],v.add(N[a+f]),S.push(N[a+f]),Z.push(N[a+f]);"CANVAS"===h.renderer.toUpperCase()?A=new THREE.CanvasRenderer:"WEBGL"===h.renderer.toUpperCase()?A=new FireflyWebGLRenderer({alpha:!0}):(console.log("Incorrect use of Autocam.renderer property"),A=new THREE.CanvasRenderer);g.useTransparency(!0);g.setSize(g.width,
g.height);g.camera.topFov=g.camera.bottomFov=g.camera.fov/2;g.camera.leftFov=g.camera.rightFov=g.camera.aspect*g.camera.fov/2;A.autoClear=!1;A.setSize(g.width,g.height);A.sortObjects=!1;c.appendChild(A.domElement);c.addEventListener("touchstart",Ja,!1);c.addEventListener("mousedown",Ja,!1);c.addEventListener("mousemove",ma,!1);window.addEventListener("resize",ca,!1);ia=!1;Y.push(ha(l+"VChomeS.png"));Y.push(ha(l+"VCarrowsS0.png"));Y.push(ha(l+"VCarrowsS1.png"));Y.push(ha(l+"VChome.png"));Y.push(ha(l+
"VCarrows.png"));Y.push(ha(l+"VCcontext.png"));Y.push(ha(l+"VCcontextS.png"))})()};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ToolController=function(a,b,c,f,d){this.domElement=a.canvas;this.selector=a.selector;this.autocam=c;this.lastClickY=this.lastClickX=this.downY=this.downX=-1;var g=-1!=navigator.userAgent.search("Mac OS"),h=-1!=navigator.userAgent.search("Firefox"),k={},l=[],m=!1,p=!1,n=null,q=void 0,r={},s=this;this.__registerToolByName=function(a,b){k[b]=a;a.utilities=f;a.controller=this};this.registerTool=function(a){var b=a.getNames();if(!b||0==b.length)return console.log("Cannot register tool with no name."),
!1;for(var c=!1,d=0;d<b.length;++d)"default"!==b[d]&&(this.__registerToolByName(a,b[d]),c=!0);return c};this.deregisterTool=function(a){var b=a.getNames();if(!b||0==b.length)return!1;for(var c=b.length;0<=--c;)this.__deregisterToolName(b[c]);a.utilities=null;a.controller=null;return!0};this.__deregisterToolName=function(a){if(a in k){for(var b=l.length;0<=--b;)l[b]===a&&(k[a].deactivate(a),l.splice(b,1));delete k[a]}};this.getTool=function(a){return k[a]};this.getActiveToolName=function(){var a=l.length;
return 0<a?l[a-1]:"default"};this.activateTool=function(a){if(m)return!1;var c=k[a];if(c)return l.push(a),c.activate(a),b.fireEvent({type:Autodesk.Viewing.TOOL_CHANGE_EVENT,toolName:a,active:!0}),!0;stderr("activateTool not found: "+a);return!1};this.deactivateTool=function(a){if(m)return!1;for(var c=l.length;0<=--c;)if(l[c]===a)return l.splice(c,1),k[a].deactivate(a),b.fireEvent({type:Autodesk.Viewing.TOOL_CHANGE_EVENT,toolName:a,active:!1}),!0;stderr("deactivateTool not found: "+a);return!1};this.getToolNames=
function(){return Object.keys(k)};this.setDefaultTool=function(a){var b=this.getDefaultTool();return a&&a!==b?(this.__registerToolByName(a,"default"),b&&b.deactivate("default"),a.activate("default"),!0):!1};this.getDefaultTool=function(){return k["default"]};this.setDefaultTool(d);this.setIsLocked=function(a){var b=m;m=!!a;return b};this.getIsLocked=function(){return m};this.__checkCursor=function(){for(var a=null,c=l.length;0<=--c;){var d=k[l[c]];if("getCursor"in d&&(a=d.getCursor()))break}a||(a=
"auto");n!=a&&(n=b.canvas.style.cursor=a)};this.update=function(a){this.__checkCursor();var c=!1;f&&f.update()&&(c=!0);for(var d=l.length;0<=--d;){var g=k[l[d]];"update"in g&&g.update(a)&&(c=!0)}b.navigation.getCamera().dirty?(b.navigation.updateCamera(),this.cameraUpdated=c=!0):this.cameraUpdated=!1;c?(b.navigation.updateCamera(),this.moveDelay=Date.now()+150):0!==this.moveDelay&&(0<this.moveDelay-Date.now()?c=!0:this.moveDelay=0);return c};this.__clientToCanvasCoords=function(a,c,d){var f=b.navigation.getScreenViewport(),
g=f.width,h=f.height,k=a.clientX-f.left,f=a.clientY-f.top;a.canvasX=k;a.canvasY=f;a.normalizedX=k/g*2-1;a.normalizedY=(h-f)/h*2-1;c&&c.set(k/g,f/h,0);d&&d.set(k,f)};this.__invokeStack=function(a,b,c){for(var d=l.length;0<=--d;){var f=k[l[d]];if(a in f&&f[a](b,c))return!0}d=this.getDefaultTool();return a in d?d[a](b,c):!1};this.distributeEvent=function(a,b,c){return this.__invokeStack(a,b,c)};this.handleResize=function(){b.navigation.setScreenViewport(b.container.getBoundingClientRect());for(var a=
l.length;0<=--a;){var c=k[l[a]];"handleResize"in c&&c.handleResize()}};this.handleSingleClick=function(a){var b=this.applyButtonMappings(a);this.lastClickX=a.clientX;this.lastClickY=a.clientY;this.__invokeStack("handleSingleClick",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleDoubleClick=function(a){var b=this.applyButtonMappings(a);this.__invokeStack("handleDoubleClick",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleSingleTap=function(a){this.lastClickX=a.canvasX;this.lastClickY=
a.canvasY;this.__invokeStack("handleSingleTap",a)&&(a.preventDefault(),a.stopPropagation())};this.handleDoubleTap=function(a){this.lastClickX=a.canvasX;this.lastClickY=a.canvasY;this.__invokeStack("handleDoubleTap",a)&&(a.preventDefault(),a.stopPropagation())};this.handleWheelInput=function(a,b){this.__invokeStack("handleWheelInput",a)&&(b.preventDefault(),b.stopPropagation())};this.applyButtonMappings=function(a){var c=a.button;"buttons"in a&&(a.firefoxSpoof?c=0:!p||a.buttons&1?2===c&&a.buttons&
1&&(c=0,a.firefoxSpoof=p=!0):(a.firefoxSpoof=!0,p=!1,c=0));b.navigation.getUseLeftHandedInput()&&(c=0===c?2:2===c?0:c);return c};this.applyKeyMappings=function(a,b){switch(a.keyCode){case 91:case 93:case 224:return g&&a.metaKey&&a.shiftKey?null:17;case 16:return b&&g&&a.metaKey?null:16;case 61:return 187;case 173:case 109:return 189}return a.keyCode};this.handleKeyDown=function(a){var b=this.applyKeyMappings(a,!0);b&&this.__invokeStack("handleKeyDown",a,b)&&(a.preventDefault(),a.stopPropagation())};
this.handleKeyUp=function(a){var b=this.applyKeyMappings(a,!0);b&&this.__invokeStack("handleKeyUp",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleButtonDown=function(a,b){this.__invokeStack("handleButtonDown",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleButtonUp=function(a,b){this.__invokeStack("handleButtonUp",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleMouseMove=function(a){this.__invokeStack("handleMouseMove",a)&&(a.preventDefault(),a.stopPropagation())};
this.handleBlur=function(a){this.__invokeStack("handleBlur",a)&&(a.preventDefault(),a.stopPropagation())};this.keydown=function(b){q!==a.canvas||document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||g&&b.metaKey&&91!=b.keyCode&&93!=b.keyCode||s.handleKeyDown(b)};this.keyup=function(a){g&&a.metaKey&&91!=a.keyCode&&93!=a.keyCode||s.handleKeyUp(a)};this.mousedown=function(a){function c(a){s.applyButtonMappings(a)===d&&(document.removeEventListener("mouseup",
c),s.mouseup(a))}_isIE11&&inFullscreen()||document.activeElement.blur();s.__clientToCanvasCoords(a);var d=s.applyButtonMappings(a);s.handleButtonDown(a,d);s.downX=a.canvasX;s.downY=a.canvasY;if(b.navigation.getUseLeftHandedInput()&&0===d||h&&1===d){var f=void 0!==r.time&&500>a.timeStamp-r.time,g=void 0!==r.x&&void 0!==r.y&&2>=Math.abs(r.x-a.canvasX)&&2>=Math.abs(r.y-a.canvasY);if(!f||!g||r.clickCount&&2<=r.clickCount)r.clickCount=0;r.clickCount?1===r.clickCount&&(r.clickCount=2):(r.clickCount=1,r.x=
a.canvasX,r.y=a.canvasY,r.time=a.timeStamp)}document.addEventListener("mouseup",c,!1)};this.mousemove=function(a){s.__clientToCanvasCoords(a);var b=s.downY-a.canvasY;if(2<Math.abs(s.downX-a.canvasX)||2<Math.abs(b))s.downX=-1,s.downY=-1;s.handleMouseMove(a)};this.mouseup=function(a){s.__clientToCanvasCoords(a);var c=s.applyButtonMappings(a);s.handleButtonUp(a,c);var d=s.downX-a.canvasX,f=s.downY-a.canvasY;s.downX=-1;s.downY=-1;2>=Math.abs(d)&&2>=Math.abs(f)&&s.handleSingleClick(a);(b.navigation.getUseLeftHandedInput()&&
0===c||h&&1===c)&&2===r.clickCount&&(s.handleDoubleClick(a),r.clickCount=0,r.x=void 0,r.y=void 0,r.time=void 0)};this.doubleclick=function(a){s.__clientToCanvasCoords(a);s.downX=a.canvasX;s.downY=a.canvasY;s.handleDoubleClick(a)};this.mousewheel=function(a){var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail);s.handleWheelInput(b,a)};this.blur=function(a){s.handleBlur(a)};this.domElement.addEventListener("mousedown",this.mousedown,!1);window.addEventListener("mousemove",this.mousemove,!1);
this.domElement.addEventListener("dblclick",this.doubleclick,!1);this.domElement.addEventListener("mousewheel",this.mousewheel,!1);this.domElement.addEventListener("DOMMouseScroll",this.mousewheel,!1);window.addEventListener("keydown",this.keydown,!1);window.addEventListener("keyup",this.keyup,!1);this.mouseover=function(a){q=a.target};window.addEventListener("mouseover",this.mouseover,!1);window.addEventListener("blur",this.blur,!1);this.uninitialize=function(){window.removeEventListener("mousemove",
this.mousemove,!1);window.removeEventListener("keydown",this.keydown,!1);window.removeEventListener("keyup",this.keyup,!1);window.removeEventListener("mouseover",this.mouseover,!1);window.removeEventListener("blur",this.blur,!1);s=l=k=this.autocam=this.selector=this.domElement=null};this.setSelector=function(a){this.selector=a};this.set2DMode=function(a){};this.setAutocam=function(a){};this.syncCamera=function(){};this.recordHomeView=function(){var a=b.navigation.getCamera();c.sync(a);c.setHomeViewFrom(a)}};
AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ViewingUtilities=function(a,b,c){this.autocam=b;var f=c.getCamera(),d=null,g=!1,h=new function(a){var b=0,c=new THREE.SphereGeometry(1),d=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0}),f=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0}),g=new THREE.Mesh(c,f);a.createOverlayScene("pivot",d,f);g.visible=!1;this.shown=function(){return g.visible};this.show=function(c,h,m){g.scale.x=h;g.scale.y=h;g.scale.z=h;g.position.set(c.x,
c.y,c.z);f.opacity=0.6;d.opacity=0.6;g.visible=!0;a.addOverlay("pivot",g);b=m?Date.now()+500:0};this.hide=function(){g.visible&&(g.visible=!1,a.removeOverlay("pivot",g),b=0)};this.fade=function(){if(0<b){var a=b-Date.now();if(0>=a)return this.hide(),!0;a=a/500*0.6;d.opacity=a;f.opacity=a;return!0}return!1};this.fading=function(){return 0<b}}(a);this.transitionView=function(a,d,g,h,n,q){n=n||c.getWorldUpVector();if(q)if(h=n,q=d.clone().sub(a),0===q.lengthSq())h=q.copy(h);else{var r=q.clone().cross(h);
0===r.lengthSq()&&(h.z>h.y?q.y-=1E-4:q.z-=1E-4,r.crossVectors(q,h));h=r.cross(q).normalize()}h||(h=f.up);b.goToView({position:a,center:d,pivot:d,fov:g,up:h,worldUp:n,isOrtho:!1===f.isPerspective})};this.goHome=function(){b.goHome()};this.getHitPoint=function(b,c){c=2*(1-c)-1;var d=new THREE.Vector3(2*b-1,c,1);return(d=a.hitTestViewport(d,!1))?d.intersectPoint:null};this.activatePivot=function(a){var b=f.isPerspective?c.getPivotPlaneDistance():c.getEyeVector().length(),d=c.getVerticalFov(),b=2*b*Math.tan(THREE.Math.degToRad(0.5*
d)),d=c.getScreenViewport(),b=5*b/(d.height*(window.devicePixelRatio||1));h.show(c.getPivotPoint(),b,a)};this.pivotActive=function(a,b){a=a&&!c.getIs2D();b=b||!1;!a&&h.shown()?h.hide():a&&this.activatePivot(b)};this.pivotUpdate=function(){h.shown()&&h.fade()&&a.invalidate(!1,!1,!0)};this.setPivotPoint=function(a,b,d){c.getIs2D()||(c.setPivotPoint(a),b||c.setTarget(a),d&&c.setPivotSetFlag(!0),h.shown()&&this.activatePivot(h.fading()))};this.savePivot=function(){d=c.getPivotPoint();g=c.getPivotSetFlag()};
this.restorePivot=function(){null!==d&&(this.setPivotPoint(d,!0,g),g||c.setPivotSetFlag(!1),d=null)};this.getBoundingBox=function(b){return a.getFitBounds(b)};this.fitToView=function(b){b=c.fitBounds(b,a.getFitBounds(!1));this.activatePivot(!0);return b};this.update=function(){c.getRequestFitToView()&&!c.getTransitionActive()&&(c.setRequestFitToView(!1),this.fitToView());c.getRequestHomeView()&&!c.getTransitionActive()&&(c.setRequestHomeView(!1),this.goHome());var a=c.getRequestTransition();a&&!c.getTransitionActive()&&
(c.setRequestTransition(!1),this.transitionView(a.position,a.coi,a.fov,a.up,a.worldUp,a.reorient));return!1}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.DefaultHandler=function(a,b,c){this.clickConfig=null;this.getNames=function(){return["default"]};this.setClickBehavior=function(a){this.clickConfig=a};this.getClickBehavior=function(){return this.clickConfig};this.activate=function(a){};this.deactivate=function(a){};this.handleAction=function(b,d){for(var g=0;g<b.length;++g)switch(b[g]){case "selectOnly":a.selector&&d.node&&a.selector.setSelection([d.node]);break;case "deselectAll":a.selector&&a.selector.setSelection([]);break;case "selectToggle":a.selector&&
d.node&&a.selector.toggleSelection(d.node);break;case "isolate":d.node&&a.isolate(d.node);break;case "showAll":a.showAll();break;case "setCOI":d.intersectPoint&&(c.setPivotPoint(d.intersectPoint,!0,!0),c.pivotActive(!0,!0));break;case "hide":d.node&&a.hideMultiple([d.node]);break;case "show":d.node&&a.showMultiple([d.node]);break;case "toggleVisibility":d.node&&a.toggleVisibility(d.node);break;case "focus":a.selector&&(d.node?a.selector.setSelection([d.node]):a.selector.setSelection([]),c.fitToView())}};
this.handleSingleClick=function(b,d){var g=b.ctrlKey||b.metaKey,h=b.shiftKey,k=b.altKey;if(0===d){var l=new THREE.Vector3(b.normalizedX,b.normalizedY,1),l=a.hitTestViewport(l,!1),m="click";g&&(m+="Ctrl");h&&(m+="Shift");k&&(m+="Alt");g=l.node?"onObject":"offObject";if(this.clickConfig&&this.clickConfig[m]&&this.clickConfig[m][g])return this.handleAction(this.clickConfig[m][g],l),!0}else if(1===d&&h&&!k&&!g&&(l=new THREE.Vector3(b.normalizedX,b.normalizedY,1),l=a.hitTestViewport(l,!1),l.intersectPoint))return c.setPivotPoint(l.intersectPoint,
!0,!0),c.pivotActive(!0,!0),!0;return!1};this.handleDoubleClick=function(f,d){if(null!=a.selector&&0===d){var g=new THREE.Vector3(f.normalizedX,f.normalizedY,1),g=a.hitTestViewport(g,!1);g.node?a.selector.setSelection([g.node]):a.selector.clearSelection();c.fitToView();return!0}return 1===d?(b.fitBounds(!1,c.getBoundingBox(!0)),b.setPivotSetFlag(!1),!0):!1};this.handleSingleTap=function(a){return this.handleSingleClick(a,0)};this.handleDoubleTap=function(b){return null!=a.selector?(b=new THREE.Vector3(b.normalizedX,
b.normalizedY,1),b=a.hitTestViewport(b,!1),b.node?a.selector.setSelection([b.node]):a.selector.clearSelection(),c.fitToView(),!0):!1}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.GestureHandler=function(a){var b=a.navigation,c=["gestures"],f=this,d="ontouchstart"in window;b.setIsTouchDevice(d);if(d)var g=new Hammer.Manager(a.canvas,{recognizers:[[Hammer.Tap,{event:"doubletap",taps:2,interval:500,threshold:6,posThreshold:30}],[Hammer.Tap,{event:"singletap"}],[Hammer.Pan,{event:"drag3",pointers:3,threshold:15}],[Hammer.Pan,{event:"pan",pointers:2,threshold:20}],[Hammer.Pan,{event:"drag",pointers:1}],[Hammer.Rotate,{enable:!0,threshold:7}],[Hammer.Pinch,{enable:!0,
threshold:0.05}]]});this.getNames=function(){return c};this.getName=function(){return c[0]};this.__clientToCanvasCoords=function(a){var c=b.getScreenViewport(),d=c.width,f=c.height,g=a.center.x-c.left,c=a.center.y-c.top;a.canvasX=g;a.canvasY=c;a.normalizedX=g/d*2-1;a.normalizedY=(f-c)/f*2-1};this.distributeGesture=function(a){f.__clientToCanvasCoords(a);f.controller.distributeEvent("handleGesture",a)&&a.preventDefault()};this.onSingleTap=function(a){f.__clientToCanvasCoords(a);f.controller.distributeEvent("handleSingleTap",
a)&&a.preventDefault()};this.onDoubleTap=function(a){f.__clientToCanvasCoords(a);f.controller.distributeEvent("handleDoubleTap",a)&&a.preventDefault()};this.activate=function(a){g&&(g.on("dragstart dragmove dragend",this.distributeGesture),g.on("panstart panmove panend",this.distributeGesture),g.on("pinchstart pinchmove pinchend",this.distributeGesture),g.on("rotatestart rotatemove rotateend",this.distributeGesture),g.on("drag3start drag3move drag3end",this.distributeGesture),g.on("singletap",this.onSingleTap),
g.on("doubletap",this.onDoubleTap),g.get("doubletap").recognizeWith("singletap"))};this.deactivate=function(a){g&&(g.off("dragstart dragmove dragend",this.distributeGesture),g.off("panstart panmove panend",this.distributeGesture),g.off("pinchstart pinchmove pinchend",this.distributeGesture),g.off("rotatestart rotatemove rotateend",this.distributeGesture),g.off("drag3start drag3move drag3end",this.distributeGesture),g.off("singletap",this.onSingleTap),g.off("doubletap",this.onDoubleTap))};this.update=
function(){return!1};this.handleBlur=function(a){return!1}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.OrbitDollyPanTool=function(a,b){var c=this,f=-1!=navigator.userAgent.search("Mac OS"),d=b.navigation,g=d.getCamera(),h=["orbit","dolly","pan"],k=h[0],l=[k],m=k,p=null,n=1,q=1,r=!1,s=null,u=!1,w,v,B=null,z=-5,A=new THREE.Vector3,C=new THREE.Vector3,G=new THREE.Vector2,E=new THREE.Vector2,I=new THREE.Vector2,H=new THREE.Vector2,Q=new THREE.Vector3,N=[!1,!1,!1,!1,!1,!1],F=0,D=0,S=0,J=0,Z=1,K=5,M=0.025;this.getNames=function(){return h};this.getName=function(){return h[0]};this.activate=
function(a){l.push(a);m=a};this.deactivate=function(a){var b=l.length-1;0<b&&l[b]===a&&(l.pop(),m=l[b-1])};this.adjustDollyLookSpeed=function(a){0===a?(M=0.025,K=5):(M*=0<a?1.1:0.9,K*=0<a?1.1:0.9,1E-6>M&&(M=1E-6),1E-6>K&&(K=1E-6))};this.getDollySpeed=function(){var a=d.getPivotPlaneDistance()*M;return 0.01>a?0.01:a};this.getLookSpeed=function(){return K};this.coiIsVisible=function(){var a=d.getPosition(),b=d.getPivotPoint(),c=d.getEyeVector();if(0>b.sub(a).dot(c))return!1;var a=d.getCameraRightVector(),
b=d.getCameraUpVector(),c=d.getPosition(),c=d.getPivotPoint().sub(c),a=Math.abs(a.dot(c)),b=Math.abs(b.dot(c)),f;g.isPerspective?(f=d.getScreenViewport(),c=d.getPivotPlaneDistance()*Math.tan(THREE.Math.degToRad(0.5*g.fov)),f=f.width/f.height*c):(f=g.right,c=g.top);return a<f&&b<c};this.coiIsActive=function(){return d.getPivotSetFlag()&&this.coiIsVisible()};this.adjustSpeed=function(a){this.adjustDollyLookSpeed(a);this.utilities.autocam&&(this.utilities.autocam.orbitMultiplier=this.getLookSpeed())};
this.initTracking=function(a,b){var c;if(g.isPerspective){c=this.utilities.getHitPoint(a,b);var f=d.getPosition();c&&c.sub?(c=c.sub(f),f=d.getEyeVector().normalize(),c=Math.abs(f.dot(c))):c=d.getPivotPlaneDistance()}else c=d.getEyeVector().length();Z=c};this.getCursor=function(){switch(k){case "orbit":return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAsQAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYRERH/sbGx/wAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQcHB/9/f3///////wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAdCAgI/3p6ev///////////wAAAP8AAADWAAAAqAAAAHwAAABKAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHQAAAHQEBAT/AAAABAAAABQUFBT/hoaG/////////////////+Hh4f/W1tb/qKio/3x8fP9KSkr/EhIS/wAAAHQAAAAdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEHR0d/3R0dP9nZ2f/AAAAdgAAABQUFBT/sbGx//////////////////z8/P//////////////////////x8fH/3R0dP8dHR3/AAAARAAAAAAAAAAAAAAAAAAAADQ0NDT/ra2t///////f39//VFRU/wQEBP8BAQH/MDAw/7q6uv///////////4iIiP9mZmb/g4OD/7W1tf/t7e3///////////+tra3/NDQ0/wAAADQAAAAAAAAAAAAAAJ2dnZ3//////+Li4v+Li4v/MTEx/wAAADEAAAABAAAAUScnJ/+5ubn//////wAAAP8AAABmAAAAgwAAALU4ODj/i4uL/+Li4v//////nZ2d/wAAAJ0AAAAAAAAAAAAAAO/v7+///////2JiYv8AAACLAAAAOAAAAAEAAAAJAAAAAAAAAFAsLCz/uLi4/wAAALgAAAAAAAAAAAAAAAAAAAA4AAAAi2JiYv//////7+/v/wAAAO8AAAAAAAAAAAAAAJ2dnZ3//////+Li4v+Li4v/ODg4/wEBAf8JCQn/AAAAVwAAADMAAABPCwsL/wAAAE8AAABXAAAAgwAAALU4ODj/i4uL/+Li4v//////nZ2d/wAAAJ0AAAAAAAAAAAAAADQ0NDT/ra2t////////////7e3t/7W1tf+Dg4P/V1dX/zMzM/8YGBj/FxcX/zMzM/9XV1f/g4OD/7W1tf/t7e3///////////+tra3/NDQ0/wAAADQAAAAAAAAAAAAAAAAAAABEHR0d/3R0dP/Hx8f/////////////////////////////////////////////////////////////////x8fH/3R0dP8dHR3/AAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHQAAAHQSEhL/SkpK/3x8fP+oqKj/zMzM/+jo6P/5+fn/+fn5/+jo6P/MzMz/qKio/3x8fP9KSkr/EhIS/wAAAHQAAAAdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAASgAAAHwAAACoAAAAzAAAAOgAAAD5AAAA+QAAAOgAAADMAAAAqAAAAHwAAABKAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x////O////1D/8f9y/+H/Rv/B/3P9gA9k8AADXOAAAVzAAABnwAAAIMAhwGXAAAB4wAAAXOAAAWPwAANt/AAPVP///3Qf//87D///cAf//28D//9cA///XAP//2c=), wait";
case "dolly":return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANQAAAJ4AAACeAAAANQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5CQkJ/56env+enp7/CQkJ/wAAADkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8JCQn/oqKi////////////oqKi/wkJCf8AAAA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATQsLC/+oqKj//////////////////////6ioqP8LCwv/AAAATQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYDg4O/7a2tv////////////////////////////////+2trb/Dg4O/wAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQMDAz/wcHB////////////////////////////////////////////wcHB/wwMDP8AAABkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYxoaGv/Nzc3//////////////////////////////////////////////////////83Nzf8aGhr/AAAAYwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoKCgo/8zMzP/////////////////////////////////////////////////////////////////MzMz/KCgo/wAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7Ozs7/2lpaf9qamr/gICA/76+vv////////////////////////////////++vr7/gICA/2pqav9paWn/Ozs7/wAAADsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOwAAAGkAAABqAAAAgE5OTv////////////////////////////////9OTk7/AAAAgAAAAGoAAABpAAAAOwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJCQkJP////////////////////////////////8kJCT/AAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgICAv/29vb///////////////////////b29v8CAgL/AAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMzMzMz//////////////////////8zMzP8AAADMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJ2dnZ3//////////////////////52dnf8AAACdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhoaGj//////////////////////2hoaP8AAABoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAADs7Ozv//////////////////////zs7O/8AAAA7AAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYG/wAAAGQAAAD7+/v7////////////+/v7/wAAAPsAAABkBgYG/wAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEBA/2RkZP9RUVH/8vLy////////////8vLy/1FRUf9kZGT/QEBA/wAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAEQAAAAAAAAAmJiYm/6mpqf////////////////////////////////+pqan/JiYm/wAAACYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAABEAAAAAAAAAQAAAAKlZWVn/6enp////////////6enp/1lZWf8AAACpAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAADAAAAAAAAAAAAAACAJycn/729vf+9vb3/Jycn/wAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAVAAAAL0AAAC9AAAAVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x////O8A8A1CAGAFyAAAARgAAAHMPAPBkDwDwXA8A8FwPAPBnAAAAIAAAAGWAAAF4gAABXMAAA2PAAANt4AAHVOAAB3QQAA87CBgPcAQ8H28D//9cA///XAP//2c=), wait";
case "pan":return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NDUsNDA2zMjEy31lZWfNQUFDrKysrwwkJCZAMDAxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDw8ZDQ0NoVxcXfbLy8v/4ODh//b29//y8fL/3Nzc/8nJyf98e3z/FRUWuQ0NDSYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkJCT0mJSbSlpaW//7+/v//////////////////////////////////////uLe4/zc2N+MNDQ00AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUFBQFCgoJcD4+P/HMzM3//////////////////////////////////////////////////////8/Pz/8kJCTCEREREwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8PD0oTExOPcXFy//Ly8v//////8/Pz//v7+/////////////////////////////////////////////////+AgID/BAQEQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwcHLpNTU36+vr6/+fn5/99e33/Ly8v83d3eP3///////////////////////////////////////////////+bm5v/CQkJXQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABISElIbGxuaZGRk/zIyMusODg6GCQkJXVFRUvj8/Pz///////////////////////////////////////////+dnZ3/DAwMaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUFBQKBwcHPA8PDykAAAAADg4OUnBvcP7///////////////////////////////////////////////+BgYH/BAQEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhYWqcPDw////////////////////////////////////////////+Xl5f8tLS2+Dw8PDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBA4Pz8/6/////+7u7z/1dXW///////4+Pj//////////////////////6Ojo/8HBwdwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUVFQELCwuTsLCw//39/v+Dg4T/19fX/+Li4v+ZmJr//////9vb2/+6urv//////zMzM94SEhIUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwMDCc7Ozzx8fDx/8zMzf+SkZP//////5qam/+np6f//////5mYm//Hx8j/ubm5/xEREZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkJCWqSkpL//////5iXmf/P0ND/8/Pz/3h3ef/o6Oj/7e3u/3Fxc///////Tk5O+woKChwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADg4OBy0tLeri4eL/9/f3/29tcP//////qqqr/5qZmv//////mZma/8zMzf/Kysr/HR0engAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQByMjI8+mpqb/mZiZ/8LCw//6+vr/fn6A/9LS0v/8/P3/a2pu//////92dnb4BAQEOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQUFBwHBweAGhoa5f/////Kysr/i4qM//////+vr7D/MC8x/3x8fP8mJiawERERCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhYWok5OTvY0NDT1Pj4++aGhof86OjvNCQkJTAgICGATExMnAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFRUVCAoKCg8NDQ0KEBEQKxQUFH4SEhIpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x/+AfO/+AB1D/AANy/AABRvgAAXP4AAFk+AABXPxAAVz/wAFn/4ADIP8AA2X/AAd4/wAHXP4AD2P+AA9t/wAPVP/AH3QfwP87D///cAf//28D//9cA///XAP//2c=), wait"}return null};
this.getMotionDelta=function(a,b){var c=d&&d.getReverseZoomDirection()?-1.5:1.5;f&&(c*=-1);N[0]&&(C.x+=0.01,I.x+=20);N[1]&&(C.x-=0.01,I.x-=20);N[2]&&(C.y+=0.01,I.y+=20);N[3]&&(C.y-=0.01,I.y-=20);N[4]&&(C.z+=c);N[5]&&(C.z-=c);var c=C.x-A.x,g=C.y-A.y,h=C.z-A.z;0.001>Math.abs(c)&&(c=0);0.001>Math.abs(g)&&(g=0);0.001>Math.abs(h)&&(h=0);a.set(c,g,h);b&&b.set(I.x-E.x,I.y-E.y)};this.stepMotionDelta=function(a,b){b?(A.x+=0.6*a.x,A.y+=0.6*a.y,A.z+=0.6*a.z):A.copy(C);E.copy(I)};this.update=function(){var a=
!1,b=!1;this.getMotionDelta(Q,H);var c=Q.x,f=Q.y,h=Q.z;r||this.checkInteractionMode();(r=-1<z)&&this.controller.setIsLocked(!0);if(0!==c||0!==f||0!==h){switch(k){case "orbit":this.utilities.autocam&&this.utilities.autocam.startState&&(H.x=-H.x,s&&this.utilities.autocam.orbit(I,s,H,this.utilities.autocam.startState));break;case "dolly":h*=0.6;0<=z?(f=-f,h=Math.abs(c)>Math.abs(f)?c:f,h*=100,b=c=0.5):(c=d.getScreenViewport(),b=(w-c.left)/c.width,c=(v-c.top)/c.height);b=!d.getIs2D()&&d.getZoomTowardsPivot()?
this.coiIsActive()?d.getPivotPoint():d.getWorldPoint(0.5,0.5):d.getWorldPoint(b,c);d.dollyFromPoint(h*this.getDollySpeed(),b);break;case "pan":d.panRelative(-c,f,Z);break;case "dollypan":0===c&&0===f||d.panRelative(-c,f,Z),c=d.getScreenViewport(),b=(w-c.left)/c.width,c=(v-c.top)/c.height,b=d.getWorldPoint(b,c),c=d.getPosition().sub(b).length(),d.dollyFromPoint(-(0.5*(n-q))*c,b),q=n}b=!0}this.stepMotionDelta(Q,"pan"!==k&&"dollypan"!==k);-1===z&&1E-5>Math.abs(h)&&(this.interactionEnd(-1),b=a=!0);!u&&
(a||-5<z)&&(-1<z&&A.copy(C),this.utilities.autocam.endInteraction(),z=-5,r&&this.controller.setIsLocked(!1),r=!1,p=s=null);b?this.utilities.pivotActive(d.getPivotSetFlag(),-1>=z):this.utilities.pivotUpdate();return g.dirty};this.checkInteractionMode=function(){var a=2===z&&F&&!D&&!S||2===z&&D&&!F&&!S||"dolly"===m&&!D&&"pinch"!==p||0!==Q.z?S||D||F||2!==z&&1!==z?"dolly":"pan":2===z&&!(F||D^S)||1===z&&!F&&!S||1===z&&D||1===z&&S&&!F&&!D||0===z&&F&&!S&&!D||"pan"===m&&1!==z&&!D&&"pinch"!==p||J?"pan":"pan"===
p||"pinch"===p?"dollypan":d.getIs2D()?m:"orbit";a!==k&&(k=a,("pan"===k&&-1<z||"dollypan"===k)&&this.initTracking(A.x,A.y))};this.interactionStart=function(a,b){if(b||a>z)z=a,u=!0,this.utilities.autocam&&(this.utilities.autocam.startInteraction(E.x,E.y),s=E.clone()),-1<a&&"pan"===k&&this.initTracking(A.x,A.y),this.utilities.pivotActive(d.getPivotSetFlag(),-1===a)};this.interactionCheck=function(){(N[0]||N[1]||N[2]||N[3]||N[4]||N[5]||F||S||D||J)&&this.interactionStart(-4,!0)};this.interactionEnd=function(a){a===
z&&(-1!==a&&this.utilities.pivotActive(!1),u=!1)};this.handleWheelInput=function(b){if(this.isDragging)return!1;if(d.getIs2D()){var c=a.intersectGround(w,v);this.utilities.setPivotPoint(c,!0,!0)}d.getReverseZoomDirection()&&(b*=-1);C.z+=b;c=Date.now();B||(B=c);0!=b&&this.interactionStart(-1);return!0};this.resetKeys=function(){this.autoMove(-1,!1);J=D=S=F=0};this.autoMove=function(a,b){b&&this.isDragging||(0>a?N[0]=N[1]=N[2]=N[3]=N[4]=N[5]=b:N[a]=b,b||this.interactionEnd(-4),this.interactionCheck())};
this.updateModifierState=function(a){S=f&&a.metaKey||a.ctrlKey?1:0;F=a.shiftKey?1:0;D=a.altKey?1:0};this.handleKeyDown=function(a,b){var c=!1,d=!1;switch(b){case 16:F=1;c=!0;break;case 17:S=1;c=!0;break;case 18:D=1;c=!0;break;case 32:J=1;c=!0;break;case 187:this.adjustSpeed(1);d=!0;break;case 189:this.adjustSpeed(-1);d=!0;break;case 48:this.adjustSpeed(0);d=!0;break;case 37:this.autoMove(0,!0);d=!0;break;case 39:this.autoMove(1,!0);d=!0;break;case 33:this.autoMove(2,!0);d=!0;break;case 34:this.autoMove(3,
!0);d=!0;break;case 38:this.autoMove(4,!0);d=!0;break;case 40:this.autoMove(5,!0);d=!0;break;default:return!1}c&&!this.isDragging&&this.interactionStart(-4);return d};this.handleKeyUp=function(a,b){var c=!1;switch(b){case 16:F=0;break;case 17:S=0;break;case 18:D=0;break;case 32:J=0;break;case 37:this.autoMove(0,!1);c=!0;break;case 39:this.autoMove(1,!1);c=!0;break;case 33:this.autoMove(2,!1);c=!0;break;case 34:this.autoMove(3,!1);c=!0;break;case 38:this.autoMove(4,!1);c=!0;break;case 40:this.autoMove(5,
!1);c=!0;break;default:return!1}c&&(this.interactionEnd(-4),u||this.interactionCheck());return c};this.handleDollyPan=function(a){w=a.canvasX;v=a.canvasY;var b=d.getScreenViewport();I.x=G.x+a.deltaX;I.y=G.y+a.deltaY;C.x=I.x/b.width;C.y=I.y/b.height;n=a.scale};this.handleGesture=function(a){switch(a.type){case "dragstart":return p="drag",this.handleButtonDown(a,0);case "dragmove":return"drag"===p?this.handleMouseMove(a):!1;case "dragend":if("drag"===p)return this.handleButtonUp(a,0),p=null,!0;break;
case "panstart":return p="pan",this.isDragging=!0,q=n=1,A.x=0.5*(a.normalizedX+1),A.y=1-0.5*(a.normalizedY+1),G.set(a.canvasX,a.canvasY),E.set(a.canvasX,a.canvasY),this.interactionStart(3),this.handleDollyPan(a),!0;case "panmove":return"pan"===p?this.handleDollyPan(a):!1;case "panend":if("pan"===p)return this.isDragging=!1,this.handleDollyPan(a),this.interactionEnd(3),!0;break;case "pinchstart":return this.isDragging=!0,p="pinch",q=n=1,A.x=0.5*(a.normalizedX+1),A.y=1-0.5*(a.normalizedY+1),G.set(a.canvasX,
a.canvasY),E.set(a.canvasX,a.canvasY),this.interactionStart(3),this.handleDollyPan(a),!0;case "pinchmove":return"pinch"===p?this.handleDollyPan(a):!1;case "pinchend":if("pinch"===p)return this.isDragging=!1,this.handleDollyPan(a),this.interactionEnd(3),!0}return!1};this.handleButtonDown=function(a,b){this.updateModifierState(a);A.x=0.5*(a.normalizedX+1);A.y=1-0.5*(a.normalizedY+1);E.set(a.canvasX,a.canvasY);C.copy(A);I.copy(E);w=a.clientX;v=a.clientY;this.isDragging=!0;this.interactionStart(b);return!0};
this.handleButtonUp=function(a,b){this.updateModifierState(a);C.x=0.5*(a.normalizedX+1);C.y=1-0.5*(a.normalizedY+1);I.set(a.canvasX,a.canvasY);this.interactionEnd(b);this.isDragging=!1;return!0};this.handleMouseMove=function(b){this.updateModifierState(b);if(!this.isDragging)return A.x=0.5*(b.normalizedX+1),A.y=1-0.5*(b.normalizedY+1),E.set(b.canvasX,b.canvasY),C.x=A.x,C.y=A.y,I.copy(E),w=b.clientX,v=b.clientY,d.getIs2D()&&a.rolloverObject(w,v),!1;C.x=0.5*(b.normalizedX+1);C.y=1-0.5*(b.normalizedY+
1);I.set(b.canvasX,b.canvasY);return!0};this.handleBlur=function(a){this.resetKeys();this.interactionEnd(z)};b.addEventListener(Autodesk.Viewing.ESCAPE_EVENT,function(a){c.handleBlur(a)})};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.HotGestureTool=function(a){navigator.userAgent.search("Mac OS");a.navigation.getCamera();var b=["hottouch"],c=null,f=null,d=!1,g=!1,h=null;this.getNames=function(){return b};this.getName=function(){return b[0]};this.activate=function(a){};this.deactivate=function(a){};this.__checkStart=function(){h&&(this.controller.distributeEvent("handleGesture",h),h=null)};this.update=function(){if(this.controller.getIsLocked())return!1;var b=a.getActiveNavigationTool(),h=!1===d&&!0===g,m=!0===
d&&!1===g;if(h||m){h=h?"worldup":"fov";if(b===h)return!1;if(b===c)return a.setActiveNavigationTool(h),c=h,this.__checkStart(),!1;f=b;a.setActiveNavigationTool(h);c=h;this.__checkStart()}else c&&(a.setActiveNavigationTool(f),f=c=null);return!1};this.resetKeys=function(){};this.updateModifierState=function(a){};this.handleGesture=function(a){if(a===h)return!1;switch(a.type){case "drag3start":h=a;d=!0;break;case "drag3end":d=!1;break;case "rotatestart":h=a;g=!0;break;case "rotateend":g=!1}return!1};
this.handleKeyDown=function(a,b){this.updateModifierState(a);return!1};this.handleKeyUp=function(a,b){this.updateModifierState(a);return!1};this.handleButtonDown=function(a,b){this.updateModifierState(a);return!1};this.handleButtonUp=function(a,b){this.updateModifierState(a);return!1};this.handleMouseMove=function(a){this.updateModifierState(a);return!1};this.handleBlur=function(a){this.resetKeys();return!1}};"use strict";AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.HotkeyManager=function(){function a(a,b){return a-b}function b(){var a=d.join(),b,c;for(c=0;c<h.length;)b=h[c],b.keys===a?h.splice(c,1):c++;for(c=0;c<g.length;)b=g[c],b.keys!==a?g.splice(c,1):c++}function c(a,c){var k=d.join(),n=d.slice(0),q=d.indexOf(c);-1<q&&d.splice(q,1);var r=d.join(),s=d.slice(0);b();for(var u=[],w=[],v,q=f.length-1;0<=q;q--)v=f[q],v.keys===k&&v.onRelease?u.unshift(v):v.keys===r&&v.onPress&&w.unshift(v);for(q=u.length-1;0<=q&&(v=u[q],!v.onRelease(n));q--)v.options.tryUntilSuccess&&
h.unshift(v);for(q=w.length-1;0<=q&&(v=w[q],!v.onPress(s));q--)v.options.tryUntilSuccess&&g.unshift(v)}var f=[],d=[],g=[],h=[],k=["hotkeys"];return{pushHotkeys:function(b,c,d){if(f.some(function(a){return a.id===b}))return!1;for(var g=0;g<c.length;g++)f.push({id:b,keys:c[g].keycodes.sort(a).join(),onPress:c[g].onPress,onRelease:c[g].onRelease,options:d||{}});return!0},popHotkeys:function(a){for(var b=!1,c=f.length-1;0<=c;c--)f[c].id===a&&(f.splice(c,1),b=!0);return b},handleKeyDown:function(a,c){if(-1===
d.indexOf(c)){for(var k=d.join(),n=d.slice(0),q=0;q<d.length&&d[q]<c;)q++;d.splice(q,0,c);var r=d.join(),s=d.slice(0);b();for(var u=[],w=[],v,q=f.length-1;0<=q;q--)v=f[q],v.keys===k&&v.onRelease?u.unshift(v):v.keys===r&&v.onPress&&w.unshift(v);for(q=u.length-1;0<=q&&(v=u[q],!v.onRelease(n));q--)v.options.tryUntilSuccess&&h.unshift(v);for(q=w.length-1;0<=q&&(v=w[q],!v.onPress(s));q--)v.options.tryUntilSuccess&&g.unshift(v)}},handleKeyUp:c,handleBlur:function(){for(var a=d.length-1;0<=a;a--)c(null,
d[a])},getName:function(){return k[0]},getNames:function(){return k},activate:function(){},deactivate:function(){},update:function(){var a,b;for(b=0;b<h.length;)a=h[b],!0===a.onRelease(a.keys.split())?h.splice(b,1):b++;for(b=0;b<g.length;)a=g[b],!0===a.onPress(a.keys.split())?g.splice(b,1):b++;return!1},KEYCODES:{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,ZERO:48,a:65,b:66,c:67,d:68,
e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,EQUALS:187,COMMA:188,DASH:189,PERIOD:190,SLASH:191,LBRACKET:219,RBRACKET:221,SINGLEQUOTE:222}}};Autodesk.Viewing.theHotkeyManager=new Autodesk.Viewing.HotkeyManager;AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.FovTool=function(a){var b=a.navigation,c=b.getCamera(),f=["fov"],d=!1,g=0,h=null,k=null,l=!1,m=-5,p=new THREE.Vector3,n=new THREE.Vector3,q=new THREE.Vector3,r=null;this.getNames=function(){return f};this.getName=function(){return f[0]};this.activate=function(a){};this.deactivate=function(a){m=-5};this.getCursor=function(){return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAACEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnAwMD/yEhIf8AAABmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAGknJyf/goKC/8/Pz/8aGhr/AAAALQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAABTFBQU/2lpaf/MzMz///////////+Wlpb/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAOAAAAKFTU1P/t7e3////////////8PDw////////////AQEB/wAAAAEAAAAAAAAAFAAAAH0KCgr/AAAAYwAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAjCwsL/6Ghof/t7e3///////Dw8P9MTEz/LS0t//Pz8///////Ghoa/wAAABoAAAANDQ0N/319ff+rq6v/Y2Nj/wAAAK8AAABGAAAA////////////AAAA/wAAAF0hISH/jIyM////////////sLCw/xEREf8AAACHAAAArKysrP//////V1dX/wAAAFcAAABSUlJS//f39///////8PDw/6+vr/86Ojr/LS0t////////////FRUV/1xcXP/Gxsb/+Pj4//Hx8f9MTEz/AAAAsAAAAEcAAAAAAAAAZ2dnZ///////pKSk/wAAAKQAAACtra2t///////////////////////m5ub/kZGR/wAAAP8AAAD/q6ur//Hx8f//////vb29/x0dHf8AAACIAAAAAAAAAAAAAAAAAAAAOjo6Ov//////5+fn/wAAAOcAAADd3d3d////////////////////////////+/v7/9bW1v/i4uL//v7+//Pz8/9hYWH/AAAAvQAAAFQAAAAAAAAAAAAAAAAAAAAAAAAAJycnJ//6+vr//////wMDA/8AAADv7+/v/////////////////////////////////////////////////7y8vP8ODg7/AAAAKwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJiYmJv/6+vr//////wkJCf8AAADv7+/v//////////////////////////////////f39//9/f3//////+np6f+UlJT/GBgY/wAAAH0AAAACAAAAAAAAAAAAAAAAAAAAKSkpKf///////v7+/w0NDf8AAADd3d3d////////////////////////////29vb/39/f/+Xl5f/5+fn////////////5ubm/1RUVP8CAgL/AAAAPwAAAAAAAAAAAAAAOTk5Of//////8PDw/wgICP8AAAChoaGh/////////////////+np6f+YmJj/QkJC/wAAAP8AAAD/UFBQ/7e3t//39/f///////////+oqKj/EBAQ/wAAAIgAAAAAAAAAZ2dnZ///////29vb/wEBAf8AAAA4NTU1/9zc3P/t7e3/tbW1/01NTf8AAACYAAAA////////////AwMD/wsLC/9oaGj/y8vL////////////8fHx/zg4OP8AAACWAAAApaWlpf//////n5+f/wAAAJ8AAAAAAAAAczg4OP9LS0v/EhIS/wAAAE0AAAAAAAAA////////////FRUV/wAAABUAAABoJSUl/4GBgf/i4uL///////////9+fn7/Pz8///b29v//////SkpK/wAAAEoAAAAAAAAAAAAAADgAAABLAAAAEgAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAJQAAAIE8PDz/np6e//z8/P/////////////////8/Pz/CQkJ/wAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAA8DAwM/09PT/+7u7v///////////+QkJD/AAAAkwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////Dw8P/wAAAA8AAAAAAAAAAAAAAAAAAAAAAAAADAAAAFIYGBj/aGho/729vf8WFhb/AAAAJwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////FRUV/wAAABUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAQEB/w8PD/8AAABUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////DAwM/wAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x/h/nO/4fw1D+HwFy/h4BRu4YAHOGEABkAAAAXAAAIFwAAOBnAAHgIAAD4GUAAOB4AABgXAAAIGMAAABtggAAVMYYAHT+HgE7/g8BcP4Pw2/+D+dc/h//XP///2c=), wait"};
this.getMotionDelta=function(a){var b=n.x-p.x,c=n.y-p.y,d=n.z-p.z;0.001>Math.abs(b)&&(b=0);0.001>Math.abs(c)&&(c=0);0.001>Math.abs(d)&&(d=0);a.set(b,c,d)};this.stepMotionDelta=function(a,b){b?(p.x+=0.6*a.x,p.y+=0.6*a.y,p.z+=0.6*a.z):p.copy(n)};this.getAccumulatedWheelDelta=function(){var a=Date.now(),b=0;k&&100<a-k?(b=0>g&&-3<g?-3:0<g&&3>g?3:g,g=0,k=h=null,l=!1):h&&100<a-h&&(l?3<=Math.abs(g)&&(b=g,g=0):(b=0>g&&-3<g?-3:0<g&&3>g?3:g,l=!0,g=0));return b};this.update=function(){var a=!1;if(-5<m){this.controller.setIsLocked(!0);
this.getMotionDelta(q);var f=q.x,g=q.y,h=q.z;if(0!==f||0!==g||0!==h)0<=m?(g=-g,h=Math.abs(f)>Math.abs(g)?f:g,0!==h&&(h*=-1,b.setVerticalFov(b.getVerticalFov()*(1+h),!0))):(f=this.getAccumulatedWheelDelta()/3,0!==f&&b.setFocalLength(b.getFocalLength()+f,!0));this.stepMotionDelta(q,!0);-1===m&&1E-5>Math.abs(h)&&(this.interactionEnd(-1),a=!0)}!d&&(a||-5<m)&&(-1<m&&p.copy(n),m=-5,this.controller.setIsLocked(!1));return c.dirty};this.interactionStart=function(a,c){if(c||a>m)m=a,d=!0;b.toPerspective()};
this.interactionEnd=function(a){a===m&&(-1!==a&&this.utilities.pivotActive(!1),d=!1)};this.handleWheelInput=function(a){if(-1<m)return!1;b.getReverseZoomDirection()&&(a*=-1);n.z+=a;g+=a;var c=Date.now();h||(h=c);k=c;0!=a&&this.interactionStart(-1);return!0};this.handleGesture=function(a){switch(a.type){case "dragstart":return this.handleButtonDown(a,0);case "dragmove":return this.handleMouseMove(a);case "dragend":return this.handleButtonUp(a,0);case "drag3start":return r="drag",this.handleButtonDown(a,
0);case "drag3move":return"drag"===r?this.handleMouseMove(a):!1;case "drag3end":"drag"===r&&this.handleButtonUp(a,0),r=null}return!1};this.handleButtonDown=function(a,b){p.x=0.5*(a.normalizedX+1);p.y=1-0.5*(a.normalizedY+1);n.copy(p);this.interactionStart(b);return!0};this.handleButtonUp=function(a,b){n.x=0.5*(a.normalizedX+1);n.y=1-0.5*(a.normalizedY+1);this.interactionEnd(b);return!0};this.handleMouseMove=function(a){n.x=0.5*(a.normalizedX+1);n.y=1-0.5*(a.normalizedY+1);return-1<m};this.handleBlur=
function(a){this.interactionEnd(m);return!1}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.WorldUpTool=function(a,b){var c=function(){var a=new THREE.Vector3;return function(b,c,d,f){b=new THREE.Vector3(b,c,d);c=f.dot(b);a.copy(f);a.multiplyScalar(c);return b.sub(a)}}(),f=2*Math.PI,d=1E-5,g=b.navigation,h=g.getCamera(),k=["worldup"],l=!1,m=!1,p=new function(a,b){function h(a,b){var c=Math.abs(a-b);return c>f?c:Math.min(f-c,c)}function k(a,b){var c=p(a);if(c.distanceToSquared(b)<d)return!0;J.set(-b.x,-b.y,-b.z);return c.distanceToSquared(J)<d}function l(a){return a>f?a:
0>=a?a+Math.PI:a-Math.PI}function m(a,b,d,f,p){if(!R){R=new THREE.Object3D;var n=new THREE.RingGeometry(0.49,0.5,60);U=n=new THREE.Mesh(n,F);var q=new THREE.BoxGeometry(0.93,0.007,0.007),s=new THREE.BoxGeometry(0.007,0.93,0.007),r=new THREE.BoxGeometry(0.007,0.007,0.93);X=new THREE.Mesh(q,F);O=new THREE.Mesh(s,F);ba=new THREE.Mesh(r,F);R.add(X);R.add(O);R.add(ba);V=new THREE.Mesh(new THREE.CircleGeometry(0.005),F);R.add(V);W=Array(6);da=Array(6);for(q=0;6>q;++q)W[q]=new THREE.Mesh(new THREE.CircleGeometry(0.005,
16),F),da[q]=new THREE.Mesh(new THREE.CircleGeometry(0.0025,16),F),da[q].visible=!1,W[q].add(da[q]),n.add(W[q]);R.add(n)}g.orient(U,b,K.position,f);n=d.clone().normalize();q=Array(3);d=Array(6);q[0]=c(1,0,0,n);q[1]=c(0,1,0,n);q[2]=c(0,0,1,n);s=p.clone().cross(n).normalize();for(n=0;3>n;++n)r=q[n],d[n]=r.length(),d[n]<Fa?ga[n]=Y:(r.multiplyScalar(1/d[n]),ga[n]=Math.atan2(s.dot(r),p.dot(r)));ga[3]=l(ga[0]);ga[4]=l(ga[1]);ga[5]=l(ga[2]);d[3]=d[0];d[4]=d[1];d[5]=d[2];p=Ca+Ga+2*Math.PI/180;for(n=0;6>n;++n)if(ga[n]!==
Y)for(q=n+1;6>q;++q)if(ga[q]!==Y&&h(ga[n],ga[q])<p)if(d[n]<d[q]&&!k(n,f)||k(q,f)){ga[n]=Y;break}else ga[q]=Y;for(n=0;6>n;++n)ga[n]!==Y?(f=J.set(0,0,1),Z.setFromAxisAngle(f,ga[n]),f=J.set(0,0.54,0),f.applyQuaternion(Z),W[n].position.copy(f),W[n].visible=!0):W[n].visible=!1;R.scale.x=a;R.scale.y=a;R.scale.z=a;R.position.copy(b);return R}function p(a){S.set(0,0,0);if(0<=a){var b=3<=a?-1:1;a%=3;0===a&&(S.x=b);1===a&&(S.y=b);2===a&&(S.z=b)}ya&&S.multiplyScalar(-1);return S}function n(a,b){for(var c=h(ga[0],
a),d=0,f=1;6>f;++f){var g=h(ga[f],a);g<c&&(c=g,d=f)}return c<b?d:-1}function q(a){if(0!==a){var b=30*Math.PI/180,c=J.copy(K.position).sub(ea).normalize();Z.setFromAxisAngle(c,a);a=g.getWorldUpVector();c=Math.abs(c.angleTo(a));(c<b||Math.PI-c<b)&&a.copy(g.getCameraUpVector());a.applyQuaternion(Z);g.setIsLocked(!1);g.setWorldUpVector(a,!0);g.setIsLocked(!0)}}function s(a,b){0>a.dot(b)&&(b=b.clone().multiplyScalar(-1));g.orient(V,ea,K.position,b);V.position.copy(b.multiplyScalar(0.495));for(var c=!1,
f=ua?Ga:Ca,k=0;6>k;++k){var l=h(ga[k],ia),m;m=a;m=l<f?p(k).distanceToSquared(m)<d:!1;m&&(c=!0);l=m?4:3*(1-3*l/Math.PI);1>l&&(l=1);l*=M;da[k].visible=m;m=W[k];m.scale.x=l;m.scale.y=l;m.scale.z=l}X.visible=c;O.visible=c;return ba.visible=c}function r(a){ia+=a;ia>Math.PI?ia-=f:ia<=-Math.PI&&(ia=f+ia);var b;a:{if(!ua&&(b=n(ia,Ca),0<=b)){ua=!0;ia=ga[b];b=p(b);break a}b=!1}if(b)za=ia,a=b,g.setIsLocked(!1),g.setWorldUpVector(a,!0),g.setIsLocked(!0);else if(ua&&0>n(ia,Ga)?(ua=!1,b=!0):b=!1,b)q(ia-za),za=
0;else{if(ua)return!1;q(a)}return!0}var u=2*Math.tan(THREE.Math.degToRad(15)),F=new THREE.MeshPhongMaterial({color:12303291,ambient:12303291,opacity:0.5,transparent:!0}),D=new THREE.MeshPhongMaterial({color:12303291,ambient:12303291,opacity:0.5,transparent:!0}),S=new THREE.Vector3,J=new THREE.Vector3,Z=new THREE.Quaternion,K=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far),M=1,ea=null,U=null,X=null,O=null,ba=null,R=null,V=null,W=null,da=null,ga=Array(6),ia=0,ya=!1,ua=!0,za=0,Ca=5*Math.PI/
180,Ga=7*Math.PI/180,Y=1E3,Fa=0.1;a.createOverlayScene("roll",F,D,K);this.updateRollCamera=function(a,c){K.position.copy(b.position);K.quaternion.copy(b.quaternion);K.up.copy(b.up);K.aspect=b.aspect;K.fov=30;a&&c&&(K.near=c-a,K.far=c+a);K.updateProjectionMatrix()};this.isSnapped=function(){return ua};this.start=function(c){var d=g.getWorldUpVector(),f=g.getCameraUpVector();ea=c;M=0.85/0.7;var h=S.copy(c).sub(b.position),k=h.length(),l=k*u*0.7;this.updateRollCamera(l,k);a.addOverlay("roll",m(l,c,h,
d,f));za=ia=0;ya=0>d.dot(f);ua=s(d,f)};this.handleRoll=function(a,b,c){this.updateRollCamera();s(g.getWorldUpVector(),g.getCameraUpVector());return 0!==a||0!==b?(a=c.x-a-0.5,b=c.y-b-0.5,r(Math.atan2(c.y-0.5,c.x-0.5)-Math.atan2(b,a))):!1};this.handleRollTouch=function(a){this.updateRollCamera();s(g.getWorldUpVector(),g.getCameraUpVector());a-=ia;return 0.001<Math.abs(a)?r(a):!1};this.end=function(){a.removeOverlay("roll",R)}}(a,h),n=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector3,s=null,
u=0;this.getNames=function(){return k};this.getName=function(){return k[0]};this.activate=function(a){a=g.getEyeVector();var b=0.5*(h.near+h.far);a.normalize().multiplyScalar(b);a=a.add(h.position);this.utilities.savePivot();this.utilities.setPivotPoint(a,!0,!0);this.utilities.pivotActive(!0);g.setIsLocked(!0);p.start(a)};this.deactivate=function(a){p.end();g.setIsLocked(!1);this.utilities.restorePivot();l=!1};this.getCursor=function(){return"auto"};this.getMotionDelta=function(a){var b=q.x-n.x,c=
q.y-n.y,d=q.z-n.z;0.001>Math.abs(b)&&(b=0);0.001>Math.abs(c)&&(c=0);0.001>Math.abs(d)&&(d=0);a.set(b,c,d)};this.stepMotionDelta=function(){n.copy(q)};this.update=function(){var a=m;this.getMotionDelta(r);var b=r.x,c=r.y,d=r.z;if(m||"roll"===s||l&&(0!==b||0!==c||0!==d))m="roll"===s?p.handleRollTouch(u):p.handleRoll(b,c,q);this.stepMotionDelta();h.dirty&&(a=!0);return a};this.handleResize=function(){m=!0};this.handleGesture=function(a){switch(a.type){case "dragstart":return this.handleButtonDown(a,
0);case "dragmove":return this.handleMouseMove(a);case "dragend":return this.handleButtonUp(a,0);case "rotatestart":return s="roll",u=THREE.Math.degToRad(a.rotation),!0;case "rotatemove":return u=THREE.Math.degToRad(a.rotation),"roll"===s;case "rotateend":u=THREE.Math.degToRad(a.rotation)}return!1};this.handleWheelInput=function(a){return!0};this.handleButtonDown=function(a,b){n.x=0.5*(a.normalizedX+1);n.y=1-0.5*(a.normalizedY+1);q.copy(n);l=!0;s=null;this.controller.setIsLocked(!0);return!0};this.handleButtonUp=
function(a,b){q.x=0.5*(a.normalizedX+1);q.y=1-0.5*(a.normalizedY+1);l=!1;m=!0;this.controller.setIsLocked(!1);return!0};this.handleMouseMove=function(a){q.x=0.5*(a.normalizedX+1);q.y=1-0.5*(a.normalizedY+1);return!0};this.handleBlur=function(a){l=!1;s=null;return!1}};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.Selector=function(a){function b(a){var c=a.dbId||a.fragIds;if(0<h[c])h[c]--,0==h[c]&&g.viewer.highlightObjectNode(g.model,a,!1);else if(0>h[c])throw"Selection State machine broken. Negatively selected object!";if(a.children)for(c=0;c<a.children.length;c++)b(a.children[c])}function c(a,b){var d=a.dbId||a.fragIds;h[d]?h[d]++:(g.viewer.highlightObjectNode(g.model,a,!0,b),h[d]=1);if(a.children)for(d=0;d<a.children.length;d++)c(a.children[d],!0)}function f(a){g.isSelected(a)||
(g.selectedObjectIds[a.dbId]=a,g.selectionCount++,c(a))}function d(a){g.isSelected(a)&&(b(a),g.selectedObjectIds[a.dbId]=null,g.selectionCount--)}var g=this;this.viewer=a;this.model=null;this.selectedObjectIds={};this.selectionCount=0;var h={};a.api.addEventListener(Autodesk.Viewing.ISOLATE_EVENT,function(a){g.deselectInvisible()});a.api.addEventListener(Autodesk.Viewing.HIDE_EVENT,function(a){g.deselectInvisible()});this.getSelectionLength=function(){return g.selectionCount};this.getSelection=function(){var a=
[],b=g.selectedObjectIds,c;for(c in b)b[c]&&a.push(b[c]);return a};this.clearSelection=function(a){if(0<this.selectionCount){var c=g.selectedObjectIds,d;for(d in c)c[d]&&b(c[d]);g.selectedObjectIds={};g.selectionCount=0;a||this.fireSelectionChangedEvent()}};this.fireSelectionChangedEvent=function(){var a=[],b=[],c=g.selectedObjectIds,d;for(d in c){var f=c[d];f&&(a.push(f.dbId),b.push(f.fragIds))}b={type:Autodesk.Viewing.SELECTION_CHANGED_EVENT,dbIdArray:a,fragIdsArray:b,nodeArray:this.getSelection()};
Autodesk.Viewing.Private.logger.log({viewer_current_time:Date.now(),viewer_event_type:"selection",viewer_event_on_object:a});this.viewer.api.fireEvent(b)};this.isSelected=function(a){if(a&&this.selectedObjectIds[a.dbId])return!0};this.toggleSelection=function(a){a?(this.isSelected(a)?d(a):f(a),g.fireSelectionChangedEvent()):console.error("Attempting to select a null node.")};this.setSelectionIds=function(a){this.setSelection(this.model.getNodesByIds(a))};this.selectionIsEqual=function(a){if(this.selectionCount!==
a.length)return!1;for(var b=0;b<a.length;b++)if(!this.isSelected(a[b]))return!1;return!0};this.setSelection=function(a){if(!this.selectionIsEqual(a)&&(this.clearSelection(!0),null!=a)){for(var b=0;b<a.length;b++)f(a[b]);this.fireSelectionChangedEvent()}};this.deselectInvisible=function(){var a=!1,b=g.selectedObjectIds,c;for(c in b){var f=b[c];f&&!1==f.visible&&(d(f),a=!0)}a&&this.fireSelectionChangedEvent()};this.toggleSelectionId=function(a){this.toggleSelection(this.model.getNodeById(a))};this.isSelectedOrParentIsSelected=
function(a){for(;a;){if(this.isSelected(a))return!0;a=a.parent}return!1};this.getSelectionBounds=function(){var a=new THREE.Box3,b=new THREE.Box3,c=[],d=g.selectedObjectIds,f;for(f in d)d[f]&&g.model.getNodeFragments(parseInt(f),c);d=this.viewer;f=this.model;for(var h=0;h<c.length;++h){var r=d.getRenderProxy(f,c[h]);r&&(b.copy(r.geometry.boundingBox).applyMatrix4(r.matrixWorld),a.union(b))}return a};this.getSelectionVisibility=function(){var a=!1,b=!1,c=g.selectedObjectIds,d;for(d in c){var f=c[d];
if(f&&(Autodesk.Viewing.Private.VisibilityManager.isVisible(f)?a=!0:b=!0,a&&b))break}return{hasVisible:a,hasHidden:b}};this.uninitialize=function(){this.selectedObjectIds=this.model=this.viewer=null}};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.VisibilityManager=function(a){this.viewerImpl=a;this.model=null;this.isolatedNodes=[]};Autodesk.Viewing.Private.VisibilityManager.prototype.getIsolatedNodes=function(){return this.isolatedNodes.slice(0)};
Autodesk.Viewing.Private.VisibilityManager.prototype.isolate=function(a){a?this.isolateMultiple([a]):this.isolateNone()};Autodesk.Viewing.Private.VisibilityManager.prototype.isolateNone=function(){this.viewerImpl.setModelVisibility(this.model,!0);var a=this.model?this.model.getRoot():null;a&&this.setVisibilityOnNode(a,!0);this.isolatedNodes=[];this.viewerImpl.resetIsolation(this.model);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.ISOLATE_EVENT,nodeIdArray:[]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.isolateMultiple=function(a){if(a&&0!=a.length){var b=this.model?this.model.getRoot():null;b&&this.setVisibilityOnNode(b,!1);this.viewerImpl.setModelVisibility(this.model,!1);for(b=0;b<a.length;b++)this.setVisibilityOnNode(a[b],!0),this.viewerImpl.needGhostedPass=!0;this.isolatedNodes=a.slice(0);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.ISOLATE_EVENT,nodeIdArray:a})}else this.isolateNone();this.viewerImpl.invalidate(!0)};
Autodesk.Viewing.Private.VisibilityManager.prototype.hideMultiple=function(a){for(var b=0;b<a.length;++b)this.setVisibilityOnNode(a[b],!1);0<a.length&&this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.HIDE_EVENT,nodeIdArray:a})};Autodesk.Viewing.Private.VisibilityManager.prototype.hide=function(a){this.setVisibilityOnNode(a,!1);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.HIDE_EVENT,nodeIdArray:[a]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.showMultiple=function(a){for(var b=0;b<a.length;++b)this.setVisibilityOnNode(a[b],!0);0<a.length&&this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.SHOW_EVENT,nodeIdArray:a})};Autodesk.Viewing.Private.VisibilityManager.prototype.show=function(a){this.setVisibilityOnNode(a,!0);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.SHOW_EVENT,nodeIdArray:[a]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.toggleVisibility=function(a){var b=Autodesk.Viewing.Private.VisibilityManager.isVisible(a);this.setVisibilityOnNode(a,!b);this.viewerImpl.api.fireEvent(b?{type:Autodesk.Viewing.HIDE_EVENT,nodeIdArray:[a]}:{type:Autodesk.Viewing.SHOW_EVENT,nodeIdArray:[a]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.setVisibilityOnNode=function(a,b){var c=this.viewerImpl,f=this.model,d=this;(function h(a){if(a.visible&&!b)for(var l=0,m=d.isolatedNodes.length;l<m;++l)if(d.isolatedNodes[l].dbId===a.dbId){d.isolatedNodes.splice(l,1);break}a.visible=b;l=a.fragIds;if(void 0!==l)if(Array.isArray(l))for(m=0;m<l.length;m++)c.setFragmentVisibility(f,l[m],b);else c.setFragmentVisibility(f,l,b);if(a.children)for(l=0;l<a.children.length;l++)h(a.children[l])})(a);this.viewerImpl.needGhostedPass=
!0;this.viewerImpl.invalidate(!0,!1,!0)};Autodesk.Viewing.Private.VisibilityManager.isVisible=function(a){return null!=a.visible?a.visible:!0};Autodesk.Viewing.Private.VisibilityManager.prototype.areAllVisible=function(){return this.viewerImpl.isWholeModelVisible(this.model)};AutodeskNamespace("Autodesk.Viewing.Private");var NUM_WORKER_THREADS=3,NUM_PARALLEL_DOWNLOADS=2,WORKER_SCRIPT=null;LMV_WORKER_URL||(LMV_WORKER_URL="src/workers/MainWorker.js");
void 0==ENABLE_INLINE_WORKER&&(ENABLE_INLINE_WORKER=!1);ENABLE_DEBUG&&(NUM_PARALLEL_DOWNLOADS=NUM_WORKER_THREADS=6);var WORKER_LOAD_GEOMETRY="LOAD_GEOMETRY",WORKER_LOAD_SVF="LOAD_SVF",WORKER_SEARCH="SEARCH",WORKER_GET_PROPERTIES="GET_PROPERTIES",WORKER_SEARCH_PROPERTIES="SEARCH_PROPERTIES",WORKER_GET_OBJECT_TREE="GET_OBJECT_TREE",WORKER_PARSE_F2D="PARSE_F2D",WORKER_STREAM_F2D="STREAM_F2D",WORKER_PARSE_F2D_FRAME="PARSE_F2D_FRAME",WORKER_CLOUD_RENDERING="CLOUD_RENDERING",WORKER_SVF_TO_SPD="SVF_TO_SPD";
Autodesk.Viewing.Private.SvfLoader=function(a){this.viewer3DImpl=a;this.next_pack=0;this.loading=!1;this.tmpMatrix=new THREE.Matrix4;this.getObjectTreeCallbacks=[];Autodesk.Viewing.Private.logger||(Autodesk.Viewing.Private.logger=new Autodesk.Viewing.Private.Logger({console:!0,viewingservice:!1,webstorage:!1,endpoint:"",flushThreshold:0}));this.logger=Autodesk.Viewing.Private.logger;this.loadTime=0;this.domainParam=auth?"domain="+window.location.hostname:""};
Autodesk.Viewing.Private.SvfLoader.prototype.uninitialize=function(){this.viewer3DImpl=this.svf=null};Autodesk.Viewing.Private.SvfLoader.prototype.pathToURL=function(a){if("http://"==a.substr(0,7)||"https://"==a.substr(0,8)||"file:///"==a.substr(0,8)||"urn:"==a.substr(0,4))return a;var b=window.location.pathname,c=b.lastIndexOf("/"),b=b.substr(0,c+1);return window.location.protocol+"//"+window.location.host+b+a};
Autodesk.Viewing.Private.SvfLoader.prototype.loadSvf=function(a,b,c,f,d){if(this.loading)return stderr("loading of SVF already in progress."),!1;var g=a.indexOf("urn:");-1!=g&&(this.logger.bindURN(a.substr(g,a.substr(g).indexOf("/"))),stderr("Extracted URN: "+this.logger.urn),g=this.logger.urn.lastIndexOf(":"),this.svfUrn=this.logger.urn.substr(g+1));this.sharedDbPath=c;this.currentLoadPath=a;var h=this.isf2d=-1!=a.indexOf(".f2d");if(ENABLE_INLINE_WORKER){var k=new XMLHttpRequest;c=RESOURCE_ROOT+
LMV_WORKER_URL;(g=function(){var a=document.getElementsByTagName("SCRIPT");if(a&&0<a.length)for(var b=0;b<a.length;++b)if(a[b].src&&-1!==a[b].src.indexOf(LMV_WORKER_URL))return a[b].src;return null}())&&(c=g);k.open("GET",c,!0);k.setRequestHeader("Access-Control-Allow-Origin","*");k.withCredentials=!1;var l=this;k.onload=function(){WORKER_SCRIPT=k.responseText;h?l.loadFydoCB(a,b,f,d):l.loadSvfCB(a,b,f,d)};k.send();return!0}return h?this.loadFydoCB(a,b,f,d):this.loadSvfCB(a,b,f,d)};
Autodesk.Viewing.Private.SvfLoader.prototype.loadSvfCB=function(a,b,c,f){this.t0=(new Date).getTime();this.failedToLoadSomeGeometryPacks=null;var d=this,g=createWorkerWithTokenRefresh(function(a){if(a.data&&a.data.svf){a=d.svf=a.data.svf;d.failedToLoadSomeGeometryPacks&&(f&&f(d.failedToLoadSomeGeometryPacks.code,d.failedToLoadSomeGeometryPacks.msg),d.failedToLoadSomeGeometryPacks=null);d.onSvfLoadDone(a);c&&c(a);var b=a.geompacks.length;if(b)for(var b=Math.min(b,NUM_PARALLEL_DOWNLOADS),l=0;l<b;l++){var m=
a.geompacks[l];d.loadGeometryPack(m.id,m.uri);d.next_pack=l+1}else d.onGeomLoadDone();d.loading=!1;g.finish();g=null}else a.data&&a.data.progress||(a.data&&a.data.error?(d.loading=!1,g.finish(),g=null,f&&f(a.data.error.code,a.data.error.msg)):a.data&&a.data.debug?stderr(a.data.message):(stderr("SVF download failed."),d.loading=!1,g.finish(),g=null))},"SVF Load");a=d.pathToURL(a);g.postMessage({operation:WORKER_LOAD_SVF,url:a,headers:{},objectIds:b,auth:auth,viewing_url:VIEWING_URL,queryParams:this.domainParam});
return!0};
Autodesk.Viewing.Private.SvfLoader.prototype.loadFydoCB=function(a,b,c,f){this.t0=Date.now();var d=this.pathToURL(a),g=createWorker(),h=createWorker(),k=this,l={};g.addEventListener("message",function(a){if(a.data&&"F2DBLOB"==a.data.type){var b={operation:WORKER_PARSE_F2D,data:a.data.buffer,metadata:a.data.metadata,manifest:a.data.manifest,basePath:a.data.basePath,f2dLoadOptions:l,url:d};h.postMessage(b,[b.data]);g.terminate()}else a.data&&"F2DSTREAM"==a.data.type?(b={operation:WORKER_PARSE_F2D_FRAME,data:a.data.frames,
url:d,f2dLoadOptions:l},a.data.metadata&&(b.metadata=a.data.metadata,b.manifest=a.data.manifest),a.data.finalFrame&&(b.finalFrame=!0),a.data.progress&&k.viewer3DImpl.signalProgress(100*a.data.progress),h.postMessage(b,b.data?[b.data]:void 0),a.data.finalFrame&&g.terminate()):a.data&&a.data.debug?stderr(a.data.message):a.data&&a.data.error?(k.loading=!1,g.terminate(),f&&f.call(this,a.data.error.code,a.data.error.msg)):(stderr("F2D download failed."),k.loading=!1,g.terminate())},!1);h.addEventListener("message",
function(a){if(a.data&&a.data.f2d){var b=k.svf=a.data.f2d;h.terminate();stderr("Num polylines: "+b.numPolylines);stderr("Line segments: "+b.numLineSegs);stderr("Circular arcs: "+b.numCircles);stderr("Ellipitcal arcs:"+b.numEllipses);stderr("Plain triangles:"+b.numTriangles);stderr("Total # of op codes generated by fydo.parse: "+b.opCount);k.onSvfLoadDone(k.svf);c&&c(k.svf);for(var d=0;d<b.meshes.length;d++)k.processReceivedMesh2D(b.meshes[d],d);b.meshes=null;k.onGeomLoadDone();k.loading=!1}else if(a.data&&
a.data.f2dframe){var g=0;a.data.meshes?(b=a.data.bbox,k.svf.bbox=new THREE.Box3(b.min,b.max)):k.svf=a.data.f2dframe;g=a.data.baseIndex;b=k.svf;b.fragments&&b.fragments.initialized?b.maxObjectNumber=a.data.maxObjectNumber:(k.onSvfLoadDone(b),c&&c(b));if(a.data.meshes&&a.data.meshes.length){for(d=0;d<a.data.meshes.length;d++)k.processReceivedMesh2D(a.data.meshes[d],g+d);a.data.finalFrame&&(k.onGeomLoadDone(),k.loading=!1,h.terminate())}}else a.data&&a.data.progress||(a.data&&a.data.debug?stderr(a.data.message):
a.data&&a.data.error?(k.loading=!1,h.terminate(),stderr("Error while parsing F2d: "+JSON.stringify(a.data.error.args)),f&&f.call(this,a.data.error.code,a.data.error.msg)):(stderr("F2D download failed."),k.loading=!1,h.terminate()))},!1);g.postMessage({operation:WORKER_STREAM_F2D,url:d,headers:{},objectIds:b,auth:auth,viewing_url:VIEWING_URL,queryParams:this.domainParam});return!0};
Autodesk.Viewing.Private.SvfLoader.prototype.loadGeometryPack=function(a,b){var c,f,d,g=this;f=function(a){if(a.data&&a.data.mesh){if(g.processReceivedMesh(a.data),1<=a.data.progress){g.pack_workers[a.data.workerId].queued-=1;a=!0;for(d=0;d<g.pack_workers.length;d++)if(0!=g.pack_workers[d].queued){a=!1;break}if(a){for(d=0;d<NUM_WORKER_THREADS;d++)g.pack_workers[d].finish();g.pack_workers=null}g.svf.fragments.numLoaded==g.svf.fragments.length&&(g.onGeomLoadDone(),g.viewer3DImpl.matman().loadTextures(g.svf))}}else a.data&&
a.data.progress?(g.pack_workers[a.data.workerId].queued-=1,g.next_pack<g.svf.geompacks.length&&(a=g.svf.geompacks[g.next_pack++],g.loadGeometryPack(a.id,a.uri)),g.viewer3DImpl.signalProgress(100*g.next_pack/g.svf.geompacks.length)):a.data&&a.data.debug?stderr(a.data.message):a.data&&a.data.error?g.failedToLoadSomeGeometryPacks={code:a.data.error.code,msg:a.data.error.msg}:g.pack_workers[a.data.workerId].queued-=2};if(!this.pack_workers)for(this.pack_workers=[],c=0;c<NUM_WORKER_THREADS;c++){var h=
createWorkerWithTokenRefresh(f,"Mesh Load");h.queued=0;this.pack_workers.push(h)}f=0;h=this.pack_workers[0].queued;for(c=1;c<NUM_WORKER_THREADS;c++)this.pack_workers[c].queued<h&&(f=c,h=this.pack_workers[c].queued);c=this.pack_workers[f];c.queued+=2;h=this.pathToURL(this.svf.basePath+b);f={operation:WORKER_LOAD_GEOMETRY,url:h,packId:parseInt(a),headers:{},workerId:f,auth:auth,viewing_url:VIEWING_URL};c.postMessage(f)};
function meshToGeometry(a){var b=a.mesh,c=new THREE.BufferGeometry;a.byteSize=0;c.vb=b.vb;a.byteSize+=b.vb.byteLength;c.vbstride=b.vbstride;b.isLines&&(c.isLines=b.isLines);a.is2d&&(c.is2d=!0);c.numInstances=b.numInstances;for(var f in b.vblayout){var d=b.vblayout[f],g=new THREE.BufferAttribute(d.array,d.itemSize);g.bytesPerItem=d.bytesPerItem;g.normalize=d.normalize;g.isPattern=d.isPattern;c.addAttribute(f,g);c.numInstances&&(c.attributes[f].divisor=d.divisor);d.array?a.byteSize+=d.array.byteLength:
d.hasOwnProperty("offset")?c.attributes[f].itemOffset=d.offset:stderr("VB attribute is neither interleaved nor separate. Something is wrong with the buffer specificaiton.")}c.addAttribute("index",new THREE.BufferAttribute(b.indices,1));a.byteSize+=b.indices.byteLength;65535<b.vb.length/b.vbstride&&stderr("Mesh with >65535 vertices. It will fail to draw.");c.boundingBox=(new THREE.Box3).copy(b.boundingBox);c.boundingSphere=(new THREE.Sphere).copy(b.boundingSphere);a.geometry=c;delete a.mesh}
function getFragmentTransform(a,b,c){c*=16;b=b.transforms;if(!b)return null;for(var f=!0,d=0;16>d;d++)if(d%5&&0!=b[c+d]||!(d%5)&&1!=b[c+d]){f=!1;break}if(f)return null;for(f=0;16>f;f++)a.elements[f]=b[c+f];return a}
Autodesk.Viewing.Private.SvfLoader.prototype.processReceivedMesh=function(a){meshToGeometry(a);var b=a.packId+":"+a.meshIndex,c=this.svf,f=c.fragments,d=f.mesh2frag[b];if(void 0===d)stderr("Mesh "+b+" was not referenced by any fragments.");else{c.meshCount++;var g=268435456,h=MAX_FRAGS_PER_GROUP;this.isf2d&&(g*=2);if(c.disableStreaming||67108864>c.gpuMeshMemory&&c.gpuNumMeshes<h)a.geometry.streamingDraw=!1,a.geometry.streamingIndex=!1;else if(c.gpuMeshMemory>g||2E3<c.gpuNumMeshes)a.geometry.streamingDraw=
!0,a.geometry.streamingIndex=!0;else{var k;this.isf2d?k=100001:Array.isArray(d)?k=d.length*a.byteSize:300>(0|d)?(a.geometry.streamingDraw=!1,a.geometry.streamingIndex=!1):k=a.byteSize;1E5>k&&(a.geometry.streamingDraw=!0,a.geometry.streamingIndex=!0)}a.geometry.streamingDraw||(c.gpuMeshMemory+=a.byteSize,c.gpuNumMeshes+=1);if(Array.isArray(d))for(h=0;h<d.length;h++)k=0|d[h],g=f.materials[k].toString(),this.viewer3DImpl.addMeshInstance(a.geometry,k,g,getFragmentTransform(this.tmpMatrix,f,k));else h=
getFragmentTransform(this.tmpMatrix,f,0|d),g=f.materials[d].toString(),this.viewer3DImpl.addMeshInstance(a.geometry,0|d,g,h);delete f.mesh2frag[b];b=a.geometry.attributes.index.array.length/3;c.geomPolyCount+=b;c.instancePolyCount+=b*(d.length||1);c.geomMemory+=a.byteSize;f.numLoaded+=d.length||1;a=f.numLoaded;f=a/f.length;c.geomPolyCount>c.nextRepaintPolys&&(c.numRepaints++,c.nextRepaintPolys+=1E4*Math.pow(1.5,c.numRepaints),this.viewer3DImpl.invalidate(!1,!0));this.isf2d&&0==a%20?this.viewer3DImpl.invalidate(!1,
!0):this.isf2d||1!=f||this.viewer3DImpl.invalidate(!0)}};Autodesk.Viewing.Private.SvfLoader.prototype.processReceivedMesh2D=function(a,b){var c={mesh:a,is2d:!0,packId:"0",meshIndex:b},f="0:"+b,d=this.svf.fragments;d.fragId2dbId[b]=c.mesh.dbIds;for(var g in c.mesh.dbIds){var h=parseInt(g),k=d.dbId2fragId[h];Array.isArray(k)?k.push(b):d.dbId2fragId[h]="undefined"!==typeof k?[k,b]:b}d.mesh2frag[f]=b;d.materials[b]=this.viewer3DImpl.matman().create2DMaterial(a.material);d.length++;this.processReceivedMesh(c)};
Autodesk.Viewing.Private.SvfLoader.prototype.onSvfLoadDone=function(a){this.isf2d?(a.fragments={},a.fragments.mesh2frag={},a.fragments.materials=[],a.fragments.fragId2dbId=[],a.fragments.dbId2fragId=[],a.fragments.length=0,a.fragments.initialized=!0):a.packFileTotalSize&&268435456>=a.packFileTotalSize-6*a.primitiveCount&&(a.disableStreaming=!0);a.geomPolyCount=0;a.instancePolyCount=0;a.geomMemory=0;a.fragments.numLoaded=0;a.meshCount=0;a.gpuNumMeshes=0;a.gpuMeshMemory=0;a.nextRepaintPolys=1E4;a.numRepaints=
0;a.basePath="";var b=this.currentLoadPath.lastIndexOf("/");-1!=b&&(a.basePath=this.currentLoadPath.substr(0,b+1));b=Date.now();this.loadTime+=b-this.t0;stderr("SVF load: "+(b-this.t0));this.viewer3DImpl.matman().convertMaterials(a);this.t0=b;a.bbox=new THREE.Box3(a.bbox.min,a.bbox.max);if(a.cameras)for(b=0;b<a.cameras.length;b++){var c=a.cameras[b];c.position=(new THREE.Vector3).copy(c.position);c.target=(new THREE.Vector3).copy(c.target);c.up=(new THREE.Vector3).copy(c.up)}stderr("scene bounds: "+
JSON.stringify(a.bbox));this.viewer3DImpl.signalProgress(5,"Hold on, getting the model...")};
Autodesk.Viewing.Private.SvfLoader.prototype.onGeomLoadDone=function(){this.svf.loadDone=!0;this.svf.fragments.entityIndexes=null;this.svf.fragments.packIds=null;var a=Date.now(),b="Fragments load time: "+(a-this.t0);this.loadTime+=a-this.t0;this.viewer3DImpl.onLoadComplete();stderr(b);stderr("Total geometry size: "+this.svf.geomMemory/1048576+" MB");stderr("Number of meshes: "+this.svf.meshCount);stderr("Num Meshes on GPU: "+this.svf.gpuNumMeshes);stderr("Net GPU geom memory used: "+this.svf.gpuMeshMemory);
a={viewer_current_time:Date.now(),viewer_model_stats_is_f2d:this.isf2d,viewer_model_stats_total_load_time:this.loadTime,viewer_model_stats_total_geometry_size:this.svf.geomMemory/1048576,viewer_model_stats_total_meshes_count:this.svf.meshCount,viewer_model_stats_total_meshes_on_gpu:this.svf.gpuNumMeshes,viewer_model_stats_total_gpu_memory_used:this.svf.gpuMeshMemory/1048576};this.logger.log(a,!0);this.currentLoadPath=null;this.isf2d=void 0};
Autodesk.Viewing.Private.SvfLoader.prototype.getProperties=function(a,b,c){var f=this,d=function(g){g.data&&g.data.error?c&&c(g.data.error.code,g.data.error.msg,g.data.error.args):g.data&&g.data.debug?stderr(g.data.message):g.data&&g.data.dbId===a&&(f.propWorker.removeMessageEventListener(d),b(g.data.result))};this.propWorker?this.propWorker.addMessageEventListener(d):this.propWorker=createWorkerWithTokenRefresh(d,"Property");var g=this.pathToURL(this.svf.basePath);this.sharedDbPath&&!this.svf.propertydb.values.length&&
(g=this.sharedDbPath,stderr("Using shared property db: "+g));this.propWorker.postMessage({operation:WORKER_GET_PROPERTIES,url:g,propertydb:this.svf.propertydb,dbId:a,headers:{},auth:auth,viewing_url:VIEWING_URL})};
Autodesk.Viewing.Private.SvfLoader.prototype.searchProperties=function(a,b,c){var f=this,d=function(a){a.data&&a.data.error?c&&c(a.data.error.code,a.data.error.msg):a.data&&a.data.debug?stderr(a.data.message):(f.propWorker.removeMessageEventListener(d),b&&b(a.data))};this.propWorker?this.propWorker.addMessageEventListener(d):this.propWorker=createWorkerWithTokenRefresh(d,"Property");var g=this.pathToURL(this.svf.basePath);this.sharedDbPath&&!this.svf.propertydb.values.length&&(g=this.sharedDbPath,
stderr("Using shared property db: "+g));this.propWorker.postMessage({operation:WORKER_SEARCH_PROPERTIES,url:g,propertydb:this.svf.propertydb,searchText:a,headers:{},auth:auth,viewing_url:VIEWING_URL})};
Autodesk.Viewing.Private.SvfLoader.prototype.createFragToNodeMapping=function(){var a=this.svf,b=a.fragments.fragId2dbId;if(a.instanceTree&&b){var c=a.fragments.fragToDbNode=Array(b.length);(function d(a){var b=a.fragIds;if(void 0!==b)if(Array.isArray(b))for(var k=0;k<b.length;k++)c[b[k]]=a;else c[b]=a;if(a.children)for(b=0;b<a.children.length;b++)d(a.children[b])})(a.instanceTree);a.fragToNodeDone=!0;this.viewer3DImpl.api.fireEvent({type:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT})}};
Autodesk.Viewing.Private.SvfLoader.prototype.getObjectTree=function(a,b){function c(){for(var a=0;a<f.getObjectTreeCallbacks.length;a++)f.getObjectTreeCallbacks[a](f.svf.instanceTree);f.getObjectTreeCallbacks=[]}var f=this;a&&this.getObjectTreeCallbacks.push(a);if(f.svf.instanceTree)c();else{var d=function(a){if(!a.data||!a.data.error)if(a.data&&a.data.debug)stderr(a.data.message);else{var b=a.data.instanceTree,g=a.data.instanceBoxes;b?f.svf.instanceTree||(f.svf.instanceTree=b,f.svf.maxTreeDepth=
a.data.maxTreeDepth,f.createFragToNodeMapping()):a.data.objectCount&&(f.svf.hasObjectProperties=a.data.objectCount);c();g&&(f.svf.instanceBoxes=g,f.propWorker.removeMessageEventListener(d))}};this.propWorker?this.propWorker.addMessageEventListener(d):this.propWorker=createWorkerWithTokenRefresh(d,"Property");var g=this.pathToURL(this.svf.basePath);this.sharedDbPath&&!this.svf.propertydb.values.length&&(g=this.sharedDbPath,stderr("Using shared property db: "+g));this.propWorker.postMessage({operation:WORKER_GET_OBJECT_TREE,
url:g,propertydb:this.svf.propertydb,headers:{},fragToDbId:this.svf.fragments.fragId2dbId,fragBoxes:this.svf.fragments.boxes,auth:auth,viewing_url:VIEWING_URL})}};function createWorker(){if(ENABLE_DEBUG||!ENABLE_INLINE_WORKER)return new Worker(LMV_WORKER_URL);var a;window.URL=window.URL||window.webkitURL;try{a=new Blob([WORKER_SCRIPT],{type:"application/javascript"})}catch(b){a=new BlobBuilder,a.append(WORKER_SCRIPT),a=a.getBlob()}return new Worker(URL.createObjectURL(a))}
function createWorkerWithTokenRefresh(a,b){var c=createWorker();c.hasEventListener=!1;c.onMessageReceivedCallbacks=[];c.name=b;c.onMessageReceived=function(a){if(a.data&&a.data.refreshToken)(new Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler).refreshToken(function(a){stderr("Token refreshed in thread");c.postMessage({tokenRefreshed:!0})},function(a){stderr("Failed token refresh in thread");c.postMessage({tokenRefreshed:!1})});else for(var b=0;b<c.onMessageReceivedCallbacks.length;++b)c.onMessageReceivedCallbacks[b](a)};
c.addMessageEventListener=function(a){c.onMessageReceivedCallbacks.indexOf(a);c.onMessageReceivedCallbacks.push(a);c.hasEventListener||(c.addEventListener("message",c.onMessageReceived,!1),c.hasEventListener=!0);return!0};a&&c.addMessageEventListener(a);c.postMessageWithCallback=function(a,b,g){b&&c.addMessageEventListener(b);ENABLE_DEBUG&&g?(b=function(b){c.postMessage.call(c,a)},0===Autodesk.Viewing.Private.env.indexOf("Autodesk")?Autodesk.Viewing.Private.setApigeeTokenInCookie("invalid",b):Autodesk.Viewing.Private.setAuthTokenInCookie("invalid",
b)):c.postMessage.call(c,a)};c.removeMessageEventListener=function(a){a=c.onMessageReceivedCallbacks.indexOf(a);return-1!==a?(c.onMessageReceivedCallbacks.splice(a,1),0===c.onMessageReceivedCallbacks.length&&(c.removeEventListener("message",c.onMessageReceived),c.hasEventListener=!1),!0):!1};c.removeAllMessageEventListeners=function(){c.onMessageReceivedCallbacks=[];c.removeEventListener("message",c.onMessageReceived);c.hasEventListener=!1};c.finish=function(){c.removeAllMessageEventListeners();c.terminate()};
return c}
Autodesk.Viewing.Private.SvfLoader.prototype.cloudRendering=function(a,b,c){a=this.cloudRenderingWorker;b={operation:WORKER_CLOUD_RENDERING,url:"urn:"+this.spdUrn,headers:{},auth:auth,viewing_url:VIEWING_URL,queryParams:this.domainParam,camera:b,canvas:{width:this.viewer3DImpl.canvas.width,height:this.viewer3DImpl.canvas.height},imageNo:c,exposureBias:this.viewer3DImpl.renderer().getExposureBias(),currentLightPreset:this.viewer3DImpl.currentLightPreset(),upVector:this.viewer3DImpl.model.getUpVector()};a.postMessage(b)};
Autodesk.Viewing.Private.SvfLoader.prototype.svfToSpdTranslator=function(a,b,c,f){var d=this.cloudRenderingWorker,g=this;if(!this.cloudRenderingWorker){var d=this.cloudRenderingWorker=createWorker(),h=function(b){var l=function(){d.removeEventListener("message",h);d.terminate();d=null};b.data&&b.data.translation?(g.spdUrn=b.data.translation.spdUrn,g.spdUrn=btoa(g.spdUrn),stderr("spdUrn = "+g.spdUrn),g.cloudRendering(a,b.data.translation.camera,b.data.translation.imageNo),alertify.success("Translation Job Complete")):
b.data&&b.data.translationProgress?alertify.success("Translation Job In Progress"):b.data&&b.data.translationError?(alertify.error("Translation Job Error"),f(b.data.translationError),l()):b.data&&b.data.renderings?(alertify.success("RaaS Rendering Job Complete"),c(b.data.renderings),stderr(renderings)):b.data&&b.data.progress?alertify.success("RaaS Rendering Job in Progress"):b.data&&b.data.error?(alertify.error("RaaS Rendering Job Error"),f(b.data.error),l()):b.data&&b.data.debug&&stderr(b.data.message)};
d.addEventListener("message",h,!1)}d.postMessage({operation:WORKER_SVF_TO_SPD,url:"urn:",headers:{},auth:auth,viewing_url:VIEWING_URL,queryParams:this.domainParam,svfUrn:g.svfUrn,camera:this.viewer3DImpl.camera,imageNo:b})};var MAX_FRAGS_PER_GROUP=333;
function RenderQueue(a,b,c,f){function d(a,b,c){var d=u[a];if(!!(d&b)==c)return!1;u[a]=c?d|b:d&~b;return!0}var g=0,h=-1,k=!0,l=!1,m=0,p=new THREE.Box3,n,q=new THREE.Box3,r=0<f?f:MAX_FRAGS_PER_GROUP;0>=a&&(a=1);var s=Array(a),u=new Uint8Array(a),w=new THREE.Raycaster;this.prototypeScene=b;var v=0,B=!1,z=0,A=1;a=0|(a+r-1)/r;var C=Array(a);for(f=0;f<a;f++)(C[f]=new THREE.Scene(!0)).__lights=b.__lights;this.visibleBoundsDirty=!1;c&&p.copy(c);this.addMesh=function(a,b){var c=s[a];c&&(stderr("duplicate fragment."),
c.parent.remove(c));s[a]=b;b.fragId=a;if(u.length<s.length){c=2*u.length;c<s.length&&(c=s.length);for(var c=new Uint8Array(c),d=0,f=u.length;d<f;d++)c[d]=u[d];u=c}u[a]=1;c=0|a/r;d=C[c];d||(C[c]=d=new THREE.Scene(!0),d.__lights=this.prototypeScene.__lights);q.copy(b.geometry.boundingBox);q.applyMatrix4(b.matrixWorld);p.union(q);d.add(b);this.visibleBoundsDirty=!0};this.renderSome=function(a,b){var c=g,d=C.length,f=u,k=Date.now(),l,m=k,p=!0,n=0==c;n&&!B&&(h=-1,B=!0);for(b*=A;c<d;c++){var q=C[c];l=!1;
n&&0<h?(c==h&&(l=!0),p=!1):p?(0>=b&&(l=!0),p=!1):b<=0.5*q.avgFrameTime&&(l=!0);if(l)break;l=q.children;var s=!0;if(2==v)for(var r=0,w=l.length;r<w;r++){var U=l[r],X=!(f[U.fragId]&1);U.visible=X;s=s&&!X}else if(1==v)for(r=0,w=l.length;r<w;r++)U=l[r],X=!!(f[U.fragId]&2),U.visible=X,s=s&&!X;else for(r=0,w=l.length;r<w;r++)U=l[r],X=1==f[U.fragId],U.visible=X,s=s&&!X;s||a(q);l=Date.now();s=l-k;k=l;q.avgFrameTime=void 0===q.avgFrameTime?s:0.9*q.avgFrameTime+0.1*s;g=c+1;b-=q.avgFrameTime}n&&-1==h&&(h=c);
n&&z&&(A=(k-m)/z,0>=A&&(A=1),1<A&&(A=1));c!=d&&n||(h=-1,B=!1);return b/A};this.isDone=function(){return g==C.length};this.reset=function(a,b){g=0;z=b};this.drawNormalObjectsOnly=function(){v=0};this.drawHighlightedObjectsOnly=function(){v=1};this.drawHiddenObjectsOnly=function(){v=2};this.setOverrideMaterial=function(a){for(var b=0,c=C.length;b<c;b++)C[b].overrideMaterial=a};this.setHightlighted=function(a,b){d(a,2,b)&&(b?m++:m--);this.visibleBoundsDirty=!0};this.setVisibility=function(a,b){d(a,1,
b);this.visibleBoundsDirty=l=!0};this.setAllVisibility=function(a){var b=u,c=0,d=b.length;if(a)for(;c<d;c++)b[c]|=1;else for(;c<d;c++)b[c]&=-2;k=a;l=!1;this.visibleBoundsDirty=!0};this.hideLines=function(a){var b=u,c=0,d=b.length;if(a)for(;c<d;c++)s[c]&&s[c].isLine&&(b[c]|=4);else for(;c<d;c++)s[c]&&s[c].isLine&&(b[c]&=-5);l=!0};this.hasHighlighted=function(){return!!m};this.isFragVisible=function(a){return 1==(u[a]&3)};this.areAllVisible=function(){if(l){k=!0;l=!1;for(var a=u,b=0,c=a.length;b<c;b++)if(0==
(a[b]&1)){k=!1;break}}return k};this.getVisibleBounds=function(a){if(!this.visibleBoundsDirty&&a==n)return p;n=a;var b=u;p.makeEmpty();for(var c=0,d=b.length;c<d;c++){var f=b[c];if(f&1||a&&0==f)if(f=s[c])q.copy(f.geometry.boundingBox).applyMatrix4(f.matrixWorld),p.union(q)}this.visibleBoundsDirty=!1;return p};this.rayIntersect=function(a,b,c){w.set(a,b);a=w.intersectObjects(C,!0);for(var d=b=null,f=0;f<a.length;f++){var g=a[f].object;if(!g.is2d){var h=g.visible;void 0!==g.fragId&&(h=this.isFragVisible(g.fragId));
if(h&&(!c||!a[f].object.material.transparent)){b=a[f].object;d=a[f].point;break}}}return[b,d]};this.getRenderProgress=function(){return g/C.length};this.getVizmesh=function(a){return s[a]};this.getSceneCount=function(){return C.length}}
function RenderContext(){function a(){function a(b){b.material.blending=THREE.NoBlending;b.material.depthWrite=!1;b.material.depthTest=!1}var b=NormalsShader;f=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:THREE.UniformsUtils.clone(b.uniforms)});f.blending=THREE.NoBlending;k=new THREE.ShaderPass(SAOShader);a(k);h=new THREE.ShaderPass(SAOBlurShader);a(h);m=new THREE.ShaderPass(SAOMinifyFirstShader);a(m);l=new THREE.ShaderPass(SAOMinifyShader);a(l);p=
new THREE.ShaderPass(FXAAShader);a(p);n=new THREE.ShaderPass(BlendShader);a(n);g=new THREE.ShaderPass(BackgroundShader);a(g)}var b,c,f,d,g,h,k,l,m,p,n,q=!1,r,s=null,u=null,w=null,v=null,B=null,z=null,A=0,C=0,G=1,E,I,H=new Uint8Array(4),Q={r:0,g:0,b:0},N=!1,F={antialias:!0,sao:!1,useHdrTarget:!1,haveTwoSided:!1,useSSAA:!1,idbuffer:!1};this.settings=F;this.init=function(d,f,g,h){N=-1!=window.navigator.userAgent.indexOf("Firefox")&&-1!=window.navigator.userAgent.indexOf("Mac OS");c=d;E=g||c.clientWidth;
I=h||c.clientHeight;f?b=f:((d=window.devicePixelRatio)||(d=1),d=new FireflyWebGLRenderer({canvas:c,antialias:!1,alpha:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1,depth:!1,devicePixelRatio:d}),d.autoClear=!1,d.sortObjects=!1,b=d);a();this.initPostPipeline(F.sao,F.antialias,!1)};this.beginScene=function(a,c,f){d=c;q=!1;f&&(b.setClearColor(Q,0),b.clearTarget(u,!1,!0,!1),g.render(b,u,null));z&&(b.setClearColor(Q,0),b.clearTarget(z,!0,!1,!1));F.sao&&(f&&(b.setClearColor(Q,0),b.clearTarget(r,
!0,!1,!1)),k.uniforms.cameraNear.value=c.near,k.uniforms.cameraFar.value=c.far,m.uniforms.cameraNear.value=c.near,m.uniforms.cameraInvNearFar.value=1/(c.near-c.far),f=c.projectionMatrix.elements,c.isPerspective?(k.uniforms.projInfo.value.set(-2/(u.width*f[0]),-2/(u.height*f[5]),(1-f[8])/f[0],(1+f[9])/f[5]),k.uniforms.isOrtho.value=0):(k.uniforms.projInfo.value.set(-2/(u.width*f[0]),-2/(u.height*f[5]),(1-f[12])/f[0],(1-f[13])/f[5]),k.uniforms.isOrtho.value=1),k.uniforms.projScale.value=0.125*u.height*
f[5]);this.renderScenePart(a,!0,!0,!1)};this.renderScenePart=function(a,c,g,h){q=!1;this.hasMRT()?(F.sao&&g&&F.idbuffer&&h&&stderr("Incompatible render target combination given to renderScenePart"),F.idbuffer?b.render(a,d,[u,z]):F.sao?b.render(a,d,[u,r]):b.render(a,d,u)):(c&&b.render(a,d,u),F.idbuffer&&h&&b.render(a,d,z),F.sao&&g&&(c=a.overrideMaterial,a.overrideMaterial=f,b.render(a,d,r),a.overrideMaterial=c))};this.clearAllOverlays=function(){b.clearTarget(w,!0,!1,!1)};this.renderOverlays=function(a){var c=
0,f;for(f in a)if(a.hasOwnProperty(f)){var g=a[f],h=g.scene,k=g.camera?g.camera:d;h.children.length&&(c||(c=1,b.setClearColor(Q,0),b.clearTarget(w,!0,!1,!1)),g.materialPre&&(h.overrideMaterial=g.materialPre,b.render(h,k,w,!1)),g.materialPost&&(h.overrideMaterial=g.materialPost,b.context.depthFunc(b.context.GREATER),b.render(h,k,w,!1),b.context.depthFunc(b.context.LEQUAL)),h.overrideMaterial=null)}n.uniforms.useOverlay.value=c};this.composeFinalFrame=function(a){if(!a&&F.sao){if(!q){if(s){a=s[0];m.uniforms.resolution.value.set(1/
a.width,1/a.height);m.render(b,a,r);for(var c=1;c<s.length;c++){var d=s[c];l.uniforms.resolution.value.set(1/d.width,1/d.height);l.render(b,d,a);a=d}}k.render(b,B,u);h.uniforms.axis.value.set(1,0);h.render(b,v,B);h.uniforms.axis.value.set(0,1);h.render(b,B,v);q=!0}n.uniforms.useAO.value=1}else n.uniforms.useAO.value=0;F.antialias?(n.render(b,v,u),p.render(b,null,v)):n.render(b,null,u);b.endFrame()};this.setSize=function(a,c,d){E=a;I=c;b.setSize(a,c);var f=0|a*b.devicePixelRatio,g=0|c*b.devicePixelRatio;
F.logicalWidth=a;F.logicalHeight=c;F.deviceWidth=f;F.deviceHeight=g;var l=1/f,m=1/g;a=!1;if(F.useSSAA){if(F.antialias){f*=3/b.devicePixelRatio;g*=3/b.devicePixelRatio;for(a=1;a<f;)a*=2;for(c=1;c<g;)c*=2;f=a;g=c}d=a=!0}if(d||!u||u.width!=f||u.height!=g)stderr("Reallocating render targets."),u=new THREE.WebGLRenderTarget(f,g,{minFilter:a?THREE.LinearMipMapLinearFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,type:F.useHdrTarget?THREE.FloatType:THREE.UnsignedByteType,stencilBuffer:!1,
generateMipmaps:a}),w=new THREE.WebGLRenderTarget(f,g,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,stencilBuffer:!1}),w.shareDepthFrom=u,B=v=r=null,s=[];if(F.antialias||F.sao)if(d||!v||v.width!=f||v.height!=g)v=new THREE.WebGLRenderTarget(f,g,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1,depthBuffer:!1});if(F.sao){if(d||!r||r.width!=f||r.height!=g){r=new THREE.WebGLRenderTarget(f,g,{minFilter:THREE.NearestFilter,
magFilter:THREE.NearestFilter,format:THREE.RGBFormat,type:THREE.FloatType,stencilBuffer:!1});r.shareDepthFrom=u;s=[];for(c=0;5>c;c++){var q=new THREE.WebGLRenderTarget(0|f/(2<<c),0|g/(2<<c),{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,depthBuffer:!1,stencilBuffer:!1});q.generateMipmaps=!1;s.push(q);k.uniforms["tDepth_mip"+(c+1)].value=q}b.verifyMRTWorks([u,r]);B=v.clone()}z=null;k.uniforms.size.value.set(f,g);k.uniforms.tDepth.value=r;h.uniforms.size.value.set(f,
g);h.uniforms.resolution.value.set(l,m)}!F.idbuffer||!d&&z&&z.width==f&&z.height==g||(z=new THREE.WebGLRenderTarget(f,g,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat,type:THREE.UnsignedByteType,stencilBuffer:!1,generateMipmaps:a}),z.shareDepthFrom=u,b.verifyMRTWorks([u,z]),s=r=null);p.uniforms.resolution.value.set(l,m);n.uniforms.tOverlay.value=w;n.uniforms.tAO.value=B;n.uniforms.useAO.value=F.sao?1:0;n.uniforms.resolution.value.set(l,m);n.uniforms.tID.value=
z};this.getMaxAnisotropy=function(){return b.getMaxAnisotropy()};this.hasMRT=function(){return!N&&b.supportsMRT()};this.initPostPipeline=function(a,b,c){F.sao=a&&!_isIE11;F.antialias=b&&!_isIE11;if(F.idbuffer=c)F.sao=!1;F.haveTwoSided&&(f.side=THREE.DoubleSide);f.needsUpdate=!0;k.material.needsUpdate=!0;h.material.needsUpdate=!0;m.material.needsUpdate=!0;l.material.needsUpdate=!0;p.material.needsUpdate=!0;n.material.needsUpdate=!0;g.material.needsUpdate=!0;this.setSize(E,I)};this.setClearColors=function(a,
b){g.uniforms.color2.value.copy(a);b?g.uniforms.color1.value.copy(b):g.uniforms.color1.value.set(0,0,0,1)};this.setAOOptions=function(a,b){void 0!==a&&(k.uniforms.radius.value=a);void 0!==b&&(k.uniforms.intensity.value=b);q=!1};this.getAORadius=function(){return k.uniforms.radius.value};this.getAOIntensity=function(){return k.uniforms.intensity.value};this.setExposureBias=function(a){A=a};this.getExposureBias=function(){return A};this.setTonemapMethod=function(a){C=a;b.gammaInput=0==a?!1:!0};this.getToneMapMethod=
function(){return C};this.toggleTwoSided=function(a){F.haveTwoSided!=a&&f&&(f.side=a?THREE.DoubleSide:THREE.FrontSide,f.needsUpdate=!0);F.haveTwoSided=a};this.enter2DMode=function(a){};this.idAtPixel=function(a,c){if(!z)return 0;b.readPixels(z,0.5*(a+1)*z.width,0.5*(c+1)*z.height,1,1,H);return H[2]<<16|H[1]<<8|H[0]};this.rolloverObjectViewport=function(a,b){var c=this.idAtPixel(a,b);0==c&&(H[0]=H[1]=H[2]=H[3]=0);n.uniforms.objID.value=c;n.uniforms.objIDv3.value.set(H[0]/255,H[1]/255,H[2]/255)};this.screenCapture=
function(){return b.domElement.toDataURL("image/png")};this.setUnitScale=function(a){G=a};this.getUnitScale=function(){return G}}
function StereoRenderContext(a){var b,c,f,d,g,h,k,l=a&&a.HMD?a.HMD:{hScreenSize:0.14976,vScreenSize:0.0936,interpupillaryDistance:0.064,lensSeparationDistance:0.064,eyeToScreenDistance:0.041,distortionK:[1,0.22,0.24,0],chromaAbParameter:[0.996,-0.004,1.014,0]};this.init=function(a){var b=window.devicePixelRatio;b||(b=1);b=new FireflyWebGLRenderer({canvas:a,antialias:!1,alpha:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1,depth:!1,devicePixelRatio:b});b.autoClear=!1;b.sortObjects=!1;
g=b;f=new RenderContext;f.init(a,g,a.clientWidth/2,a.clientHeight);d=new RenderContext;d.init(a,g,a.clientWidth/2,a.clientHeight);this.settings=f.settings};this.beginScene=function(a,g,h){b=g.clone();c=g.clone();b.aspect=c.aspect=0.5*g.aspect;var k=2*Math.atan(l.vScreenSize/2/l.eyeToScreenDistance);b.fov=c.fov=THREE.Math.radToDeg(k);k=1/f.getUnitScale();g=g.target.clone().sub(g.position).cross(g.up).normalize();g.multiplyScalar(0.5*l.interpupillaryDistance*k);b.position.sub(g);c.position.add(g);b.target.sub(g);
c.target.add(g);b.toPerspective();c.toPerspective();g=4*(0.25*l.hScreenSize-0.5*l.lensSeparationDistance)/l.hScreenSize;b.projectionMatrix.elements[12]+=g;b.projectionMatrix.elements[12]-=g;f.beginScene(a,b,h);d.beginScene(a,c,h)};this.renderScenePart=function(a,b,c,g){f.renderScenePart(a,b,c,g);d.renderScenePart(a,b,c,g)};this.clearAllOverlays=function(){f.clearAllOverlays();d.clearAllOverlays()};this.renderOverlays=function(a){f.renderOverlays(a);d.renderOverlays(a)};this.composeFinalFrame=function(a){g.setViewport(0,
0,h/2,k);f.composeFinalFrame(a);g.setViewport(h/2,0,h/2,k);d.composeFinalFrame(a);g.setViewport(0,0,h,k)};this.setSize=function(a,b,c){h=a;k=b;f.setSize(a/2,b,c);d.setSize(a/2,b,c);g.setSize(a,b)};this.getMaxAnisotropy=function(){return f.getMaxAnisotropy()};this.hasMRT=function(){return f.hasMRT()};this.initPostPipeline=function(a,b,c){f.initPostPipeline(a,b,c);d.initPostPipeline(a,b,c)};this.setClearColors=function(a,b){f.setClearColors(a,b);d.setClearColors(a,b)};this.setAOOptions=function(a,b){f.setAOOptions(a,
b);d.setAOOptions(a,b)};this.getAORadius=function(){return f.getAORadius()};this.getAOIntensity=function(){return f.getAOIntensity()};this.setExposureBias=function(a){f.setExposureBias(a);d.setExposureBias(a)};this.getExposureBias=function(){return f.getExposureBias()};this.setTonemapMethod=function(a){f.setTonemapMethod(a);d.setTonemapMethod(a)};this.getToneMapMethod=function(){return f.getToneMapMethod()};this.toggleTwoSided=function(a){f.toggleTwoSided(a);d.toggleTwoSided(a)};this.enter2DMode=
function(a){f.enter2DMode(a);d.enter2DMode(a)};this.idAtPixel=function(a,b){console.warn("idAtPixel not implemented in stereo context.");return 0};this.rolloverObjectViewport=function(a,b){console.warn("rolloverObjectViewport not implemented in stereo context")};this.screenCapture=function(){console.warn("Screen capture not implemented by stereo render context");return null};this.setUnitScale=function(a){f.setUnitScale(a);d.setUnitScale(a)};this.getUnitScale=function(){return f.getUnitScale()}}
FXAAShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\n#define FXAA_SPAN_MAX     8.0\n#define FXAA_EDGE_THRESHOLD_MIN (1.0/24.0)\n#define FXAA_EDGE_THRESHOLD (1.0/8.0)\n#define FXAA_SEARCH_THRESHOLD (1.0/4.0)\n#define FXAA_SEARCH_STEPS 24\n#define FXAA_SUBPIX_TRIM (1.0/4.0)\n#define FXAA_SUBPIX_TRIM_SCALE (1.0/(1.0 - FXAA_SUBPIX_TRIM))\n#define FXAA_SUBPIX_CAP (3.0/4.0)\nvec4 getColor(sampler2D tex, vec2 uv) {\nvec4 c = texture2D(tex, uv);\nreturn c;\n}\nfloat FxaaLuma(vec3 rgb) {\nreturn rgb.y * (0.587/0.299) + rgb.x; }\nvec4 FxaaFilterReturn(vec4 rgba) {\nreturn rgba;}\nvec3 FxaaLerp3(vec3 a, vec3 b, float amountOfA) {\nreturn (vec3(-amountOfA) * b) +\n((a * vec3(amountOfA)) + b); }\nvec4 FxaaTex(sampler2D tex, vec2 pos) {\nreturn getColor(tex, pos.xy);}\nvec4 FxaaTexOff(sampler2D tex, vec2 pos, vec2 offset, vec2 resolution) {\nvec2 uv = pos.xy + offset * resolution;\nreturn getColor(tex, uv);}\nvoid main() {\nvec3 rgbN = FxaaTexOff( tDiffuse, vUv, vec2(0.0,-1.0), resolution ).xyz;\nvec3 rgbE = FxaaTexOff( tDiffuse, vUv, vec2(1.0, 0.0), resolution ).xyz;\nvec3 rgbW = FxaaTexOff( tDiffuse, vUv, vec2(-1.0,0.0), resolution ).xyz;\nvec3 rgbS = FxaaTexOff( tDiffuse, vUv, vec2(0.0, 1.0), resolution ).xyz;\nvec4 rgbaM = FxaaTex( tDiffuse, vUv);\nvec3 rgbM  = rgbaM.xyz;\nfloat lumaN = FxaaLuma(rgbN);\nfloat lumaE = FxaaLuma(rgbE);\nfloat lumaW = FxaaLuma(rgbW);\nfloat lumaS = FxaaLuma(rgbS);\nfloat lumaM = FxaaLuma(rgbM);\nfloat rangeMin = min(lumaM, min(min(lumaN, lumaW), min(lumaS, lumaE)));\nfloat rangeMax = max(lumaM, max(max(lumaN, lumaW), max(lumaS, lumaE)));\nfloat range = rangeMax - rangeMin;\nif(range < max(FXAA_EDGE_THRESHOLD_MIN, rangeMax * FXAA_EDGE_THRESHOLD)) {\ngl_FragColor = FxaaFilterReturn(rgbaM); return;}\nvec3 rgbL = rgbN + rgbW + rgbM + rgbE + rgbS;\nfloat lumaL = (lumaN + lumaW + lumaE + lumaS) * 0.25;\nfloat rangeL = abs(lumaL - lumaM);\nfloat blendL = max(0.0, (rangeL / range) - FXAA_SUBPIX_TRIM) * FXAA_SUBPIX_TRIM_SCALE;\nblendL = min(FXAA_SUBPIX_CAP, blendL);\nvec3 rgbNW = FxaaTexOff( tDiffuse, vUv, vec2(-1.0,-1.0), resolution ).xyz;\nvec3 rgbNE = FxaaTexOff( tDiffuse, vUv, vec2(1.0,-1.0), resolution ).xyz;\nvec3 rgbSW = FxaaTexOff( tDiffuse, vUv, vec2(-1.0,1.0), resolution ).xyz;\nvec3 rgbSE = FxaaTexOff( tDiffuse, vUv, vec2(1.0,1.0), resolution ).xyz;\nfloat opacity  = rgbaM.w;\nrgbL += (rgbNW + rgbNE + rgbSW + rgbSE);\nrgbL *= vec3(1.0/9.0);\nfloat lumaNW = FxaaLuma( rgbNW);\nfloat lumaNE = FxaaLuma( rgbNE);\nfloat lumaSW = FxaaLuma( rgbSW);\nfloat lumaSE = FxaaLuma( rgbSE);\nfloat edgeVert = abs((0.25 * lumaNW) + (-0.5 * lumaN) + (0.25 * lumaNE)) +\nabs((0.50 * lumaW ) + (-1.0 * lumaM) + (0.50 * lumaE )) +\nabs((0.25 * lumaSW) + (-0.5 * lumaS) + (0.25 * lumaSE));\nfloat edgeHorz = abs((0.25 * lumaNW) + (-0.5 * lumaW) + (0.25 * lumaSW)) +\nabs((0.50 * lumaN ) + (-1.0 * lumaM) + (0.50 * lumaS )) +\nabs((0.25 * lumaNE) + (-0.5 * lumaE) + (0.25 * lumaSE));\nbool horzSpan = edgeHorz >= edgeVert;\nfloat lengthSign = horzSpan ? -resolution.y : -resolution.x;\nif(!horzSpan) lumaN = lumaW;\nif(!horzSpan) lumaS = lumaE;\nfloat gradientN = abs(lumaN - lumaM);\nfloat gradientS = abs(lumaS - lumaM);\nlumaN = (lumaN + lumaM) * 0.5;\nlumaS = (lumaS + lumaM) * 0.5;\nbool pairN = gradientN >= gradientS;\nif(!pairN) lumaN = lumaS;\nif(!pairN) gradientN = gradientS;\nif(!pairN) lengthSign *= -1.0;\nvec2 posN;\nposN.x = vUv.x + (horzSpan ? 0.0 : lengthSign * 0.5);\nposN.y = vUv.y + (horzSpan ? lengthSign * 0.5 : 0.0);\ngradientN *= FXAA_SEARCH_THRESHOLD;\nvec2 posP = posN;\nvec2 offNP = horzSpan ? vec2(resolution.x, 0.0) : vec2(0.0, resolution.y);\nfloat lumaEndN = lumaN;\nfloat lumaEndP = lumaN;\nbool doneN = false;\nbool doneP = false;\nposN += offNP * vec2(-1.0, -1.0);\nposP += offNP * vec2( 1.0,  1.0);\nfor(int i = 0; i < FXAA_SEARCH_STEPS; i++) {\nif(!doneN) lumaEndN = FxaaLuma(FxaaTex( tDiffuse, posN.xy).xyz);\nif(!doneP) lumaEndP = FxaaLuma(FxaaTex( tDiffuse, posP.xy).xyz);\ndoneN = doneN || (abs(lumaEndN - lumaN) >= gradientN);\ndoneP = doneP || (abs(lumaEndP - lumaN) >= gradientN);\nif(doneN && doneP) break;\nif(!doneN) posN -= offNP;\nif(!doneP) posP += offNP; }\nfloat dstN = horzSpan ? vUv.x - posN.x : vUv.y - posN.y;\nfloat dstP = horzSpan ? posP.x - vUv.x : posP.y - vUv.y;\nbool directionN = dstN < dstP;\nlumaEndN = directionN ? lumaEndN : lumaEndP;\nif(((lumaM - lumaN) < 0.0) == ((lumaEndN - lumaN) < 0.0))\nlengthSign = 0.0;\nfloat spanLength = (dstP + dstN);\ndstN = directionN ? dstN : dstP;\nfloat subPixelOffset = (0.5 + (dstN * (-1.0/spanLength))) * lengthSign;\nvec3 rgbF = FxaaTex(tDiffuse, vec2(\nvUv.x + (horzSpan ? 0.0 : subPixelOffset),\nvUv.y + (horzSpan ? subPixelOffset : 0.0))).xyz;\ngl_FragColor = FxaaFilterReturn(vec4(FxaaLerp3(rgbL, rgbF, blendL), opacity));\n}"};
TonemapShaderChunk="float luminance_post(vec3 rgb) {\nreturn dot(rgb, vec3(0.299, 0.587, 0.114));\n}\nfloat luminance_pre(vec3 rgb) {\nreturn dot(rgb, vec3(0.212671, 0.715160, 0.072169));\n}\nconst float Shift = 1.0 / 0.18;\nfloat toneMapCanonFilmic_NoGamma(float x) {\nx *= Shift;\nconst float A = 0.2;\nconst float B = 0.34;\nconst float C = 0.002;\nconst float D = 1.68;\nconst float E = 0.0005;\nconst float F = 0.252;\nconst float scale = 1.0/0.833837;\nreturn (((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F) * scale;\n}\nvec3 toneMapCanonFilmic_WithGamma(vec3 x) {\nx *= Shift;\nconst float A = 0.27;\nconst float B = 0.29;\nconst float C = 0.052;\nconst float D = 0.2;\nconst float F = 0.18;\nconst float scale = 1.0/0.897105;\nreturn (((x*(A*x+C*B))/(x*(A*x+B)+D*F))) * scale;\n}";
BlendShader={uniforms:{tDiffuse:{type:"t",value:null},tAO:{type:"t",value:null},useAO:{type:"i",value:0},tOverlay:{type:"t",value:null},useOverlay:{type:"i",value:0},tID:{type:"t",value:null},objID:{type:"i",value:0},objIDv3:{type:"v3",value:new THREE.Vector3(0,0,0)},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)},scale:{type:"v2",value:new THREE.Vector2(1,1)},scaleIn:{type:"v2",value:new THREE.Vector2(1,1)},lensCenter:{type:"v2",value:new THREE.Vector2(0,0)},hmdWarpParam:{type:"v4",
value:new THREE.Vector4(1,0.22,0.24,0)},chromAbParam:{type:"v4",value:new THREE.Vector4(0.996,-0.004,1.014,0)}},defines:{},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:["uniform sampler2D tDiffuse;\nuniform sampler2D tAO;\nuniform int useAO;\nuniform sampler2D tOverlay;\nuniform int useOverlay;\nuniform vec2 resolution;\nuniform int objID;\nuniform vec3 objIDv3;\nuniform sampler2D tID;\n#ifdef OCULUS\nuniform vec2 scale;\nuniform vec2 scaleIn;\nuniform vec2 lensCenter;\nuniform vec4 hmdWarpParam;\nuniform vec4 chromAbParam;\n#endif\nvarying vec2 vUv;",
TonemapShaderChunk,"vec4 fetchOverlayTexel(vec2 uv, vec2 offset) {\nreturn texture2D(tOverlay, uv + resolution * offset);\n}\n#define checkOnePixel(i, j) { \t\t\tvec4 c = fetchOverlayTexel(vUv, vec2(i, j));\t\t\tmax_alpha = max(max_alpha, c.a);\t\t\tif (i==0 && j==0)\t\t\t\tcenter = c;\t\t\tif (c.a == 0.0)\t\t\t\thas_zero++;\t\t\telse \t\t\t\tnon_zero_pixel = c;\t\t}\nvec4 overlayEdgeDetect(vec2 vUv) {\nint has_zero = 0;\nvec4 center = vec4(0.0);\nvec4 non_zero_pixel = vec4(0.0);\nfloat max_alpha = 0.0;\ncheckOnePixel(-1,-1);\ncheckOnePixel(0,-1);\ncheckOnePixel(1,-1);\ncheckOnePixel(-1,0);\ncheckOnePixel(0,0);\ncheckOnePixel(1,0);\ncheckOnePixel(-1,1);\ncheckOnePixel(0,1);\ncheckOnePixel(1,1);\nif (has_zero != 0 && has_zero != 9)\n{\nif (center == vec4(0.0))\ncenter = non_zero_pixel;\nfloat maxComponent = max(center.r, max(center.g, center.b));\ncenter.rgb /= maxComponent;\ncenter.rgb = sqrt(center.rgb);\ncenter.a = 0.5 + 0.5 * max_alpha * 0.125 * float(has_zero);\n}\nif (has_zero == 0) {\ncenter.a = -center.a;\n}\nreturn center;\n}\nvec4 sampleColor() {\n#ifdef OCULUS\nvec2 uv = (vUv*2.0)-1.0;\nvec2 theta = (uv-lensCenter)*scaleIn;\nfloat rSq = theta.x*theta.x + theta.y*theta.y;\nvec2 rvector = theta*(hmdWarpParam.x + hmdWarpParam.y*rSq + hmdWarpParam.z*rSq*rSq + hmdWarpParam.w*rSq*rSq*rSq);\n  vec2 rBlue = rvector * (chromAbParam.z + chromAbParam.w * rSq);\n  vec2 tcBlue = (lensCenter + scale * rBlue);\n  tcBlue = (tcBlue+1.0)/2.0;\n  if (any(bvec2(clamp(tcBlue, vec2(0.0,0.0), vec2(1.0,1.0))-tcBlue)))\n    return vec4(0.0, 0.0, 0.0, 1.0);\n  vec2 tcGreen = lensCenter + scale * rvector;\n  tcGreen = (tcGreen+1.0)/2.0;\n  vec2 rRed = rvector * (chromAbParam.x + chromAbParam.y * rSq);\n  vec2 tcRed = lensCenter + scale * rRed;\n  tcRed = (tcRed+1.0)/2.0;\n  return vec4(texture2D(tDiffuse, tcRed).r, texture2D(tDiffuse, tcGreen).g, texture2D(tDiffuse, tcBlue).b, 1);\n#else\nreturn texture2D( tDiffuse, vUv );\n#endif\n}\nfloat sampleAO() {\nreturn (useAO != 0) ? texture2D(tAO, vUv).r : 1.0;\n}\nvoid main() {\nvec4 texel = sampleColor();\nfloat ao = sampleAO();\ntexel.rgb *= ao;\nif (useOverlay!=0) {\nvec4 overlay = overlayEdgeDetect(vUv);\nif (overlay.a < 0.0) {\noverlay.a = -overlay.a;\nif (overlay.a >= 0.99) {\noverlay.a = 0.75;\ntexel.rgb = vec3(luminance_post(texel.rgb));\n}\n}\ntexel.rgb = mix(texel.rgb, sqrt(overlay.rgb)/*sqrt=gamma*/, overlay.a);\n}\nif (objID != 0) {\nvec4 idAtPixel = texture2D(tID, vUv);\nvec3 idDelta = abs(idAtPixel.rgb - objIDv3.rgb);\nif (max(max(idDelta.r, idDelta.g), idDelta.b) < 1e-3) {\ntexel.rgb = mix(texel.rgb, vec3(1.0,1.0,0.0), 0.25);\n}\n}\ngl_FragColor = texel;\n}"].join("\n")};
THREE.ShaderPass=function(a,b){this.textureID=void 0!==b?b:"tDiffuse";this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader});this.renderToScreen=!1;this.enabled=!0;this.clear=!1;this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1);var c=new THREE.BufferGeometry,f=new Float32Array(9);f[0]=-1;f[1]=-1;f[2]=0;f[3]=3;f[4]=-1;f[5]=0;f[6]=-1;f[7]=3;f[8]=0;var d=new Float32Array(6);
d[0]=0;d[1]=0;d[2]=2;d[3]=0;d[4]=0;d[5]=2;c.addAttribute("position",new THREE.BufferAttribute(f,3));c.addAttribute("uv",new THREE.BufferAttribute(d,2));this.quad=new THREE.Mesh(c,this.material);this.scene=new THREE.Scene;this.scene.add(this.quad)};THREE.ShaderPass.prototype={render:function(a,b,c,f){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=c);this.renderToScreen||!b?a.render(this.scene,this.camera):a.render(this.scene,this.camera,b,this.clear)}};
SAOShader={uniforms:{tDepth:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},radius:{type:"f",value:10},bias:{type:"f",value:0.01},projScale:{type:"f",value:500},projInfo:{type:"v4",value:new THREE.Vector4(0,0,0,0)},intensity:{type:"f",value:0.5},isOrtho:{type:"f",value:1},tDepth_mip1:{type:"t",value:null},tDepth_mip2:{type:"t",value:null},tDepth_mip3:{type:"t",value:null},tDepth_mip4:{type:"t",value:null},tDepth_mip5:{type:"t",
value:null}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#extension GL_OES_standard_derivatives : enable\n#define USE_MIPMAP 1\nuniform float cameraNear;\nuniform float cameraFar;\nuniform vec2 size;\nuniform float lumInfluence;\nvarying vec2 vUv;\n#define NUM_SAMPLES (17)\n#define LOG_MAX_OFFSET (3)\n#define MAX_MIP_LEVEL (5)\n#define NUM_SPIRAL_TURNS (7)\nuniform float           projScale;\nuniform sampler2D tDepth;\n#ifdef USE_MIPMAP\nuniform sampler2D tDepth_mip1;\nuniform sampler2D tDepth_mip2;\nuniform sampler2D tDepth_mip3;\nuniform sampler2D tDepth_mip4;\nuniform sampler2D tDepth_mip5;\n#endif\nuniform float radius;\nuniform float bias;\nuniform float intensity;\nuniform float isOrtho;\nfloat intensityDivR6 = intensity / pow(radius, 6.0);\nvec2 tapLocation(int sampleNumber, float spinAngle, out float ssR){\nfloat alpha = float(float(sampleNumber) + 0.5) * (1.0 / float(NUM_SAMPLES));\nfloat angle = alpha * (float(NUM_SPIRAL_TURNS) * 6.28) + spinAngle;\nssR = alpha;\nreturn vec2(cos(angle), sin(angle));\n}\nfloat CSZToKey(float z) {\nreturn clamp(z * (1.0 / -cameraFar), 0.0, 1.0);\n}\nvoid packKey(float key, out vec2 p) {\nfloat temp = floor(key * 256.0);\np.x = temp * (1.0 / 256.0);\np.y = key * 256.0 - temp;\n}\nfloat unpackDepth( const in vec4 rgba_depth ) {\nfloat depth = dot( rgba_depth, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/160581375.0) );\nif (depth == 0.0)\nreturn -cameraFar * 1.0e10;\nreturn depth * (cameraNear - cameraFar) - cameraNear;\n}\nuniform vec4 projInfo;\nvec3 reconstructCSPosition(vec2 S, float z) {\nreturn vec3((S.xy * projInfo.xy + projInfo.zw) * mix(z, -1.0, isOrtho), z);\n}\nvec3 reconstructCSFaceNormal(vec3 C) {\nreturn normalize(cross(dFdy(C), dFdx(C)));\n}\nvec3 reconstructNonUnitCSFaceNormal(vec3 C) {\nreturn cross(dFdy(C), dFdx(C));\n}\nvec2 sizeM1 = vec2(1.0/(size.x), 1.0/(size.y));\nvec3 getPosition(ivec2 ssP, float depth) {\nvec3 P;\nP = reconstructCSPosition(vec2(ssP) + vec2(0.5), depth);\nreturn P;\n}\nvec3 getOffsetPosition(ivec2 ssC, vec2 unitOffset, float ssR) {\nivec2 ssP = ivec2(ssR * unitOffset) + ssC;\nvec3 P;\nvec2 screenUV = (vec2(ssP) + vec2(0.5)) * sizeM1;\n#ifdef USE_MIPMAP\nint mipLevel = int(max(0.0, min(floor(log2(ssR)) - float(LOG_MAX_OFFSET), float(MAX_MIP_LEVEL))));\nif (mipLevel == 0) {\nP.z = texture2D(tDepth, screenUV).z;\nif (P.z == 0.0) P.z = -cameraFar * 1.0e10;\n}\nelse if (mipLevel == 1)\nP.z = unpackDepth(texture2D(tDepth_mip1, screenUV));\nelse if (mipLevel == 2)\nP.z = unpackDepth(texture2D(tDepth_mip2, screenUV));\nelse if (mipLevel == 3)\nP.z = unpackDepth(texture2D(tDepth_mip3, screenUV));\nelse if (mipLevel == 4)\nP.z = unpackDepth(texture2D(tDepth_mip4, screenUV));\nelse if (mipLevel == 5)\nP.z = unpackDepth(texture2D(tDepth_mip5, screenUV));\n#else\nP.z = texture2D(tDepth, screenUV).z;\nif (P.z == 0.0) P.z = -cameraFar * 1.0e10;\n#endif\nP = reconstructCSPosition(vec2(ssP) + vec2(0.5), P.z);\nreturn P;\n}\nfloat radius2 = radius * radius;\nfloat invRadius2 = 1.0 / radius2;\nfloat sampleAO(in ivec2 ssC, in vec3 C, in vec3 n_C, in float ssDiskRadius, in int tapIndex, in float randomPatternRotationAngle) {\nfloat ssR;\nvec2 unitOffset = tapLocation(tapIndex, randomPatternRotationAngle, ssR);\nssR *= ssDiskRadius;\nvec3 Q = getOffsetPosition(ssC, unitOffset, ssR);\nvec3 v = Q - C;\nfloat vv = dot(v, v);\nfloat vn = dot(v, n_C);\nconst float epsilon = 0.01;\nfloat f = max(radius2 - vv, 0.0); return f * f * f * max((vn - bias) / (epsilon + vv), 0.0);\n}\nconst bool useNoise = true;\nvec2 rand( const vec2 coord ) {\nvec2 noise;\nif ( useNoise ) {\nfloat nx = dot ( coord, vec2( 12.9898, 78.233 ) );\nfloat ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );\nnoise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );\n} else {\nfloat ff = fract( 1.0 - coord.s * ( size.x / 2.0 ) );\nfloat gg = fract( coord.t * ( size.y / 2.0 ) );\nnoise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;\n}\nreturn ( noise * 2.0  - 1.0 );\n}\nfloat getRandomAngle(vec2 pos) {\nvec2 rnd = rand(pos);\nreturn atan(rnd.y, rnd.x);\n}\nvoid main() {\nivec2 ssC = ivec2(gl_FragCoord.xy);\nvec4 nrmz = texture2D(tDepth, vUv);\nif (nrmz.z == 0.0) {\ngl_FragColor.r = 1.0;\ngl_FragColor.a = 0.0;\npackKey(1.0, gl_FragColor.gb);\nreturn;\n}\nvec3 C = getPosition(ssC, nrmz.z);\npackKey(CSZToKey(C.z), gl_FragColor.gb);\nfloat randomPatternRotationAngle = getRandomAngle(vUv);\nvec3 n_C = vec3(nrmz.x, nrmz.y, sqrt(1.0 - dot(nrmz.xy, nrmz.xy)));\nfloat ssDiskRadius = -projScale * radius / mix(C.z, -1.0, isOrtho);\nfloat sum = 0.0;\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 0, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 1, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 2, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 3, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 4, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 5, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 6, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 7, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 8, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 9, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 10, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 11, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 12, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 13, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 14, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 15, randomPatternRotationAngle);\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, 16, randomPatternRotationAngle);\nfloat A = max(0.0, 1.0 - sum * intensityDivR6 * (5.0 / float(NUM_SAMPLES)));\nif (abs(dFdx(C.z)) < 0.02) {\nA -= dFdx(A) * (mod(float(ssC.x), 2.0) - 0.5);\n}\nif (abs(dFdy(C.z)) < 0.02) {\nA -= dFdy(A) * (mod(float(ssC.y), 2.0) - 0.5);\n}\ngl_FragColor.r = A;\ngl_FragColor.a = 1.0;\n}"};
SAOBlurShader={uniforms:{tDiffuse:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)},axis:{type:"v2",value:new THREE.Vector2(1,0)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define EDGE_SHARPNESS     (1.0)\n#define SCALE               (2)\n#define R                   (4)\n#define VALUE_TYPE        float\n#define VALUE_COMPONENTS   r\n#define VALUE_IS_KEY       0\n#define KEY_COMPONENTS     gb\n#if __VERSION__ >= 330\nconst float gaussian[R + 1] =\nfloat[](0.153170, 0.144893, 0.122649, 0.092902, 0.062970);  // stddev = 2.0\n#endif\nuniform sampler2D   tDiffuse;\nuniform vec2 size;\nuniform vec2 resolution;\nuniform vec2       axis;\nivec2 axisi = ivec2(axis);\n#define  result         gl_FragColor.VALUE_COMPONENTS\n#define  keyPassThrough gl_FragColor.KEY_COMPONENTS\nfloat unpackKey(vec2 p) {\nreturn p.x * (256.0 / 257.0) + p.y * (1.0 / 257.0);\n}\nvarying vec2 vUv;\nvoid main() {\n#   if __VERSION__ < 330\nfloat gaussian[R + 1];\n#       if R == 3\ngaussian[0] = 0.153170; gaussian[1] = 0.144893; gaussian[2] = 0.122649; gaussian[3] = 0.092902;  // stddev = 2.0\n#       elif R == 4\ngaussian[0] = 0.153170; gaussian[1] = 0.144893; gaussian[2] = 0.122649; gaussian[3] = 0.092902; gaussian[4] = 0.062970;  // stddev = 2.0\n#       elif R == 6\ngaussian[0] = 0.111220; gaussian[1] = 0.107798; gaussian[2] = 0.098151; gaussian[3] = 0.083953; gaussian[4] = 0.067458; gaussian[5] = 0.050920; gaussian[6] = 0.036108;\n#       endif\n#   endif\nivec2 ssC = ivec2(gl_FragCoord.xy);\nvec4 temp = texture2D(tDiffuse, vUv);\ngl_FragColor.gb = temp.KEY_COMPONENTS;\ngl_FragColor.a = temp.a;\nVALUE_TYPE sum = temp.VALUE_COMPONENTS;\nif (temp.a == 0.0) {\nresult = sum;\nreturn;\n}\nfloat key = unpackKey(keyPassThrough);\nfloat BASE = gaussian[0];\nfloat totalWeight = BASE;\nsum *= totalWeight;\nint r = -4; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[4];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nr = -3; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[3];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nr = -2; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[2];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nr=-1; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[1];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nr = 1; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[1];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nr = 2; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[2];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nr = 3; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[3];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nr = 4; {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[4];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\nconst float epsilon = 0.0001;\nresult = sum / (totalWeight + epsilon);\n}"};
SAOMinifyFirstShader={uniforms:{tDiffuse:{type:"t",value:null},cameraNear:{type:"f",value:1},cameraInvNearFar:{type:"f",value:100},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nuniform float cameraNear;\nuniform float cameraInvNearFar;\nvarying vec2 vUv;\nvec4 packDepth( const in float depth ) {\nvec4 enc = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nenc = fract(enc);\nenc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\nreturn enc;\n}\nvoid main() {\nvec2 ssP = vec2(gl_FragCoord.xy);\nssP = ssP * 2.0 + mod(ssP, 2.0);\nssP = (ssP + 0.5) * resolution * 0.5;\nfloat depth = texture2D(tDiffuse, ssP).z;\nif (depth != 0.0)\ndepth = (depth + cameraNear) * cameraInvNearFar;\ngl_FragColor = packDepth(depth);\n}"};
SAOMinifyShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvoid main() {\nvec2 ssP = vec2(gl_FragCoord.xy);\nssP = ssP * 2.0 + mod(ssP, 2.0);\nssP = (ssP + 0.5) * resolution * 0.5;\ngl_FragColor = texture2D(tDiffuse, ssP);\n}"};
FireflyPhongShader={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.lights,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)},offsetRepeatBump:{type:"v4",value:new THREE.Vector4(0,0,1,1)},offsetRepeatAlpha:{type:"v4",value:new THREE.Vector4(0,
0,1,1)},irradianceMap:{type:"t",value:null},exposureBias:{type:"f",value:1}}]),vertexShader:"varying vec3 vViewPosition;\nvarying vec3 vNormal;\n#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvarying vec2 vUvBump;\nuniform vec4 offsetRepeatBump;\n#endif\n#if defined( USE_ALPHAMAP ) || defined( USE_ALPHAMAP )\nvarying vec2 vUvAlpha;\nuniform vec4 offsetRepeatAlpha;\n#endif\n#if defined( USE_ENVMAP )\n#if ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvarying vec3 vWorldPosition;\n#endif\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvarying float vFragDepth;\n#endif\nuniform float logDepthBufFC;\n#endif\n#ifdef MRT_NORMALS\nvarying float depth;\n#endif\nvoid main() {\n#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvUvBump = uv * offsetRepeatBump.zw + offsetRepeatBump.xy;\n#endif\n#if defined( USE_ALPHAMAP )\nvUvAlpha = uv * offsetRepeatAlpha.zw + offsetRepeatAlpha.xy;\n#endif\n#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif\nvec3 objectNormal = normal;\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\nvNormal = normalize( transformedNormal );\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvViewPosition = -mvPosition.xyz;\n#if MAX_SPOT_LIGHTS > 0\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\n#endif\n#ifdef USE_LOGDEPTHBUF\nif (projectionMatrix[3][3] == 0.0) {\ngl_Position.z = log2(max(1.0e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n#ifdef USE_LOGDEPTHBUF_EXT\nvFragDepth = 1.0 + gl_Position.w;\n#else\ngl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n#endif\n} else {\n#ifdef USE_LOGDEPTHBUF_EXT\nvFragDepth = 1.0 + vViewPosition.z;\n#else\n#endif\n}\n#endif\n#ifdef MRT_NORMALS\ndepth = mvPosition.z;\n#endif\n}",
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvarying vec2 vUvBump;\n#endif\n#if defined( USE_ALPHAMAP )\nvarying vec2 vUvAlpha;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif\nconst mat3 InverseM = mat3(\n6.0014, -2.7008, -1.7996,\n-1.3320,  3.1029, -5.7721,\n0.3008, -1.0882,  5.6268);\nvec3 LogLuvDecode(in vec4 vLogLuv) {\nfloat Le = vLogLuv.b * 255.0 + vLogLuv.a;\nvec3 Xp_Y_XYZp;\nXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\nXp_Y_XYZp.z = Xp_Y_XYZp.y / vLogLuv.g;\nXp_Y_XYZp.x = vLogLuv.r * Xp_Y_XYZp.z;\nvec3 vRGB = InverseM * Xp_Y_XYZp;\nreturn max(vRGB, vec3(0.0));\n}\n#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#endif\n#endif\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef USE_IRRADIANCEMAP\nuniform samplerCube irradianceMap;\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;\n#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUvBump );\nvec2 dSTdy = dFdy( vUvBump );\nfloat Hll = bumpScale * texture2D( bumpMap, vUvBump ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUvBump + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUvBump + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif\n#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUvBump.st );\nvec2 st1 = dFdy( vUvBump.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUvBump ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif\n#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif\n#ifdef USE_ALPHAMAP\nuniform sampler2D alphaMap;\n#endif\n#ifdef MRT_NORMALS",
"undefined"!==typeof _isIE11&&_isIE11?"":"#extension GL_EXT_draw_buffers : require","varying float depth;\n#define gl_FragColor gl_FragData[0]\n#endif\n#ifdef TONEMAP_OUTPUT\nuniform float exposureBias;",TonemapShaderChunk,"#endif\n#ifdef USE_LOGDEPTHBUF\nuniform float logDepthBufFC;\n#ifdef USE_LOGDEPTHBUF_EXT\n#extension GL_EXT_frag_depth : enable\nvarying float vFragDepth;\n#endif\n#endif\nvoid main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif\n#ifdef USE_ALPHAMAP\nvec4 texelAlpha = texture2D( alphaMap, vUvAlpha );\ngl_FragColor.a *= texelAlpha.r;\n#endif\n#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif\nfloat specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif\nvec3 normal = normalize( vNormal );\nvec3 geomNormal = normal;\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = shininess * 0.125 + 0.25;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max(1.0 - dot( lVector, pointHalfVector ), 0.0), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization ;\n}\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = shininess * 0.125 + 0.25;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max(1.0 - dot( lVector, spotHalfVector ), 0.0), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n}\n}\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = shininess * 0.125 + 0.25;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max(1.0 - dot( dirVector, dirHalfVector ), 0.0), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n}\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#ifdef USE_IRRADIANCEMAP\nvec3 worldNormal = mat3( viewMatrixInverse[ 0 ].xyz, viewMatrixInverse[ 1 ].xyz, viewMatrixInverse[ 2 ].xyz ) * normal;\nvec4 cubeColor4 = textureCube(irradianceMap, worldNormal);\n#ifdef IRR_LOGLUV\nvec3 indirectDiffuse = LogLuvDecode(cubeColor4);\n#else\nvec3 indirectDiffuse = cubeColor.xyz;\n#ifdef GAMMA_INPUT\nindirectDiffuse.xyz *= indirectDiffuse.xyz;\n#endif\n#endif\ntotalDiffuse += diffuse * indirectDiffuse;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif\n#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif\n#if defined(USE_ENVMAP)\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( -vViewPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nvec3 cameraToVertex = normalize( -vViewPosition );\nreflectVec = reflect( cameraToVertex, vNormal );\n#endif\nreflectVec = mat3( viewMatrixInverse[ 0 ].xyz, viewMatrixInverse[ 1 ].xyz, viewMatrixInverse[ 2 ].xyz ) * reflectVec;\nfloat logShiny = log(max(1.0+1e-10, shininess));\n#ifdef ENV_LOGLUV\nfloat MipmapIndex = max(0.0, -0.72134752 * logShiny + 5.5);\nvec4 envTexColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ), MipmapIndex );\nvec3 cubeColor = LogLuvDecode(envTexColor);\n#else\nvec4 envTexColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\nvec3 cubeColor = envTexColor.xyz;\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\n#endif\nfloat facing = dot( viewPosition, normal );\nif (facing < 0.0) {\nfacing = 1.0;\n}\nvec4 speca = vec4(specular, gl_FragColor.a);\n#ifdef METAL\nvec4 schlickRefl = speca;\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * schlickRefl.xyz;\ngl_FragColor.a = speca.a;\n#else\n#ifdef CLEARCOAT\nvec3 cubeColorClearcoat;\nvec3 reflectVecClearcoat = reflect( -vViewPosition, vNormal );\nreflectVecClearcoat = mat3( viewMatrixInverse[ 0 ].xyz, viewMatrixInverse[ 1 ].xyz, viewMatrixInverse[ 2 ].xyz ) * reflectVecClearcoat;\n#ifdef ENV_LOGLUV\nvec4 envTexColorClearcoat = textureCube( envMap, vec3( flipEnvMap * reflectVecClearcoat.x, reflectVecClearcoat.yz ));\ncubeColorClearcoat = LogLuvDecode(envTexColorClearcoat);\n#else\nvec4 envTexColorClearcoat = textureCube( envMap, vec3( flipEnvMap * reflectVecClearcoat.x, reflectVecClearcoat.yz ) );\ncubeColorClearcoat = envTexColorClearcoat.xyz;\n#ifdef GAMMA_INPUT\ncubeColorClearcoat.xyz *= cubeColorClearcoat.xyz;\n#endif\n#endif\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * speca.xyz;\nfloat schlickRefl = reflectivity + ( 1.0 - reflectivity ) * pow( max(1.0 - facing, 0.0), 5.0 );\ngl_FragColor.xyz = mix(gl_FragColor.xyz, cubeColorClearcoat * schlickRefl, 0.5);\n#else\nvec4 schlickRefl = speca + ( 1.0 - speca ) * pow( max(1.0 - facing, 0.0), 5.0 );\nschlickRefl.rgb *= max(0.0, 1.0 - 2.0 / logShiny);\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * schlickRefl.xyz );\ngl_FragColor.a = schlickRefl.a;\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * schlickRefl.xyz;\ngl_FragColor.a = schlickRefl.a;\n} else {\ngl_FragColor = mix( gl_FragColor, vec4(gl_FragColor.xyz * cubeColor.xyz, gl_FragColor.a), specularStrength * schlickRefl );\n}\n#endif\n#endif\n#endif\n#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif\n#ifdef TONEMAP_OUTPUT\ngl_FragColor.xyz = toneMapCanonFilmic_WithGamma( exposureBias * gl_FragColor.xyz );\n#endif\n#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\ngl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif\n#ifdef MRT_NORMALS\ngeomNormal = geomNormal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\ngl_FragData[1] = vec4(geomNormal.x, geomNormal.y, depth, gl_FragColor.a < 1.0 ? 0.0 : 1.0);\n#endif\n}"].join("\n")};
THREE.ShaderLib.firefly_phong=FireflyPhongShader;NormalsShader={uniforms:{},vertexShader:"varying vec3 vNormal;\nvarying float depth;\nvoid main() {\nvNormal = normalize( normalMatrix * normal );\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ndepth = mvPosition.z;\nvec4 p_Position = projectionMatrix * mvPosition;\ngl_Position = p_Position;\n}",fragmentShader:"varying vec3 vNormal;\nvarying float depth;\nvoid main() {\nvec3 n = vNormal;\nn = n * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nn = normalize( n );\ngl_FragColor = vec4(n.x, n.y, depth, 1.0);\n}"};
BackgroundShader={uniforms:{color1:{type:"v4",value:new THREE.Vector4(1/255,2/255,3/255,1)},color2:{type:"v4",value:new THREE.Vector4(41/255,76/255,120/255,1)},luminance:{type:"f",value:1},linearize:{type:"i",value:0}},vertexShader:"uniform vec4 color1;\nuniform vec4 color2;\nuniform float luminance;\nuniform int linearize;\nvarying vec4 vcolor;\nvoid main() {\nif (uv.y == 0.0)\nvcolor = color1;\nelse\nvcolor = color2;\nif (linearize != 0)\nvcolor *= vcolor;\nvcolor *= luminance;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
fragmentShader:"const vec4 c0 = vec4(1.0, 13.0, 4.0, 16.0);\nconst vec4 c1 = vec4(9.0, 5.0, 12.0, 8.0);\nconst vec4 c2 = vec4(3.0, 15.0, 2.0, 14.0);\nconst vec4 c3 = vec4(11.0, 7.0, 10.0, 6.0);\nvarying vec4 vcolor;\nvoid main() {\nvec4 c = vcolor;\nint i = int(mod(float(gl_FragCoord.x), 4.0));\nint j = int(mod(float(gl_FragCoord.y), 4.0));\nvec4 col;\nif (i==0) col = c0; else if (i==1) col = c1; else if (i==2) col = c2; else col = c3;\nfloat bias;\nif (j==0) bias = col.x; else if (j==1) bias = col.y; else if (j==2) bias = col.z; else bias = col.w;\nc.xyz += bias * (1.0/(17.0*256.0));\ngl_FragColor = c;\n}"};
LineShader={uniforms:{pixelsPerUnit:{type:"f",value:1},unitsPerPixel:{type:"f",value:1},tLayerMask:{type:"t",value:null},tRaster:{type:"t",value:null},tSelectionTexture:{type:"t",value:null},vSelTexSize:{type:"v2",value:new THREE.Vector2(4096,1)}},attributes:{fields1:0,fields2:0,color4b:0,dbId4b:0,flags4b:0,extraParams:0,instFlags4b:0},defines:{},vertexShader:"#define TAU 6.28318530718\n#define PI 3.14159265358979\n#define HALF_PI 1.57079632679\n#define VBB_LINE_SEGMENT     16.0\n#define VBB_ARC_CIRCULAR     32.0\n#define VBB_ARC_ELLIPTICAL   48.0\n#define VBB_TEX_QUAD         64.0\n#define VBB_ONE_TRIANGLE     80.0\n#define VBB_INSTANCED_FLAG   0.0\n#define VBB_SEG_START_RIGHT  1.0\n#define VBB_SEG_START_LEFT   2.0\n#define VBB_SEG_END_RIGHT    3.0\n#define VBB_SEG_END_LEFT     4.0\nattribute vec3 fields1;\nattribute vec3 fields2;\nattribute vec4 color4b;\nattribute vec4 dbId4b;\nattribute vec4 flags4b;\n#ifdef HAS_ELLIPTICALS\nattribute vec3 extraParams;\n#endif\nattribute vec4 instFlags4b;\nuniform mat4 mvpMatrix;\nuniform float pixelsPerUnit;\nuniform float unitsPerPixel;\nuniform sampler2D tLayerMask;\n#ifdef SELECTION_RENDERER\nuniform sampler2D tSelectionTexture;\nuniform vec2 vSelTexSize;\n#endif\nvarying vec4 outColor;\nvarying vec4 dbId;\nvarying vec2 centralVertex;\nvarying vec2 offsetPosition;\nvarying vec4 multipurpose;\nvarying float halfWidth;\nvoid strokeLineSegment(float vertexId) {\nfloat distanceAlong = fields2.x;\nfloat isStartCapVertex = (vertexId < VBB_SEG_END_RIGHT) ? -1.0 : 1.0;\nfloat isLeftSide = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? 1.0 : -1.0;\nfloat angleTransverse = fields1.z + isLeftSide * HALF_PI;\nfloat st = sin(angleTransverse);\nfloat ct = cos(angleTransverse);\nfloat lwAdjustment = halfWidth + 0.5 * unitsPerPixel;\nvec2 transverseOffset = vec2(ct, st) * lwAdjustment;\noffsetPosition.xy += transverseOffset;\nvec2 moveOffset = isStartCapVertex * isLeftSide * vec2(-transverseOffset.y, transverseOffset.x);\noffsetPosition.xy -= moveOffset;\ncentralVertex.xy -= moveOffset;\nfloat distanceFromStart = max(isStartCapVertex, 0.0) * distanceAlong;\nvec2 along = distanceFromStart * vec2(cos(fields1.z), sin(fields1.z));\noffsetPosition.xy += along;\ncentralVertex.xy += along;\nmultipurpose.x = (isStartCapVertex * lwAdjustment) + distanceFromStart;\nmultipurpose.y = distanceAlong;\nmultipurpose.z = 0.0;\n}\n#ifdef HAS_TRIANGLE_GEOMS\nvoid strokeOneTriangle(float vertexId) {\nhalfWidth = 0.0;\nif (vertexId == VBB_SEG_END_RIGHT)\noffsetPosition.xy = vec2(fields1.z, fields2.x);\nelse if (vertexId == VBB_SEG_END_LEFT)\noffsetPosition.xy = fields2.yz;\n}\n#endif\n#ifdef HAS_RASTER_QUADS\nvoid strokeTexQuad(float vertexId) {\nfloat distanceAlong = fields2.x;\nbool isStartCapVertex = (vertexId < VBB_SEG_END_RIGHT);\nfloat isLeftSide = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? 1.0 : -1.0;\nfloat angleTransverse = fields1.z + isLeftSide * HALF_PI;\nmultipurpose.y = distanceAlong;\nfloat st = sin(angleTransverse);\nfloat ct = cos(angleTransverse);\nfloat moveDist = halfWidth;\nvec2 offset = vec2(ct, st) * moveDist;\noffsetPosition.xy += offset;\nmultipurpose.z = 1.0;\nhalfWidth = 0.0;\nif (isStartCapVertex) {\noffsetPosition.xy += isLeftSide * vec2(0.0, offset.x);\nmultipurpose.x = 0.0;\nmultipurpose.y = max(0.0, isLeftSide);\n}\nelse {\nvec2 along = vec2(cos(fields1.z), sin(fields1.z));\noffsetPosition.xy += distanceAlong * along;\ncentralVertex.xy += distanceAlong * along;\noffsetPosition.xy += isLeftSide * vec2(0.0, -offset.x);\nmultipurpose.x = 1.0;\nmultipurpose.y = max(0.0, isLeftSide);\n}\n}\n#endif\n#ifdef HAS_CIRCLES\nvoid strokeCircularArc(float vertexId) {\nvec2 angles = vec2(fields1.z, fields2.x);\nfloat r = fields2.z;\nif (r * pixelsPerUnit < 0.125)\nr = 0.125 * unitsPerPixel;\nfloat isStart = (vertexId < VBB_SEG_END_RIGHT) ? -1.0 : 1.0;\nfloat isLeft = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? -1.0 : 1.0;\nvec2 minPt;\nvec2 maxPt;\nvec2 endsX = vec2(fields1.x) + r * cos(angles);\nvec2 endsY = vec2(fields1.y) + r * sin(angles);\nminPt = maxPt = vec2(endsX.x, endsY.x);\nminPt = min(minPt, vec2(endsX.y, endsY.y));\nmaxPt = max(maxPt, vec2(endsX.y, endsY.y));\nfloat start = angles.x;\nfloat end = angles.y;\nif (end > start) {\nif (start < (0.5 * PI) && end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + r));\n}\nif (start < PI && end > PI) {\nminPt = min(minPt, vec2(fields1.x - r, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - r, fields1.y));\n}\nif (start < (1.5 * PI) && end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - r));\n}\n}\nelse {\nminPt = min(minPt, vec2(fields1.x + r, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x + r, fields1.y));\nif (start < (0.5 * PI) || end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + r));\n}\nif (start < PI || end > PI) {\nminPt = min(minPt, vec2(fields1.x - r, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - r, fields1.y));\n}\nif (start < (1.5 * PI) || end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - r));\n}\n}\nminPt -= halfWidth + 0.5 * unitsPerPixel;\nmaxPt += halfWidth + 0.5 * unitsPerPixel;\nif (isStart<0.0)\noffsetPosition.x = minPt.x;\nelse\noffsetPosition.x = maxPt.x;\nif (isLeft<0.0)\noffsetPosition.y = minPt.y;\nelse\noffsetPosition.y = maxPt.y;\nmultipurpose.x = angles.x;\nmultipurpose.y = -r;\nmultipurpose.z = angles.y;\nmultipurpose.w = -r;\n}\n#endif\n#ifdef HAS_ELLIPTICALS\nvoid strokeEllipticalArc(float vertexId) {\nvec2 angles = vec2(fields1.z, fields2.x);\nfloat isStart = (vertexId < VBB_SEG_END_RIGHT) ? -1.0 : 1.0;\nfloat isLeft = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? -1.0 : 1.0;\nfloat major = fields2.z;\nfloat minor = extraParams.x;\nvec2 minPt;\nvec2 maxPt;\nvec2 endsX = vec2(fields1.x) + major * cos(angles);\nvec2 endsY = vec2(fields1.y) + minor * sin(angles);\nminPt = maxPt = vec2(endsX.x, endsY.x);\nminPt = min(minPt, vec2(endsX.y, endsY.y));\nmaxPt = max(maxPt, vec2(endsX.y, endsY.y));\nfloat start = angles.x;\nfloat end = angles.y;\nif (end > start) {\nif (start < (0.5 * PI) && end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + minor));\n}\nif (start < PI && end > PI) {\nminPt = min(minPt, vec2(fields1.x - major, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - major, fields1.y));\n}\nif (start < (1.5 * PI) && end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - minor));\n}\n}\nelse {\nminPt = min(minPt, vec2(fields1.x + major, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x + major, fields1.y));\nif (start < (0.5 * PI) || end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + minor));\n}\nif (start < PI || end > PI) {\nminPt = min(minPt, vec2(fields1.x - major, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - major, fields1.y));\n}\nif (start < (1.5 * PI) || end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - minor));\n}\n}\nminPt -= halfWidth + 0.5 * unitsPerPixel;\nmaxPt += halfWidth + 0.5 * unitsPerPixel;\nif (isStart < 0.0)\noffsetPosition.x = minPt.x;\nelse\noffsetPosition.x = maxPt.x;\nif (isLeft < 0.0)\noffsetPosition.y = minPt.y;\nelse\noffsetPosition.y = maxPt.y;\nmultipurpose.x = angles.x;\nmultipurpose.y = -major;\nmultipurpose.z = angles.y;\nmultipurpose.w = minor;\n}\n#endif\n#ifdef SELECTION_RENDERER\nbool isSelected() {\nvec3 oid = dbId4b.rgb * 255.0;\nfloat id01 = oid.r + oid.g * 256.0;\nfloat t = (id01 + 0.5) * (1.0 / 4096.0);\nfloat flrt = floor(t);\nfloat texU = t - flrt;\nfloat id23 = oid.b * (65536.0 / 4096.0) + flrt;\nt = (id23 + 0.5) / vSelTexSize.y;\nfloat texV = fract(t);\nvec4 selBit = texture2D(tSelectionTexture, vec2(texU, texV));\nreturn selBit.r == 1.0;\n}\n#endif\nbool isLayerOff() {\nvec4 layerBit = texture2D(tLayerMask, flags4b.ba / 255.0);\nreturn layerBit.r == 0.0;\n}\nvoid main() {\ncentralVertex = offsetPosition = fields1.xy;\nif (isLayerOff()) {\noutColor = vec4(0.0);\n}\nelse {\nfloat vertexId = mod(flags4b.x, 16.0);\nfloat geomType = flags4b.x - vertexId;\nvertexId = max(instFlags4b.x, vertexId);\nfloat lineWeight = fields2.y;\nif (lineWeight > 0.0) {\nif (lineWeight * pixelsPerUnit < 0.5)\nlineWeight = 0.5 * unitsPerPixel;\n}\nelse {\nlineWeight = abs(lineWeight) * unitsPerPixel;\n}\n#ifdef SELECTION_RENDERER\nif (isSelected())\noutColor = vec4(0.0,0.0,1.0,1.0);\nelse\noutColor = vec4(0.0);\n#else\noutColor = color4b;\n#endif\nhalfWidth = lineWeight;\ndbId = dbId4b;\nif (geomType == VBB_LINE_SEGMENT)\nstrokeLineSegment(vertexId);\n#ifdef HAS_CIRCLES\nelse if (geomType == VBB_ARC_CIRCULAR)\nstrokeCircularArc(vertexId);\n#endif\n#ifdef HAS_ELLIPTICALS\nelse if (geomType == VBB_ARC_ELLIPTICAL)\nstrokeEllipticalArc(vertexId);\n#endif\n#ifdef HAS_RASTER_QUADS\nelse if (geomType == VBB_TEX_QUAD)\nstrokeTexQuad(vertexId);\n#endif\n#ifdef HAS_TRIANGLE_GEOMS\nelse if (geomType == VBB_ONE_TRIANGLE)\nstrokeOneTriangle(vertexId);\n#endif\nelse {\nhalfWidth = 0.0;\nmultipurpose.z = 0.0;\n}\n}\ngl_Position = mvpMatrix * vec4( offsetPosition.xy, 0.0, 1.0 );\n}",
fragmentShader:"#define TAU 6.28318530717958\n#define PI  3.14159265358979\nuniform float pixelsPerUnit;\nuniform float unitsPerPixel;\nfloat aaRange = 0.5 * unitsPerPixel;\n#ifdef HAS_RASTER_QUADS\nuniform sampler2D tRaster;\n#endif\nvarying vec4 outColor;\nvarying vec4 dbId;\n#ifdef MRT_ID_BUFFER\n#extension GL_EXT_draw_buffers : enable\n#define gl_FragColor gl_FragData[0]\n#endif\nvarying vec2 centralVertex;\nvarying vec2 offsetPosition;\nvarying vec4 multipurpose;\nvarying float halfWidth;\nfloat curveGaussian(float r, float invWidth) {\nfloat amt = clamp(r * invWidth, 0.0, 1.0);\nfloat exponent = amt * 3.5;\nreturn exp(-exponent*exponent);\n}\nvoid fillLineSegment() {\nfloat radius = halfWidth;\nfloat parametricDistance = multipurpose.x;\nfloat segmentLength = multipurpose.y;\nfloat ltz = max(0.0, sign(parametricDistance));\nfloat gtsl = max(0.0, sign(parametricDistance - segmentLength));\nfloat d = (1.0 - ltz + gtsl) * (parametricDistance - ltz * segmentLength);\nradius = sqrt(max(0.0, radius * radius - d * d));\nfloat dist = distance(centralVertex, offsetPosition);\nfloat range =  dist - radius;\nif (range > aaRange) {\ndiscard;\n}\ngl_FragColor = outColor;\ngl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\n}\n#ifdef HAS_CIRCLES\nvoid fillCircularArc() {\nfloat dist = distance(centralVertex, offsetPosition);\nfloat radius = abs(multipurpose.y);\nfloat range =  abs(dist - radius);\nrange -= halfWidth;\nif (range > aaRange) {\ndiscard;\n}\nvec2 angles = multipurpose.xz;\nvec2 direction = offsetPosition - centralVertex;\nfloat angle = atan(direction.y, direction.x);\nif (angles.x > angles.y)\nangles.x -= TAU;\nelse if (angle < 0.0)\nangle += TAU;\nif (angle > angles.x && angle < angles.y) {\ngl_FragColor = outColor;\ngl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\n}\nelse {\ndiscard;\n}\n}\n#endif\n#ifdef HAS_ELLIPTICALS\nfloat DistancePointEllipseSpecial (vec2 e, vec2 y, out vec2 x, float width, float aaRange) {\nfloat dist;\nvec2 esqr = e * e;\nvec2 ey = e * y;\nfloat t0 = -esqr[1] + ey[1];\nfloat t1 = -esqr[1] + length(ey);\nfloat t;\nvec2 r;\nfor (int i = 0; i < 6; ++i) {\nt = mix(t0, t1, 0.5);//0.5*(t0 + t1);\nr = ey / (vec2(t) + esqr);\nvec2 rsq = r * r;\nfloat f = rsq[0] + rsq[1] - 1.0;\nfloat fsign = sign(f);\nt0 = mix(t0, t, max(0.0, fsign));\nt1 = mix(t1, t, max(0.0, -fsign));\n}\nx = e * r;\ndist = distance(x, y);\nif (dist > max(2.0 * (width + aaRange), e[0] * 0.05))\nreturn dist;\nfor (int i = 0; i < 6; ++i) {\nt = mix(t0, t1, 0.5);//0.5*(t0 + t1);\nr = ey / (vec2(t) + esqr);\nvec2 rsq = r * r;\nfloat f = rsq[0] + rsq[1] - 1.0;\nfloat fsign = sign(f);\nt0 = mix(t0, t, max(0.0, fsign));\nt1 = mix(t1, t, max(0.0, -fsign));\n}\nx = e * r;\ndist = distance(x, y);\nfloat ecc = 1.0 +  0.1 * e[0] / e[1];\nif (dist > max(ecc * (width + aaRange), e[0] * 0.001))\nreturn dist;\nif (dist < (width - aaRange) / ecc)\nreturn dist;\nfor (int i = 0; i < 10; ++i) {\nt = mix(t0, t1, 0.5);//0.5*(t0 + t1);\nr = ey / (vec2(t) + esqr);\nvec2 rsq = r * r;\nfloat f = rsq[0] + rsq[1] - 1.0;\nfloat fsign = sign(f);\nt0 = mix(t0, t, max(0.0, fsign));\nt1 = mix(t1, t, max(0.0, -fsign));\n}\nx = e * r;\ndist = distance(x, y);\nreturn dist;\n}\nfloat DistancePointEllipse(vec2 e, vec2 y, out vec2 locX, float width, float aaRange) {\nvec2 locE, locY;\nfloat diff = sign(e[0] - e[1]);\nvec2 swizzle = vec2(max(diff, 0.0), -min(diff, 0.0));\nlocE.x = dot(e, swizzle.xy);\nlocE.y = dot(e, swizzle.yx);\nlocY.x = dot(y, swizzle.xy);\nlocY.y = dot(y, swizzle.yx);\nvec2 refl = sign(locY);\nlocY *= refl;\nvec2 x;\nfloat distance = DistancePointEllipseSpecial(locE, locY, x, width, aaRange);\nx *= refl;\nlocX.x = dot(x, swizzle.xy);\nlocX.y = dot(x, swizzle.yx);\nreturn distance;\n}\nvoid fillEllipticalArc() {\nvec2 radii = abs(multipurpose.yw);\nvec2 dir = offsetPosition - centralVertex;\nvec2 pos;\nfloat range = DistancePointEllipse(radii, dir, pos, halfWidth, aaRange);\nrange -= halfWidth;\nif (range > aaRange)\ndiscard;\nfloat ar = radii[0] / radii[1];\nvec2 angles = multipurpose.xz;\nfloat angle = atan(ar * pos.y, pos.x);\nif (angles.x > angles.y)\nangles.x -= TAU;\nelse if (angle < 0.0)\nangle += TAU;\nif (angle > angles.x && angle < angles.y) {\ngl_FragColor = outColor;\ngl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\n}\nelse {\ndiscard;\n}\n}\n#endif\nvoid main() {\nif (outColor.a == 0.0) {\ndiscard;\n}\nif (halfWidth == 0.0) {\n#ifdef HAS_RASTER_QUADS\nif (multipurpose.z != 0.0)\ngl_FragColor = texture2D(tRaster, multipurpose.xy);\nelse\n#endif\ngl_FragColor = outColor;\n}\nelse if (multipurpose.y < 0.0) {\n#ifdef HAS_CIRCLES\n#ifdef HAS_ELLIPTICALS\nif (multipurpose.y == multipurpose.w)\n#endif\nfillCircularArc();\n#endif\n#ifdef HAS_ELLIPTICALS\n#ifdef HAS_CIRCLES\nelse\n#endif\nfillEllipticalArc();\n#endif\n}\nelse\nfillLineSegment();\n#ifdef MRT_ID_BUFFER\ngl_FragData[1] = vec4(dbId.rgb, 1.0);\n#elif defined(ID_COLOR)\ngl_FragColor = vec4(dbId.rgba);\n#endif\n}"};
FireflyWebGLProgram=function(){var a=0;return function(b,c,f,d){var g=b.context,h=f.defines,k=f.__webglShader.uniforms,l=f.attributes,m=f.__webglShader.vertexShader,p=f.__webglShader.fragmentShader,n=f.index0AttributeName;void 0===n&&!0===d.morphTargets&&(n="position");var q="SHADOWMAP_TYPE_BASIC";d.shadowMapType===THREE.PCFShadowMap?q="SHADOWMAP_TYPE_PCF":d.shadowMapType===THREE.PCFSoftShadowMap&&(q="SHADOWMAP_TYPE_PCF_SOFT");var r,s;r=[];for(var u in h)s=h[u],!1!==s&&(s="#define "+u+" "+s,r.push(s));
r=r.join("\n");h=g.createProgram();f instanceof THREE.RawShaderMaterial?b=f="":(f=["precision "+d.precision+" float;","precision "+d.precision+" int;",r,d.supportsVertexTextures?"#define VERTEX_TEXTURES":"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"",d.mrtNormals?"#define MRT_NORMALS":"","#define MAX_DIR_LIGHTS "+d.maxDirLights,"#define MAX_POINT_LIGHTS "+d.maxPointLights,"#define MAX_SPOT_LIGHTS "+d.maxSpotLights,"#define MAX_HEMI_LIGHTS "+d.maxHemiLights,"#define MAX_SHADOWS "+
d.maxShadows,"#define MAX_BONES "+d.maxBones,d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.irradianceMap?"#define USE_IRRADIANCEMAP":"",d.lightMap?"#define USE_LIGHTMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?"#define USE_COLOR":"",d.skinning?"#define USE_SKINNING":"",d.useVertexTexture?"#define BONE_TEXTURE":"",d.morphTargets?"#define USE_MORPHTARGETS":
"",d.morphNormals?"#define USE_MORPHNORMALS":"",d.wrapAround?"#define WRAP_AROUND":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+q:"",d.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",d.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",d.sizeAttenuation?"#define USE_SIZEATTENUATION":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",d.useFragDepthExt?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n"].join("\n"),
b=["precision "+d.precision+" float;","precision "+d.precision+" int;",d.bumpMap||d.normalMap?"#extension GL_OES_standard_derivatives : enable":"",r,"#define MAX_DIR_LIGHTS "+d.maxDirLights,"#define MAX_POINT_LIGHTS "+d.maxPointLights,"#define MAX_SPOT_LIGHTS "+d.maxSpotLights,"#define MAX_HEMI_LIGHTS "+d.maxHemiLights,"#define MAX_SHADOWS "+d.maxShadows,d.alphaTest?"#define ALPHATEST "+d.alphaTest:"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"",d.mrtNormals?"#define MRT_NORMALS":
"",d.tonemapOutput?"#define TONEMAP_OUTPUT":"",d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.irradianceMap?"#define USE_IRRADIANCEMAP":"",d.envLogLuv?"#define ENV_LOGLUV":"",d.irrLogLuv?"#define IRR_LOGLUV":"",d.lightMap?"#define USE_LIGHTMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?
"#define USE_COLOR":"",d.metal?"#define METAL":"",d.clearcoat?"#define CLEARCOAT":"",d.wrapAround?"#define WRAP_AROUND":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+q:"",d.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",d.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",d.useFragDepthExt?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n#ifdef USE_ENVMAP\nuniform mat4 viewMatrixInverse;\n#endif\n"].join("\n"));
m=new THREE.WebGLShader(g,g.VERTEX_SHADER,f+m);p=new THREE.WebGLShader(g,g.FRAGMENT_SHADER,b+p);g.attachShader(h,m);g.attachShader(h,p);void 0!==n&&g.bindAttribLocation(h,0,n);g.linkProgram(h);!1===g.getProgramParameter(h,g.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),console.error("gl.VALIDATE_STATUS",g.getProgramParameter(h,g.VALIDATE_STATUS)),console.error("gl.getError()",g.getError()));""!==g.getProgramInfoLog(h)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",
g.getProgramInfoLog(h));g.deleteShader(m);g.deleteShader(p);n="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition viewMatrixInverse mvpMatrix".split(" ");d.logarithmicDepthBuffer&&n.push("logDepthBufFC");for(var w in k)n.push(w);d=n;k={};w=0;for(n=d.length;w<n;w++)b=d[w],k[b]=g.getUniformLocation(h,b);this.uniforms=k;var n="position normal uv uv2 tangent color lineDistance".split(" "),v;for(v in l)n.push(v);l=n;v={};d=0;for(k=l.length;d<k;d++)w=l[d],v[w]=g.getAttribLocation(h,
w);this.attributes=v;this.id=a++;this.code=c;this.usedTimes=1;this.program=h;this.vertexShader=m;this.fragmentShader=p;return this}}();
FireflyWebGLRenderer=function(a){function b(a,b){var g=b.geometry,h=a.faces3,k=3*h.length,l=1*h.length,m=3*h.length,h=c(b,a),n=d(h),p=f(h),q=h.vertexColors?h.vertexColors:!1;a.__vertexArray=new Float32Array(3*k);p&&(a.__normalArray=new Float32Array(3*k));g.hasTangents&&(a.__tangentArray=new Float32Array(4*k));q&&(a.__colorArray=new Float32Array(3*k));n&&(0<g.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*k)),1<g.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*k)));b.geometry.skinWeights.length&&
b.geometry.skinIndices.length&&(a.__skinIndexArray=new Float32Array(4*k),a.__skinWeightArray=new Float32Array(4*k));g=null!==ib&&21845<l?Uint32Array:Uint16Array;a.__typeArray=g;a.__faceArray=new g(3*l);a.__lineArray=new g(2*m);a.__webglFaceCount=3*l;a.__webglLineCount=2*m;if(h.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var s in h.attributes){var l=h.attributes[s],g={},r;for(r in l)g[r]=l[r];if(!g.__webglInitialized||g.createUniqueBuffers)g.__webglInitialized=
!0,m=1,"v2"===g.type?m=2:"v3"===g.type?m=3:"v4"===g.type?m=4:"c"===g.type&&(m=3),g.size=m,g.array=new Float32Array(k*m),g.buffer=t.createBuffer(),g.buffer.belongsToAttribute=s,l.needsUpdate=!0,g.__original=l;a.__webglCustomAttributesList.push(g)}}a.__inittedArrays=!0}function c(a,b){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[b.materialIndex]:a.material}function f(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==
a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function d(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a instanceof THREE.ShaderMaterial?!0:!1}function g(a){if(a.streamingDraw)!a.streamingIndex&&(a=a.attributes.index)&&(a.buffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a.array,t.STATIC_DRAW));else{a.vb&&(a.vbbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.vbbuffer),
t.bufferData(t.ARRAY_BUFFER,a.vb,t.STATIC_DRAW));var b,c,d;for(b in a.attributes)c=a.attributes[b],c.array&&(d="index"===b?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER,c.buffer=t.createBuffer(),t.bindBuffer(d,c.buffer),t.bufferData(d,c.array,t.STATIC_DRAW))}}function h(a,b,c,d){var f,g,h,k=!1;if(c.vb){if(c.streamingDraw){var n=ta.interleavedVB;n||(n=t.createBuffer(),ta.interleavedVB=n);t.bindBuffer(t.ARRAY_BUFFER,n);t.bufferData(t.ARRAY_BUFFER,c.vb,t.STREAM_DRAW)}else t.bindBuffer(t.ARRAY_BUFFER,c.vbbuffer);
n=c.vbstride;for(h in b)if("index"!=h&&(g=b[h],f=c.attributes[h],0<=g&&f))if(void 0!==f.itemOffset){var p=t.FLOAT;1===f.bytesPerItem&&(p=t.UNSIGNED_BYTE);l(g);t.vertexAttribPointer(g,f.itemSize,p,f.normalize,4*n,4*(f.itemOffset+d*n));Na&&Na.vertexAttribDivisorANGLE(g,f.divisor||0)}else k=!0}else k=!0;if(k)for(h in b)"index"!=h&&(g=b[h],f=c.attributes[h],0<=g&&(f?void 0===f.itemOffset&&(c.streamingDraw?(n=ta[h],n||(n=t.createBuffer(),ta[h]=n),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,
f.array,t.DYNAMIC_DRAW)):t.bindBuffer(t.ARRAY_BUFFER,f.buffer),p=t.FLOAT,1===f.bytesPerItem&&(p=t.UNSIGNED_BYTE),l(g),t.vertexAttribPointer(g,f.itemSize,p,f.normalize,0,d*f.itemSize*4),Na&&Na.vertexAttribDivisorANGLE(g,f.divisor||0)):a.defaultAttributeValues&&((f=a.defaultAttributeValues[h])&&2===f.length?t.vertexAttrib2fv(g,a.defaultAttributeValues[h]):f&&3===f.length&&t.vertexAttrib3fv(g,a.defaultAttributeValues[h]))));m()}function k(){for(var a=0,b=Ba.length;a<b;a++)Ba[a]=0}function l(a){Ba[a]=
1;0===xa[a]&&(t.enableVertexAttribArray(a),xa[a]=1)}function m(){for(var a=0,b=xa.length;a<b;a++)xa[a]!==Ba[a]&&(t.disableVertexAttribArray(a),xa[a]=0)}function p(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function n(a,b){return a.z!==b.z?a.z-b.z:a.id-b.id}function q(a,h,k){if(!1!==h.visible){var l=a.__webglObjects[h.id];if(l&&(!1===h.frustumCulled||!0===Ua.intersectsObject(h))){var m=h.geometry,n,p,s;if(m instanceof THREE.BufferGeometry){var r=t.DYNAMIC_DRAW;if(!m.streamingDraw){var F=m.attributes,
v=!1,u,M;for(u in F)M=F[u],M.needsUpdate&&("index"===u?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,M.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,M.array,r)):M.array?(t.bindBuffer(t.ARRAY_BUFFER,M.buffer),t.bufferData(t.ARRAY_BUFFER,M.array,r)):v=!0,M.needsUpdate=!1);v&&(t.bindBuffer(t.ARRAY_BUFFER,m.vbbuffer),t.bufferData(t.ARRAY_BUFFER,m.vb,r))}}else if(h instanceof THREE.Mesh){if(m.buffersNeedUpdate||m.groupsNeedUpdate)m instanceof THREE.BufferGeometry?g(m):h instanceof THREE.Mesh&&w(a,h,m);for(var Z=
0,D=m.geometryGroupsList.length;Z<D;Z++)if(n=m.geometryGroupsList[Z],s=c(h,n),(m.buffersNeedUpdate||m.groupsNeedUpdate)&&b(n,h),p=s.attributes&&B(s),m.verticesNeedUpdate||m.morphTargetsNeedUpdate||m.elementsNeedUpdate||m.uvsNeedUpdate||m.normalsNeedUpdate||m.colorsNeedUpdate||m.tangentsNeedUpdate||p){var K=n,A=h,J=t.DYNAMIC_DRAW,S=!m.dynamic,ea=s;if(K.__inittedArrays){var C=f(ea),U=ea.vertexColors?ea.vertexColors:!1,H=d(ea),G=C===THREE.SmoothShading,O=void 0,X=void 0,I=void 0,E=void 0,Q=void 0,N=
void 0,ba=void 0,da=void 0,ga=void 0,ia=void 0,ha=void 0,qa=void 0,Y=void 0,ra=void 0,ca=void 0,ka=void 0,pa=void 0,aa=void 0,fa=void 0,Ca=void 0,ja=void 0,Oa=void 0,na=void 0,Ga=void 0,ya=void 0,sa=0,la=0,Ja=0,xa=0,za=0,ua=0,oa=0,wa=0,ta=0,T=0,ma=void 0,Fa=K.__vertexArray,Ha=K.__uvArray,Ta=K.__uv2Array,Ma=K.__normalArray,Ba=K.__tangentArray,Ia=K.__colorArray,Ra=K.__webglCustomAttributesList,P=void 0,Qa=K.__faceArray,Na=K.__lineArray,gb=A.geometry,bb=gb.elementsNeedUpdate,Wa=gb.uvsNeedUpdate,cb=gb.normalsNeedUpdate,
db=gb.tangentsNeedUpdate,hb=gb.colorsNeedUpdate,Xa=gb.vertices,va=K.faces3,Pa=gb.faces,eb=gb.faceVertexUvs[0],fb=gb.faceVertexUvs[1];if(gb.verticesNeedUpdate){O=0;for(X=va.length;O<X;O++)E=Pa[va[O]],qa=Xa[E.a],Y=Xa[E.b],ra=Xa[E.c],Fa[la]=qa.x,Fa[la+1]=qa.y,Fa[la+2]=qa.z,Fa[la+3]=Y.x,Fa[la+4]=Y.y,Fa[la+5]=Y.z,Fa[la+6]=ra.x,Fa[la+7]=ra.y,Fa[la+8]=ra.z,la+=9;t.bindBuffer(t.ARRAY_BUFFER,K.__webglVertexBuffer);t.bufferData(t.ARRAY_BUFFER,Fa,J)}if(hb&&U){O=0;for(X=va.length;O<X;O++)E=Pa[va[O]],ba=E.vertexColors,
da=E.color,3===ba.length&&U===THREE.VertexColors?(aa=ba[0],fa=ba[1],Ca=ba[2]):Ca=fa=aa=da,Ia[ta]=aa.r,Ia[ta+1]=aa.g,Ia[ta+2]=aa.b,Ia[ta+3]=fa.r,Ia[ta+4]=fa.g,Ia[ta+5]=fa.b,Ia[ta+6]=Ca.r,Ia[ta+7]=Ca.g,Ia[ta+8]=Ca.b,ta+=9;0<ta&&(t.bindBuffer(t.ARRAY_BUFFER,K.__webglColorBuffer),t.bufferData(t.ARRAY_BUFFER,Ia,J))}if(db&&gb.hasTangents){O=0;for(X=va.length;O<X;O++)E=Pa[va[O]],ga=E.vertexTangents,ca=ga[0],ka=ga[1],pa=ga[2],Ba[oa]=ca.x,Ba[oa+1]=ca.y,Ba[oa+2]=ca.z,Ba[oa+3]=ca.w,Ba[oa+4]=ka.x,Ba[oa+5]=ka.y,
Ba[oa+6]=ka.z,Ba[oa+7]=ka.w,Ba[oa+8]=pa.x,Ba[oa+9]=pa.y,Ba[oa+10]=pa.z,Ba[oa+11]=pa.w,oa+=12;t.bindBuffer(t.ARRAY_BUFFER,K.__webglTangentBuffer);t.bufferData(t.ARRAY_BUFFER,Ba,J)}if(cb&&C){O=0;for(X=va.length;O<X;O++)if(E=Pa[va[O]],Q=E.vertexNormals,N=E.normal,3===Q.length&&G)for(ja=0;3>ja;ja++)na=Q[ja],Ma[ua]=na.x,Ma[ua+1]=na.y,Ma[ua+2]=na.z,ua+=3;else for(ja=0;3>ja;ja++)Ma[ua]=N.x,Ma[ua+1]=N.y,Ma[ua+2]=N.z,ua+=3;t.bindBuffer(t.ARRAY_BUFFER,K.__webglNormalBuffer);t.bufferData(t.ARRAY_BUFFER,Ma,J)}if(Wa&&
eb&&H){O=0;for(X=va.length;O<X;O++)if(I=va[O],ia=eb[I],void 0!==ia)for(ja=0;3>ja;ja++)Ga=ia[ja],Ha[Ja]=Ga.x,Ha[Ja+1]=Ga.y,Ja+=2;0<Ja&&(t.bindBuffer(t.ARRAY_BUFFER,K.__webglUVBuffer),t.bufferData(t.ARRAY_BUFFER,Ha,J))}if(Wa&&fb&&H){O=0;for(X=va.length;O<X;O++)if(I=va[O],ha=fb[I],void 0!==ha)for(ja=0;3>ja;ja++)ya=ha[ja],Ta[xa]=ya.x,Ta[xa+1]=ya.y,xa+=2;0<xa&&(t.bindBuffer(t.ARRAY_BUFFER,K.__webglUV2Buffer),t.bufferData(t.ARRAY_BUFFER,Ta,J))}if(bb){O=0;for(X=va.length;O<X;O++)Qa[za]=sa,Qa[za+1]=sa+1,
Qa[za+2]=sa+2,za+=3,Na[wa]=sa,Na[wa+1]=sa+1,Na[wa+2]=sa,Na[wa+3]=sa+2,Na[wa+4]=sa+1,Na[wa+5]=sa+2,wa+=6,sa+=3;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,K.__webglFaceBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,Qa,J);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,K.__webglLineBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,Na,J)}if(Ra)for(ja=0,Oa=Ra.length;ja<Oa;ja++)if(P=Ra[ja],P.__original.needsUpdate){T=0;if(1===P.size)if(void 0===P.boundTo||"vertices"===P.boundTo)for(O=0,X=va.length;O<X;O++)E=Pa[va[O]],P.array[T]=P.value[E.a],
P.array[T+1]=P.value[E.b],P.array[T+2]=P.value[E.c],T+=3;else{if("faces"===P.boundTo)for(O=0,X=va.length;O<X;O++)ma=P.value[va[O]],P.array[T]=ma,P.array[T+1]=ma,P.array[T+2]=ma,T+=3}else if(2===P.size)if(void 0===P.boundTo||"vertices"===P.boundTo)for(O=0,X=va.length;O<X;O++)E=Pa[va[O]],qa=P.value[E.a],Y=P.value[E.b],ra=P.value[E.c],P.array[T]=qa.x,P.array[T+1]=qa.y,P.array[T+2]=Y.x,P.array[T+3]=Y.y,P.array[T+4]=ra.x,P.array[T+5]=ra.y,T+=6;else{if("faces"===P.boundTo)for(O=0,X=va.length;O<X;O++)ra=
Y=qa=ma=P.value[va[O]],P.array[T]=qa.x,P.array[T+1]=qa.y,P.array[T+2]=Y.x,P.array[T+3]=Y.y,P.array[T+4]=ra.x,P.array[T+5]=ra.y,T+=6}else if(3===P.size){var Ea;Ea="c"===P.type?["r","g","b"]:["x","y","z"];if(void 0===P.boundTo||"vertices"===P.boundTo)for(O=0,X=va.length;O<X;O++)E=Pa[va[O]],qa=P.value[E.a],Y=P.value[E.b],ra=P.value[E.c],P.array[T]=qa[Ea[0]],P.array[T+1]=qa[Ea[1]],P.array[T+2]=qa[Ea[2]],P.array[T+3]=Y[Ea[0]],P.array[T+4]=Y[Ea[1]],P.array[T+5]=Y[Ea[2]],P.array[T+6]=ra[Ea[0]],P.array[T+
7]=ra[Ea[1]],P.array[T+8]=ra[Ea[2]],T+=9;else if("faces"===P.boundTo)for(O=0,X=va.length;O<X;O++)ra=Y=qa=ma=P.value[va[O]],P.array[T]=qa[Ea[0]],P.array[T+1]=qa[Ea[1]],P.array[T+2]=qa[Ea[2]],P.array[T+3]=Y[Ea[0]],P.array[T+4]=Y[Ea[1]],P.array[T+5]=Y[Ea[2]],P.array[T+6]=ra[Ea[0]],P.array[T+7]=ra[Ea[1]],P.array[T+8]=ra[Ea[2]],T+=9;else if("faceVertices"===P.boundTo)for(O=0,X=va.length;O<X;O++)ma=P.value[va[O]],qa=ma[0],Y=ma[1],ra=ma[2],P.array[T]=qa[Ea[0]],P.array[T+1]=qa[Ea[1]],P.array[T+2]=qa[Ea[2]],
P.array[T+3]=Y[Ea[0]],P.array[T+4]=Y[Ea[1]],P.array[T+5]=Y[Ea[2]],P.array[T+6]=ra[Ea[0]],P.array[T+7]=ra[Ea[1]],P.array[T+8]=ra[Ea[2]],T+=9}else if(4===P.size)if(void 0===P.boundTo||"vertices"===P.boundTo)for(O=0,X=va.length;O<X;O++)E=Pa[va[O]],qa=P.value[E.a],Y=P.value[E.b],ra=P.value[E.c],P.array[T]=qa.x,P.array[T+1]=qa.y,P.array[T+2]=qa.z,P.array[T+3]=qa.w,P.array[T+4]=Y.x,P.array[T+5]=Y.y,P.array[T+6]=Y.z,P.array[T+7]=Y.w,P.array[T+8]=ra.x,P.array[T+9]=ra.y,P.array[T+10]=ra.z,P.array[T+11]=ra.w,
T+=12;else if("faces"===P.boundTo)for(O=0,X=va.length;O<X;O++)ra=Y=qa=ma=P.value[va[O]],P.array[T]=qa.x,P.array[T+1]=qa.y,P.array[T+2]=qa.z,P.array[T+3]=qa.w,P.array[T+4]=Y.x,P.array[T+5]=Y.y,P.array[T+6]=Y.z,P.array[T+7]=Y.w,P.array[T+8]=ra.x,P.array[T+9]=ra.y,P.array[T+10]=ra.z,P.array[T+11]=ra.w,T+=12;else if("faceVertices"===P.boundTo)for(O=0,X=va.length;O<X;O++)ma=P.value[va[O]],qa=ma[0],Y=ma[1],ra=ma[2],P.array[T]=qa.x,P.array[T+1]=qa.y,P.array[T+2]=qa.z,P.array[T+3]=qa.w,P.array[T+4]=Y.x,P.array[T+
5]=Y.y,P.array[T+6]=Y.z,P.array[T+7]=Y.w,P.array[T+8]=ra.x,P.array[T+9]=ra.y,P.array[T+10]=ra.z,P.array[T+11]=ra.w,T+=12;t.bindBuffer(t.ARRAY_BUFFER,P.buffer);t.bufferData(t.ARRAY_BUFFER,P.array,J)}S&&(delete K.__inittedArrays,delete K.__colorArray,delete K.__normalArray,delete K.__tangentArray,delete K.__uvArray,delete K.__uv2Array,delete K.__faceArray,delete K.__vertexArray,delete K.__lineArray,delete K.__skinIndexArray,delete K.__skinWeightArray)}}m.verticesNeedUpdate=!1;m.morphTargetsNeedUpdate=
!1;m.elementsNeedUpdate=!1;m.uvsNeedUpdate=!1;m.normalsNeedUpdate=!1;m.colorsNeedUpdate=!1;m.tangentsNeedUpdate=!1;m.buffersNeedUpdate=!1;s.attributes&&z(s)}else if(h instanceof THREE.Line){s=c(h,m);p=s.attributes&&B(s);if(m.verticesNeedUpdate||m.colorsNeedUpdate||m.lineDistancesNeedUpdate||p){var Ya=t.DYNAMIC_DRAW,Va,Za,ab,ib,Da,jb,mb=m.vertices,nb=m.colors,ob=m.lineDistances,rb=mb.length,sb=nb.length,tb=ob.length,Ab=m.__vertexArray,Bb=m.__colorArray,qb=m.__lineDistanceArray,xb=m.colorsNeedUpdate,
yb=m.lineDistancesNeedUpdate,Eb=m.__webglCustomAttributesList,Cb,vb,La,ub,Sa,Aa;if(m.verticesNeedUpdate){for(Va=0;Va<rb;Va++)ib=mb[Va],Da=3*Va,Ab[Da]=ib.x,Ab[Da+1]=ib.y,Ab[Da+2]=ib.z;t.bindBuffer(t.ARRAY_BUFFER,m.__webglVertexBuffer);t.bufferData(t.ARRAY_BUFFER,Ab,Ya)}if(xb){for(Za=0;Za<sb;Za++)jb=nb[Za],Da=3*Za,Bb[Da]=jb.r,Bb[Da+1]=jb.g,Bb[Da+2]=jb.b;t.bindBuffer(t.ARRAY_BUFFER,m.__webglColorBuffer);t.bufferData(t.ARRAY_BUFFER,Bb,Ya)}if(yb){for(ab=0;ab<tb;ab++)qb[ab]=ob[ab];t.bindBuffer(t.ARRAY_BUFFER,
m.__webglLineDistanceBuffer);t.bufferData(t.ARRAY_BUFFER,qb,Ya)}if(Eb)for(Cb=0,vb=Eb.length;Cb<vb;Cb++)if(Aa=Eb[Cb],Aa.needsUpdate&&(void 0===Aa.boundTo||"vertices"===Aa.boundTo)){Da=0;ub=Aa.value.length;if(1===Aa.size)for(La=0;La<ub;La++)Aa.array[La]=Aa.value[La];else if(2===Aa.size)for(La=0;La<ub;La++)Sa=Aa.value[La],Aa.array[Da]=Sa.x,Aa.array[Da+1]=Sa.y,Da+=2;else if(3===Aa.size)if("c"===Aa.type)for(La=0;La<ub;La++)Sa=Aa.value[La],Aa.array[Da]=Sa.r,Aa.array[Da+1]=Sa.g,Aa.array[Da+2]=Sa.b,Da+=3;
else for(La=0;La<ub;La++)Sa=Aa.value[La],Aa.array[Da]=Sa.x,Aa.array[Da+1]=Sa.y,Aa.array[Da+2]=Sa.z,Da+=3;else if(4===Aa.size)for(La=0;La<ub;La++)Sa=Aa.value[La],Aa.array[Da]=Sa.x,Aa.array[Da+1]=Sa.y,Aa.array[Da+2]=Sa.z,Aa.array[Da+3]=Sa.w,Da+=4;t.bindBuffer(t.ARRAY_BUFFER,Aa.buffer);t.bufferData(t.ARRAY_BUFFER,Aa.array,Ya)}}m.verticesNeedUpdate=!1;m.colorsNeedUpdate=!1;m.lineDistancesNeedUpdate=!1;s.attributes&&z(s)}for(var pb=0,Fb=l.length;pb<Fb;pb++){var Db=l[pb],kb=Db,wb=kb.object,zb=kb.buffer,
Gb=wb.geometry,lb=wb.material;lb instanceof THREE.MeshFaceMaterial?(lb=lb.materials[Gb instanceof THREE.BufferGeometry?0:zb.materialIndex],lb.transparent?(kb.material=lb,V.push(kb)):(kb.material=lb,R.push(kb))):lb&&(lb.transparent?(kb.material=lb,V.push(kb)):(kb.material=lb,R.push(kb)));Db.render=!0;!0===W.sortObjects&&(null!==h.renderDepth?Db.z=h.renderDepth:(Ka.setFromMatrixPosition(h.matrixWorld),Ka.applyProjection($a),Db.z=Ka.z))}}if(h.children)for(pb=0,Fb=h.children.length;pb<Fb;pb++)q(a,h.children[pb],
k)}}function r(){ua=ga=null;ya=za=Y=Ga=pa=ha=Fa=-1;Va=!0}function s(a,b,c){if(a.length)for(var d=0,f=a.length;d<f;d++)r(),a[d].render(b,c,la,wa)}function u(a,b,c,d,f,g){for(var h,k,l,m=0,n=a.length;m<n;m++){h=a[m];k=h.object;l=h.buffer;var p=k;p._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,p.matrixWorld);p._normalMatrix.getNormalMatrix(p._modelViewMatrix);if(g)h=g;else{h=h.material;if(!h)continue;f&&W.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst);W.setDepthTest(h.depthTest);
W.setDepthWrite(h.depthWrite);Q(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}W.setMaterialFaces(h);l instanceof THREE.BufferGeometry?W.renderBufferDirect(b,c,d,h,l,k):W.renderBuffer(b,c,d,h,l,k)}}function w(a,c,d){var f,g=!1;f=c.material;if(void 0===d.geometryGroups||d.groupsNeedUpdate)delete a.__webglObjects[c.id],d.makeGroups(f instanceof THREE.MeshFaceMaterial,ib?4294967296:65535),d.groupsNeedUpdate=!1;for(var h=0,k=d.geometryGroupsList.length;h<k;h++)f=d.geometryGroupsList[h],f.__webglVertexBuffer?
g=!1:(g=f,g.__webglVertexBuffer=t.createBuffer(),g.__webglNormalBuffer=t.createBuffer(),g.__webglTangentBuffer=t.createBuffer(),g.__webglColorBuffer=t.createBuffer(),g.__webglUVBuffer=t.createBuffer(),g.__webglUV2Buffer=t.createBuffer(),g.__webglSkinIndicesBuffer=t.createBuffer(),g.__webglSkinWeightsBuffer=t.createBuffer(),g.__webglFaceBuffer=t.createBuffer(),g.__webglLineBuffer=t.createBuffer(),W.info.memory.geometries++,b(f,c),d.verticesNeedUpdate=!0,d.morphTargetsNeedUpdate=!0,d.elementsNeedUpdate=
!0,d.uvsNeedUpdate=!0,d.normalsNeedUpdate=!0,d.tangentsNeedUpdate=!0,g=d.colorsNeedUpdate=!0),(g||void 0===c.__webglActive)&&v(a.__webglObjects,f,c);c.__webglActive=!0}function v(a,b,c){var d=c.id;a[d]=a[d]||[];a[d].push({id:d,buffer:b,object:c,material:null,z:0})}function B(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function z(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function A(a,b){(a instanceof THREE.Mesh||a instanceof THREE.Line)&&delete b.__webglObjects[a.id];
delete a.__webglActive}function C(a,b,c,d,f){Ca=0;d.needsUpdate&&(d.program&&wb(d),W.initMaterial(d,b,c,f),d.needsUpdate=!1);var g=!1,h=!1,k=!1,l=d.program,m=l.uniforms,n=d.__webglShader.uniforms;l.id!==ga&&(t.useProgram(l.program),ga=l.id,k=h=g=!0);d.id!==ya&&(-1===ya&&(k=!0),ya=d.id,h=!0);if(g||a!==ua)if(t.uniformMatrix4fv(m.projectionMatrix,!1,a.projectionMatrix.elements),X&&t.uniform1f(m.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==ua&&(ua=a),(d instanceof THREE.ShaderMaterial||d instanceof
THREE.MeshPhongMaterial||d.envMap)&&null!==m.cameraPosition&&(Ka.setFromMatrixPosition(a.matrixWorld),t.uniform3f(m.cameraPosition,Ka.x,Ka.y,Ka.z)),d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)null!==m.viewMatrix&&t.uniformMatrix4fv(m.viewMatrix,!1,a.matrixWorldInverse.elements),null!==m.viewMatrixInverse&&t.uniformMatrix4fv(m.viewMatrixInverse,!1,ab.elements),m.mvpMatrix&&t.uniformMatrix4fv(m.mvpMatrix,!1,$a.elements);
if(h){c&&d.fog&&(n.fogColor.value=c.color,c instanceof THREE.Fog?(n.fogNear.value=c.near,n.fogFar.value=c.far):c instanceof THREE.FogExp2&&(n.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(Va){var k=!0,p,q=h=0,s=0,r,F,v,u=ob,M=u.directional.colors,w=u.directional.positions,Z=u.point.colors,z=u.point.positions,K=u.point.distances,J=u.spot.colors,A=u.spot.positions,ea=u.spot.distances,S=u.spot.directions,C=u.spot.anglesCos,
U=u.spot.exponents,B=u.hemi.skyColors,O=u.hemi.groundColors,Q=u.hemi.positions,R=0,ba=0,V=0,da=0,Y=0,ja=0,ia=0,ha=0,ca=p=0;c=v=ca=0;for(g=b.length;c<g;c++)p=b[c],p.onlyShadow||(r=p.color,F=p.intensity,v=p.distance,p instanceof THREE.AmbientLight?p.visible&&(W.gammaInput?(h+=r.r*r.r,q+=r.g*r.g,s+=r.b*r.b):(h+=r.r,q+=r.g,s+=r.b)):p instanceof THREE.DirectionalLight?(Y+=1,p.visible&&(oa.setFromMatrixPosition(p.matrixWorld),Ka.setFromMatrixPosition(p.target.matrixWorld),oa.sub(Ka),oa.normalize(),p=3*
R,w[p]=oa.x,w[p+1]=oa.y,w[p+2]=oa.z,W.gammaInput?I(M,p,r,F*F):H(M,p,r,F),R+=1)):p instanceof THREE.PointLight?(ja+=1,p.visible&&(ca=3*ba,W.gammaInput?I(Z,ca,r,F*F):H(Z,ca,r,F),Ka.setFromMatrixPosition(p.matrixWorld),z[ca]=Ka.x,z[ca+1]=Ka.y,z[ca+2]=Ka.z,K[ba]=v,ba+=1)):p instanceof THREE.SpotLight?(ia+=1,p.visible&&(ca=3*V,W.gammaInput?I(J,ca,r,F*F):H(J,ca,r,F),Ka.setFromMatrixPosition(p.matrixWorld),A[ca]=Ka.x,A[ca+1]=Ka.y,A[ca+2]=Ka.z,ea[V]=v,oa.copy(Ka),Ka.setFromMatrixPosition(p.target.matrixWorld),
oa.sub(Ka),oa.normalize(),S[ca]=oa.x,S[ca+1]=oa.y,S[ca+2]=oa.z,C[V]=Math.cos(p.angle),U[V]=p.exponent,V+=1)):p instanceof THREE.HemisphereLight&&(ha+=1,p.visible&&(oa.setFromMatrixPosition(p.matrixWorld),oa.normalize(),v=3*da,Q[v]=oa.x,Q[v+1]=oa.y,Q[v+2]=oa.z,r=p.color,p=p.groundColor,W.gammaInput?(F*=F,I(B,v,r,F),I(O,v,p,F)):(H(B,v,r,F),H(O,v,p,F)),da+=1)));c=3*R;for(g=Math.max(M.length,3*Y);c<g;c++)M[c]=0;c=3*ba;for(g=Math.max(Z.length,3*ja);c<g;c++)Z[c]=0;c=3*V;for(g=Math.max(J.length,3*ia);c<
g;c++)J[c]=0;c=3*da;for(g=Math.max(B.length,3*ha);c<g;c++)B[c]=0;c=3*da;for(g=Math.max(O.length,3*ha);c<g;c++)O[c]=0;u.directional.length=R;u.point.length=ba;u.spot.length=V;u.hemi.length=da;u.ambient[0]=h;u.ambient[1]=q;u.ambient[2]=s;Va=!1}k?(k=ob,n.ambientLightColor.value=k.ambient,n.directionalLightColor.value=k.directional.colors,n.directionalLightDirection.value=k.directional.positions,n.pointLightColor.value=k.point.colors,n.pointLightPosition.value=k.point.positions,n.pointLightDistance.value=
k.point.distances,n.spotLightColor.value=k.spot.colors,n.spotLightPosition.value=k.spot.positions,n.spotLightDistance.value=k.spot.distances,n.spotLightDirection.value=k.spot.directions,n.spotLightAngleCos.value=k.spot.anglesCos,n.spotLightExponent.value=k.spot.exponents,n.hemisphereLightSkyColor.value=k.hemi.skyColors,n.hemisphereLightGroundColor.value=k.hemi.groundColors,n.hemisphereLightDirection.value=k.hemi.positions,G(n,!0)):G(n,!1)}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||
d instanceof THREE.MeshPhongMaterial){n.opacity.value=d.opacity;W.gammaInput?n.diffuse.value.copyGammaToLinear(d.color):n.diffuse.value.copy(d.color);n.map.value=d.map;n.lightMap.value=d.lightMap;n.specularMap.value=d.specularMap;n.alphaMap.value=d.alphaMap;d.bumpMap&&(n.bumpMap.value=d.bumpMap,n.bumpScale.value=d.bumpScale);d.normalMap&&(n.normalMap.value=d.normalMap,n.normalScale.value.copy(d.normalScale));var aa;d.map?aa=d.map:d.specularMap?aa=d.specularMap:d.alphaMap&&(aa=d.alphaMap);void 0!==
aa&&(k=aa.offset,aa=aa.repeat,n.offsetRepeat.value.set(k.x,k.y,aa.x,aa.y));var fa;d.normalMap?fa=d.normalMap:d.bumpMap&&(fa=d.bumpMap);void 0!==fa&&(k=fa.offset,aa=fa.repeat,n.offsetRepeatBump.value.set(k.x,k.y,aa.x,aa.y));d.alphaMap&&(k=d.alphaMap.offset,aa=d.alphaMap.repeat,n.offsetRepeatAlpha.value.set(k.x,k.y,aa.x,aa.y));n.envMap.value=d.envMap;n.irradianceMap&&(n.irradianceMap.value=d.irradianceMap);n.reflectivity.value=W.gammaInput?d.reflectivity*d.reflectivity:d.reflectivity;n.refractionRatio.value=
d.refractionRatio;n.combine.value=d.combine;n.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(n.diffuse.value=d.color,n.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(n.diffuse.value=d.color,n.opacity.value=d.opacity,n.dashSize.value=d.dashSize,n.totalSize.value=d.dashSize+d.gapSize,n.scale.value=d.scale):d instanceof THREE.MeshPhongMaterial?(n.shininess.value=d.shininess,W.gammaInput?(n.ambient.value.copyGammaToLinear(d.ambient),
n.emissive.value.copyGammaToLinear(d.emissive),n.specular.value.copyGammaToLinear(d.specular)):(n.ambient.value.copy(d.ambient),n.emissive.value.copy(d.emissive),n.specular.value.copy(d.specular)),d.wrapAround&&n.wrapRGB.value.copy(d.wrapRGB),n.exposureBias.value=d.exposureBias):d instanceof THREE.MeshLambertMaterial?(W.gammaInput?(n.ambient.value.copyGammaToLinear(d.ambient),n.emissive.value.copyGammaToLinear(d.emissive)):(n.ambient.value.copy(d.ambient),n.emissive.value.copy(d.emissive)),d.wrapAround&&
n.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(n.mNear.value=a.near,n.mFar.value=a.far,n.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(n.opacity.value=d.opacity);if(f.receiveShadow&&!d._shadowPass&&n.shadowMatrix)for(fa=a=0,aa=b.length;fa<aa;fa++)k=b[fa],k.castShadow&&(k instanceof THREE.SpotLight||k instanceof THREE.DirectionalLight&&!k.shadowCascade)&&(n.shadowMap.value[a]=k.shadowMap,n.shadowMapSize.value[a]=k.shadowMapSize,n.shadowMatrix.value[a]=k.shadowMatrix,
n.shadowDarkness.value[a]=k.shadowDarkness,n.shadowBias.value[a]=k.shadowBias,a++);b=d.uniformsList;d=0;for(n=b.length;d<n;d++)if(a=b[d][0],!1!==a.needsUpdate)switch(aa=a.type,c=a.value,fa=b[d][1],aa){case "1i":t.uniform1i(fa,c);break;case "1f":t.uniform1f(fa,c);break;case "2f":t.uniform2f(fa,c[0],c[1]);break;case "3f":t.uniform3f(fa,c[0],c[1],c[2]);break;case "4f":t.uniform4f(fa,c[0],c[1],c[2],c[3]);break;case "1iv":t.uniform1iv(fa,c);break;case "3iv":t.uniform3iv(fa,c);break;case "1fv":t.uniform1fv(fa,
c);break;case "2fv":t.uniform2fv(fa,c);break;case "3fv":t.uniform3fv(fa,c);break;case "4fv":t.uniform4fv(fa,c);break;case "Matrix3fv":t.uniformMatrix3fv(fa,!1,c);break;case "Matrix4fv":t.uniformMatrix4fv(fa,!1,c);break;case "i":t.uniform1i(fa,c);break;case "f":t.uniform1f(fa,c);break;case "v2":t.uniform2f(fa,c.x,c.y);break;case "v3":t.uniform3f(fa,c.x,c.y,c.z);break;case "v4":t.uniform4f(fa,c.x,c.y,c.z,c.w);break;case "c":t.uniform3f(fa,c.r,c.g,c.b);break;case "iv1":t.uniform1iv(fa,c);break;case "iv":t.uniform3iv(fa,
c);break;case "fv1":t.uniform1fv(fa,c);break;case "fv":t.uniform3fv(fa,c);break;case "v2v":void 0===a._array&&(a._array=new Float32Array(2*c.length));aa=0;for(k=c.length;aa<k;aa++)g=2*aa,a._array[g]=c[aa].x,a._array[g+1]=c[aa].y;t.uniform2fv(fa,a._array);break;case "v3v":void 0===a._array&&(a._array=new Float32Array(3*c.length));aa=0;for(k=c.length;aa<k;aa++)g=3*aa,a._array[g]=c[aa].x,a._array[g+1]=c[aa].y,a._array[g+2]=c[aa].z;t.uniform3fv(fa,a._array);break;case "v4v":void 0===a._array&&(a._array=
new Float32Array(4*c.length));aa=0;for(k=c.length;aa<k;aa++)g=4*aa,a._array[g]=c[aa].x,a._array[g+1]=c[aa].y,a._array[g+2]=c[aa].z,a._array[g+3]=c[aa].w;t.uniform4fv(fa,a._array);break;case "m3":t.uniformMatrix3fv(fa,!1,c.elements);break;case "m3v":void 0===a._array&&(a._array=new Float32Array(9*c.length));aa=0;for(k=c.length;aa<k;aa++)c[aa].flattenToArrayOffset(a._array,9*aa);t.uniformMatrix3fv(fa,!1,a._array);break;case "m4":t.uniformMatrix4fv(fa,!1,c.elements);break;case "m4v":void 0===a._array&&
(a._array=new Float32Array(16*c.length));aa=0;for(k=c.length;aa<k;aa++)c[aa].flattenToArrayOffset(a._array,16*aa);t.uniformMatrix4fv(fa,!1,a._array);break;case "t":g=c;c=E();t.uniform1i(fa,c);if(!g)continue;if(g instanceof THREE.CubeTexture||g.image instanceof Array&&6===g.image.length){if(a=g,fa=c,6===a.image.length)if(a.needsUpdate){a.image.__webglTextureCube||(a.addEventListener("dispose",qb),a.image.__webglTextureCube=t.createTexture(),W.info.memory.textures++);t.activeTexture(t.TEXTURE0+fa);
t.bindTexture(t.TEXTURE_CUBE_MAP,a.image.__webglTextureCube);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY);fa=a instanceof THREE.CompressedTexture;aa=a.image[0]instanceof THREE.DataTexture;k=[];for(c=0;6>c;c++)!W.autoScaleCubemaps||fa||aa?k[c]=aa?a.image[c].image:a.image[c]:(g=k,h=c,q=a.image[c],u=jb,q.width<=u&&q.height<=u||(M=Math.max(q.width,q.height),s=Math.floor(q.width*u/M),u=Math.floor(q.height*u/M),M=document.createElement("canvas"),M.width=s,M.height=u,M.getContext("2d").drawImage(q,0,0,q.width,
q.height,0,0,s,u),q=M),g[h]=q);c=k[0];g=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height);h=D(a.format);q=D(a.type);N(t.TEXTURE_CUBE_MAP,a,g&&q!=t.FLOAT);for(c=0;6>c;c++)if(fa)for(u=k[c].mipmaps,M=0,w=u.length;M<w;M++)s=u[M],a.format!==THREE.RGBAFormat?t.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+c,M,h,s.width,s.height,0,s.data):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+c,M,h,s.width,s.height,0,h,q,s.data);else aa?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,h,k[c].width,
k[c].height,0,h,q,k[c].data):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,h,h,q,k[c]);a.generateMipmaps&&g&&t.generateMipmap(t.TEXTURE_CUBE_MAP);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else t.activeTexture(t.TEXTURE0+fa),t.bindTexture(t.TEXTURE_CUBE_MAP,a.image.__webglTextureCube)}else g instanceof THREE.WebGLRenderTargetCube?setCubeTextureDynamic(g,c):W.setTexture(g,c);break;case "tv":void 0===a._array&&(a._array=[]);aa=0;for(k=a.value.length;aa<k;aa++)a._array[aa]=E();t.uniform1iv(fa,a._array);
aa=0;for(k=a.value.length;aa<k;aa++)g=a.value[aa],c=a._array[aa],g&&W.setTexture(g,c);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+aa)}}t.uniformMatrix4fv(m.modelViewMatrix,!1,f._modelViewMatrix.elements);m.normalMatrix&&t.uniformMatrix3fv(m.normalMatrix,!1,f._normalMatrix.elements);null!==m.modelMatrix&&t.uniformMatrix4fv(m.modelMatrix,!1,f.matrixWorld.elements);return l}function G(a,b){a.ambientLightColor.needsUpdate=b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=
b;a.pointLightColor.needsUpdate=b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=b;a.spotLightExponent.needsUpdate=b;a.hemisphereLightSkyColor.needsUpdate=b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=b}function E(){var a=Ca;a>=nb&&console.warn("WebGLRenderer: trying to use "+
a+" texture units while this GPU supports only "+nb);Ca+=1;return a}function I(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function H(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function Q(a,b,c){Oa!==a&&(a?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),Oa=a);!a||Ja===b&&ja===c||(t.polygonOffset(b,c),Ja=b,ja=c)}function N(a,b,c){c?(t.texParameteri(a,t.TEXTURE_WRAP_S,D(b.wrapS)),t.texParameteri(a,t.TEXTURE_WRAP_T,D(b.wrapT)),t.texParameteri(a,t.TEXTURE_MAG_FILTER,
D(b.magFilter)),t.texParameteri(a,t.TEXTURE_MIN_FILTER,D(b.minFilter))):(t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_MAG_FILTER,F(b.magFilter)),t.texParameteri(a,t.TEXTURE_MIN_FILTER,F(b.minFilter)));Wa&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy)&&(t.texParameterf(a,Wa.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Xa)),b.__oldAnisotropy=b.anisotropy)}function F(a){return a===THREE.NearestFilter||
a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?t.NEAREST:t.LINEAR}function D(a){if(a===THREE.RepeatWrapping)return t.REPEAT;if(a===THREE.ClampToEdgeWrapping)return t.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return t.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return t.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return t.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return t.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return t.LINEAR;if(a===
THREE.LinearMipMapNearestFilter)return t.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return t.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return t.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return t.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return t.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return t.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return t.BYTE;if(a===THREE.ShortType)return t.SHORT;if(a===THREE.UnsignedShortType)return t.UNSIGNED_SHORT;
if(a===THREE.IntType)return t.INT;if(a===THREE.UnsignedIntType)return t.UNSIGNED_INT;if(a===THREE.FloatType)return t.FLOAT;if(a===THREE.HalfFloatType)return 36193;if(a===THREE.AlphaFormat)return t.ALPHA;if(a===THREE.RGBFormat)return t.RGB;if(a===THREE.RGBAFormat)return t.RGBA;if(a===THREE.LuminanceFormat)return t.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return t.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return t.FUNC_ADD;if(a===THREE.SubtractEquation)return t.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return t.FUNC_REVERSE_SUBTRACT;
if(a===THREE.ZeroFactor)return t.ZERO;if(a===THREE.OneFactor)return t.ONE;if(a===THREE.SrcColorFactor)return t.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return t.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return t.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return t.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return t.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return t.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return t.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return t.ONE_MINUS_DST_COLOR;
if(a===THREE.SrcAlphaSaturateFactor)return t.SRC_ALPHA_SATURATE;if(void 0!==Ra&&null!==Ra){if(a===THREE.RGB_S3TC_DXT1_Format)return Ra.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return Ra.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return Ra.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Ra.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var S=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
J=void 0!==a.precision?a.precision:"highp",Z=void 0!==a.alpha?a.alpha:!1,K=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,M=void 0!==a.antialias?a.antialias:!1,ea=void 0!==a.stencil?a.stencil:!0,U=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!0,X=void 0!==a.logarithmicDepthBuffer?a.logarithmicDepthBuffer:!1,O=new THREE.Color(0),ba=0,R=[],V=[];this.domElement=S;this.context=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:
1;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,
vertices:0,faces:0,points:0}};var W=this,da=[],ga=null,ia=null,ya=-1,ua=null,za=null,ua=null,Ca=0,Ga=-1,Y=-1,Fa=-1,Ma=-1,Ta=-1,sa=-1,ha=-1,pa=-1,Oa=null,Ja=null,ja=null,Ha=null,ka=0,ma=0,ca=S.width,na=S.height,la=0,wa=0,Ba=new Uint8Array(16),xa=new Uint8Array(16),ta={},Ua=new THREE.Frustum,$a=new THREE.Matrix4,ab=new THREE.Matrix4,Ka=new THREE.Vector3,oa=new THREE.Vector3,Va=!0,ob={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,
colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},t,mb,tb,hb,Wa,Ra,ib,rb,cb,Na,db=!1;(function(){try{var a={alpha:Z,premultipliedAlpha:K,antialias:M,stencil:ea,preserveDrawingBuffer:U};t=S.getContext("webgl",a)||S.getContext("experimental-webgl",a);if(null===t)throw"Error creating WebGL context.";}catch(b){console.error(b)}mb=t.getExtension("OES_texture_float");tb=t.getExtension("OES_texture_half_float");t.getExtension("OES_texture_float_linear");
hb=t.getExtension("OES_standard_derivatives");cb=t.getExtension("WEBGL_draw_buffers");ib=t.getExtension("OES_element_index_uint");Na=t.getExtension("ANGLE_instanced_arrays");db=!!cb;Wa=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");Ra=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
mb||console.log("THREE.WebGLRenderer: Float textures not supported.");tb||console.log("THREE.WebGLRenderer: Half float textures not supported.");hb||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");Wa||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");Ra||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");cb||console.log("THREE.WebGLRenderer: Multiple render targets not supported.");Na||console.log("THREE.WebGLRenderer: Hardware instancing not supported.");
void 0===t.getShaderPrecisionFormat&&(t.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});X&&(rb=t.getExtension("EXT_frag_depth"))})();t.clearColor(0,0,0,1);t.clearDepth(1);t.clearStencil(0);t.enable(t.DEPTH_TEST);t.depthFunc(t.LEQUAL);t.frontFace(t.CCW);t.cullFace(t.BACK);t.enable(t.CULL_FACE);t.enable(t.BLEND);t.blendEquation(t.FUNC_ADD);t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA);t.viewport(ka,ma,ca,na);t.clearColor(O.r,O.g,O.b,ba);this.context=t;var nb=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
sb=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);t.getParameter(t.MAX_TEXTURE_SIZE);var jb=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),Xa=Wa?t.getParameter(Wa.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Pa=0<sb;Ra&&t.getParameter(t.COMPRESSED_TEXTURE_FORMATS);var Ya=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT),Za=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT);t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.LOW_FLOAT);var Ia=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),
eb=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT);t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT);var bb=0<Ya.precision&&0<Ia.precision,Qa=0<Za.precision&&0<eb.precision;"highp"!==J||bb||(Qa?(J="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(J="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp")));"mediump"!==J||Qa||(J="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp"));this.getContext=function(){return t};
this.supportsVertexTextures=function(){return Pa};this.supportsFloatTextures=function(){return mb};this.supportsStandardDerivatives=function(){return hb};this.supportsCompressedTextureS3TC=function(){return Ra};this.supportsMRT=function(){return db};this.getMaxAnisotropy=function(){return Xa};this.getPrecision=function(){return J};this.setSize=function(a,b,c){S.width=a*this.devicePixelRatio;S.height=b*this.devicePixelRatio;!1!==c&&(S.style.width=a+"px",S.style.height=b+"px");this.setViewport(0,0,
a,b)};this.setViewport=function(a,b,c,d){ka=a*this.devicePixelRatio;ma=b*this.devicePixelRatio;ca=c*this.devicePixelRatio;na=d*this.devicePixelRatio;t.viewport(ka,ma,ca,na)};this.setScissor=function(a,b,c,d){t.scissor(a,b,c,d)};this.enableScissorTest=function(a){a?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)};this.setClearColor=function(a,b){O.set(a);ba=void 0!==b?b:1;t.clearColor(O.r,O.g,O.b,ba)};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");
this.setClearColor(a,b)};this.getClearColor=function(){return O};this.getClearAlpha=function(){return ba};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=t.COLOR_BUFFER_BIT;if(void 0===b||b)d|=t.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=t.STENCIL_BUFFER_BIT;t.clear(d)};this.clearColor=function(){t.clear(t.COLOR_BUFFER_BIT)};this.clearDepth=function(){t.clear(t.DEPTH_BUFFER_BIT)};this.clearStencil=function(){t.clear(t.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);
this.clear(b,c,d)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=function(a,b){ga=null;ya=za=pa=ha=Fa=-1;Va=!0;Y=Ga=-1;zb(a);this.shadowMapPlugin.update(a,b)};var fb=function(a){a=a.target;a.removeEventListener("dispose",fb);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){void 0!==a.vbbuffer&&t.deleteBuffer(a.vbbuffer);a=a.attributes;for(var b in a)void 0!==a[b].buffer&&
t.deleteBuffer(a[b].buffer);W.info.memory.geometries--}else if(void 0!==a.geometryGroups){b=0;for(var c=a.geometryGroupsList.length;b<c;b++){var d=a.geometryGroupsList[b];if(void 0!==d.numMorphTargets)for(var f=0,g=d.numMorphTargets;f<g;f++)t.deleteBuffer(d.__webglMorphTargetsBuffers[f]);if(void 0!==d.numMorphNormals)for(f=0,g=d.numMorphNormals;f<g;f++)t.deleteBuffer(d.__webglMorphNormalsBuffers[f]);vb(d)}}else vb(a)},qb=function(a){a=a.target;a.removeEventListener("dispose",qb);a.image&&a.image.__webglTextureCube?
t.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,t.deleteTexture(a.__webglTexture));W.info.memory.textures--},xb=function(a){a=a.target;a.removeEventListener("dispose",xb);a&&a.__webglTexture&&(t.deleteTexture(a.__webglTexture),t.deleteFramebuffer(a.__webglFramebuffer),t.deleteRenderbuffer(a.__webglRenderbuffer));W.info.memory.textures--},yb=function(a){a=a.target;a.removeEventListener("dispose",yb);wb(a)},vb=function(a){void 0!==a.__webglVertexBuffer&&t.deleteBuffer(a.__webglVertexBuffer);
void 0!==a.__webglNormalBuffer&&t.deleteBuffer(a.__webglNormalBuffer);void 0!==a.__webglTangentBuffer&&t.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&t.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&t.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&t.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&t.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&t.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==
a.__webglFaceBuffer&&t.deleteBuffer(a.__webglFaceBuffer);void 0!==a.__webglLineBuffer&&t.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&t.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)t.deleteBuffer(a.__webglCustomAttributesList[b].buffer);W.info.memory.geometries--},wb=function(a){var b=a.program.program;if(void 0!==b){a.program=void 0;var c,d,f=!1;a=0;for(c=da.length;a<c;a++)if(d=da[a],d.program===
b){d.usedTimes--;0===d.usedTimes&&(f=!0);break}if(!0===f){f=[];a=0;for(c=da.length;a<c;a++)d=da[a],d.program!==b&&f.push(d);da=f;t.deleteProgram(b);W.info.memory.programs--}}};this.renderBufferDirect=function(a,b,c,d,f,g){if(!1!==d.visible){var l=C(a,b,c,d,g);a=l.attributes;c=f.attributes;b=!1;l=16777215*f.id+2*l.id+(d.wireframe?1:0);l!==za&&(za=l,b=!0);b&&k();if(g instanceof THREE.Mesh)if(g=c.index){g.array instanceof Uint32Array?(c=t.UNSIGNED_INT,l=4):(c=t.UNSIGNED_SHORT,l=2);var m=f.offsets;m&&
1<m.length&&(b=!0);var n=0;do{var p,q,s;m&&m.length?(p=m[n].index,q=m[n].start,s=m[n].count):(q=p=0,s=g.array.length);b&&(h(d,a,f,p),!g.buffer&&f.streamingDraw?(p=ta.index,p||(p=t.createBuffer(),ta.index=p),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,p),t.bufferData(t.ELEMENT_ARRAY_BUFFER,g.array,t.DYNAMIC_DRAW)):t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,g.buffer));f.numInstances?Na.drawElementsInstancedANGLE(f.isLines?t.LINES:t.TRIANGLES,s,c,q*l,f.numInstances):t.drawElements(f.isLines?
t.LINES:t.TRIANGLES,s,c,q*l)}while(m&&++n<m.length)}else b&&h(d,a,f,p),d=f.attributes.position,f.numInstances?Na.drawArraysInstancedANGLE(f.isLines?t.LINE_STRIP:t.TRIANGLES,0,d.array.length/3,f.numInstances):t.drawArrays(f.isLines?t.LINE_STRIP:t.TRIANGLES,0,d.array.length/3);else console.log("Only THREE.Mesh can be rendered by the Firefly renderer. Use THREE.Mesh to draw lines.")}};this.renderBuffer=function(a,b,c,d,f,g){if(!1!==d.visible){var h,n;c=C(a,b,c,d,g);b=c.attributes;a=!1;c=16777215*f.id+
2*c.id+(d.wireframe?1:0);c!==za&&(za=c,a=!0);a&&k();!d.morphTargets&&0<=b.position&&a&&(t.bindBuffer(t.ARRAY_BUFFER,f.__webglVertexBuffer),l(b.position),t.vertexAttribPointer(b.position,3,t.FLOAT,!1,0,0));if(a){if(f.__webglCustomAttributesList)for(h=0,n=f.__webglCustomAttributesList.length;h<n;h++)c=f.__webglCustomAttributesList[h],0<=b[c.buffer.belongsToAttribute]&&(t.bindBuffer(t.ARRAY_BUFFER,c.buffer),l(b[c.buffer.belongsToAttribute]),t.vertexAttribPointer(b[c.buffer.belongsToAttribute],c.size,
t.FLOAT,!1,0,0));0<=b.color&&(0<g.geometry.colors.length||0<g.geometry.faces.length?(t.bindBuffer(t.ARRAY_BUFFER,f.__webglColorBuffer),l(b.color),t.vertexAttribPointer(b.color,3,t.FLOAT,!1,0,0)):d.defaultAttributeValues&&t.vertexAttrib3fv(b.color,d.defaultAttributeValues.color));0<=b.normal&&(t.bindBuffer(t.ARRAY_BUFFER,f.__webglNormalBuffer),l(b.normal),t.vertexAttribPointer(b.normal,3,t.FLOAT,!1,0,0));0<=b.tangent&&(t.bindBuffer(t.ARRAY_BUFFER,f.__webglTangentBuffer),l(b.tangent),t.vertexAttribPointer(b.tangent,
4,t.FLOAT,!1,0,0));0<=b.uv&&(g.geometry.faceVertexUvs[0]?(t.bindBuffer(t.ARRAY_BUFFER,f.__webglUVBuffer),l(b.uv),t.vertexAttribPointer(b.uv,2,t.FLOAT,!1,0,0)):d.defaultAttributeValues&&t.vertexAttrib2fv(b.uv,d.defaultAttributeValues.uv));0<=b.uv2&&(g.geometry.faceVertexUvs[1]?(t.bindBuffer(t.ARRAY_BUFFER,f.__webglUV2Buffer),l(b.uv2),t.vertexAttribPointer(b.uv2,2,t.FLOAT,!1,0,0)):d.defaultAttributeValues&&t.vertexAttrib2fv(b.uv2,d.defaultAttributeValues.uv2));0<=b.lineDistance&&(t.bindBuffer(t.ARRAY_BUFFER,
f.__webglLineDistanceBuffer),l(b.lineDistance),t.vertexAttribPointer(b.lineDistance,1,t.FLOAT,!1,0,0))}m();g instanceof THREE.Mesh?(g=f.__typeArray===Uint32Array?t.UNSIGNED_INT:t.UNSIGNED_SHORT,d.wireframe?(d=d.wireframeLinewidth,d!==Ha&&(t.lineWidth(d),Ha=d),a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,f.__webglLineBuffer),t.drawElements(t.LINES,f.__webglLineCount,g,0)):(a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,f.__webglFaceBuffer),t.drawElements(t.TRIANGLES,f.__webglFaceCount,g,0))):g instanceof THREE.Line&&
(g=g.type===THREE.LineStrip?t.LINE_STRIP:t.LINES,d=d.linewidth,d!==Ha&&(t.lineWidth(d),Ha=d),t.drawArrays(g,0,f.__webglLineCount))}};this.render=function(a,b,c,d){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var f=a.__lights,g=a.fog;ya=-1;Va=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);b.worldUpTransform?ab.multiplyMatrices(b.worldUpTransform,
b.matrixWorld):ab.copy(b.matrixWorld);$a.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);Ua.setFromMatrix($a);zb(a);R.length=0;V.length=0;q(a,a,b);!0===W.sortObjects&&(R.sort(n),V.sort(p));s(this.renderPluginsPre,a,b);r();this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);a.overrideMaterial?(d=a.overrideMaterial,this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),
Q(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),u(R,b,f,g,!0,d)):(d=null,this.setBlending(THREE.NoBlending),u(R,b,f,g,!1,d));u(V,b,f,g,!0,d);s(this.renderPluginsPost,a,b);r();c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&(t.bindTexture(t.TEXTURE_2D,c.__webglTexture),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null));this.setDepthTest(!0);this.setDepthWrite(!0)}};this.endFrame=function(){};var zb=function(a){a.__webglObjects||
(a.__webglObjects={},a.__webglObjectsImmediate=[]);for(;a.__objectsAdded.length;){var b=a.__objectsAdded[0],c=a,d=void 0,f=void 0;void 0===b.__webglInit&&(b.__webglInit=!0,b._modelViewMatrix=new THREE.Matrix4,b._normalMatrix=new THREE.Matrix3);d=b.geometry;if(void 0!==d&&void 0===d.__webglInit)if(d.__webglInit=!0,d.addEventListener("dispose",fb),d instanceof THREE.BufferGeometry)g(d);else if(b instanceof THREE.Mesh)void 0!==b.__webglActive&&A(b,c),w(c,b,d);else if(b instanceof THREE.Line&&!d.__webglVertexBuffer){f=
d;f.__webglVertexBuffer=t.createBuffer();f.__webglColorBuffer=t.createBuffer();f.__webglLineDistanceBuffer=t.createBuffer();W.info.memory.geometries++;var f=d,h=b,k=f.vertices.length;f.__vertexArray=new Float32Array(3*k);f.__colorArray=new Float32Array(3*k);f.__lineDistanceArray=new Float32Array(1*k);f.__webglLineCount=k;k=f.vertices.length;h=h.material;if(h.attributes){void 0===f.__webglCustomAttributesList&&(f.__webglCustomAttributesList=[]);var l=void 0;for(l in h.attributes){var m=h.attributes[l];
if(!m.__webglInitialized||m.createUniqueBuffers){m.__webglInitialized=!0;var n=1;"v2"===m.type?n=2:"v3"===m.type?n=3:"v4"===m.type?n=4:"c"===m.type&&(n=3);m.size=n;m.array=new Float32Array(k*n);m.buffer=t.createBuffer();m.buffer.belongsToAttribute=l;m.needsUpdate=!0}f.__webglCustomAttributesList.push(m)}}d.verticesNeedUpdate=!0;d.colorsNeedUpdate=!0;d.lineDistancesNeedUpdate=!0}if(void 0===b.__webglActive){if(b instanceof THREE.Mesh)if(d=b.geometry,d instanceof THREE.BufferGeometry)v(c.__webglObjects,
d,b);else{if(d instanceof THREE.Geometry)for(k=0,h=d.geometryGroupsList.length;k<h;k++)f=d.geometryGroupsList[k],v(c.__webglObjects,f,b)}else b instanceof THREE.Line&&(d=b.geometry,v(c.__webglObjects,d,b));b.__webglActive=!0}a.__objectsAdded.splice(0,1)}for(;a.__objectsRemoved.length;)A(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1)};this.initMaterial=function(a,b,c,d){a.addEventListener("dispose",yb);var f,g;a instanceof THREE.MeshDepthMaterial?g="depth":a instanceof THREE.MeshNormalMaterial?
console.log("MeshNormalMaterial is turned off."):a instanceof THREE.MeshBasicMaterial?g="basic":a instanceof THREE.MeshLambertMaterial?console.log("MeshLambertMaterial is turned off."):a instanceof THREE.MeshPhongMaterial?g="firefly_phong":a instanceof THREE.LineBasicMaterial?g="basic":a instanceof THREE.LineDashedMaterial&&(g="dashed");if(g){var h=THREE.ShaderLib[g];a.__webglShader={uniforms:THREE.UniformsUtils.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else a.__webglShader=
{uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader};for(var k=h=0,l=0,m=0,n=0,p=b.length;n<p;n++){var q=b[n];q.onlyShadow||(q instanceof THREE.DirectionalLight&&h++,q instanceof THREE.PointLight&&k++,q instanceof THREE.SpotLight&&l++,q instanceof THREE.HemisphereLight&&m++)}p=n=0;for(q=b.length;p<q;p++){var s=b[p];s.castShadow&&(s instanceof THREE.SpotLight&&n++,s instanceof THREE.DirectionalLight&&!s.shadowCascade&&n++)}b={precision:J,supportsVertexTextures:Pa,map:!!a.map,
envMap:!!a.envMap,irradianceMap:!!a.irradianceMap,envIsSpherical:a.envMap&&a.envMap.mapping instanceof THREE.SphericalReflectionMapping,envLogLuv:a.envMap&&a.envMap.LogLuv,irrLogLuv:a.irradianceMap&&a.irradianceMap.LogLuv,lightMap:!!a.lightMap,bumpMap:hb&&!!a.bumpMap,normalMap:hb&&!!a.normalMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:X,useFragDepthExt:rb,
maxDirLights:h,maxPointLights:k,maxSpotLights:l,maxHemiLights:m,maxShadows:n,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,clearcoat:a.clearcoat,wrapAround:a.wrapAround,doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide,mrtNormals:db&&a.mrtNormals,tonemapOutput:a.tonemapOutput};c=[];g?c.push(g):(c.push(a.fragmentShader),c.push(a.vertexShader));
for(var r in a.defines)c.push(r),c.push(a.defines[r]);for(var F in b)c.push(F),c.push(b[F]);g=c.join();var v;F=0;for(r=da.length;F<r;F++)if(c=da[F],c.code===g){v=c;v.usedTimes++;break}void 0===v&&(v=new FireflyWebGLProgram(this,g,a,b),da.push(v),W.info.memory.programs=da.length);a.program=v;a.uniformsList=[];for(f in a.__webglShader.uniforms)(F=a.program.uniforms[f])&&a.uniformsList.push([a.__webglShader.uniforms[f],F])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?t.disable(t.CULL_FACE):
(b===THREE.FrontFaceDirectionCW?t.frontFace(t.CW):t.frontFace(t.CCW),a===THREE.CullFaceBack?t.cullFace(t.BACK):a===THREE.CullFaceFront?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK),t.enable(t.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide;a=a.side===THREE.BackSide;Ga!==b&&(b?t.disable(t.CULL_FACE):t.enable(t.CULL_FACE),Ga=b);Y!==a&&(a?t.frontFace(t.CW):t.frontFace(t.CCW),Y=a)};this.setDepthTest=function(a){ha!==a&&(a?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),
ha=a)};this.setDepthWrite=function(a){pa!==a&&(t.depthMask(a),pa=a)};this.setBlending=function(a,b,c,d){a!==Fa&&(a===THREE.NoBlending?t.disable(t.BLEND):a===THREE.AdditiveBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):a===THREE.SubtractiveBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):a===THREE.CustomBlending?
t.enable(t.BLEND):(t.enable(t.BLEND),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),Fa=a);if(a===THREE.CustomBlending){if(b!==Ma&&(t.blendEquation(D(b)),Ma=b),c!==Ta||d!==sa)t.blendFunc(D(c),D(d)),Ta=c,sa=d}else sa=Ta=Ma=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",qb),a.__webglTexture=t.createTexture(),W.info.memory.textures++);t.activeTexture(t.TEXTURE0+
b);t.bindTexture(t.TEXTURE_2D,a.__webglTexture);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY);t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height),f=D(a.format),g=D(a.type);N(t.TEXTURE_2D,a,d);var h=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<h.length&&d){for(var k=0,l=h.length;k<l;k++)c=h[k],t.texImage2D(t.TEXTURE_2D,k,f,c.width,c.height,0,f,g,
c.data);a.generateMipmaps=!1}else t.texImage2D(t.TEXTURE_2D,0,f,c.width,c.height,0,f,g,c.data);else if(a instanceof THREE.CompressedTexture)for(k=0,l=h.length;k<l;k++)c=h[k],a.format!==THREE.RGBAFormat?t.compressedTexImage2D(t.TEXTURE_2D,k,f,c.width,c.height,0,c.data):t.texImage2D(t.TEXTURE_2D,k,f,c.width,c.height,0,f,g,c.data);else if(0<h.length&&d){k=0;for(l=h.length;k<l;k++)c=h[k],t.texImage2D(t.TEXTURE_2D,k,f,f,g,c);a.generateMipmaps=!1}else t.texImage2D(t.TEXTURE_2D,0,f,f,g,a.image);a.generateMipmaps&&
d&&t.generateMipmap(t.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else t.activeTexture(t.TEXTURE0+b),t.bindTexture(t.TEXTURE_2D,a.__webglTexture)};this.initFrameBufferMRT=function(a,b){var c=a[0],d=!1;if(c&&!c.__webglFramebuffer){void 0===c.depthBuffer&&(c.depthBuffer=!0);void 0===c.stencilBuffer&&(c.stencilBuffer=!0);c.__webglFramebuffer=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer);var f;c.shareDepthFrom?f=c.__webglRenderbuffer=c.shareDepthFrom.__webglRenderbuffer:
c.depthBuffer&&!c.stencilBuffer?(f=c.__webglRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,f),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,c.width,c.height)):c.depthBuffer&&c.stencilBuffer&&(f=c.__webglRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,f),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,c.width,c.height));c.depthBuffer&&!c.stencilBuffer?t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,f):c.depthBuffer&&
c.stencilBuffer&&t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,f);d=!0}f=ia;t.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer);for(var g=0;g<a.length;g++){var h=a[g];if(!h.__webglTexture){var k=THREE.Math.isPowerOfTwo(h.width)&&THREE.Math.isPowerOfTwo(h.height),l=D(h.format),m=D(h.type);h.addEventListener("dispose",xb);h.__webglTexture=t.createTexture();W.info.memory.textures++;t.bindTexture(t.TEXTURE_2D,h.__webglTexture);N(t.TEXTURE_2D,h,k);t.texImage2D(t.TEXTURE_2D,
0,l,h.width,h.height,0,l,m,null);k&&h.generateMipmaps&&t.generateMipmap(t.TEXTURE_2D)}t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+g,t.TEXTURE_2D,h.__webglTexture,0)}db&&1<a.length&&cb.drawBuffersWEBGL([cb.COLOR_ATTACHMENT0_WEBGL,cb.COLOR_ATTACHMENT1_WEBGL]);b&&(g=t.checkFramebufferStatus(t.FRAMEBUFFER),g!==t.FRAMEBUFFER_COMPLETE&&(console.log("Can't use multiple render targets. Falling back to two passes. "+g),delete c.__webglFramebuffer,b=!1));t.bindFramebuffer(t.FRAMEBUFFER,f);d&&(t.bindTexture(t.TEXTURE_2D,
null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null));return b};this.setRenderTarget=function(a){var b;Array.isArray(a)?(this.initFrameBufferMRT(a),b=a[0]):a&&(this.initFrameBufferMRT([a]),b=a);var c,d,f;b?(a=b.__webglFramebuffer,c=b.width,b=b.height,f=d=0):(a=null,c=ca,b=na,d=ka,f=ma);a!==ia&&(t.bindFramebuffer(t.FRAMEBUFFER,a),t.viewport(d,f,c,b),ia=a);la=c;wa=b};this.readPixels=function(a,b,c,d,f,g){this.setRenderTarget(a);t.readPixels(b,c,d,f,t.RGBA,t.UNSIGNED_BYTE,
g)};this.verifyMRTWorks=function(a){cb&&(db=this.initFrameBufferMRT(a,!0));return db}};AutodeskNamespace("Autodesk.Viewing.Private");
(function(){var a=Autodesk.Viewing.Private;a.BackgroundPresets={"Fusion Grey":[230,230,230,150,150,150],"Sky Blue":[226,244,255,156,172,180],Midnight:[41,76,120,1,2,3],White:[255,255,255,255,255,255],AutoCADModel:[30,40,48,30,40,48],"Dark Grey":[51,51,51,51,51,51],"Infinity Pool":[164,175,179,164,175,179],Tranquility:[0,84,166,0,84,166],"Grey Room":[129,129,129,129,129,129],"Photo Booth":[237,237,237,237,237,237],"RaaS SBS":[1,1,1,90,90,90],Custom:[230,230,230,150,150,150]};var b=a.BackgroundPresets;
a.LightPresets=[{name:"Simple Grey",path:null,tonemap:0,E_bias:0,directLightColor:[1,0.84,0.67],ambientColor:[0.8,0.9,1],lightMultiplier:1,bgColorGradient:b["Fusion Grey"],darkerFade:!1},{name:"Sharp Highlights",path:"studio_01",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Dark Sky",path:"DarkSky",tonemap:1,E_bias:-2,directLightColor:[1,1,1],ambientColor:[0,0,0],lightMultiplier:2.5,bgColorGradient:b["Dark Grey"],
darkerFade:!1},{name:"Grey Room",path:"GreyRoom",tonemap:1,E_bias:1,directLightColor:[1,1,1],ambientColor:[0,0,0],lightMultiplier:0,bgColorGradient:b["Grey Room"],darkerFade:!0},{name:"Photo Booth",path:"PhotoBooth",tonemap:1,E_bias:0,directLightColor:[1,1,1],ambientColor:[0.125,0.125,0.125],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Tranquility",path:"TranquilityBlue",tonemap:1,E_bias:-2,directLightColor:[1,1,1],ambientColor:[0,0,0],lightMultiplier:4,bgColorGradient:b.Tranquility,
darkerFade:!1},{name:"Infinity Pool",path:"InfinityPool",tonemap:1,E_bias:-1,directLightColor:[1,0.84,0.67],ambientColor:[0,0,0],lightMultiplier:2.5,bgColorGradient:b["Infinity Pool"],darkerFade:!1},{name:"Simple White",path:null,tonemap:0,E_bias:0,directLightColor:[1,1,1],ambientColor:[0.9,0.9,0.9],lightMultiplier:1,bgColorGradient:b.White,saoRadius:0.06,saoIntensity:0.15,darkerFade:!0},{name:"Riverbank",path:"riverbank",tonemap:1,E_bias:-5.7,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],
darkerFade:!1},{name:"Contrast",path:"IDViz",tonemap:1,E_bias:0,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b.Midnight,darkerFade:!1},{name:"Rim Highlights",path:"RimHighlights",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Cool Light",path:"CoolLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Fusion Grey"],
darkerFade:!0},{name:"Warm Light",path:"WarmLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Fusion Grey"],darkerFade:!0},{name:"Soft Light",path:"SoftLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Fusion Grey"],darkerFade:!0},{name:"Grid Light",path:"GridLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,
bgColorGradient:b["Fusion Grey"],darkerFade:!0},{name:"Plaza",path:"Plaza",tonemap:1,E_bias:-13,directLightColor:[1,1,1],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Snow Field",path:"SnowField",tonemap:1,E_bias:-11.5,directLightColor:[0.8,0.8,0.8],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Sky Blue"],darkerFade:!1}];a.DebugEnvironments=[{name:"Field",path:"field",tonemap:1,E_bias:-2.9,directLightColor:[1,1,1],lightMultiplier:0,
bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Crossroads",path:"crossroads",tonemap:1,E_bias:-5.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Seaport",path:"seaport",tonemap:1,E_bias:-6.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Glacier",path:"glacier",tonemap:1,E_bias:0,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b.Midnight,darkerFade:!1},{name:"Boardwalk",path:"boardwalk",
tonemap:1,E_bias:-7,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"RaaS Test Env",path:"Reflection",tonemap:2,E_bias:-1.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["RaaS SBS"],darkerFade:!1},{name:"RaaS Test Env 2",path:"ReflectionBlinn",tonemap:2,E_bias:-1.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["RaaS SBS"],darkerFade:!1}];ENABLE_DEBUG&&(a.LightPresets=a.LightPresets.concat(a.DebugEnvironments));a.CreateCubeMapFromColors=
function(a,b){for(var d=255*a.x,g=255*a.y,h=255*a.z,k=255*b.x,l=255*b.y,m=255*b.z,p=new Uint8Array(16),n=new Uint8Array(16),q=new Uint8Array(16),r=0;4>r;r++)p[4*r]=d,p[4*r+1]=g,p[4*r+2]=h,p[4*r+3]=255,n[4*r]=k,n[4*r+1]=l,n[4*r+2]=m,n[4*r+3]=255,0|r/2?(q[4*r]=d,q[4*r+1]=g,q[4*r+2]=h):(q[4*r]=k,q[4*r+1]=l,q[4*r+2]=m),q[4*r+3]=255;d=new THREE.DataTexture(q,2,2,THREE.RGBAFormat);g=new THREE.DataTexture(q,2,2,THREE.RGBAFormat);n=new THREE.DataTexture(n,2,2,THREE.RGBAFormat);p=new THREE.DataTexture(p,2,
2,THREE.RGBAFormat);h=new THREE.DataTexture(q,2,2,THREE.RGBAFormat);q=new THREE.DataTexture(q,2,2,THREE.RGBAFormat);k=new THREE.Texture(null,new THREE.CubeReflectionMapping,THREE.RepeatWrapping,THREE.RepeatWrapping,THREE.LinearFilter,THREE.LinearFilter,THREE.RGBAFormat);k.image=[g,d,p,n,q,h];k.needsUpdate=!0;return k};a.DefaultLightPreset=1;a.DefaultLightPreset2d=0})();AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.MaterialManager=function(a){function b(a){if("http://"==a.substr(0,7)||"https://"==a.substr(0,8)||"file:///"==a.substr(0,8)||"urn:"==a.substr(0,4))return a;var b=window.location.pathname,c=b.lastIndexOf("/"),b=b.substr(0,c+1);return window.location.protocol+"//"+window.location.host+b+a}function c(a){return-1!=a.indexOf("__lineMaterial__")}function f(a,b,c){auth&&(-1!=a.indexOf("/items/")?THREE.ImageUtils.crossOrigin="use-credentials":THREE.ImageUtils.crossOrigin="");return THREE.ImageUtils.loadTexture(a,
b,c)}var d=Autodesk.Viewing.Private,g=this,h=this.materials={};this.textures={};this.irradianceMap=this.reflectionCube=this.layerMaskTex=null;var k=[];this.defaultMaterial=new THREE.MeshPhongMaterial({ambient:197379,color:7829367,specular:3355443,shininess:30,shading:THREE.SmoothShading});this.findMaterial=function(a,b){var d=h[c(b)?b:a.basePath+"|mat|"+b];d||(stderr("Unknown material "+b+". Using default."),d=this.defaultMaterial);return d};this.convertMaterials=function(a){if(a.materials){var b=
a.materials.materials,d;for(d in b){var f=a.simplemats[d],g=c(d)?d:a.basePath+"|mat|"+d;if(f){f.color=(new THREE.Color).copy(f.color);f.ambient=(new THREE.Color).copy(f.ambient);f.specular=(new THREE.Color).copy(f.specular);f.emissive=(new THREE.Color).copy(f.emissive);var h=new THREE.MeshPhongMaterial(f);h.proteinType=f.proteinType;h.proteinMat=b[d];h.tag=f.tag;h.metal=f.metal;_isIE11||!f.doubleSided&&!a.doubleSided||(h.side=THREE.DoubleSide);for(var k in f)0==k.indexOf("uri_")&&(h[k]=f[k]),0==k.indexOf("uscale_")&&
(h[k]=f[k]),0==k.indexOf("vscale_")&&(h[k]=f[k])}else h=new THREE.MeshPhongMaterial({ambient:197379,color:7829367,specular:3355443,shininess:30,shading:THREE.SmoothShading}),h.proteinMat=b[d];this.addMaterial(g,h)}}};this.updateMaterials=function(){for(;k.length;)for(var b=k.pop(),c=0;c<b.mats.length;c++)b.mats[c][b.slot]=b.tex,b.mats[c].needsUpdate=!0,a.invalidate(!0,!1,!1)};this.loadTextures=function(c){for(var d in h){var p=h[d];if(p){var n=function(a){for(var b=g.textures[a.name],c=0;c<b.mats.length;c++)b.mats[c][b.slots[c]]=
a;k.push(b)},q=["map","bumpMap","specularMap","normalMap","alphaMap"];p.bumpScale&&1<=p.bumpScale&&(p.bumpScale=0.03);for(var r=0;r<q.length;r++){var s=p["uri_"+q[r]];if(s)if(g.textures[s])g.textures[s].mats.push(p),g.textures[s].slots.push(q[r]);else{var u="envMap"==q[r],s=s.replace(/\\/g,"/"),w=b(c.basePath+s),v=w.indexOf("urn:");-1!=v&&(w=w.substr(0,v)+encodeURIComponent(w.substr(v)),w+="?domain="+window.location.hostname);var v=p["uscale_"+q[r]],B=p["vscale_"+q[r]];v||(v=1);B||(B=1);w=u?f(w,new THREE.SphericalReflectionMapping,
n):f(w,new THREE.UVMapping,n);w.name=s;g.textures[s]={mats:[p],slots:[q[r]],tex:w};"alphaMap"==q[r]&&(p.transparent=!0);w.anisotropy="bumpMap"==q[r]||"normalMap"==q[r]?0:a.renderer().getMaxAnisotropy();w.repeat.set(v,B);w.wrapS=THREE.RepeatWrapping;w.wrapT=THREE.RepeatWrapping;w.flipY=!u;u&&(c.envMap=w)}}}}};this.create2DMaterial=function(b,d,k){var n="__lineMaterial__";b.image&&(n+="|image:"+b.image.name);b.clip&&(n+="|clip:"+JSON.stringify(b.clip));d&&(n+="|id");k&&(n+="|selection");b.skipEllipticals&&
(n+="|skipEllipticals");b.skipCircles&&(n+="|skipCircles");b.skipTriangleGeoms&&(n+="|skipTriangleGeoms");n=c(n)?n:null.basePath+"|mat|"+n;if(!h.hasOwnProperty(n)){var q=new THREE.ShaderMaterial({fragmentShader:LineShader.fragmentShader,vertexShader:LineShader.vertexShader,uniforms:THREE.UniformsUtils.clone(LineShader.uniforms),attributes:LineShader.attributes,defines:THREE.UniformsUtils.clone(LineShader.defines),transparent:!0});q.depthWrite=!1;q.depthTest=!1;q.side=THREE.DoubleSide;q.blending=THREE.NormalBlending;
d?(q.defines.ID_COLOR=1,q.blending=THREE.NoBlending):k?q.defines.SELECTION_RENDERER=1:a.renderer().hasMRT()&&(q.defines.MRT_ID_BUFFER=1);b.skipEllipticals||(q.defines.HAS_ELLIPTICALS=1);b.skipCircles||(q.defines.HAS_CIRCLES=1);b.skipTriangleGeoms||(q.defines.HAS_TRIANGLE_GEOMS=1);q.uniforms.tLayerMask.value=g.layerMaskTex;b.image&&(q.defines.HAS_RASTER_QUADS=1,f(b.image.dataURI,new THREE.UVMapping,function(c){c.wrapS=THREE.ClampToEdgeWrapping;c.wrapT=THREE.ClampToEdgeWrapping;c.minFilter=THREE.LinearFilter;
c.magFilter=THREE.LinearFilter;c.anisotropy=1;c.flipY=!0;c.needsUpdate=!0;q.uniforms.tRaster.value=c;-1!=b.image.dataURI.indexOf("png")&&(q.transparent=!0);q.needsUpdate=!0;a.invalidate(!1,!0,!1)}));h[n]=q}return n};this.addMaterial=function(b,c,d){function f(a){return 0.299*a.r+0.587*a.g+0.114*a.b}var k=c.proteinMat?c.proteinMat:null,r=c.proteinType&&-1!=c.proteinType.indexOf("Prism");if(!d){if(c.metal){if(c.reflectivity||(c.reflectivity=f(c.specular)),k&&(1===c.reflectivity&&(c.reflectivity=f(c.specular)),
0!==c.color.r||0!==c.color.g||0!==c.color.b))c.color.r*=0.1,c.color.g*=0.1,c.color.b*=0.1}else k?r?(d=!1,"PrismLayered"==c.proteinType&&(c.clearcoat=!0,c.reflectivity=0.06,k&&(k=k.materials[k.userassets[0]].categories)&&k.length&&-1!=k[0].indexOf("Metal")&&(d=!0)),c.reflectivity=Math.sqrt(c.reflectivity),d?c.specular.copy(c.color):(c.specular.r=c.reflectivity,c.specular.g=c.reflectivity,c.specular.b=c.reflectivity)):(c.reflectivity||(c.reflectivity=0.01+0.06*f(c.specular)),c.specular.r*=c.reflectivity,
c.specular.g*=c.reflectivity,c.specular.b*=c.reflectivity):c.reflectivity?(c.metal=!0,c.specular.r=c.color.r*c.reflectivity,c.specular.g=c.color.g*c.reflectivity,c.specular.b=c.color.b*c.reflectivity,c.color.r*=0.1,c.color.g*=0.1,c.color.b*=0.1):1!==c.color.r||1!==c.color.g||1!==c.color.b||1!==c.specular.r||1!==c.specular.g||1!==c.specular.b||c.uri_map||c.uri_specularMap||(c.metal=!0,c.reflectivity=0.7,c.specular.r=c.specular.g=c.specular.b=c.reflectivity,c.color.r*=0.1,c.color.g*=0.1,c.color.b*=
0.1);c.ambient.copy(c.color);c.ambient.r*=0.3;c.ambient.g*=0.3;c.ambient.b*=0.3;c.combine=THREE.MixOperation;if(c.transparent||c.uri_map&&-1!=c.uri_map.toLowerCase().indexOf(".png")||c.uri_opacityMap)c.alphaTest=0.01}if(c.uri_normalMap){k=c.bumpScale;if(void 0===k||1<=k)k=1;c.normalScale=new THREE.Vector2(k,k)}else void 0===c.bumpScale&&(c.uri_map||c.uri_bumpMap)?c.bumpScale=0.03:1<=c.bumpScale&&(c.bumpScale=0.03);g.reflectionCube&&(c.envMap=g.reflectionCube);g.irradianceMap&&(c.irradianceMap=g.irradianceMap);
c.exposureBias=Math.pow(2,a.renderer().getExposureBias());c.tonemapOutput=a.renderer().getToneMapMethod();c.mrtNormals=a.renderer().hasMRT()&&a.renderer().settings.sao;c.side==THREE.DoubleSide&&a.renderer().toggleTwoSided(!0);h[b]=c};this.togglePolygonOffset=function(a){for(var b in h){var c=h[b];c instanceof THREE.MeshPhongMaterial&&(c.polygonOffset=!0,c.polygonOffsetFactor=a?1:0,c.polygonOffsetUnits=a?1:0,c.needsUpdate=!0)}};this.applyGeometryFlagsToMaterial=function(a,b){b.attributes.color&&(a.vertexColors=
THREE.VertexColors,a.needsUpdate=!0);!a.proteinType&&b.attributes.uv&&b.attributes.uv.isPattern&&(a.map&&!a.bumpMap&&(a.bumpMap=a.map,a.needsUpdate=!0),a.uri_map&&!a.uri_bumpMap&&(a.uri_bumpMap=a.uri_map,a.needsUpdate=!0))};this.toggleMRTSetting=function(a){for(var b in h){var c=h[b];c.mrtNormals!==a&&(c.mrtNormals=a,c.needsUpdate=!0)}};this.updatePixelScale=function(a){for(var b in h)c(b)&&(h[b].uniforms.unitsPerPixel.value=1/a,h[b].uniforms.pixelsPerUnit.value=a)};this.setCubeMapFromColors=function(b,
c){var f=d.CreateCubeMapFromColors(b,c);g.reflectionCube=f;g.reflectionCube.isBgColor=!0;for(var k in h){var q=h[k];q.envMap=f;q.needsUpdate=!0}a.invalidate(!0)};this.setCubeMap=function(b){var c=function(b){g.reflectionCube=b;if(g.reflectionCube)for(var c in h)b=h[c],b.envMap=g.reflectionCube,b.needsUpdate=!0;else g.setCubeMapFromColors(a.clearColorTop,a.clearColorBottom);a.invalidate(!0)};Array.isArray(b)?(g.reflectionCube=THREE.ImageUtils.loadTextureCube(b,new THREE.CubeReflectionMapping,c),g.reflectionCube.format=
THREE.RGBFormat):"string"==typeof b?-1!=b.toLowerCase().indexOf(".dds")?(g.reflectionCube=(new THREE.DDSLoader).load(b,c),g.reflectionCube.mapping=new THREE.CubeReflectionMapping,g.reflectionCube.LogLuv=-1!=b.indexOf("logluv")):(g.reflectionCube=THREE.ImageUtils.loadTexture(b,new THREE.SphericalReflectionMapping,c),g.reflectionCube.format=THREE.RGBFormat):b?c(b):c(null)};this.setIrradianceMap=function(b){var c=function(b){if(b){for(var c in h){var d=h[c];d.irradianceMap=b;d.needsUpdate=!0}g.irradianceMap=
b}else if(g.irradianceMap){for(c in h)d=h[c],d.irradianceMap=null,d.needsUpdate=!0;g.irradianceMap=null}a.invalidate(!0)};THREE.ImageUtils.crossOrigin="";Array.isArray(b)?(g.irradianceMap=THREE.ImageUtils.loadTextureCube(b,new THREE.CubeReflectionMapping,c),g.irradianceMap.format=THREE.RGBFormat):"string"==typeof b?-1!=b.toLowerCase().indexOf(".dds")&&(g.irradianceMap=(new THREE.DDSLoader).load(b,c),g.irradianceMap.mapping=new THREE.CubeReflectionMapping,g.irradianceMap.LogLuv=-1!=b.indexOf("logluv")):
b?c(b):c(null)};this.setTonemapMethod=function(a){for(var b in h){var c=h[b];c.tonemapOutput=a;c.needsUpdate=!0}};this.setExposureBias=function(a){a=Math.pow(2,a);for(var b in h){var c=h[b];c.exposureBias=a;c.needsUpdate=!0}};this.initLayersTexture=function(a){for(var b=a.getData().layerCount,c=new Uint8Array(65536),d=0;d<b;d++)c[d]=255;b=new THREE.DataTexture(c,256,256,THREE.LuminanceFormat,THREE.UnsignedByteType,new THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,
THREE.NearestFilter,0);b.generateMipmaps=!1;b.flipY=!1;b.needsUpdate=!0;this.layerMaskTex=b;this.layersMap=a.getData().layersMap};this.initSelectionMaterial=function(a){var b=a.myData.maxObjectNumber||1;a=0|Math.ceil(b/4096);for(var c=1;c<a;)c*=2;a=c;for(var c=new Uint8Array(4096*a),d=0;d<b;d++)c[d]=0;b=new THREE.DataTexture(c,4096,a,THREE.LuminanceFormat,THREE.UnsignedByteType,new THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter,0);b.generateMipmaps=
!1;b.flipY=!1;b.needsUpdate=!0;this.selectionTex=b;b=this.create2DMaterial({},!1,!0);b=h[b];b.uniforms.tSelectionTexture.value=this.selectionTex;b.uniforms.vSelTexSize.value.set(4096,a);b.needsUpdate=!0;return b};this.setLayerVisible=function(b,d){for(var f=this.layerMaskTex,g=f.image.data,k=this.layersMap,r=d?255:0,s=0;s<b.length;++s)g[k[b[s]]]=r;f.needsUpdate=!0;for(var u in h)c(u)&&(h[u].needsUpdate=!0);a.invalidate(!0)};this.isLayerVisible=function(a){return!!this.layerMaskTex.image.data[this.layersMap[a]]};
this.highlightObject2D=function(b,c){this.selectionTex.image.data[b]=c?255:0;this.selectionTex.needsUpdate=!0;a.invalidate(!1,!1,!0)};this.addMaterial("__defaultMaterial__",this.defaultMaterial)};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.INTERPOLATION_TYPE={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2};Autodesk.Viewing.Private.AnimationHandler=function(){this.animations=[]};
Autodesk.Viewing.Private.AnimationHandler.prototype.init=function(a){if(!0===a.initialized)return a;for(var b=0;b<a.hierarchy.length;b++){for(var c=0;c<a.hierarchy[b].keys.length;c++)if(0>a.hierarchy[b].keys[c].time&&(a.hierarchy[b].keys[c].time=0),void 0!==a.hierarchy[b].keys[c].rot&&!(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)){var f=a.hierarchy[b].keys[c].rot;a.hierarchy[b].keys[c].rot=(new THREE.Quaternion).fromArray(f)}for(c=1;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].time===
a.hierarchy[b].keys[c-1].time&&(a.hierarchy[b].keys.splice(c,1),c--);for(c=0;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].index=c}a.initialized=!0;return a};Autodesk.Viewing.Private.AnimationHandler.prototype.parse=function(a){function b(a,c){c.push(a);if(a.children&&!(a instanceof THREE.Camera))for(var g=0;g<a.children.length;g++)b(a.children[g],c)}var c=[];b(a,c);return c};Autodesk.Viewing.Private.AnimationHandler.prototype.play=function(a){-1===this.animations.indexOf(a)&&this.animations.push(a)};
Autodesk.Viewing.Private.AnimationHandler.prototype.stop=function(a){a=this.animations.indexOf(a);-1!==a&&this.animations.splice(a,1)};Autodesk.Viewing.Private.AnimationHandler.prototype.update=function(a){for(var b=0;b<this.animations.length;b++)this.animations[b].update(a)};
Autodesk.Viewing.Private.Animation=function(a,b,c){this.root=a;this.handler=c.animationHandler;this.data=this.handler.init(b);this.hierarchy=this.handler.parse(a);this.viewer=c.viewer;this.animator=c;this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.isPaused=!0;this.loop=!1;this.delta=0.5;this.interpolationType=Autodesk.Viewing.Private.INTERPOLATION_TYPE.LINEAR;0<this.hierarchy.length?(a=this.data.hierarchy[0].keys,this.startKeyTime=a[0].time,this.endKeyTime=a[a.length-1].time):this.startKeyTime=
this.endKeyTime=0};Autodesk.Viewing.Private.Animation.prototype.keyTypes=[];Autodesk.Viewing.Private.Animation.prototype.defaultKey={};Autodesk.Viewing.Private.Animation.prototype.play=function(a){this.currentTime=void 0!==a?a:0;this.isPlaying=!0;this.isPaused=!1;this.reset();this.handler.play(this)};Autodesk.Viewing.Private.Animation.prototype.pause=function(){!0===this.isPaused?this.handler.play(this):this.handler.stop(this);this.isPaused=!this.isPaused};
Autodesk.Viewing.Private.Animation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;this.handler.stop(this)};Autodesk.Viewing.Private.Animation.prototype.goto=function(a){this.isPlaying||this.play();this.isPaused||this.pause();this.update(a-this.currentTime)};
Autodesk.Viewing.Private.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a];void 0===c.animationCache&&(c.animationCache={});void 0===c.animationCache[this.data.name]&&(c.animationCache[this.data.name]={},c.animationCache[this.data.name].prevKey=this.defaultKey,c.animationCache[this.data.name].nextKey=this.defaultKey,c.animationCache[this.data.name].originalMatrix=c.matrix);for(var c=c.animationCache[this.data.name],f=0;f<this.keyTypes.length;f++){for(var d=
this.keyTypes[f],g=this.data.hierarchy[a].keys[0],h=this.getNextKeyWith(d,a,1);h.time<this.currentTime&&h.index>g.index;)g=h,h=this.getNextKeyWith(d,a,h.index+1);c.prevKey[d]=g;c.nextKey[d]=h}}};
Autodesk.Viewing.Private.Animation.prototype.getNextKeyWith=function(a,b,c){var f=this.data.hierarchy[b].keys;for(c=this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM||this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD?c<f.length-1?c:f.length-1:c%f.length;c<f.length;c++)if(void 0!==f[c][a])return f[c];return this.data.hierarchy[b].keys[0]};
Autodesk.Viewing.Private.Animation.prototype.getPrevKeyWith=function(a,b,c){var f=this.data.hierarchy[b].keys;for(c=this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM||this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+f.length;0<=c;c--)if(void 0!==f[c][a])return f[c];return this.data.hierarchy[b].keys[f.length-1]};
Autodesk.Viewing.Private.Animation.prototype.isPlayingOutOfRange=function(){return!1===this.isPaused&&(this.currentTime<this.startKeyTime-this.delta||this.currentTime>this.endKeyTime+this.delta)};Autodesk.Viewing.Private.MeshAnimation=function(a,b,c){Autodesk.Viewing.Private.Animation.call(this,a,b,c);this.originalMatrix=a.matrix.clone();this.localMatrix=new THREE.Matrix4};Autodesk.Viewing.Private.MeshAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);
Autodesk.Viewing.Private.MeshAnimation.prototype.constructor=Autodesk.Viewing.Private.MeshAnimation;Autodesk.Viewing.Private.MeshAnimation.prototype.keyTypes=["pos","rot","scl"];Autodesk.Viewing.Private.MeshAnimation.prototype.defaultKey={pos:0,rot:0,scl:0};
Autodesk.Viewing.Private.MeshAnimation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3,f=new THREE.Quaternion;return function(d){if(!1!==this.isPlaying&&(this.currentTime+=d*this.timeScale,!this.isPlayingOutOfRange())){d=0;for(var g=this.hierarchy.length;d<g;d++){for(var h=this.hierarchy[d],k=h.animationCache[this.data.name],l=0;l<this.keyTypes.length;l++){var m=this.keyTypes[l],p=k.prevKey[m],n=k.nextKey[m];if(n.time<=this.currentTime||p.time>=this.currentTime){p=this.data.hierarchy[d].keys[0];
for(n=this.getNextKeyWith(m,d,1);n.time<this.currentTime&&n.index>p.index;)p=n,n=this.getNextKeyWith(m,d,n.index+1);k.prevKey[m]=p;k.nextKey[m]=n}var q=p[m],r=n[m];if(n.time!==p.time&&void 0!==q&&void 0!==r){var s=(this.currentTime-p.time)/(n.time-p.time);0>s&&(s=0);1<s&&(s=1);if("pos"===m)if(this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.LINEAR)c.x=q[0]+(r[0]-q[0])*s,c.y=q[1]+(r[1]-q[1])*s,c.z=q[2]+(r[2]-q[2])*s,h.position.copy(c);else{if(this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM||
this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",d,p.index-1).pos,a[1]=q,a[2]=r,a[3]=this.getNextKeyWith("pos",d,n.index+1).pos,s=0.33*s+0.33,m=interpolateCatmullRom(a,s),c.x=m[0],c.y=m[1],c.z=m[2],h.position.copy(c),this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD&&(s=interpolateCatmullRom(a,1.01*s),b.set(s[0],s[1],s[2]),b.sub(vector),b.y=0,b.normalize(),s=Math.atan2(b.x,b.z),h.rotation.set(0,
s,0))}else"rot"===m?(THREE.Quaternion.slerp(q,r,f,s),h.quaternion.copy(f)):"scl"===m&&(c.x=q[0]+(r[0]-q[0])*s,c.y=q[1]+(r[1]-q[1])*s,c.z=q[2]+(r[2]-q[2])*s,h.scale.copy(c))}}this.localMatrix.compose(h.position,h.quaternion,h.scale);h.matrix.multiplyMatrices(this.localMatrix,this.originalMatrix);h.matrixAutoUpdate=!1;h.matrixWorldNeedsUpdate=!0;h.updateMatrixWorld()}}}}();Autodesk.Viewing.Private.CameraAnimation=function(a,b,c){Autodesk.Viewing.Private.Animation.call(this,a,b,c)};
Autodesk.Viewing.Private.CameraAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);Autodesk.Viewing.Private.CameraAnimation.prototype.constructor=Autodesk.Viewing.Private.CameraAnimation;Autodesk.Viewing.Private.CameraAnimation.prototype.keyTypes=["pos","up","target","fov"];Autodesk.Viewing.Private.CameraAnimation.prototype.defaultKey={pos:0,up:0,target:0,fov:0};
Autodesk.Viewing.Private.CameraAnimation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3;return function(f){if(!1!==this.isPlaying&&(this.currentTime+=f*this.timeScale,!this.isPlayingOutOfRange())){f=0;for(var d=this.hierarchy.length;f<d;f++){for(var g=this.hierarchy[f],h=g.animationCache[this.data.name],k=0;k<this.keyTypes.length;k++){var l=this.keyTypes[k],m=h.prevKey[l],p=h.nextKey[l];if(p.time<=this.currentTime||m.time>=this.currentTime){m=this.data.hierarchy[f].keys[0];
for(p=this.getNextKeyWith(l,f,1);p.time<this.currentTime&&p.index>m.index;)m=p,p=this.getNextKeyWith(l,f,p.index+1);h.prevKey[l]=m;h.nextKey[l]=p}var n=m[l],q=p[l];if(p.time!==m.time&&void 0!==n&&void 0!==q){var r=(this.currentTime-m.time)/(p.time-m.time);0>r&&(r=0);1<r&&(r=1);var s;if("pos"===l)s=g.position;else if("up"===l)s=g.up;else if("target"===l)s=g.target;else if("fov"===l){g.setFov(n+(q-n)*r);continue}if(this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.LINEAR)c.x=n[0]+
(q[0]-n[0])*r,c.y=n[1]+(q[1]-n[1])*r,c.z=n[2]+(q[2]-n[2])*r,s.copy(c);else if(this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM||this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith(l,f,m.index-1)[l],a[1]=n,a[2]=q,a[3]=this.getNextKeyWith(l,f,p.index+1)[l],r=0.33*r+0.33,l=interpolateCatmullRom(a,r),c.x=l[0],c.y=l[1],c.z=l[2],s.copy(c),this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD&&
(r=interpolateCatmullRom(a,1.01*r),b.set(r[0],r[1],r[2]),b.sub(s),b.y=0,b.normalize(),r=Math.atan2(b.x,b.z),g.rotation.set(0,r,0))}}g.matrixAutoUpdate=!0;g.matrixWorldNeedsUpdate=!0}g.lookAt(g.target);this.animator.updateFlag|=this.animator.UPDATE_CAMERA}}}();Autodesk.Viewing.Private.VisibilityAnimation=function(a,b,c,f){Autodesk.Viewing.Private.Animation.call(this,a,b,f);this.node=c;this.epsilon=0.1};Autodesk.Viewing.Private.VisibilityAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);
Autodesk.Viewing.Private.VisibilityAnimation.prototype.constructor=Autodesk.Viewing.Private.VisibilityAnimation;Autodesk.Viewing.Private.VisibilityAnimation.prototype.keyTypes=["vis","opa"];Autodesk.Viewing.Private.VisibilityAnimation.prototype.defaultKey={viz:1,opa:1};
Autodesk.Viewing.Private.VisibilityAnimation.prototype.update=function(){return function(a){if(!1!==this.isPlaying&&(this.currentTime+=a*this.timeScale,!this.isPlayingOutOfRange())){a=0;for(var b=this.hierarchy.length;a<b;a++)for(var c=this.hierarchy[a],f=c.animationCache[this.data.name],d=0;d<this.keyTypes.length;d++){var g=this.keyTypes[d],h=f.prevKey[g],k=f.nextKey[g];if(k.time<=this.currentTime||h.time>=this.currentTime){h=this.data.hierarchy[a].keys[0];for(k=this.getNextKeyWith(g,a,1);k.time<
this.currentTime&&k.index>h.index;)h=k,k=this.getNextKeyWith(g,a,k.index+1);f.prevKey[g]=h;f.nextKey[g]=k}var l=h[g],m=k[g];k.time!==h.time&&void 0!==l&&void 0!==m&&("vis"===g?(l=Math.abs(this.currentTime-k.time)<this.epsilon?m:l,this.viewer.visibilityManager.setVisibilityOnNode(this.node,l)):"opa"===g&&(g=(this.currentTime-h.time)/(k.time-h.time),0>g&&(g=0),1<g&&(g=1),l+=(m-l)*g,c.material.transparent=1===l?!1:!0,c.material.opacity=l,0<l&&this.viewer.visibilityManager.setVisibilityOnNode(this.node,
1)))}}}}();
Autodesk.Viewing.Private.AnnotationAnimation=function(a,b,c){function f(a,b,c){var d=document.createElement("div");d.id=a;d.style.cursor="pointer";d.style.visibility=c;var f=document.createElement("div");f.id=a+"-txt";f.style.cssText="display: none;position: absolute;z-index: 1;color: #eeeeee;font-family: consolas,courier,monospace;font-size: 14px;background: rgba(34,34,34,0.8);padding: 6px 6px 6px 6px;";d.appendChild(f);c=document.createElement("img");c.src="data:image/png;base64,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";c.id=
a+"-img";c.style.cssText="display: block;position: absolute;z-index: 1;";d.appendChild(c);b.api.container.appendChild(d);d.addEventListener("click",function(){f.style.display="none"===f.style.display?"block":"none"});c=new THREE.SphereGeometry(0.01);a=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0});d=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0});c=new THREE.Mesh(c,d);c.visible=!1;void 0===b.overlayScenes.annotation&&b.createOverlayScene("annotation",
a,d);b.addOverlay("annotation",c);return c}null===a&&(a=f(b.name,c.viewer,"hidden"));Autodesk.Viewing.Private.Animation.call(this,a,b,c);this.id=b.name;this.text="";this.state="hidden";var d=this;this.viewer.api.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,function(b){d.updateText(a.position,d.text)})};Autodesk.Viewing.Private.AnnotationAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);Autodesk.Viewing.Private.AnnotationAnimation.prototype.constructor=Autodesk.Viewing.Private.AnnotationAnimation;
Autodesk.Viewing.Private.AnnotationAnimation.prototype.keyTypes=["pos","text","vis"];Autodesk.Viewing.Private.AnnotationAnimation.prototype.defaultKey={pos:0,text:"",vis:1};
Autodesk.Viewing.Private.AnnotationAnimation.prototype.updateText=function(a,b){var c,f;c=this.viewer.camera;f=this.viewer.canvas;var d=a.clone(),g=new THREE.Matrix4;c.updateMatrixWorld();c.matrixWorldInverse.getInverse(c.matrixWorld);g.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);d.applyProjection(g);c=(d.x+1)*f.width/2+f.offsetLeft;f=(-d.y+1)*f.height/2+f.offsetTop;if(d=document.getElementById(this.id+"-txt"))d.innerHTML=b,d.style.left=c+"px",d.style.top=f+"px",this.text=b;if(d=document.getElementById(this.id+
"-img"))d.style.left=c+"px",d.style.top=f-24+"px"};
Autodesk.Viewing.Private.AnnotationAnimation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3;return function(f){if(!1!==this.isPlaying&&(this.currentTime+=f*this.timeScale,!this.isPlayingOutOfRange()))if(this.isPaused&&this.currentTime<this.startKeyTime){var d=document.getElementById(this.id);d&&(d.style.visibility=this.state)}else{f=0;for(var g=this.hierarchy.length;f<g;f++){for(var h=this.hierarchy[f],k=h.animationCache[this.data.name],l=0;l<this.keyTypes.length;l++){var d=
this.keyTypes[l],m=k.prevKey[d],p=k.nextKey[d];if(p.time<=this.currentTime||m.time>=this.currentTime){m=this.data.hierarchy[f].keys[0];for(p=this.getNextKeyWith(d,f,1);p.time<this.currentTime&&p.index>m.index;)m=p,p=this.getNextKeyWith(d,f,p.index+1);k.prevKey[d]=m;k.nextKey[d]=p}var n=m[d],q=p[d];if(p.time!==m.time&&void 0!==n&&void 0!==q){var r=(this.currentTime-m.time)/(p.time-m.time);0>r&&(r=0);1<r&&(r=1);if("pos"===d)if(this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.LINEAR)c.x=
n[0]+(q[0]-n[0])*r,c.y=n[1]+(q[1]-n[1])*r,c.z=n[2]+(q[2]-n[2])*r,h.position.copy(c);else{if(this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM||this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",f,m.index-1).pos,a[1]=n,a[2]=q,a[3]=this.getNextKeyWith("pos",f,p.index+1).pos,r=0.33*r+0.33,n=interpolateCatmullRom(a,r),c.x=n[0],c.y=n[1],c.z=n[2],h.position.copy(c),this.interpolationType===Autodesk.Viewing.Private.INTERPOLATION_TYPE.CATMULLROM_FORWARD&&
(r=interpolateCatmullRom(a,1.01*r),b.set(r[0],r[1],r[2]),b.sub(vector),b.y=0,b.normalize(),r=Math.atan2(b.x,b.z),h.rotation.set(0,r,0))}else"text"===d?this.updateText(h.position,0.5>r?n:q):"vis"===d&&(d=document.getElementById(this.id))&&(d.style.visibility=(0.5>r?n:q)?"visible":"hidden")}}h.matrixAutoUpdate=!0;h.matrixWorldNeedsUpdate=!0}}}}();
Autodesk.Viewing.Private.PolylineAnimation=function(a,b,c){this.viewer=c.viewer;null===a&&(a=this.createPolyline([]));Autodesk.Viewing.Private.Animation.call(this,a,b,c);this.epsilon=0.1};Autodesk.Viewing.Private.PolylineAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);Autodesk.Viewing.Private.PolylineAnimation.prototype.constructor=Autodesk.Viewing.Private.PolylineAnimation;Autodesk.Viewing.Private.PolylineAnimation.prototype.keyTypes=["points","vis"];
Autodesk.Viewing.Private.PolylineAnimation.prototype.defaultKey={points:[],vis:1};
Autodesk.Viewing.Private.PolylineAnimation.prototype.update=function(){function a(a){a.root&&(a.viewer.removeOverlay("polyline",a.root),a.root=null)}return function(b){if(!1!==this.isPlaying&&(this.currentTime+=b*this.timeScale,!this.isPlayingOutOfRange()))if(this.isPaused&&this.currentTime<this.startKeyTime)a(this);else{b=0;for(var c=this.hierarchy.length;b<c;b++)for(var f=this.hierarchy[b].animationCache[this.data.name],d=0;d<this.keyTypes.length;d++){var g=this.keyTypes[d],h=f.prevKey[g],k=f.nextKey[g];
if(k.time<=this.currentTime||h.time>=this.currentTime){h=this.data.hierarchy[b].keys[0];for(k=this.getNextKeyWith(g,b,1);k.time<this.currentTime&&k.index>h.index;)h=k,k=this.getNextKeyWith(g,b,k.index+1);f.prevKey[g]=h;f.nextKey[g]=k}var l=h[g],m=k[g];if(k.time!==h.time&&void 0!==l&&void 0!==m)if(h=(this.currentTime-h.time)/(k.time-h.time),0>h&&(h=0),1<h&&(h=1),"points"===g){g=0.5>h?l:m;this.viewer.removeOverlay("polyline",this.root);this.root=null;for(var k=[],p=0;p<g.length;p++){var n=g[p].slice();
if(0===p)n[0]=l[p][0]+(m[p][0]-l[p][0])*h,n[1]=l[p][1]+(m[p][1]-l[p][1])*h,n[2]=l[p][2]+(m[p][2]-l[p][2])*h;else if(p===g.length-1){var q=l.length-1,r=m.length-1;n[0]=l[q][0]+(m[r][0]-l[q][0])*h;n[1]=l[q][1]+(m[r][1]-l[q][1])*h;n[2]=l[q][2]+(m[r][2]-l[q][2])*h}n=new THREE.Vector3(n[0],n[1],n[2]);k.push(n)}this.root=this.createPolyline(k)}else"vis"===g&&(l=Math.abs(this.currentTime-k.time)<this.epsilon?m:l,(this.root.visible=l)||a(this))}}}}();
Autodesk.Viewing.Private.PolylineAnimation.prototype.createPolyline=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(a[c]);b.computeLineDistances();a=new THREE.LineDashedMaterial({color:0,dashSize:1,gapSize:0.5,linewidth:1});b=new THREE.Line(b,a,THREE.LineStrip);void 0===this.viewer.overlayScenes.polyline&&this.viewer.createOverlayScene("polyline",a,null);this.viewer.addOverlay("polyline",b);return b};
Autodesk.Viewing.Private.interpolateCatmullRom=function(a,b){function c(a,b,c,d,f,g,h){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*g+a*f+b}var f=[],d=[],g,h,k,l,m,p;g=(a.length-1)*b;h=Math.floor(g);g-=h;f[0]=0===h?h:h-1;f[1]=h;f[2]=h>a.length-2?h:h+1;f[3]=h>a.length-3?h:h+2;h=a[f[0]];l=a[f[1]];m=a[f[2]];p=a[f[3]];f=g*g;k=g*f;d[0]=c(h[0],l[0],m[0],p[0],g,f,k);d[1]=c(h[1],l[1],m[1],p[1],g,f,k);d[2]=c(h[2],l[2],m[2],p[2],g,f,k);return d};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.KeyFrameAnimator=function(a,b){this.animations=[];this.viewer=a;this.keys=[];this.isPlaying=!1;this.isPaused=!0;this.updateFlag=0;this.duration=b;this.currentTime=0;this.onPlayCallback=null;this.animationHandler=new Autodesk.Viewing.Private.AnimationHandler;this.areCameraAnimationsPaused=!1;this.UPDATE_SCENE=1;this.UPDATE_CAMERA=2};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.add=function(a){if(a.hierarchy&&!(1>a.hierarchy.length||!a.hierarchy[0].keys||2>a.hierarchy[0].keys.length)){var b=null,c=this;if("camera"===a.type)b=new Autodesk.Viewing.Private.CameraAnimation(c.viewer.camera,a,c),c.animations.push(b);else if("annotation"===a.type)b=new Autodesk.Viewing.Private.AnnotationAnimation(null,a,c),c.animations.push(b);else if("polyline"===a.type)b=new Autodesk.Viewing.Private.PolylineAnimation(null,a,c),c.animations.push(b);
else if("mesh"===a.type||"visibility"===a.type)for(var f=c.viewer.model.getNodesByIds([a.id]),d=0;d<f.length;d++)(function l(d){var f=d.fragIds;if(void 0!==f){Array.isArray(f)||(f=[f]);for(var g=0;g<f.length;g++){var h=c.viewer.getRenderProxy(c.viewer.model,f[g]);h&&(h.updateMatrixWorld(),b="mesh"===a.type?new Autodesk.Viewing.Private.MeshAnimation(h,a,c):new Autodesk.Viewing.Private.VisibilityAnimation(h,a,d,c),c.animations.push(b))}}if(d.children)for(f=0;f<d.children.length;f++)l(d.children[f])})(f[d]);
if(b){for(var f=0,g=a.hierarchy.length;f<g;f++)for(var h=a.hierarchy[f].keys,d=0;d<h.length;d++)void 0===h[d].xk&&c.keys.push(h[d].time);(function(a){a.sort(function(a,b){return a-b});(function(a,b,c){for(b=a.length;c=--b;)for(;c--;)a[b]!==a[c]||a.splice(c,1)})(a)})(c.keys)}this.updateFlag|=this.UPDATE_SCENE}};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.update=function(a){this.animationHandler.update(a);var b=this.updateFlag;if(this.isPlaying&&!this.isPaused){this.currentTime+=a;this.currentTime=Math.min(this.currentTime,this.duration);if(this.onPlayCallback)this.onPlayCallback(0<this.duration?this.currentTime/this.duration*100:0);this.currentTime>=this.duration&&this.pause();b|=this.UPDATE_SCENE}this.updateFlag=0;return b};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.play=function(a,b){this.onPlayCallback=b;this.currentTime>=this.duration&&this.goto(0);if(this.isPlaying)this.pause();else{for(var c=0;c<this.animations.length;c++)this.animations[c].play(a);this.isPlaying=!0;this.isPaused=!1}};Autodesk.Viewing.Private.KeyFrameAnimator.prototype.pause=function(){for(var a=0;a<this.animations.length;a++){var b=this.animations[a];b.isPaused===this.isPaused&&b.pause()}this.areCameraAnimationsPaused=this.isPaused=!this.isPaused};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.pauseCameraAnimations=function(){for(var a=0;a<this.animations.length;a++){var b=this.animations[a];b instanceof Autodesk.Viewing.Private.CameraAnimation&&b.pause()}this.areCameraAnimationsPaused=!this.areCameraAnimationsPaused};Autodesk.Viewing.Private.KeyFrameAnimator.prototype.stop=function(){for(var a=0;a<this.animations.length;a++)this.animations[a].stop();this.isPaused=this.isPlaying=!1};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.goto=function(a){if(void 0!==a){for(var b=0;b<this.animations.length;b++)this.animations[b].goto(a);this.isPaused=this.isPlaying=!0;this.currentTime=a;this.updateFlag|=this.UPDATE_SCENE}};Autodesk.Viewing.Private.KeyFrameAnimator.prototype.next=function(){for(var a=this.keys,b=-1,c=0;c<a.length;c++)if(a[c]>this.currentTime){b=a[c];break}this.goto(0>b?a[a.length-1]:b)};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.prev=function(){for(var a=this.keys,b=-1,c=a.length-1;-1<c;c--)if(a[c]<this.currentTime){b=a[c];break}this.goto(0>b?a[0]:b)};AutodeskNamespace("Autodesk.Viewing.Private");void 0===ENABLE_DEBUG&&(ENABLE_DEBUG=!0);void 0===ENABLE_TRACE&&(ENABLE_TRACE=!0);if(void 0===RENDER_CONTEXT_CLASS)var RENDER_CONTEXT_CLASS=RenderContext;
Autodesk.Viewing.Private.Viewer3DImpl=function(a,b,c){function f(a){var b=d.stats;b&&b.begin();v&&(d.controls.handleResize(),d.camera.aspect=B/z,C.setSize(B,z),H=E=I=!0,v=!1,d.api.fireEvent({type:Autodesk.Viewing.VIEWER_RESIZE_EVENT}));G.updateMaterials();if(d.keyFrameAnimator){var c=0<J?(a-J)/1E3:0,f=d.keyFrameAnimator.update(c);f&&(H=E=A.visibleBoundsDirty=!0,f&d.keyFrameAnimator.UPDATE_CAMERA&&(N=!0))}var g=(f=d.controls.update(a)||N)||E;N=!1;H=H||f;var q=d.model&&d.model.isLoadDone(),r=A,F=d.progressiveRender?
0.5*(d.maxFrameTime+d.minFrameTime):1E10,u=F;g||I?(q&&d.signalProgress(0,null),0<D&&(c=a-D,S=0.75*S+0.25*c),D=a,d.updateCameraMatrices(),C.beginScene(d.scene,d.camera,g),f&&d.api.fireEvent(d.cameraChangedEvent),d.needGhostedPass&&r.setOverrideMaterial(null),Q=!0,r&&(r.hasHighlighted()?(n=k,r.reset(d.camera),r.drawHighlightedObjectsOnly(),r.setOverrideMaterial(d.highlightMaterial)):(n=h,r.reset(d.camera,S),r.drawNormalObjectsOnly(),r.setOverrideMaterial(null)))):D=-1;r&&!r.isDone()&&(c=function(a){var b=
n;C.renderScenePart(a,b!=p,b==h,b==p)},u=r.renderSome(c,u),r.isDone()&&n===k&&(n=h,r.reset(d.camera),r.drawNormalObjectsOnly(),r.setOverrideMaterial(null),u=r.renderSome(c,u)),f||H||C.composeFinalFrame(),r.isDone()?(n===h&&!r.areAllVisible()&&d.showGhosting?(n=l,r.reset(d.camera),r.drawHiddenObjectsOnly(),r.setOverrideMaterial(d.fadeMaterial)):n==p?(n=m,Q=!1):(n=m,C.composeFinalFrame(f&&d.skipAOWhenMoving)),q&&d.signalProgress(100,null)):q&&d.signalProgress(100*r.getRenderProgress(),null));H&&(r&&
r.isDone()||d.showOverlaysWhileMoving?(d.renderOverlays(),r&&!r.isDone()&&(H=!0)):C.clearAllOverlays(),C.composeFinalFrame(f&&d.skipAOWhenMoving));n==m&&Q&&(C.hasMRT()?Q=!1:(n=p,r.reset(d.camera),r.drawNormalObjectsOnly(),r.setOverrideMaterial(d.idMaterial)));u<F&&b&&b.end();s&&!f&&d.skipAOWhenMoving&&C.composeFinalFrame();s=f;J=a;E=I=!1}var d=this,g=Autodesk.Viewing.Private,h=0,k=1,l=2,m=3,p=4,n=h,q=g.DefaultLightPreset,r=new THREE.Projector,s=!1,u=new THREE.Vector3(0,1,0),w,v,B,z,A,C,G,E=!1,I=!1,
H=!1,Q=!1,N,F=0,D=0,S=0,J=0;this.run=function(){w=0;(function K(a){w=window.requestAnimationFrame(K);f(a)})()};this.toggleProgressive=function(a){this.progressiveRender=a;E=!0};this.toggleGhosting=function(a){this.showGhosting=a;E=!0};this.toggleOverlaysWhileMoving=function(a){this.showOverlaysWhileMoving=a};this.togglePostProcess=function(a,b,c){C.initPostPipeline(a,b,c);this.fireRenderOptionChanged();E=!0};this.setOptimizeNavigation=function(a){this.skipAOWhenMoving=a};this.renderOverlays=function(){var a=
this.lightsOn;a||this.toggleLights(!0,!0);if(this.dir_light1){var b=this.dir_light1.intensity;this.dir_light1.intensity=1}C.renderOverlays(this.overlayScenes);a||this.toggleLights(!1,!0);this.dir_light1&&(this.dir_light1.intensity=b);H=!1};this.setLayerVisible=function(a,b){this.matman().setLayerVisible(a,b)};this.isLayerVisible=function(a){return this.matman().isLayerVisible(a)};this.updateCameraMatrices=function(){var a=this.camera;a.updateMatrixWorld();a.matrixWorldInverse.getInverse(a.matrixWorld);
a.worldup&&this.setWorldUp(a.worldup);if(this.model){var b=this.getVisibleBounds(!0,!0),c=new THREE.Box3;c.copy(b).applyMatrix4(a.matrixWorldInverse);var d=1E-5*(c.max.z-c.min.z),f=-(c.max.z+d),c=-(c.min.z-d);a.isPerspective&&(f=Math.max(f,Math.min(1,1E-4*Math.abs(c-f))));c=Math.max(c,f);a.near=f;a.far=c;a.updateProjectionMatrix();this.model.is2d()&&(b=(f=this.intersectGroundViewport(new THREE.Vector3(0,0,1)))?a.position.distanceTo(f):a.position.distanceTo(b.center()),a=C.settings.deviceHeight/(2*
b*Math.tan(THREE.Math.degToRad(0.5*a.fov))),G.updatePixelScale(0.5*a))}};this.initLights=function(a){var b=g.LightPresets[q].lightMultiplier;this.lightNode=new THREE.Object3D;this.dir_light1=new THREE.DirectionalLight((new THREE.Color).setRGB(1,1,1),b);this.dir_light1.position.set(-1,0,1);this.dir_light1.position.multiplyScalar(1E3*a);this.lightNode.add(this.dir_light1);this.amb_light=new THREE.AmbientLight((new THREE.Color).setRGB(1,1,1));this.scene.add(this.amb_light);this.toggleLights(0!=b)};this.toggleLights=
function(a,b){if(this.amb_light&&this.lightNode){a&&!this.lightsOn?(this.scene.add(this.amb_light),this.camera.add(this.lightNode),this.lightsOn=!0):!a&&this.lightsOn&&(this.amb_light&&this.scene.remove(this.amb_light),this.lightNode&&this.camera.remove(this.lightNode),this.lightsOn=!1);var c=g.LightPresets[q],d=c.ambientLightColor,c=c.directLightColor;this.lightsOn?(b&&this.amb_light?this.amb_light.color.setRGB(0.5*c[0],0.5*c[1],0.5*c[2]):d&&this.amb_light&&this.amb_light.color.setRGB(d[0],d[1],
d[2]),c&&this.dir_light1&&this.dir_light1.color.setRGB(c[0],c[1],c[2])):d&&this.amb_light&&b&&this.amb_light.color.setRGB(d[0],d[1],d[2])}};this.syncCamera=function(a){this.camera.updateProjectionMatrix();a&&this.setWorldUp(this.api.navigation.getWorldUpVector());N=!0};this.setViewFromFile=function(a,b){var c;c=a.getDefaultCamera();if(!c){c={};var d=a.getBoundingBox(),f=d.size();c.target=d.center();a.is2d()?(c.isPerspective=!1,d=this.camera.aspect,c.orthoScale=d>f.x/f.y?f.y:f.x/d,c.up=new THREE.Vector3(0,
0,1),c.position=c.target.clone(),c.position.z+=c.orthoScale,c.target.y+=1E-6*f.y):(c.isPerspective=!0,c.fov=this.camera.fov,c.up=this.camera.up.clone(),c.position=c.target.clone(),c.position.z+=Math.max(f.x,f.y,f.z))}this.setViewFromCamera(c,b)};this.setViewFromCamera=function(a,b){if(!a.isPerspective&&this.model){var c=this.model.getBoundingBox(),d=c.size(),f=a.target.clone().sub(a.position);f.length()>1E3*d.length()?(c=a.position.distanceTo(c.center()),a.target.copy(a.position).add(f.normalize().multiplyScalar(c))):
a.position.copy(a.target).add(f.normalize().multiplyScalar(-a.orthoScale))}(f=this.model?this.model.getUpVector():null)?c=(new THREE.Vector3).fromArray(f):(f=(new THREE.Vector3(a.up.x,a.up.y,a.up.z)).clone(),0>f.x&&(f.x=-f.x),0>f.y&&(f.y=-f.y),0>f.z&&(f.z=-f.z),f.x>f.y&&f.x>f.z?f.set(0<f.x?1:-1,0,0):f.y>f.x&&f.y>f.z?f.set(0,0<f.y?1:-1,0):f.set(0,0,0<f.z?1:-1),c=f);a.up=c;f=this.api.navigation;b?(c=this.camera,c.up.copy(a.up),c.position.copy(a.position),c.target.copy(a.target),a.isPerspective?c.fov=
a.fov:(c.saveFov=a.fov,c.fov=Autodesk.Viewing.UnifiedCamera.ORTHO_FOV),c.isPerspective=a.isPerspective,c.orthoScale=a.orthoScale,c.dirty=!0,f.setWorldUpVector(c.up),f.setView(c.position,c.target),this.syncCamera(!0)):(this.camera.isPerspective=a.isPerspective,c=f.computeOrthogonalUp(a.position,a.target),f.setRequestTransitionWithUp(!0,a.position,a.target,a.fov,c,a.up));N=!0};this.setViewFromViewBox=function(a,b){if(this.model.is2d()){var c={},d=this.model.getBoundingBox(),f=a[2]-a[0],g=a[3]-a[1],
h,k;h=a[0]+f/2;k=a[1]+g/2;var l=this.camera.aspect;c.orthoScale=l>f/g?g:g/l;c.isPerspective=!1;c.position=new THREE.Vector3(h,k,d.center().z+c.orthoScale);c.target=new THREE.Vector3(h,k,d.center().z);c.target.y+=1E-6*g;c.up=new THREE.Vector3(0,0,1);this.setViewFromCamera(c,b)}};this.setWorldUp=function(a){if(!u.equals(a)){u.copy(a);var b=0,c=Math.abs(a.x);Math.abs(a.y)>c&&(b=1,c=Math.abs(a.y));Math.abs(a.z)>c&&(b=2);this.camera.worldUpTransform=null;2==b?(a=this.camera.worldUpTransform=new THREE.Matrix4,
a=a.elements,a[0]=1,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=-1,a[8]=0,a[9]=1,a[10]=0):0==b&&(a=this.camera.worldUpTransform=new THREE.Matrix4,a=a.elements,a[0]=0,a[1]=1,a[2]=0,a[4]=-1,a[5]=0,a[6]=0,a[8]=0,a[9]=0,a[10]=1)}};this.setModel=function(a){a&&(this.model=a,this.selector.model=this.model,this.visibilityManager.model=this.model,this.model.setLoader(this.svfloader),this.initScene())};this.initScene=function(){if(this.model){var a=this.model,b=a.getBoundingBox();C.setUnitScale(a.getUnitScale());var c=
a.is2d();c&&this.enter2DMode();this.api.navigation.setIs2D(c);this.api.setActiveNavigationTool(c?"pan":"orbit");A=new RenderQueue(a.getData().fragments.length,this.scene,b,a.is2d()?50:0);this.setViewFromFile(a,!0);this.controls.recordHomeView();a=0.5*b.size().length();this.initLights(a);c||this.setLightPresetFromFile()||this.setLightPreset(q,!0);this.invalidate(!0)}};this.addMeshInstance=function(a,b,c,d){var f=this.model.getData();if(0!==b||-1==f.basePath.indexOf("SaRang")){var g;if(a.isLines){var h=
!!a.attributes.color;g=new THREE.LineBasicMaterial({vertexColors:h});h||(c=G.findMaterial(f,c),g.color=c.color);g=new THREE.Mesh(a,g,!f.animations);g.isLine=!0;f.hasLines=!0}else g=G.findMaterial(f,c),G.applyGeometryFlagsToMaterial(g,a),g=new THREE.Mesh(a,g,!f.animations),a.is2d&&(g.is2d=!0);d&&(g.matrix&&g.matrix.copy(d),g.matrixWorld.copy(d));g.matrixAutoUpdate=!1;A.addMesh(b,g)}};this.onLoadComplete=function(){this.signalProgress(100,"");this.api.fireEvent({type:Autodesk.Viewing.GEOMETRY_LOADED_EVENT});
this.is2d&&(this.selectionMaterial2d=G.initSelectionMaterial(this.model),this.createOverlayScene("selection2d",this.selectionMaterial2d));this.model.getData().hasLines&&G.togglePolygonOffset(!0)};this.signalProgress=function(a,b){this.api.fireEvent({type:Autodesk.Viewing.PROGRESS_UPDATE_EVENT,percent:a,message:b})};this.resize=function(a,b){v=!0;B=a;z=b};this.enter2DMode=function(){this.is2d=!0;G.initLayersTexture(this.model);var a=G.create2DMaterial({},!0);this.idMaterial=G.findMaterial(null,a);
C.enter2DMode(this.idMaterial);this.setLightPreset(g.DefaultLightPreset2d);a=this.model.getData();if(a.hidePaper){var b=a.bgColor,a=b>>16&255,c=b>>8&255,b=b&255;this.setClearColors(a,c,b,a,c,b)}this.togglePostProcess(!1,!1,!0)};this.loadSvf=function(a,b,c,d,f){return this.svfloader.loadSvf(a,b,c,d,f)};this.createOverlayScene=function(a,b,c,d){b&&(b.depthWrite=!1,b.depthTest=!0);c&&(c.depthWrite=!1,c.depthTest=!1);var f=new THREE.Scene(!0);f.__lights=this.scene.__lights;this.overlayScenes[a]={scene:f,
camera:d,materialPre:b,materialPost:c}};this.removeOverlayScene=function(a){this.overlayScenes[a]&&delete this.overlayScenes[a]};this.addOverlay=function(a,b){this.overlayScenes[a].scene.add(b);H=!0};this.removeOverlay=function(a,b){this.overlayScenes[a].scene.remove(b);H=!0};this.clearOverlay=function(a){this.overlayScenes[a].scene.clear();H=!0};this.setClearColors=function(a,b,c,d,f,g){this.clearColorTop=new THREE.Vector4(a/255,b/255,c/255,1);this.clearColorBottom=new THREE.Vector4(d/255,f/255,
g/255,1);G.reflectionCube&&!G.reflectionCube.isBgColor||G.setCubeMapFromColors(this.clearColorTop,this.clearColorBottom);C.setClearColors(this.clearColorTop,this.clearColorBottom);E=!0;this.fireRenderOptionChanged()};this.getOverlayBounds=function(){var a=new THREE.Box3,b=this.overlayScenes,c;for(c in b)if(b.hasOwnProperty(c)){var d=new THREE.Box3;d.setFromObject(b[c].scene);a.union(d)}return a};this.getVisibleBounds=function(a,b){var c=null;A&&(c=A.getVisibleBounds(a),b&&(c=this.getOverlayBounds().union(c)));
return c};this.getFitBounds=function(a){var b;this.is2d&&(a=!0);a||null===this.selector||(b=this.selector.getSelectionBounds());if(!b||b.empty())b=this.getVisibleBounds();return b};this.getRenderProxy=function(a,b){return A?A.getVizmesh(b):null};this.setFragmentVisibility=function(a,b,c){A&&A.setVisibility(b,c)};this.setModelVisibility=function(a,b){A&&A.setAllVisibility(b)};this.isWholeModelVisible=function(a){return A?A.areAllVisible():!0};this.resetIsolation=function(a){A&&(A.setOverrideMaterial(null),
this.needGhostedPass=!1,E=!0)};this.highlightObjectNode=function(a,b,c,d){var f=b.fragIds;if("undefined"!=typeof f){Array.isArray(f)||(f=[f]);for(var g=0;g<f.length;++g){var h=f[g],k=this.getRenderProxy(a,h),l=k.is2d?"selection2d":"selection";k.is2d?G.highlightObject2D(b.dbId,c):!d&&c||A.setHightlighted(h,c);if(c){if(!d||k.is2d)k.selectionProxy=new THREE.Mesh(k.geometry,k.material,!0),k.selectionProxy.matrixWorld=k.matrixWorld,this.addOverlay(l,k.selectionProxy)}else k.selectionProxy?(this.removeOverlay(l,
k.selectionProxy),k.selectionProxy=null):k.is2d||this.invalidate(!0)}}};this.highlightFragment=function(a,b,c){this.is2d?G.highlightObject2D(b,c):A.setHightlighted(b,c)};this.explode=function(a){if(a!=F&&this.model){F=a;var b=this.model,c=b.getData(),f=this.getVisibleBounds(!0).center(),g=c.fragments,h=g.transforms,k=a*(c.maxTreeDepth-1)+1,l=0|k,m=k-l;a*=2;if(c.instanceTree&&c.instanceBoxes&&0!=a){var n=c.instanceBoxes;(function za(c,f,g,k,p,q,r,s){var F=2*a;f==l&&(F*=m);var v=6*c.dbId,u=0.5*(n[v]+
n[v+3]),w=0.5*(n[v+1]+n[v+4]),v=0.5*(n[v+2]+n[v+5]);0<f&&f<=l&&(q+=(u-g)*F,r+=(w-k)*F,s+=(v-p)*F);if(g=c.children)for(k=0,p=g.length;k<p;k++)za(g[k],f+1,u,w,v,q,r,s);c=c.fragIds;if(void 0!==c)if(Array.isArray(c))for(f=0;f<c.length;f++)u=0|c[f],v=16*u,w=d.getRenderProxy(b,u).matrixWorld.elements,w[12]=h[v+12]+q,w[13]=h[v+13]+r,w[14]=h[v+14]+s;else u=c|0,w=d.getRenderProxy(b,u).matrixWorld.elements,v=16*u,w[12]=h[v+12]+q,w[13]=h[v+13]+r,w[14]=h[v+14]+s})(c.instanceTree,0,f.x,f.y,f.x,0,0,0)}else for(c=
g.boxes,k=0,g=g.length;k<g;k++){var p=6*k,q=16*k,r=0.5*(c[p]+c[p+3]),s=0.5*(c[p+1]+c[p+4]),p=0.5*(c[p+2]+c[p+5]),r=a*(r-f.x),s=a*(s-f.y),p=a*(p-f.z),v=d.getRenderProxy(b,k).matrixWorld.elements;v[12]=h[q+12]+r;v[13]=h[q+13]+s;v[14]=h[q+14]+p}H=E=A.visibleBoundsDirty=!0;this.api.fireEvent({type:Autodesk.Viewing.EXPLODE_CHANGE_EVENT})}};this.getExplodeScale=function(){return F};this.setGhostingBrightness=function(a){this.fadeMaterial.color=a?new THREE.Color(1052688):new THREE.Color(16777215);this.fadeMaterial.needsUpdate=
!0};this.setLightPreset=function(a,b){if(q!=a||b){if(0>a||g.LightPresets.length<=a)a=g.DefaultLightPreset;q=a;var c=g.LightPresets[a];if(c&&c.path){var d=RESOURCE_ROOT+"environments/"+c.path,f=d+"_mipdrop.logluv.dds";G.setIrradianceMap(d+"_irr.logluv.dds");G.setCubeMap(f);this.setExposureBias(c.E_bias);this.setTonemapMethod(c.tonemap);this.setGhostingBrightness(c.darkerFade)}else G.setIrradianceMap(null),G.setCubeMap(null),this.setExposureBias(0),this.setTonemapMethod(0),this.setGhostingBrightness(!1);
d=SAOShader.uniforms.radius.value;f=SAOShader.uniforms.intensity.value;c.hasOwnProperty("saoRadius")&&(d=c.saoRadius);c.hasOwnProperty("saoIntensity")&&(f=c.saoIntensity);C.setAOOptions(d,f);(d=c.bgColorGradient)||(d=g.BackgroundPresets.Custom);this.setClearColors(d[0],d[1],d[2],d[3],d[4],d[5]);d=1;null!==c.lightMultiplier&&void 0!==c.lightMultiplier&&(d=c.lightMultiplier);this.dir_light1&&(this.toggleLights(0!=d),this.dir_light1.intensity=d);H=E=!0;this.fireRenderOptionChanged()}};this.setLightPresetFromFile=
function(){var a=this.model.getMetadata("renderEnvironmentStyle","value",null);if(null===a||""===a)return!1;for(var b=this.model.getMetadata("renderEnvironmentExposureBias","value",null),c=this.model.getMetadata("renderEnvironmentExposureBase","value",null),d=0;d<g.LightPresets.length;d++)if(a===g.LightPresets[d].name)return null!==b&&null!==c&&(g.LightPresets[d].E_bias=b+c),this.setLightPreset(d,!0),!0;return!1};this.setTonemapMethod=function(a){a!=C.getToneMapMethod()&&(C.setTonemapMethod(a),G.setTonemapMethod(a),
this.fireRenderOptionChanged(),this.invalidate(!0))};this.setExposureBias=function(a){a!=C.getExposureBias()&&(C.setExposureBias(a),G.setExposureBias(a),this.fireRenderOptionChanged(),this.invalidate(!0))};this.uninitialize=function(){window.cancelAnimationFrame(w);this.controls.uninitialize();this.canvas=this.controls=null;this.svfloader.uninitialize();this.svfloader=null;this.selector.uninitialize();G=C=A=this.visibilityManager=this.model=this.selector=null};this.hideLines=function(a){return A?
(A.hideLines(a),E=!0):!1};this.fireRenderOptionChanged=function(){var a=C.hasMRT()&&C.settings.sao;G.toggleMRTSetting(a);this.api.fireEvent({type:Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT})};this.castRayViewport=function(a,b){if(!A)return{};var c=this.camera;a.z=-1;var d=new THREE.Vector3(a.x,a.y,1);r.unprojectVector(a,c);r.unprojectVector(d,c);d.sub(a).normalize();var d=A.rayIntersect(c.isPerspective?c.position:a,d,b),c=d[0],d=d[1],f=null;c&&(f=(f=this.model.getData())?f.fragments:null,c=c.fragId,
f=f.fragToDbNode&&f.fragToDbNode[c]?f.fragToDbNode[c]:{dbId:c,fragIds:c});return{node:f,intersectPoint:d}};this.clientToViewport=function(a,b){var c=d.canvas.getBoundingClientRect();return new THREE.Vector3((a+0.5-c.left)/c.width*2-1,2*-((b+0.5-c.top)/c.height)+1,1)};this.viewportToClient=function(a,b){var c=d.canvas.getBoundingClientRect();return new THREE.Vector3(0.5*(a+1)*c.width+c.left-0.5,-0.5*(b-1)*c.height+c.top-0.5,0)};this.castRay=function(a,b,c){return this.castRayViewport(this.clientToViewport(a,
b),c)};this.intersectGroundViewport=function(a){var b=this.camera,c="z";this.is2d||(1==u.x?c="x":1==u.y&&(c="y"));a.z=-1;var d=new THREE.Vector3(a.x,a.y,1);r.unprojectVector(a,b);r.unprojectVector(d,b);d.sub(a).normalize();if(1E-6>Math.abs(d[c]))return null;a=((this.model?this.model.getBoundingBox().min[c]:0)-b.position[c])/d[c];d.multiplyScalar(a);d.add(b.position);return d};this.intersectGround=function(a,b){return this.intersectGroundViewport(this.clientToViewport(a,b))};this.hitTestViewport=function(a,
b){var c;if(d.is2d){var f=C.idAtPixel(a.x,a.y);c=this.intersectGroundViewport(a);var g=f?{dbId:f,fragIds:d.model.getData().fragments.dbId2fragId[f]}:null;c={intersectPoint:c,node:g};f&&stderr("dbId "+f)}else c=this.castRayViewport(a,b);return c};this.hitTest=function(a,b,c){return d.hitTestViewport(this.clientToViewport(a,b),c)};this.rolloverObjectViewport=function(a){Q||(C.rolloverObjectViewport(a.x,a.y),H=!0)};this.rolloverObject=function(a,b){this.rolloverObjectViewport(this.clientToViewport(a,
b))};this.modelQueue=function(){return A};this.renderer=function(){return C};this.invalidate=function(a,b,c){E=a;I=b;H=c};this.currentLightPreset=function(){return q};this.matman=function(){return G};this.api=b;this.canvas=a;this.svfloader=new g.SvfLoader(this);C=new RENDER_CONTEXT_CLASS;C.init(a);G=new g.MaterialManager(this);this.camera=new Autodesk.Viewing.UnifiedCamera(a.clientWidth,a.clientHeight);this.cameraChangedEvent=this.camera.getCameraChangedEvent();this.scene=new THREE.Scene;this.scene.add(this.camera);
this.overlayScenes={};this.selectionMaterialBase=new THREE.MeshPhongMaterial({color:6724095,specular:526344,emissive:3361911,ambient:0,opacity:1,transparent:!1});this.selectionMaterialTop=new THREE.MeshPhongMaterial({color:6724095,specular:526344,emissive:3361911,ambient:0,opacity:0.15,transparent:!0});this.selectionMaterial2d=null;this.createOverlayScene("selection",this.selectionMaterialBase,this.selectionMaterialTop);this.fadeMaterial=new THREE.MeshPhongMaterial({color:16777215,opacity:0.1,reflectivity:0,
transparent:!0});G.addMaterial("__fadeMaterial__",this.fadeMaterial,!0);this.highlightMaterial=new THREE.MeshPhongMaterial({color:6724095,specular:526344,emissive:3361911,ambient:0,opacity:1,transparent:!1});G.addMaterial("__highlightMaterial__",this.highlightMaterial,!0);this.idMaterial=null;this.progressiveRender=!0;this.maxFrameTime=50;this.minFrameTime=25;c&&(this.controls=c(this));this.controls||(this.controls=new THREE.TrackballControls(this.camera,this.canvas),this.controls.rotateSpeed=1,this.controls.zoomSpeed=
1,this.controls.panSpeed=0.5,this.controls.dynamicDampingFactor=0.5,this.controls.owner=this);this.selector=new g.Selector(this);this.controls.setSelector(this.selector);this.visibilityManager=new g.VisibilityManager(this);this.showOverlaysWhileMoving=this.showGhosting=!0;this.skipAOWhenMoving=!1;this.keyFrameAnimator=null;this.setClearColors(230,230,230,150,150,150);C.beginScene(this.scene,this.camera,!0);C.composeFinalFrame()};Autodesk.Viewing.Private.Viewer3DImpl.prototype.constructor=Autodesk.Viewing.Private.Viewer3DImpl;
AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.ViewerState=function(a){this.getState=function(b,c){var f=a.navigation,d=Autodesk.Viewing.Private,g=c||{},h;h=Math.round(4294967295*Math.random());var k=Date.now();h=h.toString(16)+k.toString(16);g.guid=h;g.seedURN=a.impl.svfloader.svfUrn;g.overrides=this.getTransformsOverrides();h=g.objectSet;Array.isArray(h)||(g.objectSet=h=[]);h[0]={id:this.getSelectedNodes(),isolated:this.getIsolatedNodes(),explodeScale:a.getExplodeScale()};(h=g.viewport)||(h=g.viewport={});k=f.getCamera().isPerspective;
h.name="";h.eye=f.getPosition().toArray();h.target=f.getTarget().toArray();h.up=f.getCameraUpVector().toArray();h.worldUpVector=f.getWorldUpVector().toArray();h.pivotPoint=f.getPivotPoint().toArray();h.distanceToOrbit=f.getPivotPlaneDistance();h.aspectRatio=this.getAspectRatio();h.projection=k?"perspective":"orthographic";h.isOrthographic=!k;k?h.fieldOfView=f.getVerticalFov():h.orthographicHeight=this.getOrthographicHeight();(f=g.renderOptions)||(f=g.renderOptions={});f.environment=d.LightPresets[a.impl.currentLightPreset()].name;
f.ambientOcclusion={enabled:a.impl.renderer().settings.sao,radius:a.impl.renderer().getAORadius(),intensity:a.impl.renderer().getAOIntensity()};f.toneMap={method:a.impl.renderer().getToneMapMethod(),exposure:a.impl.renderer().getExposureBias(),lightMultiplier:this.getToneMapIntensity()};f.appearance={ghostHidden:a.impl.showGhosting,ambientShadow:a.prefs.ambientShadows,antiAliasing:a.impl.renderer().settings.antialias,progressiveDisplay:a.prefs.progressiveRendering,displayLines:a.prefs.lineRendering};
for(var l in a.loadedExtensions)a.loadedExtensions[l].getState(g);b&&!0!==b&&this.applyFilter(g,b);return g};this.restoreState=function(b,c,f){if(!b)return stderr("restoreState has no viewer state to restore from."),!1;c&&!0!==c&&this.applyFilter(b,c);c=a.navigation;if(c.getTransitionActive())return stderr("Abort restoreState, animation in progress..."),!1;if(Array.isArray(b.objectSet)&&0<b.objectSet.length){var d=b.objectSet[0],g=a.impl?a.impl.selector:null,h=d.id;h&&g&&g.setSelectionIds(h);a.isolateById(d.isolated||
[]);"explodeScale"in d&&(d=parseFloat(d.explodeScale),a.explode&&a.explodeslider&&(a.explode(d),a.explodeslider.value=100*d))}if(d=b.viewport){var g=this.getVector3FromArray(d.eye,c.getPosition()),h=this.getVector3FromArray(d.up,c.getCamera().up),k=this.getVector3FromArray(d.target,c.getTarget()),l="fieldOfView"in d?parseFloat(d.fieldOfView):c.getVerticalFov(),m=this.getVector3FromArray(d.pivotPoint,c.getPivotPoint());c.setCameraUpVector(h);"isOrthographic"in d&&(d.isOrthographic?c.toOrthographic():
c.toPerspective());f?(c.setVerticalFov(l,!1),c.setView(g,k)):c.setRequestTransition(!0,g,k,l,!1);c.setPivotPoint(m);c.setPivotSetFlag(!0)}if(g=b.renderOptions){c=a.prefs.ambientShadows;d=a.prefs.antialiasing;if(k=g.ambientOcclusion)"enabled"in k&&(c=k.enabled),h="radius"in k?k.radius:null,k="intensity"in k?k.intensity:null,null!==h&&null!==k&&(a.impl.renderer().setAOOptions(h,k),a.impl.renderer().composeFinalFrame(!1));"environment"in g&&(h=this.getLightPresetIndex(g.environment),-1!==h&&a.setLightPreset(h));
if(k=g.toneMap)h="lightMultiplier"in k?k.lightMultiplier:null,k="exposure"in k?k.exposure:null,null!==h&&null!==k&&(a.impl.dir_light1&&(a.impl.dir_light1.intensity=Math.pow(2,h)),a.impl.renderer().setExposureBias(k,h),a.impl.invalidate(!0));if(g=g.appearance)"antiAliasing"in g&&(d=g.antiAliasing),"progressiveDisplay"in g&&a.setProgressiveRendering(g.progressiveDisplay),"ghostHidden"in g&&a.setGhosting(g.ghostHidden),"displayLines"in g&&a.hideLines(!g.displayLines);a.setQualityLevel(c,d)}for(var p in a.loadedExtensions)a.loadedExtensions[p].restoreState(b,
f);return!0};this.isValidState=function(b){return b?!1 in b?!0:a.impl.svfloader.svfUrn===b.seedURN:!1};this.extractSelectedNodeIds=function(a){return a&&Array.isArray(a.objectSet)&&0<a.objectSet.length&&(a=a.objectSet[0],Array.isArray(a.id))?a.id:[]};this.extractIsolatedNodeIds=function(a){return a&&Array.isArray(a.objectSet)&&0<a.objectSet.length&&(a=a.objectSet[0],Array.isArray(a.isolated))?a.isolated:[]};this.getVector3FromArray=function(a,c){return a instanceof Array&&2<a.length?(a[0]=parseFloat(a[0]),
a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),(new THREE.Vector3).fromArray(a)):c};this.getSelectedNodes=function(){for(var b=a.impl&&a.impl.selector?a.impl.selector.getSelection():[],c=b.length,f=[],d=0;d<c;++d)f.push(b[d].dbId);return f};this.getIsolatedNodes=function(){for(var b=a.getIsolatedNodes(),c=0,f=b.length;c<f;++c)b[c]=b[c].dbId;return b};this.getAspectRatio=function(){var b=a.navigation.getScreenViewport();return b.width/b.height};this.getOrthographicHeight=function(){var b=a.navigation.getCamera();
return b.isPerspective?0:Math.abs(2*b.orthographicCamera.top)};this.getTransformsOverrides=function(){return{transformations:[]}};this.getToneMapIntensity=function(){var b=0;a.impl.dir_light1&&(b=0!=a.impl.dir_light1.intensity?Math.log(a.impl.dir_light1.intensity)/Math.log(2):-1E-20);return b};this.getLightPresetIndex=function(a){for(var c=Autodesk.Viewing.Private,f=0;f<c.LightPresets.length;f++)if(c.LightPresets[f].name===a)return f;return-1};this.applyFilter=function(a,c){if(!0!==c)for(var f in a)if(a.hasOwnProperty(f)){var d=
c[f];void 0===d?(delete a[f],stderr("[applyFilter] C - skipping key ["+f+"] from viewerState; unspecified in filter.")):"boolean"===typeof d?!1===d&&(delete a[f],stderr("[applyFilter] D - skipping key ["+f+"] from viewerState; explicit filtering.")):d instanceof Object?a[f]instanceof Object?this.applyFilter(a[f],c[f]):stderr("[applyFilter] A - Invalid filter Object for key ["+f+"]"):stderr("[applyFilter] B - Invalid filter value for key ["+f+"]")}}};
Autodesk.Viewing.Private.ViewerState.prototype.constructor=Autodesk.Viewing.Private.ViewerState;AutodeskNamespace("Autodesk.Viewing.i18n");
(function(){function a(a,b){if(!b||"function"===typeof b)return a;for(var c in b)a[c]=b[c];return a}function b(a,b,c){var d,f=0,g=a.length,h=void 0===g||"[object Array]"!==Object.prototype.toString.apply(a)||"function"===typeof a;if(c)if(h)for(d in a){if(!1===b.apply(a[d],c))break}else for(;f<g&&!1!==b.apply(a[f++],c););else if(h)for(d in a){if(!1===b.call(a[d],d,a[d]))break}else for(;f<g&&!1!==b.call(a[f],f,a[f++]););return a}function c(a){var b=function(a){if(window.XMLHttpRequest)return a(null,
new XMLHttpRequest);if(window.ActiveXObject)try{return a(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}return a(Error())},c=function(a){if("string"===typeof a)return a;var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},d=function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},f=function(a,
g,h,k){"function"===typeof h&&(k=h,h={});h.cache=h.cache||!1;h.data=h.data||{};h.headers=h.headers||{};h.jsonp=h.jsonp||!1;h.async=void 0===h.async?!0:h.async;var l=d({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},f.headers,h.headers),m;m="application/json"===l["content-type"]?JSON.stringify(h.data):c(h.data);if("GET"===a){var n=[];m&&(n.push(m),m=null);h.cache||n.push("_="+(new Date).getTime());h.jsonp&&(n.push("callback="+h.jsonp),n.push("jsonp="+h.jsonp));n=n.join("&");
1<n.length&&(g=-1<g.indexOf("?")?g+("&"+n):g+("?"+n));if(h.jsonp){var n=document.getElementsByTagName("head")[0],p=document.createElement("script");p.type="text/javascript";p.src=g;n.appendChild(p);return}}b(function(b,c){if(b)return k(b);c.open(a,g,h.async);for(var d in l)l.hasOwnProperty(d)&&c.setRequestHeader(d,l[d]);c.onreadystatechange=function(){if(4===c.readyState){var a=c.responseText||"";k&&k(c.status,a)}};c.send(m)})};({authBasic:function(a,b){var c=f.headers,d;d=a+":"+b;d=d.replace(/\r\n/g,
"\n");for(var g="",h=0;h<d.length;h++){var k=d.charCodeAt(h);128>k?g+=String.fromCharCode(k):(127<k&&2048>k?g+=String.fromCharCode(k>>6|192):(g+=String.fromCharCode(k>>12|224),g+=String.fromCharCode(k>>6&63|128)),g+=String.fromCharCode(k&63|128))}d=g;var g="",l,m,n,p,q=0;do l=d.charCodeAt(q++),h=d.charCodeAt(q++),k=d.charCodeAt(q++),m=l>>2,l=(l&3)<<4|h>>4,n=(h&15)<<2|k>>6,p=k&63,isNaN(h)?n=p=64:isNaN(k)&&(p=64),g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p);while(q<d.length);c.Authorization="Basic "+g},connect:function(a,b,c){return f("CONNECT",a,b,c)},del:function(a,b,c){return f("DELETE",a,b,c)},get:function(a,b,c){return f("GET",a,b,c)},head:function(a,b,c){return f("HEAD",a,b,c)},headers:function(a){f.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(-1!==d.text().indexOf(b))})},
options:function(a,b,c){return f("OPTIONS",a,b,c)},patch:function(a,b,c){return f("PATCH",a,b,c)},post:function(a,b,c){return f("POST",a,b,c)},put:function(a,b,c){return f("PUT",a,b,c)},trace:function(a,b,c){return f("TRACE",a,b,c)}})[a.type?a.type.toLowerCase():"get"](a.url,a,function(b,c){200===b?a.success(c,b,null):a.error(c,b,null)})}function f(a,b){"function"===typeof a&&(b=a,a={});a=a||{};E.extend(z,a);delete z.fixLng;"string"==typeof z.ns&&(z.ns={namespaces:[z.ns],defaultNs:z.ns});"string"==
typeof z.fallbackNS&&(z.fallbackNS=[z.fallbackNS]);if("string"==typeof z.fallbackLng||"boolean"==typeof z.fallbackLng)z.fallbackLng=[z.fallbackLng];z.interpolationPrefixEscaped=E.regexEscape(z.interpolationPrefix);z.interpolationSuffixEscaped=E.regexEscape(z.interpolationSuffix);z.lng||(z.lng=E.detectLanguage());z.lng?z.useCookie&&E.cookie.create(z.cookieName,z.lng,z.cookieExpirationTime,z.cookieDomain):(z.lng=z.fallbackLng[0],z.useCookie&&E.cookie.remove(z.cookieName));v=E.toLanguages(z.lng);u=v[0];
E.log("currentLng set to: "+u);var c=l;a.fixLng&&(c=function(a,b){b=b||{};b.lng=b.lng||c.lng;return l(a,b)},c.lng=u);H.setCurrentLng(u);if(z.resStore)s=z.resStore,B=!0,b&&b(c);else{var d=E.toLanguages(z.lng);"string"===typeof z.preload&&(z.preload=[z.preload]);for(var f=0,g=z.preload.length;f<g;f++)for(var h=E.toLanguages(z.preload[f]),k=0,m=h.length;k<m;k++)0>d.indexOf(h[k])&&d.push(h[k]);Autodesk.Viewing.i18n.sync.load(d,z,function(a,d){s=d;B=!0;b&&b(c)})}}function d(a,b){var c={dynamicLoad:z.dynamicLoad,
resGetPath:z.resGetPath,getAsync:z.getAsync,customLoad:z.customLoad,ns:{namespaces:a,defaultNs:""}},d=E.toLanguages(z.lng);"string"===typeof z.preload&&(z.preload=[z.preload]);for(var f=0,g=z.preload.length;f<g;f++)for(var h=E.toLanguages(z.preload[f]),k=0,l=h.length;k<l;k++)0>d.indexOf(h[k])&&d.push(h[k]);for(var m=[],f=0,g=d.length;f<g;f++){h=!1;if(k=s[d[f]])for(var l=0,n=a.length;l<n;l++)k[a[l]]||(h=!0);else h=!0;h&&m.push(d[f])}m.length?r.sync._fetch(m,c,function(c,d){var f=a.length*m.length;
E.each(a,function(a,c){0>z.ns.namespaces.indexOf(c)&&z.ns.namespaces.push(c);E.each(m,function(a,g){s[g]=s[g]||{};s[g][c]=d[g][c];f--;0===f&&b&&(z.useLocalStorage&&r.sync._storeLocal(s),b())})})}):b&&b()}function g(a,b,c,d){if(!a)return a;d=d||b;if(0>a.indexOf(d.interpolationPrefix||z.interpolationPrefix))return a;var f=d.interpolationPrefix?E.regexEscape(d.interpolationPrefix):z.interpolationPrefixEscaped,h=d.interpolationSuffix?E.regexEscape(d.interpolationSuffix):z.interpolationSuffixEscaped,k=
"HTML"+h;E.each(b,function(b,l){var m=c?c+z.keyseparator+b:b;"object"===typeof l&&null!==l?a=g(a,l,m,d):d.escapeInterpolation||z.escapeInterpolation?(a=a.replace(RegExp([f,m,k].join(""),"g"),l),a=a.replace(RegExp([f,m,h].join(""),"g"),E.escape(l))):a=a.replace(RegExp([f,m,h].join(""),"g"),l)});return a}function h(a,b){var c=E.extend({},b);for(delete c.postProcess;-1!=a.indexOf(z.reusePrefix);){w++;if(w>z.maxRecursion)break;var d=a.lastIndexOf(z.reusePrefix),f=a.indexOf(z.reuseSuffix,d)+z.reuseSuffix.length,
d=a.substring(d,f),f=d.replace(z.reusePrefix,"").replace(z.reuseSuffix,"");if(-1!=f.indexOf(",")){var g=f.indexOf(",");if(-1!=f.indexOf("{",g)&&-1!=f.indexOf("}",g)){var h=f.indexOf("{",g),k=f.indexOf("}",h)+1;try{c=E.extend(c,JSON.parse(f.substring(h,k))),f=f.substring(0,g)}catch(l){}}}f=p(f,c);a=a.replace(d,f)}return a}function k(a,b){b=b||{};var c=void 0!==b.defaultValue?b.defaultValue:a,d=n(a,b);return void 0!==d||d===c}function l(a,b){b=b||{};if(!B){E.log("i18next not finished initialization. you might have called t function before loading resources finished.");
var c=a.indexOf(":");0>c?c=0:c++;(c=b.defaultValue||a.substr(c))&&(c=g(c,b));return c}w=0;return p.apply(null,arguments)}function m(){for(var a=[],b=1;b<arguments.length;b++)a.push(arguments[b]);return{postProcess:"sprintf",sprintf:a}}function p(a,b){b&&"object"!==typeof b?"sprintf"===z.shortcutFunction?b=m.apply(null,arguments):"defaultValue"===z.shortcutFunction&&(b={defaultValue:b}):b=b||{};if(void 0===a||null===a)return"";"string"==typeof a&&(a=[a]);var c=a[0];if(1<a.length)for(var d=0;d<a.length&&
(c=a[d],!k(c,b));d++);var d=void 0!==b.defaultValue?b.defaultValue:c,f=n(c,b),l=b.lng?E.toLanguages(b.lng):v,p=b.ns||z.ns.defaultNs,q;-1<c.indexOf(z.nsseparator)&&(q=c.split(z.nsseparator),p=q[0],c=q[1]);void 0===f&&z.sendMissing&&(b.lng?I.postMissing(l[0],p,c,d,l):I.postMissing(z.lng,p,c,d,l));l=b.postProcess||z.postProcess;void 0!==f&&l&&Q[l]&&(f=Q[l](f,c,b));q=d;-1<d.indexOf(z.nsseparator)&&(q=d.split(z.nsseparator),q=q[1]);q===c&&z.parseMissingKey&&(d=z.parseMissingKey(d));void 0===f&&(d=g(d,
b),d=h(d,b),l&&Q[l]&&(f=Q[l](void 0!==b.defaultValue?b.defaultValue:c,c,b)));return void 0!==f?f:d}function n(a,b){b=b||{};var c,d=void 0!==b.defaultValue?b.defaultValue:a,f=v;if(!s||"cimode"===f[0].toLowerCase())return d;if(b.lng&&(f=E.toLanguages(b.lng),!s[f[0]])){var k=z.getAsync;z.getAsync=!1;Autodesk.Viewing.i18n.sync.load(f,z,function(a,b){E.extend(s,b);z.getAsync=k})}var m=b.ns||z.ns.defaultNs;-1<a.indexOf(z.nsseparator)&&(c=a.split(z.nsseparator),m=c[0],a=c[1]);if(b.context&&("string"==typeof b.context||
"number"==typeof b.context)&&(c=E.extend({},b),delete c.context,c.defaultValue=z.contextNotFound,c=l(m+z.nsseparator+a+"_"+b.context,c),c!=z.contextNotFound))return g(c,{context:b.context});if(void 0!==b.count&&"string"!=typeof b.count&&1!==b.count){c=E.extend({},b);delete c.count;c.defaultValue=z.pluralNotFound;var q=m+z.nsseparator+a+z.pluralSuffix,r=H.get(f[0],b.count);0<=r?q=q+"_"+r:1===r&&(q=m+z.nsseparator+a);c=l(q,c);if(c!=z.pluralNotFound)return g(c,{count:b.count,interpolationPrefix:b.interpolationPrefix,
interpolationSuffix:b.interpolationSuffix})}var u;c=a.split(z.keyseparator);q=0;for(r=f.length;q<r&&void 0===u;q++){for(var w=f[q],A=0,B=s[w]&&s[w][m];c[A];)B=B&&B[c[A]],A++;if(void 0!==B){u=Object.prototype.toString.apply(B);if("string"===typeof B)B=g(B,b),B=h(B,b);else if("[object Array]"===u&&!z.returnObjectTrees&&!b.returnObjectTrees)B=B.join("\n"),B=g(B,b),B=h(B,b);else if(null===B&&!0===z.fallbackOnNull)B=void 0;else if(null!==B)if(!z.returnObjectTrees&&!b.returnObjectTrees)z.objectTreeKeyHandler&&
"function"==typeof z.objectTreeKeyHandler?B=z.objectTreeKeyHandler(a,B,w,m,b):(B="key '"+m+":"+a+" ("+w+")' returned an object instead of string.",E.log(B));else if("[object Number]"!==u&&"[object Function]"!==u&&"[object RegExp]"!==u){var C="[object Array]"===u?[]:{};E.each(B,function(c){C[c]=p(m+z.nsseparator+a+z.keyseparator+c,b)});B=C}"string"===typeof B&&""===B.trim()&&!0===z.fallbackOnEmpty&&(B=void 0);u=B}}if(void 0===u&&!b.isFallbackLookup&&(!0===z.fallbackToDefaultNS||z.fallbackNS&&0<z.fallbackNS.length))if(b.isFallbackLookup=
!0,z.fallbackNS.length)for(f=0,c=z.fallbackNS.length;f<c;f++){if(u=n(z.fallbackNS[f]+z.nsseparator+a,b))if(q=-1<u.indexOf(z.nsseparator)?u.split(z.nsseparator)[1]:u,r=-1<d.indexOf(z.nsseparator)?d.split(z.nsseparator)[1]:d,q!==r)break}else u=n(a,b);return u}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;0<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&Infinity!=d&&-Infinity!=d&&(d=
(0<d||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;for(d=0<=d?d:Math.max(c-Math.abs(d),0);d<c;d++)if(d in b&&b[d]===a)return d;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;1<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(0<d||-1)*Math.floor(Math.abs(d))));for(c=0<=d?Math.min(d,c-1):c-Math.abs(d);0<=c;c--)if(c in b&&b[c]===a)return c;return-1});
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var q=this.jQuery||this.Zepto,r={},s={},u,w=0,v=[],B=!1;"undefined"!==typeof module&&module.exports?module.exports=r:(q&&(q.i18n=q.i18n||r),this.i18n=this.i18n||r);var z={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",
keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048E5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",
Math.random()].join(""),escapeInterpolation:!1,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,shortcutFunction:"sprintf"},A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},C={create:function(a,b,c,d){if(c){var f=new Date;f.setTime(f.getTime()+6E4*c);c="; expires="+f.toGMTString()}else c="";document.cookie=a+"="+b+c+";"+
(d?"domain="+d+";":"")+"path=/"},read:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},remove:function(a){this.create(a,"",-1)}},G={create:function(a,b,c,d){},read:function(a){return null},remove:function(a){}},E={extend:q?q.extend:a,each:q?q.each:b,ajax:q?q.ajax:"undefined"!==typeof document?c:function(){},cookie:"undefined"!==typeof document?
C:G,detectLanguage:function(){var a,b=[];if("undefined"!==typeof window){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var f=c[d].indexOf("=");if(0<f){var g=c[d].substring(0,f),f=c[d].substring(f+1);b[g]=f}}b[z.detectLngQS]&&(a=b[z.detectLngQS])}!a&&"undefined"!==typeof document&&z.useCookie&&(b=E.cookie.read(z.cookieName))&&(a=b);a||"undefined"===typeof navigator||(a=navigator.language?navigator.language:navigator.userLanguage);return a},escape:function(a){return"string"===
typeof a?a.replace(/[&<>"'\/]/g,function(a){return A[a]}):a},log:function(a){z.debug&&"undefined"!==typeof console&&console.log(a)},toLanguages:function(a){var b=[];if("string"===typeof a&&-1<a.indexOf("-")){var c=a.split("-");a=z.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase();"unspecific"!==z.load&&b.push(a);"current"!==z.load&&b.push(c[0])}else b.push(a);for(a=0;a<z.fallbackLng.length;a++)-1===b.indexOf(z.fallbackLng[a])&&z.fallbackLng[a]&&b.push(z.fallbackLng[a]);
return b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};E.applyReplacement=g;var I={load:function(a,b,c){b.useLocalStorage?I._loadLocal(a,b,function(d,f){for(var g=[],h=0,k=a.length;h<k;h++)f[a[h]]||g.push(a[h]);0<g.length?I._fetch(g,b,function(a,b){E.extend(f,b);I._storeLocal(b);c(null,f)}):c(null,f)}):I._fetch(a,b,function(a,b){c(null,b)})},_loadLocal:function(a,b,c){var d={},f=(new Date).getTime();if(window.localStorage){var g=a.length;E.each(a,function(a,
h){var k=window.localStorage.getItem("res_"+h);k&&(k=JSON.parse(k),k.i18nStamp&&k.i18nStamp+b.localStorageExpirationTime>f&&(d[h]=k));g--;0===g&&c(null,d)})}},_storeLocal:function(a){if(window.localStorage)for(var b in a)a[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(a[b]))},_fetch:function(a,b,c){var d=b.ns,f={};if(b.dynamicLoad){var h=function(a,b){c(null,b)};if("function"==typeof b.customLoad)b.customLoad(a,d.namespaces,b,h);else{var k=g(b.resGetPath,{lng:a.join("+"),
ns:d.namespaces.join("+")}),k=RESOURCE_ROOT+k;E.ajax({url:k,success:function(a,b,d){E.log("loaded: "+k);a=a.json();c(null,a)},error:function(a,b,d){E.log("failed loading: "+k);c(null,void 0)},dataType:"text",async:b.getAsync})}}else{var l=d.namespaces.length*a.length,m;E.each(d.namespaces,function(d,g){E.each(a,function(a,d){var h=function(a,b){a&&(m=m||[],m.push(a));f[d]=f[d]||{};f[d][g]=b;l--;0===l&&c(m,f)};"function"==typeof b.customLoad?b.customLoad(d,g,b,h):I._fetchOne(d,g,b,h)})})}},_fetchOne:function(a,
b,c,d){var f=g(c.resGetPath,{lng:a,ns:b}),f=RESOURCE_ROOT+f;E.ajax({url:f,success:function(a,b,c){E.log("loaded: "+f);for(var g=!1,h=!1,k="",l=0;l<a.length;l++)if(b=a[l],c=a[l+1],h||"\\"===a[l-1]||'"'!==b||(g=!g),g)k+=b;else{if(!h&&"//"===b+c)h="single",l++;else if("single"===h&&"\r\n"===b+c)h=!1,l++;else if("single"===h&&"\n"===b)h=!1;else if(!h&&"/*"===b+c){h="multi";l++;continue}else if("multi"===h&&"*/"===b+c){h=!1;l++;continue}h||(k+=b)}d(null,JSON.parse(k))},error:function(a,b,c){b&&200==b||
a&&a.status&&200==a.status?E.log("There is a typo in: "+f):b&&404==b||a&&a.status&&404==a.status?E.log("Does not exist: "+f):E.log((b?b:a&&a.status?a.status:null)+" when loading "+f);d(c,{})},dataType:"text",async:c.getAsync})},postMissing:function(a,b,c,d,f){var h={};h[c]=d;var k=[];if("fallback"===z.sendMissingTo&&!1!==z.fallbackLng[0])for(a=0;a<z.fallbackLng.length;a++)k.push({lng:z.fallbackLng[a],url:g(z.resPostPath,{lng:z.fallbackLng[a],ns:b})});else if("current"===z.sendMissingTo||"fallback"===
z.sendMissingTo&&!1===z.fallbackLng[0])k.push({lng:a,url:g(z.resPostPath,{lng:a,ns:b})});else if("all"===z.sendMissingTo){a=0;for(var l=f.length;a<l;a++)k.push({lng:f[a],url:g(z.resPostPath,{lng:f[a],ns:b})})}f=0;for(a=k.length;f<a;f++){var m=k[f];E.ajax({url:m.url,type:z.sendType,data:h,success:function(a,f,g){E.log("posted missing key '"+c+"' to: "+m.url);a=c.split(".");f=0;for(g=s[m.lng][b];a[f];)g=f===a.length-1?g[a[f]]=d:g[a[f]]=g[a[f]]||{},f++},error:function(a,b,d){E.log("failed posting missing key '"+
c+"' to: "+m.url)},dataType:"json",async:z.postAsync})}}},H={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(1<a)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(1<a)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(1<a)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(0===
a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(1<a)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ay:{name:"Aymar\u00e1",numbers:[1],plurals:function(a){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(1!=a)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},bg:{name:"Bulgarian",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bo:{name:"Tibetan",numbers:[1],plurals:function(a){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(1<a)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},cgg:{name:"Chiga",numbers:[1],
plurals:function(a){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(1!=a)}},dz:{name:"Dzongkha",
numbers:[1],plurals:function(a){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(1!=a)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fa:{name:"Persian",numbers:[1],plurals:function(a){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(1<a)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(1<a)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(1==a?0:2==a?1:7>a?2:11>a?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(1<
a)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(1!=a)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(1!=a)}},id:{name:"Indonesian",numbers:[1],plurals:function(a){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(1!=a%10||11==a%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ja:{name:"Japanese",numbers:[1],plurals:function(a){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(a){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(0!==
a)}},ka:{name:"Georgian",numbers:[1],plurals:function(a){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(a){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(a){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ko:{name:"Korean",numbers:[1],plurals:function(a){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(1==a?0:2==a?1:3==a?2:3)}},ky:{name:"Kyrgyz",
numbers:[1],plurals:function(a){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(1<a)}},lo:{name:"Lao",numbers:[1],plurals:function(a){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2)}},lv:{name:"Latvian",numbers:[1,2,0],plurals:function(a){return Number(1==a%10&&11!=a%100?0:0!==a?1:2)}},mai:{name:"Maithili",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(1<a)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(1<a)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(1<a)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(1==a||1==a%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(1==a?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ms:{name:"Malay",numbers:[1],plurals:function(a){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(1==a?0:0===a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(1!=a)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(1!=a)}},oc:{name:"Occitan",numbers:[1,
2],plurals:function(a){return Number(1<a)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(1!=a)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ps:{name:"Pashto",numbers:[1,
2],plurals:function(a){return Number(1!=a)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(1==a?0:0===a||0<a%100&&20>a%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=
a%10&&(10>a%100||20<=a%100)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(a){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(1!=a)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(1!=a)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(1==a%100?
1:2==a%100?2:3==a%100||4==a%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(a){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(1!=a)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(1<a)}},th:{name:"Thai",numbers:[1],plurals:function(a){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(1<a)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(1<a)}},tt:{name:"Tatar",numbers:[1],plurals:function(a){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(a){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(1<a)}},vi:{name:"Vietnamese",
numbers:[1],plurals:function(a){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(1<a)}},wo:{name:"Wolof",numbers:[1],plurals:function(a){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(1!=a)}},zh:{name:"Chinese",numbers:[1],plurals:function(a){return 0}}},addRule:function(a,b){H.rules[a]=b},setCurrentLng:function(a){if(!H.currentRule||H.currentRule.lng!==a){var b=a.split("-");H.currentRule={lng:a,rule:H.rules[b[0]]}}},get:function(a,b){var c=
a.split("-");if(c=H.currentRule&&H.currentRule.lng===a?H.currentRule.rule:H.rules[c[0]]){var d=c.plurals(b),d=c.numbers[d];2===c.numbers.length&&1===c.numbers[0]&&(2===d?d=-1:1===d&&(d=1));c=d}else c=1===b?"1":"-1";return c}},Q={},q=function(a,b){Q[a]=b},N=function(){function a(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var b=function(){b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=b.parse(arguments[0]));return b.format.call(null,b.cache[arguments[0]],arguments)};
b.format=function(b,c){var d=1,f=b.length,g="",h=[],k,l,m,n;for(k=0;k<f;k++)if(g=a(b[k]),"string"===g)h.push(b[k]);else if("array"===g){m=b[k];if(m[2])for(g=c[d],l=0;l<m[2].length;l++){if(!g.hasOwnProperty(m[2][l]))throw N('[sprintf] property "%s" does not exist',m[2][l]);g=g[m[2][l]]}else g=m[1]?c[m[1]]:c[d++];if(/[^s]/.test(m[8])&&"number"!=a(g))throw N("[sprintf] expecting number but found %s",a(g));switch(m[8]){case "b":g=g.toString(2);break;case "c":g=String.fromCharCode(g);break;case "d":g=
parseInt(g,10);break;case "e":g=m[7]?g.toExponential(m[7]):g.toExponential();break;case "f":g=m[7]?parseFloat(g).toFixed(m[7]):parseFloat(g);break;case "o":g=g.toString(8);break;case "s":g=(g=String(g))&&m[7]?g.substring(0,m[7]):g;break;case "u":g=Math.abs(g);break;case "x":g=g.toString(16);break;case "X":g=g.toString(16).toUpperCase()}g=/[def]/.test(m[8])&&m[3]&&0<=g?"+"+g:g;l=m[4]?"0"==m[4]?"0":m[4].charAt(1):" ";n=m[6]-String(g).length;if(m[6]){for(var p=[];0<n;p[--n]=l);l=p.join("")}else l="";
h.push(m[5]?g+l:l+g)}return h.join("")};b.cache={};b.parse=function(a){for(var b=[],c=[],d=0;a;){if(null!==(b=/^[^\x25]+/.exec(a)))c.push(b[0]);else if(null!==(b=/^\x25{2}/.exec(a)))c.push("%");else if(null!==(b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))){if(b[2]){var d=d|1,f=[],g=b[2],h=[];if(null!==(h=/^([a-z_][a-z_\d]*)/i.exec(g)))for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else if(null!==
(h=/^\[(\d+)\]/.exec(g)))f.push(h[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";b[2]=f}else d|=2;if(3===d)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";c.push(b)}else throw"[sprintf] huh?";a=a.substring(b[0].length)}return c};return b}();q("sprintf",function(a,b,c){return c.sprintf?"[object Array]"===Object.prototype.toString.apply(c.sprintf)?(b=c.sprintf,b.unshift(a),N.apply(null,b)):"object"===typeof c.sprintf?N(a,c.sprintf):a:a});Autodesk.Viewing.i18n.init=
f;Autodesk.Viewing.i18n.setLng=function(a,b,c){"function"===typeof b?(c=b,b={}):b||(b={});b.lng=a;return f(b,c)};Autodesk.Viewing.i18n.preload=function(a,b){"string"===typeof a&&(a=[a]);for(var c=0,d=a.length;c<d;c++)0>z.preload.indexOf(a[c])&&z.preload.push(a[c]);return f(b)};Autodesk.Viewing.i18n.addResourceBundle=function(a,b,c){"string"!==typeof b?(c=b,b=z.ns.defaultNs):0>z.ns.namespaces.indexOf(b)&&z.ns.namespaces.push(b);s[a]=s[a]||{};s[a][b]=s[a][b]||{};E.extend(s[a][b],c)};Autodesk.Viewing.i18n.removeResourceBundle=
function(a,b){"string"!==typeof b&&(b=z.ns.defaultNs);s[a]=s[a]||{};s[a][b]={}};Autodesk.Viewing.i18n.loadNamespace=function(a,b){d([a],b)};Autodesk.Viewing.i18n.loadNamespaces=d;Autodesk.Viewing.i18n.localize=function(){Array.prototype.forEach.call(document.querySelectorAll("[data-i18n]"),function(a){var b,c,d=a.getAttribute("data-i18n").split(/\[|\]/);1===d.length?(c=null,b=d[0]):3===d.length&&(c=d[1],b=d[2]);b=[c,b];c=b[0];b=b[1];(d=Autodesk.Viewing.i18n.translate(b))?c?a.setAttribute(c,d):a.textContent=
d:c?a.setAttribute(c,b):a.textContent=b})};Autodesk.Viewing.i18n.setDefaultNamespace=function(a){z.ns.defaultNs=a};Autodesk.Viewing.i18n.t=l;Autodesk.Viewing.i18n.translate=l;Autodesk.Viewing.i18n.exists=k;Autodesk.Viewing.i18n.detectLanguage=E.detectLanguage;Autodesk.Viewing.i18n.pluralExtensions=H;Autodesk.Viewing.i18n.sync=I;Autodesk.Viewing.i18n.functions=E;Autodesk.Viewing.i18n.lng=function(){return u};Autodesk.Viewing.i18n.addPostProcessor=q;Autodesk.Viewing.i18n.options=z})();AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.DockingPanel=function(a,b,c,f){this.kMinHeight=this.kMinWdth=100;this.visibilityCallbacks=[];this.movedSinceLastClick=!1;this.parentContainer=a;this.container=document.createElement("div");this.container.id=b;this.container.lastWidth="";this.container.dockRight=!1;this.container.dockBottom=!1;this.titleLabel=c;f=f||{};f.hasOwnProperty("localizeTitle")||(f.localizeTitle=!0);this.options=f;this.container.classList.add("dockingPanel");(f&&void 0!==f.shadow?f.shadow:1)&&this.container.classList.add("shadow");
this.container.classList.add("ontouchstart"in window?"touch":"notouch");a.appendChild(this.container);this.listeners=[];this.initialize();this.setVisible(!1)};Autodesk.Viewing.UI.DockingPanel.prototype.initialize=function(){this.title=this.createTitleBar(this.titleLabel||this.container.id);this.container.appendChild(this.title);this.initializeMoveHandlers(this.title);this.setTitle(this.titleLabel||this.container.id,this.options);this.closer=this.createCloseButton();this.container.appendChild(this.closer)};
Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize=function(){for(var a=0;a<this.listeners.length;++a){var b=this.listeners[a];b.target.removeEventListener(b.eventId,b.callback)}this.listeners=[];this.visibilityCallbacks=[];this.parentContainer.removeChild(this.container);this.closer=this.title=this.container=this.parentContainer=null};Autodesk.Viewing.UI.DockingPanel.prototype.addVisibilityListener=function(a){this.visibilityCallbacks.push(a)};
Autodesk.Viewing.UI.DockingPanel.prototype.isVisible=function(){return"none"!==this.container.style.display&&""!==this.container.style.display};
Autodesk.Viewing.UI.DockingPanel.prototype.setVisible=function(a){this.container.style.display=a?"block":"none";if(a){if(this.container.dockRight){var b=this.parentContainer.getBoundingClientRect().width,c=this.container.style.width?this.container.style.width:this.container.getBoundingClientRect().width;c||(c=this.container.lastWidth);c=""===c?300:parseInt(c);this.container.style.left=b-c+"px"}this.container.dockBottom&&(b=this.parentContainer.getBoundingClientRect().height,c=this.container.style.height?
this.container.style.height:this.container.getBoundingClientRect().height,c||(c=this.container.lastHeight),c=""===c?300:parseInt(c),this.container.style.top=b-c+"px");var f=this;setTimeout(function(){f.container.classList.add("dockingPanelVisible");f.container.classList.remove("dockingPanelHidden")},400)}else this.container.lastWidth=this.parentContainer.style.width,this.container.lastHeight=this.parentContainer.style.height,this.container.classList.remove("dockingPanelVisible"),this.container.classList.add("dockingPanelHidden");
for(b=0;b<this.visibilityCallbacks.length;b++)this.visibilityCallbacks[b](a)};Autodesk.Viewing.UI.DockingPanel.prototype.isVisible=function(){return Boolean("block"===this.container.style.display)};
Autodesk.Viewing.UI.DockingPanel.prototype.initializeMoveHandlers=function(a){function b(a){var b=q.style.minWidth?parseInt(q.style.minWidth):this.kMinWdth,c=q.style.minHeight?parseInt(q.style.minHeight):this.kMinHeight,f=r.parentContainer.getBoundingClientRect();q.style.maxWidth&&parseInt(q.style.width)>parseInt(q.style.maxWidth)&&(q.style.width=q.style.maxWidth);q.style.maxHeight&&parseInt(q.style.height)>parseInt(q.style.maxHeight)&&(q.style.height=q.style.maxHeight);parseInt(q.style.width)<b&&
(q.style.width=b+"px");parseInt(q.style.height)<c&&(q.style.height=c+"px");"touchmove"===a.type&&(a.screenX=a.touches[0].screenX,a.screenY=a.touches[0].screenY);p+=a.screenX-h;n+=a.screenY-k;d=l+p;g=m+n;b=parseInt(q.style.width);c=parseInt(q.style.height);isNaN(b)&&(b=r.container.getBoundingClientRect().width);isNaN(c)&&(c=r.container.getBoundingClientRect().height);5>d&&(d=0);5>g&&(g=0);q.dockRight=!1;q.dockBottom=!1;f.width-5<d+b&&(d=f.width-b,q.dockRight=!0);f.height-5<g+c&&(g=f.height-c,q.dockBottom=
!0);q.style.left=d+"px";q.style.top=g+"px";q.style.maxWidth=f.width-d+"px";q.style.maxHeight=f.height-g+"px";h=a.screenX;k=a.screenY;r.onMove(a,d,g)}function c(a){window.removeEventListener("mousemove",b);window.removeEventListener("mouseup",c);window.removeEventListener("touchmove",b);window.removeEventListener("touchend",c);r.onEndMove(a,d,g)}function f(a){"touchstart"===a.type&&(a.screenX=a.touches[0].screenX,a.screenY=a.touches[0].screenY);h=a.screenX;k=a.screenY;n=p=0;l=r.container.offsetLeft;
m=r.container.offsetTop;window.addEventListener("mousemove",b,!1);window.addEventListener("mouseup",c,!1);window.addEventListener("touchmove",b,!1);window.addEventListener("touchend",c,!1);a.preventDefault();r.onStartMove(a,l,m)}var d,g,h,k,l,m,p,n,q=this.container,r=this;r.addEventListener(a,"mousedown",f);r.addEventListener(a,"touchstart",f)};Autodesk.Viewing.UI.DockingPanel.prototype.initializeCloseHandler=function(a){var b=this;b.addEventListener(a,"click",function(a){b.setVisible(!1)},!1)};
Autodesk.Viewing.UI.DockingPanel.prototype.createScrollContainer=function(a){var b=document.createElement("div"),c=b.classList;c.add("dockingPanelScroll");c.add(a&&a.left?"left":"right");a&&a.heightAdjustment&&(b.style.height="calc(100% - "+a.heightAdjustment+"px)");return b};
Autodesk.Viewing.UI.DockingPanel.prototype.createTitleBar=function(a){var b=document.createElement("div");b.className="dockingPanelTitle";b.textContent=a;var c=this;c.addEventListener(b,"click",function(a){if(!c.movedSinceLastClick)c.onTitleClick(a);c.movedSinceLastClick=!1});c.addEventListener(b,"dblclick",function(a){c.onTitleDoubleClick(a)});return b};
Autodesk.Viewing.UI.DockingPanel.prototype.setTitle=function(a,b){b&&b.localizeTitle?(this.title.setAttribute("data-i18n",a),a=Autodesk.Viewing.i18n.translate(a)):this.title.removeAttribute("data-i18n");this.title.textContent=a};Autodesk.Viewing.UI.DockingPanel.prototype.createCloseButton=function(){var a=document.createElement("div");a.className="dockingPanelClose";a.innerHTML="&times;";this.initializeCloseHandler(a);return a};Autodesk.Viewing.UI.DockingPanel.prototype.onStartMove=function(a,b,c){};
Autodesk.Viewing.UI.DockingPanel.prototype.onEndMove=function(a,b,c){};Autodesk.Viewing.UI.DockingPanel.prototype.onMove=function(a,b,c){this.movedSinceLastClick=!0};Autodesk.Viewing.UI.DockingPanel.prototype.onTitleClick=function(a){};Autodesk.Viewing.UI.DockingPanel.prototype.onTitleDoubleClick=function(a){};Autodesk.Viewing.UI.DockingPanel.prototype.addEventListener=function(a,b,c){a.addEventListener(b,c);this.listeners.push({target:a,eventId:b,callback:c})};
Autodesk.Viewing.UI.DockingPanel.prototype.removeEventListener=function(a,b,c){for(var f=0;f<this.listeners.length;++f){var d=this.listeners[f];if(d.target===a&&d.eventId===b&&d.callback===c)return a.removeEventListener(b,c),this.listeners.splice(f,1),!0}return!1};Autodesk.Viewing.UI.DockingPanel.prototype.getContentSize=function(){return{height:this.container.clientHeight,width:this.container.clientWidth}};
Autodesk.Viewing.UI.DockingPanel.prototype.resizeToContent=function(a){var b=this.getContentSize().height;if(a&&a.maxHeight){var c=this.container.getBoundingClientRect();a=a.maxHeight-c.top;b>a&&(b=a)}this.container.style.height=b.toString()+"px"};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.ModelStructurePanel=function(a,b,c,f){Autodesk.Viewing.UI.DockingPanel.call(this,a,b,c,f);this.container.classList.add("modelStructurePanel");this.scrollContainer=this.createScrollContainer({left:!1,heightAdjustment:70});this.scrollContainer.style.marginTop="20px";this.container.appendChild(this.scrollContainer);this.scrollContainer.id=this.container.id+"-scroll-container";this.tree=this.modelRoot=null;this.selectedNodes=[]};Autodesk.Viewing.UI.ModelStructurePanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);
Autodesk.Viewing.UI.ModelStructurePanel.prototype.constructor=Autodesk.Viewing.UI.ModelStructurePanel;
Autodesk.Viewing.UI.ModelStructurePanel.prototype.setModel=function(a,b){var c=this,f=function(){var a=new Autodesk.Viewing.UI.TreeDelegate;a.getTreeNodeId=function(a){return a.dbId};a.getTreeNodeLabel=function(a){return c.getNodeLabel(a)};a.getTreeNodeClass=function(a){return c.getNodeClass(a)};a.isTreeNodeGroup=function(a){return c.isGroupNode(a)};a.shouldCreateTreeNode=function(a){return c.shouldInclude(a)};a.onTreeNodeHover=function(a,b,d){c.onHover(b,d)};a.onTreeNodeClick=function(a,b,d){c.onClick(b,
d)};a.onTreeNodeRightClick=function(a,b,d){c.onRightClick(b,d)};a.onTreeNodeDoubleClick=function(a,b,d){c.onDoubleClick(b,d)};a.onTreeNodeIconClick=function(a,b,d){c.setGroupCollapsed(b,!c.isGroupCollapsed(b))};return a};c.selectedNodes=[];var d=b;d||(c.options&&c.options.defaultTitle?d=c.options.defaultTitle:a&&(d=a.name));var g={};d||(d="Model Structure",g.localizeTitle=!0);c.setTitle(d,g);if(c.tree){for(;c.scrollContainer.hasChildNodes();)c.scrollContainer.removeChild(c.scrollContainer.lastChild);
c.title.removeEventListener("click",c.onTitleClick);c.title.removeEventListener("dblclick",c.onTitleDoubleClick)}if(c.modelRoot=a)f=f(),c.tree=new Autodesk.Viewing.UI.Tree(f,a,c.scrollContainer,{}),c.options&&c.options.hasOwnProperty("startCollapsed")&&!c.options.startCollapsed||(c.tree.setAllCollapsed(!0),c.tree.setCollapsed(f.getTreeNodeId(a),!1)),c.options&&c.options.hasOwnProperty("excludeRoot")&&!c.options.excludeRoot||c.tree.addClass(f.getTreeNodeId(a),"exclude")};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.getNodeLabel=function(a){return a.name&&""!==a.name?a.name:"Object "+a.dbId};Autodesk.Viewing.UI.ModelStructurePanel.prototype.getNodeClass=function(a){return""};Autodesk.Viewing.UI.ModelStructurePanel.prototype.isGroupNode=function(a){return a.children&&Array.isArray(a.children)&&0<a.children.length};Autodesk.Viewing.UI.ModelStructurePanel.prototype.shouldInclude=function(a){return!0};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.onHover=function(a,b){};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onClick=function(a,b){this.setSelection([a])};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onDoubleClick=function(a,b){};Autodesk.Viewing.UI.ModelStructurePanel.prototype.setGroupCollapsed=function(a,b){var c=this.tree.delegate();c.isTreeNodeGroup(a)&&(c=c.getTreeNodeId(a),this.tree.setCollapsed(c,b))};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.isGroupCollapsed=function(a){var b=this.tree.delegate();return b.isTreeNodeGroup(a)?(a=b.getTreeNodeId(a),this.tree.isCollapsed(a)):!1};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onRightClick=function(a,b){};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onTitleClick=function(a){this.onClick(this.modelRoot,a)};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onTitleDoubleClick=function(a){this.onDoubleClick(this.modelRoot,a)};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.setSelection=function(a){if(this.tree){for(var b=0;b<this.selectedNodes.length;++b)for(var c=this.selectedNodes[b].parent;c;)this.tree.removeClass(this.tree.delegate().getTreeNodeId(c),"ancestor-selected"),c=c.parent;for(var f=[],b=0;b<a.length;++b)for(f.push(a[b].dbId),c=a[b].parent;c;)this.tree.addClass(this.tree.delegate().getTreeNodeId(c),"ancestor-selected"),c=c.parent;this.selectedNodes=a;this.tree.setSelection(f)}};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.getContentSize=function(){var a=document.getElementById(this.tree.getRootContainerId());return{height:a.clientHeight+75,width:a.clientWidth}};Autodesk.Viewing.UI.ModelStructurePanel.prototype.addClass=function(a,b){return null!==this.tree&&this.tree.addClass(a,b)};Autodesk.Viewing.UI.ModelStructurePanel.prototype.removeClass=function(a,b){return null!==this.tree&&this.tree.removeClass(a,b)};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.PropertyPanel=function(a,b,c,f){Autodesk.Viewing.UI.DockingPanel.call(this,a,b,c,f);this.container.classList.add("propertyPanel");this.container.dockRight=!0;this.scrollContainer=this.createScrollContainer({left:!1,heightAdjustment:75});this.scrollContainer.style.marginTop="20px";this.container.appendChild(this.scrollContainer);this.scrollContainer.id=this.container.id+"-scroll-container";this.highlightableElements={};var d=this;a=function(){function a(b){return"category"===b.type}
var b=new Autodesk.Viewing.UI.TreeDelegate;b.getTreeNodeId=function(a){return a.name+(a.hasOwnProperty("value")?a.value:"")+(a.hasOwnProperty("category")?a.category:"")};b.getTreeNodeClass=function(b){return a(b)?d.getCategoryClass(b):d.getPropertyClass(b)};b.isTreeNodeGroup=function(b){return a(b)};b.onTreeNodeHover=function(b,c,f){if(a(c))d.onCategoryHover(c,f);else d.onPropertyHover(c,f)};b.onTreeNodeClick=function(b,c,f){if(a(c))d.onCategoryClick(c,f);else d.onPropertyClick(c,f)};b.onTreeNodeRightClick=
function(b,c,f){if(a(c))d.onCategoryRightClick(c,f);else d.onPropertyRightClick(c,f)};b.onTreeNodeDoubleClick=function(b,c,f){if(a(c))d.onCategoryDoubleClick(c,f);else d.onPropertyDoubleClick(c,f)};b.onTreeNodeIconClick=function(b,c,f){if(a(c))d.onCategoryIconClick(c,f);else d.onPropertyIconClick(c,f)};b.createTreeNode=function(b,c,f){var h=null;(h=a(b)?d.displayCategory(b,c,f):d.displayProperty(b,c,f))&&(d.highlightableElements[this.getTreeNodeId(b)]=h)};return b}();this.tree=new Autodesk.Viewing.UI.Tree(a,
null,this.scrollContainer,{})};Autodesk.Viewing.UI.PropertyPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.UI.PropertyPanel.prototype.constructor=Autodesk.Viewing.UI.PropertyPanel;
Autodesk.Viewing.UI.PropertyPanel.prototype.setProperties=function(a,b){this.removeAllProperties();for(var c=[],f=[],d=0;d<a.length;d++){var g=a[d];if(!g.hidden){var g=a[d],h=a[d].displayCategory;h&&"string"===typeof h&&""!==h?c.push(g):f.push(g)}}if(0===c.length+f.length)this.showNoProperties();else{for(d=0;d<c.length;d++)g=c[d],h=Autodesk.Viewing.Private.formatValueWithUnits(g.displayValue,g.units,g.type),this.addProperty(g.displayName,h,g.displayCategory);c=0<c.length;for(d=0;d<f.length;d++)g=
f[d],h=Autodesk.Viewing.Private.formatValueWithUnits(g.displayValue,g.units,g.type),this.addProperty(g.displayName,h,c?"Other":"",c?{localizeCategory:!0}:{})}};
Autodesk.Viewing.UI.PropertyPanel.prototype.showNoProperties=function(){this.removeAllProperties();var a=document.getElementById(this.tree.myRootContainerId),b=document.createElement("div");b.className="noProperties";b.setAttribute("data-i18n","No properties to display");b.textContent=Autodesk.Viewing.i18n.translate("No properties to display");a.appendChild(b)};Autodesk.Viewing.UI.PropertyPanel.prototype.showDefaultProperties=function(){this.showNoProperties();var a=this.viewer.getDimensions();this.resizeToContent({maxHeight:a.height})};
Autodesk.Viewing.UI.PropertyPanel.prototype.areDefaultPropertiesShown=function(){return!this.hasProperties()};
Autodesk.Viewing.UI.PropertyPanel.prototype.addProperty=function(a,b,c,f){if(this.tree.getElementByNode({name:a,value:b,category:c}))return!1;var d=null;a={name:a,value:b,type:"property"};c?((d=this.tree.getElementByNode({name:c}))||(d=this.tree.createElement_({name:c,type:"category"},document.getElementById(this.tree.myRootContainerId),f&&f.localizeCategory?{localize:!0}:null)),a.category=c):d=document.getElementById(this.tree.myRootContainerId);this.tree.createElement_(a,d,f&&f.localizeProperty?
{localize:!0}:null);return!0};Autodesk.Viewing.UI.PropertyPanel.prototype.hasProperties=function(){for(var a in this.highlightableElements)return!0;return!1};Autodesk.Viewing.UI.PropertyPanel.prototype.removeProperty=function(a,b,c,f){a={name:a,value:b,category:c};return(b=this.tree.getElementByNode(a))?(delete this.highlightableElements[this.tree.delegate().getTreeNodeId(a)],b.parentNode.removeChild(b),!0):!1};
Autodesk.Viewing.UI.PropertyPanel.prototype.removeAllProperties=function(){this.highlightableElements={};for(var a=document.getElementById(this.tree.myRootContainerId);a.hasChildNodes();)a.removeChild(a.lastChild)};Autodesk.Viewing.UI.PropertyPanel.prototype.setCategoryCollapsed=function(a,b){var c=this.tree.delegate().getTreeNodeId(a);this.tree.setCollapsed(c,b)};Autodesk.Viewing.UI.PropertyPanel.prototype.isCategoryCollapsed=function(a){a=this.tree.delegate().getTreeNodeId(a);return this.tree.isCollapsed(a)};
Autodesk.Viewing.UI.PropertyPanel.prototype.getContentSize=function(){var a=document.getElementById(this.tree.myRootContainerId);return{height:a.clientHeight+75,width:a.clientWidth}};Autodesk.Viewing.UI.PropertyPanel.prototype.resizeToContent=function(a){Autodesk.Viewing.UI.DockingPanel.prototype.resizeToContent.call(this,a)};
Autodesk.Viewing.UI.PropertyPanel.prototype.highlight=function(a,b){for(var c in this.highlightableElements)for(var f=this.highlightableElements[c],d=0;d<f.length;++d){var g=f[d],h=g.innerHTML,k=h.replace(/(<highlight>|<\/highlight>)/igm,"");h!==k&&(g.innerHTML=k);a&&""!==a&&(h=k.replace(RegExp("(\\b"+a+"\\b)","gim"),"<highlight>$1</highlight>"),g.innerHTML=h)}};
Autodesk.Viewing.UI.PropertyPanel.prototype.displayCategory=function(a,b,c){var f=document.createElement("div");a=a.name;c&&c.localize&&(f.setAttribute("data-i18n",a),a=Autodesk.Viewing.i18n.translate(a));f.textContent=a;f.title=a;f.className="categoryName";b.appendChild(f);return[f]};
Autodesk.Viewing.UI.PropertyPanel.prototype.displayProperty=function(a,b,c){var f=document.createElement("div"),d=a.name;c&&c.localize&&(f.setAttribute("data-i18n",d),d=Autodesk.Viewing.i18n.translate(d));f.textContent=d;f.title=d;f.className="propertyName";c=document.createElement("div");c.className="separator";d=document.createElement("div");d.textContent=a.value;d.title=a.value;d.className="propertyValue";b.appendChild(f);b.appendChild(c);b.appendChild(d);return[f,d]};
Autodesk.Viewing.UI.PropertyPanel.prototype.getCategoryClass=function(a){return"category"};Autodesk.Viewing.UI.PropertyPanel.prototype.getPropertyClass=function(a){return"property"};Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryHover=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyHover=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryClick=function(a,b){this.setCategoryCollapsed(a,!this.isCategoryCollapsed(a))};
Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyClick=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryIconClick=function(a,b){this.setCategoryCollapsed(a,!this.isCategoryCollapsed(a))};Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyIconClick=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryDoubleClick=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyDoubleClick=function(a,b){};
Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryRightClick=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyRightClick=function(a,b){};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.ContextMenu=function(a){this.viewer=a;this.menus=[];this.open=!1;this.itemWidth=100;this.itemHeight=25};Autodesk.Viewing.Private.ContextMenu.prototype.constructor=Autodesk.Viewing.Private.ContextMenu;
Autodesk.Viewing.Private.ContextMenu.prototype.show=function(a,b){var c=this.viewer.container.getBoundingClientRect(),f=a.clientX-c.left,c=a.clientY-c.top;if(!this.open){var d=this;this.showMenu(b,0,f,c);this.open=!0;this.hideEventListener=function(a){"menuItem"!==a.target.className&&d.hide(a)};document.body.addEventListener("mousedown",this.hideEventListener,!0)}};
Autodesk.Viewing.Private.ContextMenu.prototype.showMenu=function(a,b,c,f){0>c&&(c=0);0>f&&(f=0);var d=a.length,g=this.viewer.impl.canvas.width,h=this.viewer.impl.canvas.height;c+this.itemWidth+10>g&&(c=g-this.itemWidth-10);f+d*this.itemHeight>h&&(f=h-d*this.itemHeight);g=document.createElement("div");g.width=this.itemWidth;g.className="menu";g.style.top=f+"px";g.style.left=c+"px";g.style.zIndex=20;this.viewer.container.appendChild(g);for(var k=h=0;k<d;++k){var l=a[k],m=l.title,l=l.target,p=this.createMenuItem(g,
m,h),h=h+this.itemHeight;"object"===typeof l?this.addSubMenuClickToMenuItem(p,b,l,c+this.itemWidth+24,f+h-this.itemHeight):"function"===typeof l?this.addCallbackToMenuItem(p,l):console.warn("Invalid context menu option:",m,l)}g.style.height=h+"px";null!=this.menus[b]&&this.menus[b].parentNode.removeChild(this.menus[b]);this.menus[b]=g};
Autodesk.Viewing.Private.ContextMenu.prototype.createMenuItem=function(a,b,c){c=document.createElement("div");c.className="menuItem";c.setAttribute("data-i18n",b);c.textContent=Autodesk.Viewing.i18n.translate(b);a.appendChild(c);return c};Autodesk.Viewing.Private.ContextMenu.prototype.addSubMenuClickToMenuItem=function(a,b,c,f,d){var g=this;a.addEventListener("click",function(){g.showMenu(c,b+1,f,d)})};
Autodesk.Viewing.Private.ContextMenu.prototype.addCallbackToMenuItem=function(a,b){var c=this;a.addEventListener("click",function(a){c.hide();b();a.preventDefault();return!1})};Autodesk.Viewing.Private.ContextMenu.prototype.hide=function(){if(this.open){for(var a=0;a<this.menus.length;++a)this.menus[a]&&this.menus[a].parentNode.removeChild(this.menus[a]);this.menus=[];this.open=!1;document.body.removeEventListener("mousedown",this.hideEventListener);return!0}return!1};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.ObjectContextMenu=function(a){this.viewer=a;this.contextMenu=new Autodesk.Viewing.Private.ContextMenu(a)};Autodesk.Viewing.UI.ObjectContextMenu.prototype.constructor=Autodesk.Viewing.UI.ObjectContextMenu;
Autodesk.Viewing.UI.ObjectContextMenu.prototype.show=function(a){var b=this.viewer.getSelectionCount(),c=this.viewer.getSelectionVisibility();(b=this.buildMenu(a,{numSelected:b,hasSelected:0<b,hasVisible:c.hasVisible,hasHidden:c.hasHidden}))&&0<b.length&&this.contextMenu.show(a,b)};Autodesk.Viewing.UI.ObjectContextMenu.prototype.hide=function(){return this.contextMenu.hide()};Autodesk.Viewing.UI.ObjectContextMenu.prototype.buildMenu=function(a,b){return null};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.Preferences=function(a,b){function c(a,c){if("undefined"!==typeof localStorage&&"string"===typeof a)return a=b+a,"undefined"!==typeof c?localStorage[a]=c:c=localStorage[a],c}function f(a,b){if("function"===typeof k[a])stderr("Preferences: invalid name="+a);else{var d=c(a),f=!1;if(void 0!==d)try{d=JSON.parse(d),f=!0}catch(g){}k[a]=f?d:b;h[a]={}}}b||(b="Autodesk.Viewing.Preferences.");var d={},g={},h={},k=this;a.addEventListener("PrefChanged",function(a){var b=g[a.name];b&&
(b=b.changed)&&b(a.value)});a.addEventListener("PrefReset",function(a){for(var b in g)g.hasOwnProperty(b)&&(a=g[b].reset)&&a(k[b])});this.load=function(a){d=a;for(var b in d)d.hasOwnProperty(b)&&f(b,d[b])};this.tag=function(a,b){if(a){b?Array.isArray(b)||(b=[b]):b=Object.keys(d);for(var c=0;c<b.length;++c)h[b[c]][a]=!0}};this.untag=function(a,b){if(a){b?Array.isArray(b)||(b=[b]):b=Object.keys(d);for(var c=0;c<b.length;++c)h[b[c]][a]=!1}};this.add=function(a,b,c){if(d.hasOwnProperty(a))stderr("Preferences: "+
a+" already exists");else{d[a]=b;f(a,b);if(c)for(Array.isArray(c)||(c=[c]),b=0;b<c.length;++b)this.tag(c[b],a);return!0}return!1};this.remove=function(a,c){return d.hasOwnProperty(a)?(delete d[a],delete h[a],delete this[a],c&&"undefined"!==typeof localStorage&&"string"===typeof a&&(a=b+a,delete localStorage[a]),!0):!1};this.reset=function(b,c){b&&void 0===c&&(c=!0);for(var f in d)if(d.hasOwnProperty(f)){if(b){var g=!!h[f][b];if(c&&!g||!c&&g)continue}this.set(f,d[f],!1)&&a.fireEvent({type:"PrefReset",
name:f,value:this[f]})}};this.get=function(a){return this[a]};this.set=function(b,d,f){return this[b]!==d?(this[b]=d,c(b,d),(void 0===f||f)&&a.fireEvent({type:"PrefChanged",name:b,value:d}),!0):!1};this.addListeners=function(a,b,c){g[a]={changed:b,reset:c}}};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.formatValueWithUnits=function(a,b,c,f){function d(a){var b=0<=a?Math.floor(a):Math.ceil(a);return{intPart:b,fracPart:a-b}}function g(a,b,c){var f="";c&&0===a&&(f+="-");0===d(a).fracPart?f+=a:0<b?(a=a.toFixed(b),b=/^\-?([0-9]+)\.0+$/.exec(a),f=null!==b?f+b[1]:f+a):f+=a.toFixed(0);return f}function h(a,b){if(isNaN(a))return"NaN";var c="",f=2,h=0>a;if(b)for(var q=1;q<b;++q)f*=2;a=0<a?a+0.5/f:a-0.5/f;q=d(a/12).intPart;c+=g(q,0,h)+"' ";q=a-12*q;0>q&&(q=-q);h=d(q).intPart;q=d((q-
h)*f).intPart;if(0===q||0!==h)c+=g(h,0);if(0!==q){for(0>h&&0>q&&(q=-q);0===q%2;)q/=2,f/=2;0!==h&&(c+="-");c+=g(q,0)+"/"+g(f,0)}return c+'"'}f||(f=3);1===c?a=Autodesk.Viewing.i18n.translate(a?"Yes":"No"):"ft"===b||"feet"===b||"foot"===b?a=h(12*a,f):"in"===b||"inch"===b?a=h(a,f):3===c&&b?(b=b.replace("^2",String.fromCharCode(178)),b=b.replace("^3",String.fromCharCode(179)),a=g(a,f)+" "+b):a=b?a+" "+b:3===c?g(a,f):a;return a};
Autodesk.Viewing.Private.convertUnits=function(a,b,c){if(a===b)return c;var f=1;switch(b){case "mm":f=1E3;break;case "cm":f=100;break;case "m":f=1;break;case "in":f=39.37;break;case "ft":f=3.28}b=1;switch(a){case "mm":b=0.001;break;case "cm":b=0.01;break;case "m":b=1;break;case "in":b=0.0254;break;case "ft":b=0.3048}return c*f*b};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.OptionSlider=function(a,b,c,f){function d(a){a.target!=g.stepperElement&&(g.stepperElement.value=g.sliderElement.value);g.fireChangeEvent()}var g=this;this.tbody=f;this.sliderRow=this.tbody.insertRow(-1);f=this.sliderRow.insertCell(0);this.caption=document.createElement("div");this.caption.setAttribute("data-i18n",a);this.caption.textContent=Autodesk.Viewing.i18n.translate(a);this.sliderElement=document.createElement("input");this.sliderElement.type="range";this.sliderElement.id=
a+"_slider";this.sliderElement.min=b;this.sliderElement.max=c;f.appendChild(this.caption);f.appendChild(this.sliderElement);f=this.sliderRow.insertCell(1);this.stepperElement=document.createElement("input");this.stepperElement.type="number";this.stepperElement.id=a+"_stepper";this.stepperElement.min=b;this.stepperElement.max=c;this.stepperElement.step=1;this.stepperElement.style.width="64px";f.appendChild(this.stepperElement);this.blockEvent=!1;this.stepperElement.addEventListener("change",function(a){a.target!=
g.sliderElement&&(g.sliderElement.value=g.stepperElement.value);g.fireChangeEvent()},!1);this.sliderElement.addEventListener("change",d,!1);this.sliderElement.addEventListener("input",d,!1)};Autodesk.Viewing.Private.OptionSlider.prototype=Object.create(THREE.EventDispatcher.prototype);
Autodesk.Viewing.Private.OptionSlider.prototype.fireChangeEvent=function(){if(!this.blockEvent){this.value=this.sliderElement.value;var a=new CustomEvent("change",{detail:{target:this,value:this.sliderElement.value}});this.dispatchEvent(a)}};Autodesk.Viewing.Private.OptionSlider.prototype.setValue=function(a){this.blockEvent=!0;this.value=a;this.sliderElement.value=a;this.stepperElement.value=a;this.blockEvent=!1};
Autodesk.Viewing.Private.OptionSlider.prototype.setDisabled=function(a){this.sliderElement.disabled=a;this.stepperElement.disabled=a;this.caption.disabled=a};
Autodesk.Viewing.Private.OptionCheckbox=function(a,b,c){THREE.EventDispatcher.call(this.prototype);var f=this;this.tbody=b;this.sliderRow=this.tbody.insertRow(-1);b=this.sliderRow.insertCell(0);this.caption=document.createElement("div");this.caption.setAttribute("data-i18n",a);this.caption.textContent=Autodesk.Viewing.i18n.translate(a);b.appendChild(this.caption);b=this.sliderRow.insertCell(1);this.checkElement=document.createElement("input");this.checkElement.type="checkbox";this.checkElement.id=
a+"_check";this.checkElement.checked=c;b.appendChild(this.checkElement);this.blockEvent=!1;this.checked=c;this.checkElement.addEventListener("change",function(a){f.fireChangeEvent()},!1);this.checkElement.addEventListener("click",function(a){a.stopPropagation()},!1);this.sliderRow.addEventListener("click",function(a){f.checkElement.checked=!f.checkElement.checked;f.fireChangeEvent()},!1)};Autodesk.Viewing.Private.OptionCheckbox.prototype=Object.create(THREE.EventDispatcher.prototype);
Autodesk.Viewing.Private.OptionCheckbox.prototype.fireChangeEvent=function(){if(!this.blockEvent){this.checked=this.checkElement.checked;var a=new CustomEvent("change",{detail:{target:this,value:this.checkElement.checked}});this.dispatchEvent(a)}};Autodesk.Viewing.Private.OptionCheckbox.prototype.setValue=function(a){this.blockEvent=!0;this.checked=a;this.checkElement.checked=a;this.blockEvent=!1};
Autodesk.Viewing.Private.OptionCheckbox.prototype.setDisabled=function(a){this.checkElement.disabled=a;this.caption.disabled=a};Autodesk.Viewing.Private.OptionCheckbox.prototype.setVisibility=function(a){this.sliderRow.style.display=a?"table-row":"none"};
Autodesk.Viewing.Private.OptionDropDown=function(a,b,c,f){THREE.EventDispatcher.call(this.prototype);var d=this;this.tbody=b;this.sliderRow=this.tbody.insertRow(-1);b=this.sliderRow.insertCell(0);this.caption=document.createElement("div");this.caption.setAttribute("data-i18n",a);this.caption.textContent=Autodesk.Viewing.i18n.translate(a);b.appendChild(this.caption);b=this.sliderRow.insertCell(1);this.dropdownElement=document.createElement("select");this.dropdownElement.id=a+"_dropdown";this.dropdownElement.className=
"optionDropDown";for(a=0;a<c.length;a++){var g=document.createElement("option");g.value=a;g.setAttribute("data-i18n",c[a]);g.textContent=Autodesk.Viewing.i18n.translate(c[a]);this.dropdownElement.add(g)}this.selectedIndex=this.dropdownElement.selectedIndex=f;b.appendChild(this.dropdownElement);this.blockEvent=!1;this.dropdownElement.addEventListener("change",function(a){d.fireChangeEvent()},!1)};Autodesk.Viewing.Private.OptionDropDown.prototype=Object.create(THREE.EventDispatcher.prototype);
Autodesk.Viewing.Private.OptionDropDown.prototype.setSelectedIndex=function(a){this.blockEvent=!0;this.selectedIndex=this.dropdownElement.selectedIndex=a;this.blockEvent=!1};Autodesk.Viewing.Private.OptionDropDown.prototype.setSelectedValue=function(a){this.blockEvent=!0;this.dropdownElement.selectedValue=a;this.selectedIndex=this.dropdownElement.selectedIndex;this.blockEvent=!1};
Autodesk.Viewing.Private.OptionDropDown.prototype.fireChangeEvent=function(){if(!this.blockEvent){this.selectedIndex=this.dropdownElement.selectedIndex;var a=new CustomEvent("change",{detail:{target:this,value:this.selectedIndex}});this.dispatchEvent(a)}};Autodesk.Viewing.Private.OptionDropDown.prototype.setDisabled=function(a){this.dropdownElement.disabled=a;this.caption.disabled=a};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.ProgressBar=function(a){this.bg=document.createElement("div");this.bg.className="progressbg";this.fg=document.createElement("div");this.fg.className="progressfg";this.bg.appendChild(this.fg);a.appendChild(this.bg);this.widthScale=this.fg.clientWidth};Autodesk.Viewing.Private.ProgressBar.prototype.setPercent=function(a){99<=a?this.bg.style.visibility="hidden":(this.bg.style.visibility="visible",this.fg.style.width=this.widthScale*a*0.01+"px")};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.RenderOptionsPanel=function(a){var b=this,c=Autodesk.Viewing.Private;this.viewer=a;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"RenderOptionsPanel","Rendering Options");this.table=document.createElement("table");this.table.className="tftable";this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.scrollpanel=this.createScrollContainer({heightAdjustment:70});this.scrollpanel.style.marginTop="20px";this.container.appendChild(this.scrollpanel);
this.scrollpanel.appendChild(this.table);this.container.style.width="364px";this.container.style.top="260px";this.container.style.left="220px";this.container.style.height="460px";this.container.dockRight=!0;var f=[],d;for(d in a.impl.BackgroundPresets)f.push(d);this.bgSelect=new c.OptionDropDown("Background Color",this.tbody,f,-1);this.updateBgColorIndex();this.addEventListener(this.bgSelect,"change",function(c){c=a.BackgroundPresets[b.bgSelect.value];a.prefs.set("backgroundColorPreset",JSON.stringify(c));
a.impl.setClearColors(c[0],c[1],c[2],c[3],c[4],c[5])});this.saoToggle=new c.OptionCheckbox("AO Enabled",this.tbody,!0);this.addEventListener(this.saoToggle,"change",function(c){c=b.saoToggle.checked;a.prefs.set("ambientShadows",c);a.setQualityLevel(c,a.impl.renderer().settings.antialias)});this.saoRadius=new c.OptionSlider("AO Radius",0,100,this.tbody);this.saoRadius.setValue(10);this.saoRadius.sliderElement.step=this.saoRadius.stepperElement.step=1;this.addEventListener(this.saoRadius,"change",function(c){a.impl.renderer().setAOOptions(parseInt(b.saoRadius.value),
parseFloat(b.saoIntensity.value));a.impl.renderer().composeFinalFrame(!1)});this.saoIntensity=new c.OptionSlider("AO Intensity",0,3,this.tbody);this.saoIntensity.setValue(0.75);this.saoIntensity.sliderElement.step=this.saoIntensity.stepperElement.step=0.1;this.addEventListener(this.saoIntensity,"change",function(c){a.impl.renderer().setAOOptions(parseInt(b.saoRadius.value),parseFloat(b.saoIntensity.value));a.impl.renderer().composeFinalFrame(!1)});f=[];for(d=0;d<c.LightPresets.length;d++)f.push(c.LightPresets[d].name);
this.envSelect=new c.OptionDropDown("Environment",this.tbody,f,a.impl.currentLightPreset());this.addEventListener(this.envSelect,"change",function(c){a.setLightPreset(b.envSelect.selectedIndex)});f=a.impl.renderer().getToneMapMethod();this.toneMapMethod=new c.OptionDropDown("Tonemap Method",this.tbody,["None","Canon-RGB","Canon-Lum"],f);this.addEventListener(this.toneMapMethod,"change",function(){a.impl.setTonemapMethod(b.toneMapMethod.selectedIndex)});this.exposureBias=new c.OptionSlider("Exposure Bias",
-30,30,this.tbody);this.exposureBias.setValue(a.impl.renderer().getExposureBias());this.exposureBias.sliderElement.step=this.exposureBias.stepperElement.step=0.1;this.addEventListener(this.exposureBias,"change",function(c){a.impl.setExposureBias(b.exposureBias.value,b.whiteScale.value)});this.exposureBias.setDisabled(0==f);this.whiteScale=new c.OptionSlider("Light Intensity",-5,20,this.tbody);f=0;a.impl.dir_light1&&(f=0!=a.impl.dir_light1.intensity?Math.log(a.impl.dir_light1.intensity)/Math.log(2):
-1E-20);this.whiteScale.setValue(f);this.whiteScale.sliderElement.step=this.whiteScale.stepperElement.step=0.1;this.addEventListener(this.whiteScale,"change",function(c){a.impl.dir_light1.intensity=Math.pow(2,b.whiteScale.value);a.impl.setExposureBias(b.exposureBias.value,b.whiteScale.value)});this.fovAngle=new c.OptionSlider("FOV-degrees",6.88,100,this.tbody);this.fovAngle.setValue(a.getFOV());this.addEventListener(this.fovAngle,"change",function(c){a.setFOV(parseFloat(b.fovAngle.value))});this.addEventListener(this.viewer,
Autodesk.Viewing.CAMERA_CHANGE_EVENT,function(c){c=parseFloat(b.fovAngle.value);var d=a.getFOV();c!=d&&b.fovAngle.setValue(d)});this.addEventListener(this.viewer,Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,function(a){b.syncUI()})};Autodesk.Viewing.Private.RenderOptionsPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Private.RenderOptionsPanel.prototype.constructor=Autodesk.Viewing.Private.RenderOptionsPanel;
Autodesk.Viewing.Private.RenderOptionsPanel.prototype.getContentSize=function(){return{height:this.table.clientHeight+75,width:this.table.clientWidth}};
Autodesk.Viewing.Private.RenderOptionsPanel.prototype.updateBgColorIndex=function(){var a=this.viewer.impl,b=a.clearColorTop,a=a.clearColorBottom,b=[255*b.x|0,255*b.y|0,255*b.z|0,255*a.x|0,255*a.y|0,255*a.z|0],c,f;for(f in Autodesk.Viewing.Private.BackgroundPresets){var a=Autodesk.Viewing.Private.BackgroundPresets[f],d;for(d=0;6>d&&a[d]==b[d];d++);if(6==d){c=f;break}}if(!c)for(c="Custom",f=Autodesk.Viewing.Private.BackgroundPresets[c],a=0;6>a;a++)f[a]=b[a];this.bgSelect.setSelectedValue(c)};
Autodesk.Viewing.Private.RenderOptionsPanel.prototype.syncUI=function(){var a=this.viewer.impl,b=0;a.dir_light1&&(b=0!=a.dir_light1.intensity?Math.log(a.dir_light1.intensity)/Math.log(2):-1E-20);this.whiteScale.setValue(b);this.exposureBias.setValue(a.renderer().getExposureBias());this.updateBgColorIndex();b=a.renderer().getToneMapMethod();this.toneMapMethod.setSelectedIndex(b);this.envSelect.setSelectedIndex(a.currentLightPreset());this.exposureBias.setDisabled(0==b);this.saoToggle.setValue(a.renderer().settings.sao);
this.saoRadius.setDisabled(!a.renderer().settings.sao);this.saoIntensity.setDisabled(!a.renderer().settings.sao);this.saoRadius.setValue(a.renderer().getAORadius());this.saoIntensity.setValue(a.renderer().getAOIntensity());this.fovAngle.setValue(this.viewer.getFOV())};
Autodesk.Viewing.Private.RenderOptionsPanel.prototype.uninitialize=function(){Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this);this.viewer=this.fovAngle=this.whiteScale=this.exposureBias=this.toneMapMethod=this.envSelect=this.saoIntensity=this.saoRadius=this.saoToggle=this.bgSelect=this.tbody=this.table=null};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.LayersPanel=function(a,b,c){this.viewer=a;this.layersRoot=this.tree=null;this.visibilityImages={};this.isMac=-1!==navigator.userAgent.search("Mac OS");b="Layer Manager";var f=a.config.viewableName;f&&(b=Autodesk.Viewing.i18n.translate(b)+": "+f);this.filterImageId=c+"-layerFilterImageId";Autodesk.Viewing.UI.DockingPanel.call(this,a.container,c,b,{localizeTitle:!1});this.container.classList.add("layersPanel");this.filterContainer=document.createElement("div");this.filterContainer.className=
"filterBox";this.filterContainer.id=this.container.id+"-search-container";this.container.appendChild(this.filterContainer);this.scrollContainer=this.createScrollContainer({heightAdjustment:105});this.scrollContainer.style.marginTop="5px";this.container.appendChild(this.scrollContainer);this.scrollContainer.id=this.container.id+"-scroll-container";var d=this;a.model?d.build():d.addEventListener(a,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,function(){d.build()})};
Autodesk.Viewing.UI.LayersPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.UI.LayersPanel.prototype.constructor=Autodesk.Viewing.UI.LayersPanel;Autodesk.Viewing.UI.LayersPanel.prototype.uninitialize=function(){Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this);this.filterContainer=this.scrollContainer=this.visibilityImages=this.layersRoot=this.tree=this.viewer=null};
Autodesk.Viewing.UI.LayersPanel.prototype.build=function(){function a(){if(d.value){var a=d.value.toLowerCase(),c=function(b){var d=[];if(-1!==b.name.toLowerCase().indexOf(a))d.push(b);else if(!b.isLayer){b=b.children;for(var f=0;f<b.length;++f)d=d.concat(c(b[f]))}return d},f=b.layersRoot;f&&h.setLayerVisible(c(f),!0,!0)}else h.setLayerVisible(null,!0);g=null}var b=this,c=document.createElement("div");c.className="filterSearch";b.filterContainer.appendChild(c);var f=document.createElement("div");
f.className="filterImage";f.id=b.filterImageId;f.title=Autodesk.Viewing.i18n.translate("Show/hide all layers");c.appendChild(f);b.visibilityImages[b.filterImageId]=f;b.addEventListener(f,"click",function(a){b.onImageClick(null,a);a.stopPropagation()});var d=this.filterField=document.createElement("input");d.className="filterInput";d.placeholder=Autodesk.Viewing.i18n.translate("Enter filter term");d.setAttribute("data-i18n","[placeholder]Enter filter term");d.type="search";d.incremental="incremental";
c.appendChild(d);var g=null,h=b.viewer;d.addEventListener("keyup",function(b){g&&clearTimeout(g);g=setTimeout(a,500)});d.addEventListener("click",function(a){""===d.value?h.setLayerVisible(null,!0):setTimeout(function(){""===d.value&&(h.setLayerVisible(null,!0),a.preventDefault())},1)});c=function(){var a=new Autodesk.Viewing.UI.TreeDelegate;a.getTreeNodeId=function(a){return a.id};a.getTreeNodeLabel=function(a){return b.getNodeLabel(a)};a.getTreeNodeClass=function(a){return b.getNodeClass(a)};a.isTreeNodeGroup=
function(a){return b.isGroupNode(a)};a.shouldCreateTreeNode=function(a){return b.shouldInclude(a)};a.onTreeNodeClick=function(a,c,d){b.onClick(c,d)};a.onTreeNodeRightClick=function(a,c,d){b.onRightClick(c,d)};a.onTreeNodeDoubleClick=function(a,c,d){b.onDoubleClick(c,d)};a.createTreeNode=function(a,c){b.createNode(a,c)};return a}();if(f=b.layersRoot=b.viewer.model.getLayersRoot())b.tree=new Autodesk.Viewing.UI.Tree(c,f,b.scrollContainer,{}),b.tree.addClass(c.getTreeNodeId(f),"exclude"),b.update(),
b.addEventListener(b.viewer,Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT,function(){b.update()})};
Autodesk.Viewing.UI.LayersPanel.prototype.update=function(){function a(a,b){a.className=1===b?"layerVisible":0===b?"layerHidden":"layerMixed"}function b(a,b){0===b?d.tree.addClass(a.id,"dim"):d.tree.removeClass(a.id,"dim")}function c(a){for(var b,c=0;c<a.length;++c){var d=a[c];void 0===b?b=d:0===d&&1===b?b=-1:1===d&&0===b&&(b=-1);if(-1===b)break}return b}function f(g){var k=d.visibilityImages[g.id];if(!g.isLayer){for(var l=g.children,m=[],p=0;p<l.length;++p)m=m.concat(f(l[p]));l=c(m);a(k,l);b(g,l);
return m}m=d.viewer.isLayerVisible(g)?1:0;a(k,m);b(g,m);return[m]}if(this.layersRoot){var d=this,g=f(d.layersRoot);a(d.visibilityImages[d.filterImageId],c(g))}};Autodesk.Viewing.UI.LayersPanel.prototype.toggleLayerVisible=function(a){this.viewer.setLayerVisible(a,"layerVisible"!==this.visibilityImages[a?a.id:this.filterImageId].className);this.filterField.value=""};
Autodesk.Viewing.UI.LayersPanel.prototype.isolateLayerVisible=function(a,b){this.viewer.setLayerVisible(a,"layerVisible"!==this.visibilityImages[a.id].className,!(this.isMac&&b.metaKey||!this.isMac&&b.ctrlKey));this.filterField.value=""};Autodesk.Viewing.UI.LayersPanel.prototype.getNodeLabel=function(a){return a.isLayer||0===a.childCount?a.name:a.name+" ("+a.childCount+")"};Autodesk.Viewing.UI.LayersPanel.prototype.getNodeClass=function(a){return""};
Autodesk.Viewing.UI.LayersPanel.prototype.isGroupNode=function(a){return!a.isLayer};Autodesk.Viewing.UI.LayersPanel.prototype.shouldInclude=function(a){return!0};Autodesk.Viewing.UI.LayersPanel.prototype.onClick=function(a,b){};Autodesk.Viewing.UI.LayersPanel.prototype.onDoubleClick=function(a,b){};Autodesk.Viewing.UI.LayersPanel.prototype.onRightClick=function(a,b){};Autodesk.Viewing.UI.LayersPanel.prototype.onImageClick=function(a,b){};
Autodesk.Viewing.UI.LayersPanel.prototype.getContentSize=function(){var a=document.getElementById(this.tree.getRootContainerId());return{height:a.clientHeight+this.filterContainer.clientHeight+80,width:Math.max(a.clientWidth,this.filterContainer.clientWidth)}};
Autodesk.Viewing.UI.LayersPanel.prototype.createNode=function(a,b){var c=document.createElement("div");b.children&&0<b.children.length?b.insertBefore(c,b.children[0]):b.appendChild(c);c.title=Autodesk.Viewing.i18n.translate("Show/hide this layer");this.visibilityImages[a.id]=c;var f=document.createElement("label");f.textContent=this.getNodeLabel(a);b.appendChild(f);var d=this;this.addEventListener(c,"click",function(b){d.onImageClick(a,b);b.stopPropagation()})};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.NavigationTab=1;Autodesk.Viewing.Private.PerformanceTab=2;
Autodesk.Viewing.Private.Viewer3dSettingsPanel=function(a,b){this.viewer=a;this.mode=b;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"Viewer3dSettingsPanel","Settings");this.container.style.minWidth="425px";this.container.style.maxWidth="800px";this.container.style.top="200px";this.container.style.left="220px";this.container.style.position="absolute";this.container.dockRight=!0;this.main=document.createElement("div");this.main.className="viewer-tabs";this.container.appendChild(this.main);
this.tabs=document.createElement("ul");this.tab1=document.createElement("li");this.tab1.id="navigationtab";this.tab2=document.createElement("li");this.tab2.id="performancetab";var c=document.createElement("a"),f=document.createElement("span");f.setAttribute("data-i18n","Navigation and seletion");f.textContent=Autodesk.Viewing.i18n.translate("Navigation and seletion");c.appendChild(f);var f=document.createElement("a"),d=document.createElement("span");d.setAttribute("data-i18n","Performance and appearance");
d.textContent=Autodesk.Viewing.i18n.translate("Performance and appearance");f.appendChild(d);this.tab1.appendChild(c);this.tab2.appendChild(f);this.tabs.appendChild(this.tab1);this.tabs.appendChild(this.tab2);this.main.appendChild(this.tabs);this.scrollContainer=this.createScrollContainer({left:!1,heightAdjustment:145});this.scrollContainer.style.marginTop="20px";this.container.appendChild(this.scrollContainer);this.scrollContainer.id=this.container.id+"-scroll-container";this.table1=document.createElement("table");
this.table1.className="viewer-table tftable navigation";this.tbody1=document.createElement("tbody");this.table1.appendChild(this.tbody1);this.table2=document.createElement("table");this.table2.className="viewer-table tftable performance";this.tbody2=document.createElement("tbody");this.table2.appendChild(this.tbody2);this.scrollContainer.appendChild(this.table1);this.scrollContainer.appendChild(this.table2);this.restoreDiv=document.createElement("div");this.restoreDiv.className="viewer-restore-defaults";
this.restoreDiv.setAttribute("data-i18n","Restore settings defaults");this.restoreDiv.textContent=Autodesk.Viewing.i18n.translate("Restore settings defaults");this.addEventListener(this.restoreDiv,"click",function(){var b=a.model.is2d()?"2d":"3d";a.prefs.reset(b)},!1);this.container.appendChild(this.restoreDiv);this.mouseOver=!1;this.selectTab(Autodesk.Viewing.Private.NavigationTab);var g=this;this.addEventListener(this.tab1,"click",function(a){g.selectTab(Autodesk.Viewing.Private.NavigationTab)});
this.addEventListener(this.tab2,"click",function(a){g.selectTab(Autodesk.Viewing.Private.PerformanceTab)});this.createNavigationPanel(this.tbody1);this.createPerformancePanel(this.tbody2);this.addEventListener(this.container,"mouseover",function(a){a=a.toElement||a.relatedTarget;if(g.mouseOver)return!0;for(;a&&a.parentNode&&a.parentNode!=window;){if(a.parentNode==this||a==this)return a.preventDefault&&a.preventDefault(),g.mouseOver=!0,g.tab1.classList.remove("selectedmouseout"),g.tab2.classList.remove("selectedmouseout"),
!0;a=a.parentNode}});this.addEventListener(this.container,"mouseout",function(a){a=a.toElement||a.relatedTarget;if(g.mouseOver){for(;a&&a.parentNode&&a.parentNode!=window;){if(a.parentNode==this||a==this)return a.preventDefault&&a.preventDefault(),!1;a=a.parentNode}g.mouseOver=!1;(g.tab1.classList.contains("tabselected")?g.tab1:g.tab2).classList.add("selectedmouseout")}})};Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.constructor=Autodesk.Viewing.Private.Viewer3dSettingsPanel;Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.uninitialize=function(){this.viewer=null;Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this)};Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.setVisible=function(a){a&&(this.container.style.display="block");Autodesk.Viewing.UI.DockingPanel.prototype.setVisible.call(this,a)};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.selectTab=function(a){var b="3d"===this.mode;a===Autodesk.Viewing.Private.NavigationTab?(this.container.style.height=b?"310px":"235px",this.container.style.maxHeight="800px",this.container.style.resize="vertical",this.table1.style.display="table",this.table2.style.display="none",this.tab1.classList.add("tabselected"),this.tab2.classList.remove("tabselected"),this.mouseOver||(this.tab1.classList.add("selectedmouseout"),this.tab2.classList.remove("selectedmouseout"))):
a===Autodesk.Viewing.Private.PerformanceTab&&(this.container.style.height=b?"305px":"180px",this.container.style.maxHeight=b?"305px":"180px",this.container.style.resize="none",this.table1.style.display="none",this.table2.style.display="table",this.tab2.classList.add("tabselected"),this.tab1.classList.remove("tabselected"),this.mouseOver||(this.tab2.classList.add("selectedmouseout"),this.tab1.classList.remove("selectedmouseout")))};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.isTabSelected=function(a){var b;a===Autodesk.Viewing.Private.NavigationTab?b=this.tab1:a===Autodesk.Viewing.Private.PerformanceTab&&(b=this.tab2);return b&&b.classList.contains("tabselected")};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.addOptionCheckbox=function(a,b,c,f,d){var g=this.viewer,h=g.prefs[d],k=new Autodesk.Viewing.Private.OptionCheckbox(a,b,"boolean"===typeof h?h:c);this.addEventListener(k,"change",function(a){a=a.detail.target.checked;g.prefs.set(d,a);f(a)});g.prefs.addListeners(d,function(a){k.setValue(a)},function(a){k.setValue(a);f(a)});return k};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.createNavigationPanel=function(a){var b=this.viewer,c="3d"===this.mode;c&&(this.viewcube=this.addOptionCheckbox("Show ViewCube",a,!0,function(a){b.displayViewCube(a)},"viewCube"),this.viewcubeonpivot=this.addOptionCheckbox("ViewCube acts on pivot",a,!1,function(a){b.setUsePivotAlways(a)},"alwaysUsePivot"),this.zoom=this.addOptionCheckbox("Zoom towards pivot",a,!1,function(a){b.setZoomTowardsPivot(a)},"zoomTowardsPivot"),this.setpivot=this.addOptionCheckbox("Set pivot with left mouse button",
a,!1,function(a){b.setClickToSetCOI(a)},"clickToSetCOI"));this.reverse=this.addOptionCheckbox("Reverse mouse zoom direction",a,!1,function(a){b.setReverseZoomDirection(a)},"reverseMouseZoomDir");c&&(this.lookHor=this.addOptionCheckbox("Reverse horizontal look direction",a,!1,function(a){b.setReverseHorizontalLookDirection(a)},"reverseHorizontalLookDirection"),this.lookVert=this.addOptionCheckbox("Reverse vertical look direction",a,!1,function(a){b.setReverseVerticalLookDirection(a)},"reverseVerticalLookDirection"),
this.orbit=this.addOptionCheckbox("Orbit past world poles",a,!0,function(a){b.setOrbitPastWorldPoles(a)},"orbitPastWorldPoles"));this.propertiesOnSelect=this.addOptionCheckbox("Open properties on select",a,!0,function(a){b.setPropertiesOnSelect(a)},"openPropertiesOnSelect");this.leftHanded=this.addOptionCheckbox("Left handed mouse setup",a,!1,function(a){b.setUseLeftHandedInput(a)},"leftHandedMouseSetup")};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.createPerformancePanel=function(a){var b=this.viewer;"3d"===this.mode&&(this.ghosthidden=this.addOptionCheckbox("Ghost hidden objects",a,!0,function(a){b.setGhosting(a)},"ghosting"),this.optimizeNavigation=this.addOptionCheckbox("Smooth navigation",a,!1,function(a){b.setOptimizeNavigation(a)},"optimizeNavigation"),this.ambientshadows=this.addOptionCheckbox("Ambient shadows",a,!0,function(a){b.setQualityLevel(a,b.prefs.antialiasing)},"ambientShadows"),
this.antialiasing=this.addOptionCheckbox("Anti-aliasing",a,!0,function(a){b.setQualityLevel(b.prefs.ambientShadows,a)},"antialiasing"));this.progressiveRender=this.addOptionCheckbox("Progressive model display",a,!0,function(a){b.setProgressiveRendering(a)},"progressiveRendering")};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.addMarkersOption=function(a){var b=this.tbody1,c=a||this.getMarkersExtension();c&&(void 0===this.viewer.prefs.showCommentMarkers&&(this.viewer.prefs.showCommentMarkers=!0),this.showCommentMarkers=this.addOptionCheckbox("Show Comment Markers",b,!0,function(a){c.setEnabled(a)},"showCommentMarkers"),this.selectTab(Autodesk.Viewing.Private.NavigationTab))};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.getContentSize=function(){return{height:this.main.clientHeight+this.table1.clientHeight+this.table2.clientHeight+this.restoreDiv.clientHeight+95,width:this.main.clientWidth}};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.syncUI=function(){var a=this.viewer;this.antialiasing&&this.antialiasing.setValue(a.prefs.antialiasing);this.ambientshadows&&this.ambientshadows.setValue(a.prefs.ambientShadows);this.progressiveRender&&this.progressiveRender.setValue(a.prefs.progressiveRendering);this.ghosthidden&&this.ghosthidden.setValue(a.prefs.ghosting);this.showCommentMarkers&&(a=this.getMarkersExtension())&&this.showCommentMarkers.setValue(a.markersEnabled)};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.getMarkersExtension=function(){return this.viewer.loadedExtensions["Autodesk.Markers"]};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.AlertBox=function(){};Autodesk.Viewing.Private.AlertBox.instances=[];
Autodesk.Viewing.Private.AlertBox.displayError=function(a,b,c,f,d){var g=document.createElement("div");g.className="alertBox error";a.appendChild(g);f||(f="img-item-not-found");var h=document.createElement("div");h.className="alertBoxImage "+f;g.appendChild(h);f=document.createElement("div");f.className="alertBoxMsg";g.appendChild(f);c||(c=Autodesk.Viewing.i18n.translate("Error Occurred",{defaultValue:"Error Occurred"}));h=document.createElement("div");h.className="alertBoxTitle";h.textContent=c;
f.appendChild(h);c=document.createElement("div");c.className="alertBoxText";c.textContent=b;f.appendChild(c);if(d){b=document.createElement("div");b.className="alertBoxContent";f.appendChild(b);f=document.createElement("ul");f.className="alertBoxContent";for(c=0;c<d.length;c++){var k=d[c];if(k){h=document.createElement("li");f.appendChild(h);k=this.extractList(k);if(k.list.length){var l=this.generateListElement(list);f.appendChild(l)}h.innerHTML=k.msg}}b.appendChild(f)}d=document.createElement("div");
d.className="alertBoxOK";d.textContent=Autodesk.Viewing.i18n.translate("OK",{defaultValue:"OK"});var m={alertBox:g,container:a};d.addEventListener("click",function(b){g.style.visibility="hidden";a.removeChild(g);Autodesk.Viewing.Private.AlertBox.instances.splice(Autodesk.Viewing.Private.AlertBox.instances.indexOf(m),1)});g.appendChild(d);g.style.visibility="visible";Autodesk.Viewing.Private.AlertBox.instances.push(m)};
Autodesk.Viewing.Private.AlertBox.displayErrors=function(a,b,c){var f=document.createElement("div");f.className="alertBox errors";a.appendChild(f);b||(b="img-item-not-found");var d=document.createElement("div");d.className="alertBoxImage "+b;f.appendChild(d);b=document.createElement("div");b.className="alertBoxMsg errors";f.appendChild(b);for(d=0;d<c.length;d++){var g=c[d].header;g||(g=Autodesk.Viewing.i18n.translate("Error",{defaultValue:"Error"}));var h=document.createElement("div");h.className=
"alertBoxTitle errors";h.textContent=g;b.appendChild(h);var k=document.createElement("div");k.className="alertBoxText errors";h=c[d].msg;g=this.extractList(h);if(g.list.length){var l=document.createElement("div"),h=this.generateListElement(g.list);l.appendChild(h);k.textContent=g.msg;k.appendChild(l)}else k.textContent=h;b.appendChild(k);if(c[d].hints){k=document.createElement("ul");k.className="alertBoxContent";for(var l=c[d].hints,m=0;m<l.length;m++)if(g=l[m]){var p=document.createElement("li");
k.appendChild(p);g=this.extractList(g);g.list.length&&(h=this.generateListElement(g.list),k.appendChild(h));p.innerHTML=g.msg}b.appendChild(k)}}c=document.createElement("div");c.className="alertBoxOK";c.textContent=Autodesk.Viewing.i18n.translate("OK",{defaultValue:"OK"});var n={alertBox:f,container:a};c.addEventListener("click",function(b){f.style.visibility="hidden";a.removeChild(f);Autodesk.Viewing.Private.AlertBox.instances.splice(Autodesk.Viewing.Private.AlertBox.instances.indexOf(n),1)});f.appendChild(c);
f.style.visibility="visible";Autodesk.Viewing.Private.AlertBox.instances.push(n)};Autodesk.Viewing.Private.AlertBox.extractList=function(a){var b={msg:a,list:[]};a&&-1!=a.indexOf("<ul>")&&(a=a.split("<ul>"),b.msg=a[0],a=a[1].split("</ul>"),b.list=a[0].split(", "),1===b.list.length&&(b.list=a[0].split(",")));return b};Autodesk.Viewing.Private.AlertBox.generateListElement=function(a){for(var b=document.createElement("ul"),c=0;c<a.length;c++){var f=document.createElement("li");f.textContent=a[c];b.appendChild(f)}return b};
Autodesk.Viewing.Private.AlertBox.dismiss=function(){if(0<Autodesk.Viewing.Private.AlertBox.instances.length){var a=Autodesk.Viewing.Private.AlertBox.instances.pop();a.alertBox.style.visibility="hidden";a.container.removeChild(a.alertBox);return!0}return!1};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.HudMessage=function(){};Autodesk.Viewing.Private.HudMessage.instances=[];
Autodesk.Viewing.Private.HudMessage.displayMessage=function(a,b,c,f,d){if(!(0<Autodesk.Viewing.Private.HudMessage.instances.length)){var g=b.msgTitleKey,h=b.msgTitleDefaultValue?b.msgTitleDefaultValue:g,k=b.messageKey,l=b.messageDefaultValue?b.messageDefaultValue:k;b=b.buttonText;var m=document.createElement("div");m.className="hud";a.appendChild(m);var p=document.createElement("div");p.className="hudTitle";p.textContent=Autodesk.Viewing.i18n.translate(g,{defaultValue:h});p.setAttribute("data-i18n",
g);m.appendChild(p);c&&(g=document.createElement("div"),g.className="hudClose",g.innerHTML="&times;",g.addEventListener("click",function(b){a.removeChild(m);c&&c(b)}),m.appendChild(g));g=document.createElement("div");g.className="hudMessage";g.textContent=Autodesk.Viewing.i18n.translate(k,{defaultValue:l});g.setAttribute("data-i18n",k);m.appendChild(g);f&&(k=document.createElement("div"),k.className="hudButton",k.textContent=Autodesk.Viewing.i18n.translate(b,{defaultValue:b}),k.setAttribute("data-i18n",
b),k.addEventListener("click",f),m.appendChild(k));d&&(f=document.createElement("div"),k=document.createElement("input"),k.className="hudCheckbox",k.type="checkbox",f.appendChild(k),l=document.createElement("label"),l.setAttribute("for","Do not show this message again"),l.setAttribute("data-i18n","Do not show this message again"),l.textContent=Autodesk.Viewing.i18n.translate("Do not show this message again",{defaultValue:"Do not show this message again"}),f.appendChild(l),k.addEventListener("change",
d),m.appendChild(f));Autodesk.Viewing.Private.HudMessage.instances.push({hudMessage:m,container:a})}};Autodesk.Viewing.Private.HudMessage.dismiss=function(){if(0<Autodesk.Viewing.Private.HudMessage.instances.length){var a=Autodesk.Viewing.Private.HudMessage.instances.pop();a.hudMessage.style.visibility="hidden";a.container.removeChild(a.hudMessage);return!0}return!1};"use strict";AutodeskNamespace("Autodesk.Viewing.UI");Autodesk.Viewing.UI.TreeDelegate=function(){};
Autodesk.Viewing.UI.TreeDelegate.prototype.constructor=Autodesk.Viewing.UI.TreeDelegate;Autodesk.Viewing.UI.TreeDelegate.prototype.isTreeNodeGroup=function(a){throw"isTreeNodeGroup is not implemented.";};Autodesk.Viewing.UI.TreeDelegate.prototype.getTreeNodeId=function(a){throw"getTreeNodeId is not implemented.";};Autodesk.Viewing.UI.TreeDelegate.prototype.getTreeNodeLabel=function(a){return a.name};Autodesk.Viewing.UI.TreeDelegate.prototype.shouldCreateTreeNode=function(a){return!0};
Autodesk.Viewing.UI.TreeDelegate.prototype.createTreeNode=function(a,b,c){var f=document.createElement("label");b.appendChild(f);a=this.getTreeNodeLabel(a);c&&c.localize&&(f.setAttribute("data-i18n",a),a=Autodesk.Viewing.i18n.translate(a));f.textContent=a};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeClick=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeIconClick=function(a,b,c){a.delegate().isTreeNodeGroup(b)&&(b=a.delegate().getTreeNodeId(b),a.setCollapsed(b,!a.isCollapsed(b)))};
Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeDoubleClick=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeRightClick=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeEnter=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeLeave=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeHover=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.getTreeNodeClass=function(a){return""};
Autodesk.Viewing.UI.Tree=function(a,b,c,f){this.myDelegate=a;this.mySelectedIds=[];this.myOptions=f;"string"===typeof c?(a=c,c=document.getElementById(a)):a=c.id;this.myRootContainerId=a+"-treeview";this.myInternalIds={};this.myInternalIdCounter=0;this.myGroupNodes=[];c=this.createHtmlElement_(c,"div",this.myRootContainerId,"treeview");this.createElement_(b,c)};Autodesk.Viewing.UI.Tree.prototype.constructor=Autodesk.Viewing.UI.Tree;
Autodesk.Viewing.UI.Tree.prototype.show=function(a){document.getElementById(this.myRootContainerId).style.display=a?"block":"none"};Autodesk.Viewing.UI.Tree.prototype.getRootContainerId=function(){return this.myRootContainerId};Autodesk.Viewing.UI.Tree.prototype.delegate=function(){return this.myDelegate};Autodesk.Viewing.UI.Tree.prototype.isCollapsed=function(a){return this.hasClass(a,"collapsed")};
Autodesk.Viewing.UI.Tree.prototype.setCollapsed=function(a,b){var c=this.isCollapsed(a);if(b){if(!c)return this.addClass(a,"collapsed"),this.removeClass(a,"expanded"),!0}else if(c)return this.addClass(a,"expanded"),this.removeClass(a,"collapsed"),!0;return!1};
Autodesk.Viewing.UI.Tree.prototype.setAllCollapsed=function(a){var b;a?(a=function(a){return a.classList.contains("expanded")},b=function(a){a.classList.add("collapsed");a.classList.remove("expanded")}):(a=function(a){return a.classList.contains("collapsed")},b=function(a){a.classList.add("expanded");a.classList.remove("collapsed")});for(var c=0;c<this.myGroupNodes.length;++c){var f=this.myGroupNodes[c];a(f)&&b(f)}};
Autodesk.Viewing.UI.Tree.prototype.addToSelection=function(a){for(var b=a.length,c=0;c<b;++c){var f=a[c],d;d=f;-1===this.mySelectedIds.indexOf(d)?(this.mySelectedIds.push(d),d=!0):d=!1;d&&this.addClass(f,"selected")}};Autodesk.Viewing.UI.Tree.prototype.removeFromSelection=function(a){for(var b=a.length-1;0<=b;--b){var c=a[b],f;f=this.mySelectedIds.indexOf(c);-1!==f?(this.mySelectedIds.splice(f,1),f=!0):f=!1;f&&this.removeClass(c,"selected")}};
Autodesk.Viewing.UI.Tree.prototype.setSelection=function(a){this.removeFromSelection(this.mySelectedIds);this.addToSelection(a);return this.mySelectedIds};Autodesk.Viewing.UI.Tree.prototype.clearSelection=function(){this.removeFromSelection(this.mySelectedIds)};Autodesk.Viewing.UI.Tree.prototype.isSelected=function(a){return this.hasClass(a,"selected")};
Autodesk.Viewing.UI.Tree.prototype.addClass=function(a,b){var c=this.getInternalId_(a,!1);return c&&(c=document.getElementById(c))&&!c.classList.contains(b)?(c.classList.add(b),!0):!1};Autodesk.Viewing.UI.Tree.prototype.removeClass=function(a,b){var c=this.getInternalId_(a,!1);return c&&(c=document.getElementById(c))&&c.classList.contains(b)?(c.classList.remove(b),!0):!1};
Autodesk.Viewing.UI.Tree.prototype.hasClass=function(a,b){var c=this.getInternalId_(a,!1);return c?document.getElementById(c).classList.contains(b):!1};Autodesk.Viewing.UI.Tree.prototype.getInternalId_=function(a,b){void 0===this.myInternalIds[a]&&b&&(this.myInternalIds[a]=this.myRootContainerId+"-node-"+this.myInternalIdCounter,this.myInternalIdCounter++);return this.myInternalIds[a]};
Autodesk.Viewing.UI.Tree.prototype.createElement_=function(a,b,c){function f(b,d,f,g){b=h.createHtmlElement_(b,f,d,g);d=h.createHtmlElement_(b,"header","header"+d);h.createHtmlElement_(d,"icon").addEventListener("click",function(b){h.myDelegate.onTreeNodeIconClick(h,a,b);b.stopPropagation();b.preventDefault()},!1);h.myDelegate.createTreeNode(a,d,c);return b}function d(b){h.myDelegate.onTreeNodeEnter(h,a,b);h.myDelegate.onTreeNodeHover(h,a,b);b.stopPropagation();b.preventDefault()}function g(b){h.myDelegate.onTreeNodeLeave(h,
a,b);h.myDelegate.onTreeNodeHover(h,a,b);b.stopPropagation();b.preventDefault()}if(!a||!this.myDelegate.shouldCreateTreeNode(a))return null;var h=this,k=h.myDelegate.getTreeNodeId(a),k=this.getInternalId_(k,!0);if(h.myDelegate.isTreeNodeGroup(a)){b=f(b,k,"group","expanded");h.myGroupNodes.push(b);for(var k=a.children?a.children.length:0,l=0;l<k;++l)h.createElement_(a.children[l],b,c)}else b=f(b,k,"leaf","expanded");b.addEventListener("click",function(b){h.myDelegate.onTreeNodeClick(h,a,b);b.stopPropagation();
b.preventDefault()},!1);b.addEventListener("dblclick",function(b){h.myDelegate.onTreeNodeDoubleClick(h,a,b);b.stopPropagation();b.preventDefault()},!1);b.addEventListener("contextmenu",function(b){h.myDelegate.onTreeNodeRightClick(h,a,b);b.stopPropagation();b.preventDefault()},!1);b.addEventListener("mouseenter",function(a){d(a)},!1);b.addEventListener("mouseleave",function(a){g(a)},!1);b.addEventListener("mouseover",function(a){d(a)},!1);b.addEventListener("mouseout",function(a){g(a)},!1);(k=h.myDelegate.getTreeNodeClass(a))&&
b.classList.add(k);return b};Autodesk.Viewing.UI.Tree.prototype.createHtmlElement_=function(a,b,c,f){b=document.createElement(b);a.appendChild(b);c&&(b.id=c);f&&(b.className=f);return b};Autodesk.Viewing.UI.Tree.prototype.getElementByNode=function(a){return document.getElementById(this.getInternalId_(this.delegate().getTreeNodeId(a),!1))};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.TreeDelegate=Autodesk.Viewing.UI.TreeDelegate;
Autodesk.Viewing.Private.TreeDelegate.prototype=Autodesk.Viewing.UI.TreeDelegate.prototype;Autodesk.Viewing.Private.Tree=Autodesk.Viewing.UI.Tree;Autodesk.Viewing.Private.Tree.prototype=Autodesk.Viewing.UI.Tree.prototype;"use strict";AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.BrowserDelegate=function(){};Autodesk.Viewing.Private.BrowserDelegate.prototype.constructor=Autodesk.Viewing.Private.BrowserDelegate;
Autodesk.Viewing.Private.BrowserDelegate.prototype.getNodeId=function(a){throw"getId is not implemented.";};Autodesk.Viewing.Private.BrowserDelegate.prototype.getNodeLabel=function(a){return a.name};Autodesk.Viewing.Private.BrowserDelegate.prototype.getNodeClass=function(a){return""};Autodesk.Viewing.Private.BrowserDelegate.prototype.hasThumbnail=function(a){return!1};Autodesk.Viewing.Private.BrowserDelegate.prototype.getThumbnail=function(a){return null};
Autodesk.Viewing.Private.BrowserDelegate.prototype.onNodeClick=function(a,b,c){};Autodesk.Viewing.Private.BrowserDelegate.prototype.onNodeHover=function(a,b,c){};Autodesk.Viewing.Private.BrowserDelegate.prototype.hasContent=function(a){return!1};Autodesk.Viewing.Private.BrowserDelegate.prototype.addContent=function(a,b){};
Autodesk.Viewing.Private.Browser=function(a,b,c,f){this.myDelegate=a;this.mySelectedIds=[];this.myParentContainderId=c;this.myRootContainerId=c+"-browserview";this.myInternalIds=[];this.myInternalIdCounter=0;this.jQuery=(this.myOptions=f)&&f.jQuery?f.jQuery:$;this.jQuery('<div id="'+this.myRootContainerId+'" class="browserview"></div>').appendTo("#"+this.myParentContainderId);this.createElements(b,this.myRootContainerId)};Autodesk.Viewing.Private.Browser.prototype.constructor=Autodesk.Viewing.Private.Browser;
Autodesk.Viewing.Private.Browser.prototype.show=function(a){a?this.jQuery("#"+this.myRootContainerId).fadeIn():this.jQuery("#"+this.myRootContainerId).hide()};Autodesk.Viewing.Private.Browser.prototype.getRootContainerId=function(){return this.myRootContainerId};Autodesk.Viewing.Private.Browser.prototype.delegate=function(){return this.myDelegate};
Autodesk.Viewing.Private.Browser.prototype.addToSelection=function(a){for(var b in a){var c=a[b],f;f=c;-1==this.mySelectedIds.indexOf(f)?(this.mySelectedIds.push(f),f=!0):f=!1;f&&(c=this.getInternalId(c,!1),this.jQuery("#"+c).addClass("selected"))}};Autodesk.Viewing.Private.Browser.prototype.removeFromSelection=function(a){for(var b in a){var c=a[b],f;f=this.mySelectedIds.indexOf(c);-1!=f?(this.mySelectedIds.splice(f,1),f=!0):f=!1;f&&(c=this.getInternalId(c,!1),this.jQuery("#"+c).removeClass("selected"))}};
Autodesk.Viewing.Private.Browser.prototype.setSelection=function(a){this.removeFromSelection(this.mySelectedIds);this.addToSelection(a);return this.mySelectedIds};Autodesk.Viewing.Private.Browser.prototype.clearSelection=function(){this.removeFromSelection(this.mySelectedIds)};Autodesk.Viewing.Private.Browser.prototype.getInternalId=function(a,b){void 0===this.myInternalIds[a]&&b&&(this.myInternalIds[a]=this.myRootContainerId+"-node-"+this.myInternalIdCounter,this.myInternalIdCounter++);return this.myInternalIds[a]};
Autodesk.Viewing.Private.Browser.prototype.createElements=function(a,b){if(a)for(var c=0;c<a.length;c++)this.createElement(a[c],b)};
Autodesk.Viewing.Private.Browser.prototype.createElement=function(a,b){var c=this,f=c.myDelegate.getNodeId(a),f=c.getInternalId(f,!0),d="#"+f;this.jQuery('<item id="'+f+'"></item>').appendTo(this.jQuery("#"+b)).hover(function(){c.myDelegate.onNodeHover(c,a)});this.jQuery("#"+f).click(function(b){c.jQuery(".flipped").removeClass("flipped");c.myDelegate.onNodeClick(c,a,b)});var g=this.jQuery('<div id="card'+f+'" class="card"></div>');g.appendTo(this.jQuery(d));var h=this.jQuery('<div class="browserElement"></div>');
h.appendTo(g);g=c.myDelegate.getNodeLabel(a);this.jQuery("<label>"+g+"</label>").appendTo(h).click(function(b){c.myDelegate.onNodeClick(c,a,b)});(g=c.myDelegate.getThumbnail(a))&&this.jQuery('<img class="thumb" src="'+g+'" ></img>').appendTo(h).click(function(b){c.myDelegate.onNodeClick(c,a,b)});c.myDelegate.hasContent(a)&&c.myDelegate.addContent(a,f);this.jQuery(d).addClass(c.myDelegate.getNodeClass(a))};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.WEBGL_HELP_LINK=null;
Autodesk.Viewing.Private.ErrorInfoData={1:{img:"img-reload","globalized-msg":"Viewer-UnknownFailure","default-msg":"<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message> <hint>Try loading the item again. </hint><hint>Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},2:{img:"img-unsupported","globalized-msg":"Viewer-BadData","default-msg":"<title> Sorry </title><message>The item you are trying to view was not processed completely. </message><hint>Try loading the item again.</hint><hint>Please upload the file again to see if that fixes the issue.</hint>"},
3:{img:"img-reload","globalized-msg":"Viewer-NetworkError","default-msg":"<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},4:{img:"img-unloack","globalized-msg":"Viewer-AccessDenied","default-msg":"<title> No access </title><message>Sorry. You don\u2019t have the required privileges to access this item.</message><hint> Please contact the author</hint>"},
5:{img:"img-item-not-found","globalized-msg":"Viewer-FileNotFound","default-msg":'<title> Sorry </title><message>We can\u2019t display the item you are looking for. It may not have been processed yet. It may have been moved, deleted, or you may be using a corrupt file or unsupported file format.</message><hint> Try loading the item again.</hint><hint> Please upload the file again to see if that fixes the issue.</hint><hint> <a href="http://help.autodesk.com/view/ADSK360/ENU/?guid=GUID-488804D0-B0B0-4413-8741-4F5EE0FACC4A" target="_blank">See a list of supported formats.</a></hint>'},
6:{img:"img-reload","globalized-msg":"Viewer-ServerError","default-msg":"<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},7:{img:"img-reload","globalized-msg":"Viewer-UnhandledResponseCode","default-msg":"<title> Network problem </title><message>Sorry. We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},
8:{img:"img-unsupported","globalized-msg":"Viewer-WebGlNotSupported","default-msg":'<title> Sorry </title><message>We couldn\u2019t show the item because your browser doesn\u2019t support 3D viewing.</message><hint> Please use Google Chrome, Firefox or another browser that supports WebGL 3D graphics.</hint><hint> <a href="WEBGL_HELP" target="_blank">See a list of browsers supporting WebGL 3D graphics.</a></hint>'},9:{img:"img-item-not-found","globalized-msg":"Viewer-NoViewable","default-msg":"<title> No viewable content </title><message>There\u2019s nothing to display for this item. It may not have been processed or it may not have content we can display.</message><hint> Please contact the author.</hint><hint> Please upload the file again to see if that fixes the issue.</hint>"},
10:{img:"img-unsupported","globalized-msg":"Viewer-WebGlDisabled","default-msg":'<title> Sorry </title><message>We couldn\u2019t show the item because you haven\'t enabled 3D viewing in your browser.</message><hint> Please use Google Chrome, Firefox or enable WebGL 3D graphics in your browser.</hint><hint> <a href="WEBGL_HELP" target="_blank">See a list of browsers supporting WebGL 3D graphics.</a></hint>'}};Autodesk.Viewing.Private.ErrorHandler=function(){};
Autodesk.Viewing.Private.ErrorHandler.prototype.constructor=Autodesk.Viewing.Private.ErrorHandler;Autodesk.Viewing.Private.ErrorHandler.getErrorCode=function(a){return 403===a||401===a?Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED:404===a?Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND:500<=a?Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR:Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE};
Autodesk.Viewing.Private.ErrorHandler.reportError=function(a,b,c,f){if(b){var d=Autodesk.Viewing.Private.ErrorInfoData[b];if(d){var g={defaultValue:""};g.defaultValue=d["default-msg"];var h=d.img;c=this.parseErrorString(d["globalized-msg"],g);if(b===Autodesk.Viewing.ErrorCodes.BROWSER_WEBGL_DISABLED||b===Autodesk.Viewing.ErrorCodes.BROWSER_WEBGL_NOT_SUPPORTED)for(b=Autodesk.Viewing.Private.WEBGL_HELP_LINK||RESOURCE_ROOT+"webGLHelp.html",f=0;f<c.hints.length;f++)-1!==c.hints[f].indexOf('href="WEBGL_HELP"')&&
(c.hints[f]=c.hints[f].replace('href="WEBGL_HELP"','href="'+b+'"'))}else h="img-unsupported",g={defaultValue:"",interpolationPrefix:"{",interpolationSuffix:"}"},this.parseArguments(c,g),c=this.parseErrorString(b,g),c.header||(c.header="warning"===f?Autodesk.Viewing.i18n.translate("header-warning"):"");Autodesk.Viewing.Private.AlertBox.displayError(a,c.msg,c.header,h,c.hints)}};
Autodesk.Viewing.Private.ErrorHandler.reportErrors=function(a,b){if(b){for(var c={defaultValue:"",interpolationPrefix:"{",interpolationSuffix:"}"},f=[],d=0;d<b.length;d++)if(b[d].code){this.parseArguments(b[d].message,c);var g=this.parseErrorString(b[d].code,c);g.header||(g.header="warning"===b[0].type?Autodesk.Viewing.i18n.translate("header-warning",{defaultValue:"Warning"}):"");f.push(g)}f.length&&Autodesk.Viewing.Private.AlertBox.displayErrors(a,"img-unsupported",f)}};
Autodesk.Viewing.Private.ErrorHandler.parseArguments=function(a,b){if(a)if("string"===typeof a)b.defaultValue=a;else{b.defaultValue=a[0];for(var c=1;c<a.length;c++)b[(c-1).toString()]=a[c]}};
Autodesk.Viewing.Private.ErrorHandler.parseErrorString=function(a,b){var c={msg:null,msgList:null,header:null,hints:null};if(!a)return c;var f=Autodesk.Viewing.i18n.translate(a,b);if(!f)return c;-1!=f.indexOf("<title>")&&(f=f.split("<title>")[1].split("</title>"),c.header=f[0],f=f[1]);f&&-1!=f.indexOf("<message>")?(f=f.split("<message>")[1].split("</message>"),c.msg=f[0],f=f[1]):c.msg=f;if(f&&-1!=f.indexOf("<hint>")){c.hints=[];for(var f=f.split("<hint>"),d=0;d<f.length;d++){var g=f[d].split("</hint")[0];
c.hints.push(g)}}return c};"use strict";Autodesk.Viewing.Extension=function(a,b){this.viewer=a;this.options=b};Autodesk.Viewing.Extension.prototype.load=function(){return!0};Autodesk.Viewing.Extension.prototype.unload=function(){return!0};Autodesk.Viewing.Extension.prototype.getState=function(a){};Autodesk.Viewing.Extension.prototype.restoreState=function(a,b){return!0};"use strict";AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.ExtensionManager=function(){var a={};return{registerExtension:function(b,c){return a.hasOwnProperty(b)?!1:(a[b]=c,!0)},getExtension:function(b){return a.hasOwnProperty(b)?a[b]:null},unregisterExtension:function(b){return a.hasOwnProperty(b)?(delete a[b],!0):!1}}};Autodesk.Viewing.theExtensionManager=new Autodesk.Viewing.ExtensionManager;AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.UnifiedCamera=function(a,b){THREE.Camera.call(this);this.fov=45;this.near=0.1;this.far=1E5;this.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.target=new THREE.Vector3(0,0,-1);this.worldup=new THREE.Vector3(0,1,0);this.orthographicCamera=new THREE.OrthographicCamera(this.left,this.right,this.top,this.bottom,this.near,this.far);this.perspectiveCamera=new THREE.PerspectiveCamera(this.fov,this.aspect,this.near,this.far);this.zoom=1;this.toPerspective()};
Autodesk.Viewing.UnifiedCamera.ORTHO_FOV=THREE.Math.radToDeg(2*Math.atan(0.5));Autodesk.Viewing.UnifiedCamera.prototype=Object.create(THREE.Camera.prototype);
Autodesk.Viewing.UnifiedCamera.prototype.clone=function(){var a=new Autodesk.Viewing.UnifiedCamera(2*this.right,2*this.top);THREE.Camera.prototype.clone.call(this,a);a.position.copy(this.position);a.up.copy(this.up);this.target&&(a.target=this.target.clone());this.worldup&&(a.worldup=this.worldup.clone());a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;a.fov=this.fov;a.aspect=this.aspect;a.zoom=this.zoom;a.isPerspective=this.isPerspective;this.updateProjectionMatrix();
return a};Autodesk.Viewing.UnifiedCamera.prototype.__computeFovPosition=function(a){if(1E-4>=Math.abs(this.fov-a))return this.position.clone();var b=this.target.clone().sub(this.position),c=THREE.Math.degToRad(this.fov);a=THREE.Math.degToRad(a);c=b.length()*Math.tan(0.5*c)/Math.tan(0.5*a);b=b.normalize().multiplyScalar(-c);return this.target.clone().add(b)};
Autodesk.Viewing.UnifiedCamera.prototype.toPerspective=function(){!this.isPerspective&&this.saveFov&&(this.position.copy(this.__computeFovPosition(this.saveFov)),this.fov=this.saveFov);this.perspectiveCamera.aspect=this.aspect;this.perspectiveCamera.near=this.near;this.perspectiveCamera.far=this.far;this.perspectiveCamera.fov=this.fov/this.zoom;this.perspectiveCamera.updateProjectionMatrix();this.projectionMatrix=this.perspectiveCamera.projectionMatrix;this.isPerspective=!0};
Autodesk.Viewing.UnifiedCamera.prototype.toOrthographic=function(){if(this.isPerspective){this.saveFov=this.fov;var a=Autodesk.Viewing.UnifiedCamera.ORTHO_FOV;this.position.copy(this.__computeFovPosition(a));this.fov=a}this.orthoScale=this.target.clone().sub(this.position).length();var a=0.5*this.orthoScale,b=a*this.aspect;this.left=this.orthographicCamera.left=-b;this.right=this.orthographicCamera.right=b;this.top=this.orthographicCamera.top=a;this.bottom=this.orthographicCamera.bottom=-a;this.orthographicCamera.near=
this.near;this.orthographicCamera.far=this.far;this.orthographicCamera.updateProjectionMatrix();this.projectionMatrix=this.orthographicCamera.projectionMatrix;this.isPerspective=!1};Autodesk.Viewing.UnifiedCamera.prototype.updateProjectionMatrix=function(){this.isPerspective?this.toPerspective():this.toOrthographic()};Autodesk.Viewing.UnifiedCamera.prototype.setSize=function(a,b){this.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};
Autodesk.Viewing.UnifiedCamera.prototype.setFov=function(a){this.fov=a;this.updateProjectionMatrix()};Autodesk.Viewing.UnifiedCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);var c=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.setFov(c);return c};Autodesk.Viewing.UnifiedCamera.prototype.getCameraChangedEvent=function(){return{type:Autodesk.Viewing.CAMERA_CHANGE_EVENT,camera:this}};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.Toolbar=function(a){this.parentContainer=a;this.container=document.createElement("div");this.container.className="toolbar-menuplacer";this.menu=document.createElement("ul");this.menu.className="toolbar-menu";this.menu.classList.add("ontouchstart"in window?"touch":"notouch");this.container.appendChild(this.menu);this.parentContainer.appendChild(this.container);this.subToolbars={}};Autodesk.Viewing.UI.Toolbar.prototype.constructor=Autodesk.Viewing.UI.Toolbar;
Autodesk.Viewing.UI.Toolbar.toolButtons={};
Autodesk.Viewing.UI.Toolbar.createMenuButton=function(a,b,c,f){var d=document.createElement("li");d.className="toolbar-generic-button";d.id=a;var g=null;if(b){var h=b;f&&f.defaultTooltipValue&&(h=f.defaultTooltipValue);g=document.createElement("div");g.className="toolbar-tooltip";g.setAttribute("data-i18n",b);g.setAttribute("tooltipText",b);g.textContent=Autodesk.Viewing.i18n.translate(b,{defaultValue:h});d.appendChild(g)}var k=document.createElement("div");k.className="toolbar-button";k.id=Autodesk.Viewing.UI.SubToolbar.getInternalButtonId(a);
d.appendChild(k);var l="ontouchstart"in window;k.addEventListener(l?"touchstart":"click",function(a){if(!Autodesk.Viewing.UI.SubToolbar.isDisabled(k)&&(c&&c(a),l)){for(var b in Autodesk.Viewing.UI.Toolbar.toolButtons){var f=Autodesk.Viewing.UI.Toolbar.toolButtons[b];if(f.id!==d.id&&f.hasSubmenu){var g=f.classList.contains("toolbar-submenu-visible");g&&f.classList.remove("toolbar-submenu-visible")}}d.hasSubmenu&&((g=d.classList.contains("toolbar-submenu-visible"))?d.classList.remove("toolbar-submenu-visible"):
d.classList.add("toolbar-submenu-visible"));a.hanled||(a.handled=[]);a.handled.push("toolbar-menu")}});k.onToolStateChangedCB=null;f&&f.onToolStateChangedCB&&(k.onToolStateChangedCB=f.onToolStateChangedCB);!l&&g&&(d.addEventListener("mouseover",function(a){if(a.target===d||a.target===k)g.style.visibility="visible"}),d.addEventListener("mouseout",function(a){if(a.target===d||a.target===k)g.style.visibility="hidden"}));return Autodesk.Viewing.UI.Toolbar.toolButtons[a]=d};
Autodesk.Viewing.UI.Toolbar.getToolButton=function(a){return Autodesk.Viewing.UI.Toolbar.toolButtons[a]};Autodesk.Viewing.UI.Toolbar.destroy=function(){Autodesk.Viewing.UI.Toolbar.toolButtons={}};Autodesk.Viewing.UI.Toolbar.prototype.addSubToolbar=function(a,b){var c=new Autodesk.Viewing.UI.SubToolbar(this.menu,a,b);return this.subToolbars[a]=c};Autodesk.Viewing.UI.Toolbar.prototype.getSubToolbars=function(){return this.subToolbars};Autodesk.Viewing.UI.Toolbar.prototype.getSubToolbarById=function(a){return this.subToolbars[a]};
Autodesk.Viewing.UI.Toolbar.prototype.removeSubToolbar=function(a){if("string"===typeof a){var b=this.subToolbars[a];b&&(this.menu.removeChild(b.subtoolbar),delete this.subToolbars[a])}else a&&(this.menu.removeChild(a.subtoolbar),a.id&&delete this.subToolbars[a.id])};Autodesk.Viewing.UI.Toolbar.prototype.removeAllSubToolbars=function(){for(;this.menu.firstChild;)this.menu.removeChild(this.menu.firstChild);this.subToolbars={}};
Autodesk.Viewing.UI.Toolbar.prototype.addToSubToolbar=function(a,b){this.subToolbars[a]&&this.subToolbars[a].addTool(b)};Autodesk.Viewing.UI.Toolbar.prototype.removeFromSubToolbar=function(a,b){this.subToolbars[a]&&this.subToolbars[a].removeTool(b)};
Autodesk.Viewing.UI.Toolbar.prototype.attachSubMenu=function(a,b){a.appendChild(b);a.hasSubmenu=!0;"ontouchstart"in window&&document.addEventListener("touchstart",function(b){b.handled&&-1!==b.handled.indexOf("toolbar-menu")||a.classList.contains("toolbar-submenu-visible")&&a.classList.remove("toolbar-submenu-visible")})};Autodesk.Viewing.UI.Toolbar.prototype.collapse=function(a){this.container.classList.toggle("toolbar-menu-collapsed",a)};Autodesk.Viewing.UI.Toolbar.prototype.isCollapsed=function(){return this.container.classList.contains("toolbar-menu-collapsed")};
Autodesk.Viewing.UI.Toolbar.prototype.addEventListener=function(a,b){this.menu.addEventListener(a,b)};Autodesk.Viewing.UI.Toolbar.prototype.removeEventListener=function(a,b){this.menu.removeEventListener(a,b)};Autodesk.Viewing.UI.SubToolbar=function(a,b,c){this.parentContainer=a;this.subtoolbar=document.createElement("div");this.subtoolbar.className="toolbar-subtoolbar";this.id=this.subtoolbar.id=b;this.parentContainer.appendChild(this.subtoolbar);this.buttons={};this.isRadio=c};
Autodesk.Viewing.UI.SubToolbar.prototype.constructor=Autodesk.Viewing.SubToolbar;Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE=0;Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE=1;Autodesk.Viewing.UI.SubToolbar.STATE_DISABLED=-1;Autodesk.Viewing.UI.SubToolbar.getInternalButtonId=function(a){return a+"Button"};Autodesk.Viewing.UI.SubToolbar.prototype.addTool=function(a){this.buttons[a.id]=a;this.subtoolbar.appendChild(a);Autodesk.Viewing.UI.SubToolbar.setToolState(a.id,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE)};
Autodesk.Viewing.UI.SubToolbar.prototype.insertToolBefore=function(a,b){this.buttons[a.id]=a;this.subtoolbar.insertBefore(a,b);Autodesk.Viewing.UI.SubToolbar.setToolState(a.id,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE)};
Autodesk.Viewing.UI.SubToolbar.setToolState=function(a,b){if("string"===typeof a){var c=Autodesk.Viewing.UI.SubToolbar.getInternalButtonId(a);a=document.getElementById(c)}if(a){switch(b){case Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE:a.classList.remove("active-button");a.classList.remove("disabled-button");break;case Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE:a.classList.remove("disabled-button");a.classList.add("active-button");break;case Autodesk.Viewing.UI.SubToolbar.STATE_DISABLED:a.classList.remove("active-button"),
a.classList.add("disabled-button")}if(a.onToolStateChangedCB)a.onToolStateChangedCB()}};Autodesk.Viewing.UI.SubToolbar.getToolState=function(a){"string"===typeof a&&(a=Autodesk.Viewing.UI.SubToolbar.getInternalButtonId(a),a=document.getElementById(a));return a?a.classList.contains("active-button")||a.classList.contains("disabled-button")?Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE:Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE:Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE};
Autodesk.Viewing.UI.SubToolbar.prototype.insertToolAtIndex=function(a,b){this.buttons[a.id]=a;b<this.getToolCount()?this.subtoolbar.insertBefore(a,this.subtoolbar.children[b]):this.subtoolbar.appendChild(a);Autodesk.Viewing.UI.SubToolbar.setToolState(a.id,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE)};Autodesk.Viewing.UI.SubToolbar.prototype.setToolImage=function(a,b){var c=document.getElementById(a+"Button");c&&(c.style.backgroundImage="url('"+b+"')")};
Autodesk.Viewing.UI.SubToolbar.prototype.setToolBackgroundColor=function(a,b){var c=this.buttons[a];c&&(c.style.backgroundColor=b)};Autodesk.Viewing.UI.SubToolbar.prototype.setToolText=function(a,b){var c=document.getElementById(a+"Button");if(c){var f=document.createElement("span");f.textContent=Autodesk.Viewing.i18n.translate(b);f.style.fontSize="12px";f.style.color="black";f.style.zIndex="10";f.setAttribute("data-i18n",b);c.appendChild(f)}};
Autodesk.Viewing.UI.SubToolbar.prototype.removeTool=function(a){if("string"===typeof a){var b=this.buttons[a];b&&(this.subtoolbar.removeChild(b),delete this.buttons[a])}else a&&(this.subtoolbar.removeChild(a),a.id&&delete this.buttons[a.id])};Autodesk.Viewing.UI.SubToolbar.prototype.getTool=function(a){return this.buttons[a]};
Autodesk.Viewing.UI.SubToolbar.prototype.getAllToolIds=function(){for(var a=[],b=this.subtoolbar.children?this.subtoolbar.children.length:0,c=0;c<b;c++)a.push(this.subtoolbar.children[c].id);return a};Autodesk.Viewing.UI.SubToolbar.prototype.getToolCount=function(){return this.subtoolbar.children?this.subtoolbar.children.length:0};
Autodesk.Viewing.UI.SubToolbar.prototype.select=function(a){Autodesk.Viewing.UI.SubToolbar.getToolState(a)!==Autodesk.Viewing.UI.SubToolbar.STATE_DISABLED&&(this.isRadio&&this.deselectAll(),Autodesk.Viewing.UI.SubToolbar.setToolState(a,Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE))};Autodesk.Viewing.UI.SubToolbar.prototype.deselect=function(a){a in this.buttons&&Autodesk.Viewing.UI.SubToolbar.setToolState(a,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE)};
Autodesk.Viewing.UI.SubToolbar.prototype.deselectAll=function(){for(var a in this.buttons)this.buttons.hasOwnProperty(a)&&this.deselect(a)};Autodesk.Viewing.UI.SubToolbar.isActive=function(a){return a.classList.contains("active-button")};Autodesk.Viewing.UI.SubToolbar.isDisabled=function(a){return a.classList.contains("disabled-button")};Autodesk.Viewing.UI.SubToolbar.prototype.setToolVisibility=function(a,b){a in this.buttons&&(this.buttons[a].style.display=b?"list-item":"none")};
Autodesk.Viewing.UI.SubToolbar.prototype.isToolVisible=function(a){return a in this.buttons?!(this.buttons[a].style.display&&"none"===this.buttons[a].style.display):!1};Autodesk.Viewing.UI.SubToolbar.prototype.setVisibility=function(a){this.subtoolbar.style.display=a?"":"none"};Autodesk.Viewing.UI.SubToolbar.prototype.isVisible=function(){return!(this.subtoolbar.style.display&&"none"===this.subtoolbar.style.display)};Autodesk.Viewing.UI.ToolBar=Autodesk.Viewing.UI.Toolbar;
Autodesk.Viewing.UI.ToolBar.prototype=Autodesk.Viewing.UI.Toolbar.prototype;AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.GEOMETRY_LOADED_EVENT="geometry_loaded";Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT="frag->node array created";Autodesk.Viewing.SELECTION_CHANGED_EVENT="selection";Autodesk.Viewing.ISOLATE_EVENT="isolate";Autodesk.Viewing.HIDE_EVENT="hide";Autodesk.Viewing.SHOW_EVENT="show";Autodesk.Viewing.HIGHLIGHT_EVENT="highlight";Autodesk.Viewing.CAMERA_CHANGE_EVENT="cameraChanged";
Autodesk.Viewing.EXPLODE_CHANGE_EVENT="explodeChanged";Autodesk.Viewing.TOOL_CHANGE_EVENT="toolChanged";Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT="renderOptionChanged";Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT="layerVisibility";Autodesk.Viewing.NAVIGATION_MODE={ORBIT:0,PAN:1,DOLLY:2,ROLL:3,FOV:4,TOUCH_PAN_DOLLY:5,TOUCH_ROLL:6,OTHER:7};Autodesk.Viewing.TOOLBAR={NAVTOOLSID:"navTools",MODELTOOLSID:"modelTools"};
Autodesk.Viewing.Viewer3D=function(a,b){Autodesk.Viewing.Viewer.call(this,a,b);if("CANVAS"===this.container.nodeName)throw"Viewer must be initialized on a div [temporary]";this.canvas=document.createElement("canvas");this.canvas.tabIndex=0;var c=this.getDimensions();this.canvas.width=c.width;this.canvas.height=c.height;this.container.appendChild(this.canvas);this.canvas.viewer=this;this.toolbar=this.layersPanel=this.modelstructure=null;this.running=!1;this._defaultNavigationTool=this._pushedTool=
"";this.prefs=new Autodesk.Viewing.Private.Preferences(this,"Autodesk.Viewing.Private.GuiViewer3D.SavedSettings.")};Autodesk.Viewing.Viewer3D.prototype=Object.create(Autodesk.Viewing.Viewer.prototype);Autodesk.Viewing.Viewer3D.prototype.constructor=Autodesk.Viewing.Viewer3D;
Autodesk.Viewing.Viewer3D.kDefaultCanvasConfig={click:{onObject:["selectOnly"],offObject:["deselectAll"]},clickAlt:{onObject:["setCOI"],offObject:["setCOI"]},clickCtrl:{onObject:["selectToggle"],offObject:["deselectAll"]},clickShift:{onObject:["selectToggle"],offObject:["deselectAll"]}};
Autodesk.Viewing.Viewer3D.prototype.initialize=function(){function a(){var a,c,f=Autodesk.Viewing.theHotkeyManager.KEYCODES;Autodesk.Viewing.theHotkeyManager.pushHotkeys("Autodesk.FitToView",[{keycodes:[f.f],onPress:function(){b.navigation.setRequestFitToView(!0);return!0}}]);a=function(){b.navigation.setRequestHomeView(!0);return!0};Autodesk.Viewing.theHotkeyManager.pushHotkeys("Autodesk.Home",[{keycodes:[f.h],onPress:a},{keycodes:[f.HOME],onPress:a}]);Autodesk.Viewing.theHotkeyManager.pushHotkeys("Autodesk.Escape",
[{keycodes:[f.ESCAPE],onRelease:function(){if(b.objectContextMenu&&b.objectContextMenu.hide())return!0;b.fireEvent({type:Autodesk.Viewing.ESCAPE_EVENT});return!0}}]);a=function(){previousTool=b.getActiveNavigationTool();return b.setActiveNavigationTool("pan")};c=function(){return b.setActiveNavigationTool(previousTool)};hotkeys=[{keycodes:[f.SHIFT],onPress:a,onRelease:c},{keycodes:[f.SPACE],onPress:a,onRelease:c}];Autodesk.Viewing.theHotkeyManager.pushHotkeys("Autodesk.Pan",hotkeys,{tryUntilSuccess:!0})}
var b=this,c=this.detectWebGL();if(0>=c)return-1===c?Autodesk.Viewing.ErrorCodes.BROWSER_WEBGL_NOT_SUPPORTED:Autodesk.Viewing.ErrorCodes.BROWSER_WEBGL_DISABLED;Autodesk.Viewing.Viewer.prototype.initialize.call(this);this.impl=new Autodesk.Viewing.Private.Viewer3DImpl(this.canvas,this,function(c){b.navigation=new Autodesk.Viewing.Navigation(c.camera);b.__initAutoCam(c);b.utilities=new Autodesk.Viewing.ViewingUtilities(c,b.autocam,b.navigation);b.clickHandler=new Autodesk.Viewing.DefaultHandler(c,b.navigation,
b.utilities);b.toolController=new Autodesk.Viewing.ToolController(c,b,b.autocam,b.utilities,b.clickHandler);b.toolController.registerTool(new Autodesk.Viewing.GestureHandler(b));b.toolController.registerTool(Autodesk.Viewing.theHotkeyManager);b.toolController.activateTool(Autodesk.Viewing.theHotkeyManager.getName());a();b.toolController.registerTool(new Autodesk.Viewing.OrbitDollyPanTool(c,b));b.toolController.activateTool("gestures");return b.toolController});this.setDefaultNavigationTool("orbit");
this.model=null;this.impl.controls&&this.impl.controls.setAutocam(b.autocam);this.setCanvasClickBehavior(this.config&&this.config.canvasConfig?this.config.canvasConfig:Autodesk.Viewing.Viewer3D.kDefaultCanvasConfig);this.loader=document.createElement("div");this.loader.id="loader";this.loader.className="spinner";this.container.appendChild(this.loader);for(c=1;3>=c;c++){var f=document.createElement("div");f.className="bounce"+c;this.loader.appendChild(f)}this.initSettings();this.viewerState=new Autodesk.Viewing.Private.ViewerState(this);
this.config&&this.config.hasOwnProperty("startOnInitialize")&&!this.config.startOnInitialize||this.run();return 0};Autodesk.Viewing.Viewer3D.prototype.run=function(){this.running||(this.resize(),this.running=!0,this.impl.run())};
Autodesk.Viewing.Viewer3D.prototype.__initAutoCam=function(a){var b=this,c=a.camera;c.pivot||(c.pivot=new THREE.Vector3(0,0,0));c.target||(c.target=new THREE.Vector3(0,0,0));c.worldup||(c.worldup=c.up.clone());b.autocamCamera=c.clone();b.autocamCamera.target=c.target.clone();b.autocamCamera.pivot=c.pivot.clone();b.autocamCamera.worldup=c.worldup.clone();b.autocam=new Autocam(b.autocamCamera,b.navigation,b.canvas,function(a){b.autocamCamera.isPerspective!==c.isPerspective&&(b.autocamCamera.isPerspective?
b.navigation.toPerspective():b.navigation.toOrthographic());b.navigation.setVerticalFov(b.autocamCamera.fov,!1);b.navigation.setView(b.autocamCamera.position,b.autocamCamera.target);b.navigation.setPivotPoint(b.autocamCamera.pivot);b.navigation.setCameraUpVector(b.autocamCamera.up);a&&b.navigation.setWorldUpVector(b.autocamCamera.worldup);b.impl.syncCamera(a)},function(a){b.utilities?b.utilities.pivotActive(a,!1):b.impl.controls.pivotActive(a,!1)});b.addEventListener("cameraChanged",function(a){b.autocam.sync(a.camera)});
b.autocam.sync(c)};Autodesk.Viewing.Viewer3D.prototype.load=function(a,b,c,f){var d=this;return this.loadModel(a,null,b,function(){var a;d.modelstructure&&(a=function(a){d.modelstructure.setModel(a,d.config.defaultModelStructureTitle?d.config.defaultModelStructureTitle:"")});d.model.getObjectTree(a);c&&c()},f)};
Autodesk.Viewing.Viewer3D.prototype.uninitialize=function(a){this.canvas.parentNode.removeChild(this.canvas);this.viewerState=this.canvas=this.canvas.viewer=null;this.toolController&&(this.toolController.uninitialize(),this.utilities=this.clickHandler=this.toolController=null);this.navigation&&(this.navigation.uninitialize(),this.navigation=null);this.impl&&(this.impl.uninitialize(),this.impl=null);this.prefs=this.model=this.loader=null;Autodesk.Viewing.UI.Toolbar.destroy();this.toolbar=null;Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.FitToView");
Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.Home");Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.Escape");Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.Pan");Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.Orbit");Autodesk.Viewing.Viewer.prototype.uninitialize.call(this)};
Autodesk.Viewing.Viewer3D.prototype.detectWebGL=function(){if(window.WebGLRenderingContext){for(var a=document.createElement("canvas"),b=["webgl","experimental-webgl","moz-webgl","webkit-3d"],c=!1,f=0;4>f;f++)try{if((c=a.getContext(b[f]))&&"function"===typeof c.getParameter)return 1}catch(d){}return 0}return-1};
Autodesk.Viewing.Viewer3D.prototype.loadModel=function(a,b,c,f,d){function g(){if(h.model.is2d())Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.Orbit");else{var a;Autodesk.Viewing.theHotkeyManager.pushHotkeys("Autodesk.Orbit",[{keycodes:[Autodesk.Viewing.theHotkeyManager.KEYCODES.ALT],onPress:function(){a=h.getActiveNavigationTool();return h.setActiveNavigationTool("orbit")},onRelease:function(){return h.setActiveNavigationTool(a)}}],{tryUntilSuccess:!0})}}var h=this;this.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,
function(a){this.impl.needsRender=!0;h.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT)});return this.impl.loadSvf(a,b,c,function(a){h.model=new Autodesk.Viewing.Model(a);h.impl.setModel(h.model);h.loader.style.display="None";g();f&&f()},function(a,b){h.loader.style.display="None";d&&d(a,b)})};
Autodesk.Viewing.Viewer3D.prototype.getToolbar=function(a){!this.toolbar&&a&&(this.toolbar=new Autodesk.Viewing.UI.Toolbar(this.container),this.navTools=this.toolbar.addSubToolbar(Autodesk.Viewing.TOOLBAR.NAVTOOLSID,!0),this.modelTools=this.toolbar.addSubToolbar(Autodesk.Viewing.TOOLBAR.MODELTOOLSID,!1));return this.toolbar};Autodesk.Viewing.Viewer3D.prototype.resize=function(){Autodesk.Viewing.Viewer.prototype.resize.call(this);return this.impl.resize(this.container.clientWidth,this.container.clientHeight)};
Autodesk.Viewing.Viewer3D.prototype.getCamera=function(){return this.impl.camera};Autodesk.Viewing.Viewer3D.prototype.getState=function(a){return this.viewerState.getState(a)};Autodesk.Viewing.Viewer3D.prototype.restoreState=function(a,b,c){(a=this.viewerState.restoreState(a,b,c))&&this.fireEvent({type:Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,value:a});return a};Autodesk.Viewing.Viewer3D.prototype.isValidState=function(a){return this.viewerState.isValidState(a)};
Autodesk.Viewing.Viewer3D.prototype.setViewFromArray=function(a){this.setActiveNavigationTool("orbit");a={position:new THREE.Vector3(a[0],a[1],a[2]),target:new THREE.Vector3(a[3],a[4],a[5]),up:new THREE.Vector3(a[6],a[7],a[8]),aspect:a[9],fov:THREE.Math.radToDeg(a[10]),orthoScale:a[11],isPerspective:!a[12]};this.impl.setViewFromCamera(a)};Autodesk.Viewing.Viewer3D.prototype.setViewFromViewBox=function(a){this.impl.setViewFromViewBox(a,!1)};
Autodesk.Viewing.Viewer3D.prototype.setViewFromFile=function(){this.setActiveNavigationTool(this.model.is2d()?"pan":"orbit");this.impl.setViewFromFile(this.model)};Autodesk.Viewing.Viewer3D.prototype.getProperties=function(a,b,c){this.model?this.model.getProperties(a,b,c):c&&c(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Properties failed to load since model does not exist.")};
Autodesk.Viewing.Viewer3D.prototype.getObjectTree=function(a,b){this.model?this.model.getObjectTree(a,b):b&&b(Autodesk.Viewing.ErrorCodes.BAD_DATA,"ObjectTree failed to load since model does not exist.")};Autodesk.Viewing.Viewer3D.prototype.setCanvasClickBehavior=function(a){this.impl.controls.hasOwnProperty("setClickBehavior")&&this.impl.controls.setClickBehavior(a);this.clickHandler&&this.clickHandler.setClickBehavior(a)};
Autodesk.Viewing.Viewer3D.prototype.search=function(a,b,c){this.searchText=a;this.model?this.model.search(a,b,c):c&&c(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Search failed since model does not exist.")};Autodesk.Viewing.Viewer3D.prototype.getIsolatedNodes=function(){return this.impl.visibilityManager.getIsolatedNodes()};Autodesk.Viewing.Viewer3D.prototype.isolate=function(a){Array.isArray(a)?this.impl.visibilityManager.isolateMultiple(a):this.impl.visibilityManager.isolate(a)};
Autodesk.Viewing.Viewer3D.prototype.isolateById=function(a){function b(b){(f=d.model.getNodesByIds(Array.isArray(a)?a:[a]))&&d.isolate(f)}function c(a){d.getObjectTree(b);d.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)}var f=[],d=this;this.model&&this.model.isLoadDone()?this.getObjectTree(b):this.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)};Autodesk.Viewing.Viewer3D.prototype.setBackgroundColor=function(a,b,c,f,d,g){this.impl.setClearColors(a,b,c,f,d,g)};
Autodesk.Viewing.Viewer3D.prototype.toggleSelect=function(a){this.impl.selector.toggleSelectionId(a)};Autodesk.Viewing.Viewer3D.prototype.select=function(a){"number"===typeof a&&(a=[a]);this.impl.selector.setSelectionIds(a)};Autodesk.Viewing.Viewer3D.prototype.deselect=function(a){throw Error("not implemented yet");};Autodesk.Viewing.Viewer3D.prototype.clearSelection=function(){this.impl.selector.clearSelection()};Autodesk.Viewing.Viewer3D.prototype.getSelectionVisibility=function(){return this.impl.selector.getSelectionVisibility()};
Autodesk.Viewing.Viewer3D.prototype.getSelectionCount=function(){return this.impl.selector.getSelectionLength()};Autodesk.Viewing.Viewer3D.prototype.getSelection=function(){return this.impl.selector.getSelection()};Autodesk.Viewing.Viewer3D.prototype.hide=function(a){Array.isArray(a)?this.impl.visibilityManager.hideMultiple(a):this.impl.visibilityManager.hide(a)};Autodesk.Viewing.Viewer3D.prototype.show=function(a){Array.isArray(a)?this.impl.visibilityManager.showMultiple(a):this.impl.visibilityManager.show(a)};
Autodesk.Viewing.Viewer3D.prototype.showAll=function(){this.impl.visibilityManager.isolateNone();this.model.is2d()&&this.setLayerVisible(null,!0)};Autodesk.Viewing.Viewer3D.prototype.hideAll=function(){throw Error("not implemented yet");};Autodesk.Viewing.Viewer3D.prototype.toggleVisibility=function(a){this.impl.visibilityManager.toggleVisibility(a)};Autodesk.Viewing.Viewer3D.prototype.areAllVisible=function(){return this.impl.visibilityManager.areAllVisible()};
Autodesk.Viewing.Viewer3D.prototype.explode=function(a){this.impl.explode(a)};Autodesk.Viewing.Viewer3D.prototype.getExplodeScale=function(){return this.impl.getExplodeScale()};Autodesk.Viewing.Viewer3D.prototype.setQualityLevel=function(a,b){this.prefs.set("ambientShadows",a);this.prefs.set("antialiasing",b);this.impl.togglePostProcess(a,b)};Autodesk.Viewing.Viewer3D.prototype.setEnvironmentMap=function(a){this.impl.setCubeMap(a)};
Autodesk.Viewing.Viewer3D.prototype.setGhosting=function(a){this.prefs.set("ghosting",a);this.impl.toggleGhosting(a)};Autodesk.Viewing.Viewer3D.prototype.setProgressiveRendering=function(a){this.prefs.set("progressiveRendering",a);this.impl.toggleProgressive(a)};Autodesk.Viewing.Viewer3D.prototype.setOptimizeNavigation=function(a){this.prefs.set("optimizeNavigation",a);this.impl.setOptimizeNavigation(a)};Autodesk.Viewing.Viewer3D.prototype.getNavigationMode=function(){return this._navigationMode};
Autodesk.Viewing.Viewer3D.prototype.setNavigationMode=function(a){var b=null;switch(a){case Autodesk.Viewing.NAVIGATION_MODE.ORBIT:b="orbit";break;case Autodesk.Viewing.NAVIGATION_MODE.PAN:b="pan";break;case Autodesk.Viewing.NAVIGATION_MODE.DOLLY:b="dolly"}this.setActiveNavigationTool(b,a)};
Autodesk.Viewing.Viewer3D.prototype.setActiveNavigationTool=function(a){if(a===this._pushedTool||!a&&!this._pushedTool)return!0;if(this._pushedTool)if(this.impl.controls.deactivateTool(this._pushedTool))this._pushedTool=null;else return!1;return a&&a!==this.getDefaultNavigationToolName()||null!==this._pushedTool?this.impl.controls.activateTool(a)?(this._pushedTool=a,this.fireEvent({type:Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,id:this._pushedTool}),!0):!1:(this.fireEvent({type:Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,
id:this.getDefaultNavigationToolName()}),!0)};Autodesk.Viewing.Viewer3D.prototype.getActiveNavigationTool=function(){return this._pushedTool?this._pushedTool:this._defaultNavigationTool};
Autodesk.Viewing.Viewer3D.prototype.setDefaultNavigationTool=function(a){this._defaultNavigationTool&&this.impl.controls.deactivateTool(this._defaultNavigationTool);this._pushedTool&&this.impl.controls.deactivateTool(this._pushedTool);this.impl.controls.activateTool(a);this._defaultNavigationTool=a;this._pushedTool&&this.impl.controls.activateTool(this._pushedTool)};Autodesk.Viewing.Viewer3D.prototype.getDefaultNavigationToolName=function(){return this._defaultNavigationTool};
Autodesk.Viewing.Viewer3D.prototype.getFOV=function(){return this.navigation.getVerticalFov()};Autodesk.Viewing.Viewer3D.prototype.setFOV=function(a){this.navigation.setVerticalFov(a,!0)};Autodesk.Viewing.Viewer3D.prototype.getFocalLength=function(){return this.navigation.getFocalLength()};Autodesk.Viewing.Viewer3D.prototype.setFocalLength=function(a){this.navigation.setFocalLength(a,!0)};
Autodesk.Viewing.Viewer3D.prototype.hideLines=function(a){this.prefs.set("lineRendering",!a);if(!this.impl.hideLines(a)){var b=this,c=function(){b.impl.hideLines(a);b.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)};this.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)}};Autodesk.Viewing.Viewer3D.prototype.applyCamera=function(a,b){this.impl.applyCamera(a,b)};
Autodesk.Viewing.Viewer3D.prototype.fitToView=function(a){var b=this,c=!0,f=function(){var g=null;if(Array.isArray(a)&&0<a.length){for(var k=new THREE.Box3,l=new THREE.Box3,m=[],p=0;p<a.length;p++)b.model.getNodeFragments(a[p],m);for(p=0;p<m.length;p++)if(void 0!==m[p]){var n=b.impl.getRenderProxy(b.model,m[p]);l.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld);k.union(l)}k.empty()||(g=k)}if(!g||g.empty())g=b.impl.getFitBounds();b.navigation.fitBounds(!1,g);b.removeEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,
d);b.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,f);return c},d=function(){b.model&&b.model.isLoadDone()?f():(c=!1,b.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,f))},g=this.model.getData().propertydb,g=g&&0<g.attrs.length;!this.model.is2d()&&g&&null!==a&&void 0!==a?this.model&&this.model.isObjectTreeCreated()?d():(c=!1,this.addEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,d)):this.navigation.fitBounds(!1,this.impl.getFitBounds(!0))};
Autodesk.Viewing.Viewer3D.prototype.setClickConfig=function(a,b,c){var f=this.clickHandler?this.clickHandler.getClickBehavior():this.impl.controls.getClickBehavior();return a in f&&(a=f[a],b in a)?(a[b]=c,!0):!1};Autodesk.Viewing.Viewer3D.prototype.getClickConfig=function(a,b){var c=this.clickHandler?this.clickHandler.getClickBehavior():this.impl.controls.getClickBehavior();return a in c&&(c=c[a],b in c)?c[b]:null};
Autodesk.Viewing.Viewer3D.prototype.setClickToSetCOI=function(a){this.prefs.set("clickToSetCOI",a);var b=this.getClickConfig("click","onObject");a?-1===b.indexOf("setCOI")&&this.setClickConfig("click","onObject",["setCOI"]):0<=b.indexOf("setCOI")&&this.setClickConfig("click","onObject",["selectOnly"])};
Autodesk.Viewing.Viewer3D.prototype.setModelStructurePanel=function(a){var b=this;if(a instanceof Autodesk.Viewing.UI.ModelStructurePanel||null===a){this.modelstructure&&(this.modelstructure.setVisible(!1),this.removePanel(this.modelstructure),this.modelstructure.uninitialize());if(this.modelstructure=a)this.addPanel(this.modelstructure),b.model&&b.model.getObjectTree(function(a){b.modelstructure.setModel(a)});return!0}return!1};
Autodesk.Viewing.Viewer3D.prototype.setLayersPanel=function(a){return a instanceof Autodesk.Viewing.UI.LayersPanel||!a?(this.layersPanel&&(this.layersPanel.setVisible(!1),this.removePanel(this.layersPanel),this.layersPanel.uninitialize()),(this.layersPanel=a)&&this.addPanel(a),!0):!1};
Autodesk.Viewing.Viewer3D.prototype.setPropertyPanel=function(a){return a instanceof Autodesk.Viewing.UI.PropertyPanel||!a?(this.propertygrid&&(this.propertygrid.setVisible(!1),this.removePanel(this.propertygrid),this.propertygrid.uninitialize()),(this.propertygrid=a)&&this.addPanel(a),!0):!1};
Autodesk.Viewing.Viewer3D.prototype.initSettings=function(){var a=window.navigator,b=-1!=a.platform.indexOf("armv")||a.appVersion&&-1!=a.appVersion.indexOf("Android"),a=a.appVersion&&-1!==a.appVersion.indexOf("iPad");this.prefs.load({ambientShadows:!(b||a),antialiasing:!(b||a),progressiveRendering:!0,environmentMap:!1,openPropertiesOnSelect:!(b||a),ghosting:!0,viewCube:!(b||a),lineRendering:!0,lightPreset:b||a||_isIE11?0:Autodesk.Viewing.Private.DefaultLightPreset,backgroundColorPreset:null,reverseMouseZoomDir:!1,
reverseHorizontalLookDirection:!1,reverseVerticalLookDirection:!1,alwaysUsePivot:!1,zoomTowardsPivot:!1,orbitPastWorldPoles:!0,leftHandedMouseSetup:!1,clickToSetCOI:b||a,optimizeNavigation:!1});this.prefs.tag("3d");this.prefs.tag("2d");this.prefs.untag("2d","viewCube alwaysUsePivot zoomTowardsPivot reverseHorizontalLookDirection reverseVerticalLookDirection orbitPastWorldPoles clickToSetCOI ghosting optimizeNavigation ambientShadows antialiasing lineRendering lightPreset".split(" "));this.setQualityLevel(this.prefs.ambientShadows,
this.prefs.antialiasing);this.setGhosting(this.prefs.ghosting);this.setProgressiveRendering(this.prefs.progressiveRendering);this.setClickToSetCOI(this.prefs.clickToSetCOI);this.setOptimizeNavigation(this.prefs.optimizeNavigation);this.hideLines(!this.prefs.lineRendering);this.navigation.setUsePivotAlways(this.prefs.alwaysUsePivot);this.navigation.setReverseZoomDirection(this.prefs.reverseMouseZoomDir);this.navigation.setReverseHorizontalLookDirection(this.prefs.reverseHorizontalLookDirection);this.navigation.setReverseVerticalLookDirection(this.prefs.reverseVerticalLookDirection);
this.navigation.setZoomTowardsPivot(this.prefs.zoomTowardsPivot);this.navigation.setOrbitPastWorldPoles(this.prefs.orbitPastWorldPoles);this.navigation.setUseLeftHandedInput(this.prefs.leftHandedMouseSetup);if(b=this.prefs.backgroundColorPreset)try{var c=JSON.parse(b);this.impl.setClearColors(c[0],c[1],c[2],c[3],c[4],c[5])}catch(f){this.prefs.set("backgroundColorPreset",null)}this.impl.setLightPreset(this.prefs.lightPreset,!0)};
Autodesk.Viewing.Viewer3D.prototype.setLightPreset=function(a){this.prefs.set("lightPreset",a);this.impl.setLightPreset(a)};Autodesk.Viewing.Viewer3D.prototype.setUsePivotAlways=function(a){this.prefs.set("alwaysUsePivot",a);this.navigation.setUsePivotAlways(a)};Autodesk.Viewing.Viewer3D.prototype.setReverseZoomDirection=function(a){this.prefs.set("reverseMouseZoomDir",a);this.navigation.setReverseZoomDirection(a)};
Autodesk.Viewing.Viewer3D.prototype.setReverseHorizontalLookDirection=function(a){this.prefs.set("reverseHorizontalLookDirection",a);this.navigation.setReverseHorizontalLookDirection(a)};Autodesk.Viewing.Viewer3D.prototype.setReverseVerticalLookDirection=function(a){this.prefs.set("reverseVerticalLookDirection",a);this.navigation.setReverseVerticalLookDirection(a)};Autodesk.Viewing.Viewer3D.prototype.setZoomTowardsPivot=function(a){this.prefs.set("zoomTowardsPivot",a);this.navigation.setZoomTowardsPivot(a)};
Autodesk.Viewing.Viewer3D.prototype.setOrbitPastWorldPoles=function(a){this.prefs.set("orbitPastWorldPoles",a);this.navigation.setOrbitPastWorldPoles(a)};Autodesk.Viewing.Viewer3D.prototype.setUseLeftHandedInput=function(a){this.prefs.set("leftHandedMouseSetup",a);this.navigation.setUseLeftHandedInput(a)};
Autodesk.Viewing.Viewer3D.prototype.preContextMenuShow=function(a){var b=this.impl.castRay(a.clientX,a.clientY);if(b.node&&!this.impl.selector.isSelectedOrParentIsSelected(b.node)){var c=-1!==navigator.userAgent.search("Mac OS");c&&a.metaKey||!c&&a.ctrlKey||this.impl.selector.setSelection([b.node])}return!0};
Autodesk.Viewing.Viewer3D.prototype.setLayerVisible=function(a,b,c){function f(a,b){var c=[];if(a.isLayer)c.push(a.index);else for(var d=a.children,m=0;m<d.length;++m)c=c.concat(f(d[m]));return c}var d=this.model.getLayersRoot();if(d){null===a&&(a=[d]);Array.isArray(a)||(a=[a]);c&&(this.impl.setLayerVisible(f(d),!1),b=!0);c=[];for(d=0;d<a.length;++d)c=c.concat(f(a[d]));this.impl.setLayerVisible(c,b);this.fireEvent({type:Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT})}};
Autodesk.Viewing.Viewer3D.prototype.isLayerVisible=function(a){return a&&a.isLayer&&this.impl.isLayerVisible(a.index)};Autodesk.Viewing.Viewer3D.prototype.anyLayerHidden=function(){function a(c){if(c.isLayer)return!b.impl.isLayerVisible(c.index);c=c.children;for(var d=0;d<c.length;++d)if(a(c[d]))return!0;return!1}var b=this,c=b.model.getLayersRoot();return c&&a(c)};Autodesk.Viewing.BaseViewer3D=Autodesk.Viewing.Viewer3D;AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ErrorCodes={UNKNOWN_FAILURE:1,BAD_DATA:2,NETWORK_FAILURE:3,NETWORK_ACCESS_DENIED:4,NETWORK_FILE_NOT_FOUND:5,NETWORK_SERVER_ERROR:6,NETWORK_UNHANDLED_RESPONSE_CODE:7,BROWSER_WEBGL_NOT_SUPPORTED:8,BAD_DATA_NO_VIEWABLE_CONTENT:9,BROWSER_WEBGL_DISABLED:10};AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.Viewer2D=function(a,b){Autodesk.Viewing.Viewer.call(this,a,b);b||(b={});b.domElement=this.container;this.impl=new Autodesk.Viewing.Private.Viewer2DImpl(this,b)};
Autodesk.Viewing.Viewer2D.prototype=Object.create(Autodesk.Viewing.Viewer.prototype);Autodesk.Viewing.Viewer2D.prototype.constructor=Autodesk.Viewing.Viewer2D;Autodesk.Viewing.Viewer2D.prototype.initialize=function(){Autodesk.Viewing.Viewer.prototype.initialize.call(this);return this.impl.initialize()};Autodesk.Viewing.Viewer2D.prototype.load=function(a,b,c,f){if(this.impl.load(a))return c&&c(),!0;f&&f();return!1};
Autodesk.Viewing.Viewer2D.prototype.uninitialize=function(){this.impl.uninitialize();Autodesk.Viewing.Viewer.prototype.uninitialize.call(this)};Autodesk.Viewing.Viewer2D.prototype.resize=function(){Autodesk.Viewing.Viewer.prototype.resize.call(this);this.impl.resize()};Autodesk.Viewing.Viewer2D.prototype.setViewFromFile=function(){this.impl.goHome()};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.Document=function(a,b){function c(a){if(a){var b=a.children?a.children.length:0;if("geometry"===a.type&&"3d"===a.role&&b){for(var f=0,l=0;l<b;l++){var m=a.children[l];m&&"view"===m.type&&"3d"===m.role&&(d.myViewGeometry[m.guid]=a,f++)}d.myNumViews[a.guid]=f}else if("application/autodesk-db"==a.mime&&a.urn)d.myPropertyDb=a.urn.substr(0,a.urn.lastIndexOf("/")+1);else if(0<b)for(l=0;l<b;l++)c(a.children[l])}}function f(a,b,c){if(a){var d=a.guid;if(d){c.apply(this,[d,b]);b=a.children?
a.children.length:0;for(var m=0;m<b;m++)f(a.children[m],d,c)}}}this.myPath=b;this.myData=a;this.myViewGeometry={};this.myNumViews={};this.myPropertyDb=null;var d=this;c(a);this.parents={};f(this.myData,null,function(a,b){d.parents[a]=b})};Autodesk.Viewing.Document.prototype.constructor=Autodesk.Viewing.Document;
Autodesk.Viewing.Document.load=function(a,b,c,f){function d(a){var b=[],c=null;if(!a||!a.children)return b;if(a=1===a.children.length?a.children[0]:null)c=a.messages;a=c?c.length:0;for(var d=0;d<a;d++)b.push(c[d]);return b}"function"!==typeof b&&(console.log("Autodesk.Viewing.Document.load called with deprecated (auth) parameter"),"function"===typeof c&&(b=c),"function"===typeof f&&(c=f));var g=function(a){return-1===a.indexOf("urn:")?(0!==a.indexOf("/")&&(a="/"+a),window.location.protocol+"//"+window.location.host+
a):a}(a);try{(new Autodesk.Viewing.Private.ViewingServiceXhr(VIEWING_URL,"bubbles",{encodeUrn:!1})).get(g,function(a){if(/<[^>]*script/.test(a))c&&c(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malicious document content detected. Abort loading.");else{a="string"===typeof a?JSON.parse(a):a;a=new Autodesk.Viewing.Document(a,g);var f=Autodesk.Viewing.Document.getSubItemsWithProperties(a.getRootItem(),{type:"folder",role:"viewable"},!0)[0];0<Autodesk.Viewing.Document.getSubItemsWithProperties(f,{type:"geometry"},
!0).length?(f=d(a.getRootItem()),b&&b(a,f)):c&&(f=d(a.getRootItem()),c(Autodesk.Viewing.ErrorCodes.BAD_DATA_NO_VIEWABLE_CONTENT,"No viewable content.",f))}},function(a,b,f){"string"===typeof f&&JSON.parse(f);f=d(f);c&&(b="Error: "+a+" ("+b+")",a=Autodesk.Viewing.Private.ErrorHandler.getErrorCode(a),c(a,b,f))})}catch(h){c&&c(Autodesk.Viewing.ErrorCodes.UNKNOWN_FAILURE,"An exception occurred while loading the document: "+h.toString(),null)}};
Autodesk.Viewing.Document.prototype.getFullPath=function(a){if(!a)return a;var b=a;0===a.indexOf("urn")?b=VIEWING_URL+"/items/"+a:0===a.indexOf("$file$")&&-1!==this.myPath.indexOf("/output/bubble.json")&&(b=this.myPath.replace("/output/bubble.json","")+a.replace("$file$",""));return b};Autodesk.Viewing.Document.prototype.getThumbnailPath=function(a,b,c){b=b?b:200;c=c?c:200;return VIEWING_URL+"/thumbnails/"+this.myData.urn+"?guid="+encodeURIComponent(a.guid)+"&width="+b+"&height="+c};
Autodesk.Viewing.Document.prototype.getViewablePath=function(a){if("geometry"===a.type){var b=[];"3d"===a.role?b=Autodesk.Viewing.Document.getSubItemsWithProperties(a,{mime:"application/autodesk-svf"},!1):"2d"===a.role&&(b=Autodesk.Viewing.Document.getSubItemsWithProperties(a,{mime:"application/autodesk-f2d"},!1),0==b.length&&(b=Autodesk.Viewing.Document.getSubItemsWithProperties(a,{role:"tileRoot"},!0)));if(0<b.length)return this.getFullPath(b[0].urn)}else if("view"===a.type&&(a=this.getViewGeometry(a)))return this.getViewablePath(a);
return""};Autodesk.Viewing.Document.prototype.getPropertyDbPath=function(){return this.myPropertyDb};Autodesk.Viewing.Document.prototype.getRootItem=function(){return this.myData};Autodesk.Viewing.Document.prototype.getPath=function(){return this.myPath};Autodesk.Viewing.Document.prototype.getItemById=function(a){function b(c){if(!c)return null;for(var f in c){var d=c[f];if("guid"===f&&d===a)return c;if(null!==d&&"object"===typeof d&&(d=b(d)))return d}return null}return b(this.myData)};
Autodesk.Viewing.Document.getSubItemsWithProperties=function(a,b,c){var f=[];if(!a)return[];for(var d=a.children?a.children.length:0,g=0;g<d;g++){var h=a.children[g],k;a:{k=b;var l=void 0;for(l in k)if(!(l in h)||k[l]!==h[l]){k=!1;break a}k=!0}k&&f.push(h);c&&f.push.apply(f,Autodesk.Viewing.Document.getSubItemsWithProperties(h,b,c))}return f};Autodesk.Viewing.Document.prototype.getViewGeometry=function(a){return this.myViewGeometry[a.guid]};
Autodesk.Viewing.Document.prototype.getNumViews=function(a){return this.myNumViews[a.guid]||0};Autodesk.Viewing.Document.prototype.getParentId=function(a){return this.parents[a]};Autodesk.Viewing.Document.prototype.getMessages=function(a,b){var c=[];if(!a)return c;var f=null;b&&(f=this.getRootItem().guid);for(var d=a,g=this.parents[d];d&&(!b||g!==f);){if((d=this.getItemById(d))&&d.messages)for(var h=0;h<d.messages.length;h++)c.push(d.messages[h]);d=g;g=this.parents[d]}return c};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ModelUnits={METER:"m",CENTIMETER:"cm",MILLIMETER:"mm",FOOT:"ft",INCH:"in"};Autodesk.Viewing.Model=function(a){this.myData=a;this.myLoader=this.propWorker=this.sharedPath=null};Autodesk.Viewing.Model.prototype=Object.create(THREE.EventDispatcher.prototype);Autodesk.Viewing.Model.prototype.constructor=Autodesk.Viewing.Model;Autodesk.Viewing.Model.prototype.setData=function(a){this.myData=a};Autodesk.Viewing.Model.prototype.getData=function(){return this.myData};
Autodesk.Viewing.Model.prototype.setLoader=function(a){this.myLoader=a};Autodesk.Viewing.Model.prototype.getRoot=function(){return this.myData?this.myData.instanceTree:null};Autodesk.Viewing.Model.prototype.getRootId=function(){return this.myData&&this.myData.instanceTree?this.myData.instanceTree.dbId:null};Autodesk.Viewing.Model.prototype.getBoundingBox=function(){return this.myData?this.myData.bbox:null};
Autodesk.Viewing.Model.prototype.getUnitScale=function(){switch(this.getMetadata("distance unit","value",null)){case "meter":case "m":return 1;case "foot":case "ft":return 0.3048;case "inch":case "in":return 0.0254;case "centimeter":case "cm":return 0.01;case "millimeter":case "mm":return 0.001;default:return 1}};
Autodesk.Viewing.Model.prototype.getUnitString=function(){switch(this.getMetadata("distance unit","value",null)){case "meter":case "m":return Autodesk.Viewing.ModelUnits.METER;case "foot":case "ft":return Autodesk.Viewing.ModelUnits.FOOT;case "inch":case "in":return Autodesk.Viewing.ModelUnits.INCH;case "centimeter":case "cm":return Autodesk.Viewing.ModelUnits.CENTIMETER;case "millimeter":case "mm":return Autodesk.Viewing.ModelUnits.MILLIMETER;default:return null}};
Autodesk.Viewing.Model.prototype.getNodeById=function(a){function b(c){if(!c)return null;if(c.dbId&&c.dbId===a)return c;if(c.children&&0<c.children.length)for(var f=0;f<c.children.length;f++){var d=b(c.children[f]);if(d)return d}return null}return b(this.getRoot())};
Autodesk.Viewing.Model.prototype.getNodesByIds=function(a){function b(a,f,d){if(0===a.length)return d;var g=a.indexOf(f.dbId);-1!==g&&(d.push(f),a.splice(g,1));if(f.children)for(g=0;g<f.children.length;g++)b(a,f.children[g],d);return d}a=a.slice(0);return b(a,this.getRoot(),[])};
Autodesk.Viewing.Model.prototype.getNodeFragments=function(a,b){function c(a,b){var f=a.fragIds;if(void 0!==f){Array.isArray(f)||(f=[f]);for(var k=0;k<f.length;++k)b.push(f[k])}if(a.children)for(f=0;f<a.children.length;f++)c(a.children[f],b)}var f=this.getNodeById(a);c(f,b)};Autodesk.Viewing.Model.prototype.getMetadata=function(a,b,c){if(this.myData){var f=this.myData.metadata;if(f&&(a=f[a],void 0!==a))if(b){if(b=a[b],void 0!==b)return b}else return a}return c};
Autodesk.Viewing.Model.prototype.getDefaultCamera=function(){var a=this.myData;if(!a)return null;var b=null,c=a.cameras?a.cameras.length:0;if(0<c){var f=this.getMetadata("default camera","index",null);if(null!==f&&a.cameras[f])b=a.cameras[f];else{for(f=0;f<c;f++){var d=a.cameras[f];if(d.isPerspective){b=d;break}}b||(b=a.cameras[0])}}return b};Autodesk.Viewing.Model.prototype.getUpVector=function(){return this.getMetadata("world up vector","XYZ",null)};
Autodesk.Viewing.Model.prototype.geomPolyCount=function(){return this.myData?this.myData.geomPolyCount:null};Autodesk.Viewing.Model.prototype.instancePolyCount=function(){return this.myData?this.myData.instancePolyCount:null};Autodesk.Viewing.Model.prototype.getLayersRoot=function(){return this.myData?this.myData.layersRoot:null};Autodesk.Viewing.Model.prototype.is2d=function(){return this.myData&&this.myData.is2d};Autodesk.Viewing.Model.prototype.isLoadDone=function(){return this.myData&&this.myData.loadDone};
Autodesk.Viewing.Model.prototype.isObjectTreeCreated=function(){return this.myData&&this.myData.fragToNodeDone};Autodesk.Viewing.Model.prototype.getProperties=function(a,b,c){this.myData&&this.myLoader&&this.myLoader.getProperties(a,b,c)};Autodesk.Viewing.Model.prototype.getObjectTree=function(a,b){this.myData&&this.myLoader&&this.myLoader.getObjectTree(a,b)};
Autodesk.Viewing.Model.prototype.search=function(a,b,c){var f=this;this.isLoadDone()?this.myLoader.searchProperties(a,b,c):this.getObjectTree(function(d){f.myLoader.searchProperties(a,b,c)})};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.Navigation=function(a){this.__options={dollyToPivot:!1,orbitPastPoles:!0,reverseDolly:!1,reverseHorizontalLook:!1,reverseVerticalLook:!1,useLeftHandedInput:!1,usePivotAlways:!1,lockNavigation:!1};this.__transitionActive=this.__homeViewRequested=this.__fitToViewRequested=this.__pivotIsSetFlag=!1;this.__destinationView=null;this.__isTouchDevice=this.__is2D=!1;this.__kEpsilon=1E-6;var b=null,c=new THREE.Projector,f={left:0,top:0,width:1,height:1};this.uninitialize=function(){this.setCamera(null)};
this.setCamera=function(a){a!==b&&(b=a)&&(a.hasOwnProperty("target")||(a.target=new THREE.Vector3(0,0,0)),a.hasOwnProperty("pivot")||(a.pivot=new THREE.Vector3(0,0,0)),a.worldup=a.up.clone(),a.dirty=!0)};this.getCamera=function(){return b};this.setScreenViewport=function(a){f=a};this.getScreenViewport=function(){return f};this.__setUp=function(a){return a&&b&&0!==a.clone().normalize().sub(b.worldup).lengthSq()?(b.worldup.copy(a).normalize(),b.dirty=!0):!1};this.__getUp=function(){return b?b.worldup:
new THREE.Vector3(0,1,0)};this.__getProjector=function(){return c};this.setView=function(a,c){b&&a&&c&&!this.__options.lockNavigation&&(b.position.copy(a),b.target.copy(c),b.dirty=!0)};this.orientCameraUp=function(){b&&!this.__options.lockNavigation&&(b.up.copy(this.getAlignedUpVector()),b.dirty=!0)};this.getPivotPoint=function(){return b?b.pivot.clone():new THREE.Vector3(0,0,0)};this.setPivotPoint=function(a){b&&a&&!this.__options.lockNavigation&&(b.pivot.copy(a),b.dirty=!0)};this.getPosition=function(){return b?
b.position.clone():new THREE.Vector3(0,0,1)};this.setPosition=function(a){b&&a&&!this.__options.lockNavigation&&(b.position.copy(a),b.dirty=!0)};this.setTarget=function(a){b&&a&&!this.__options.lockNavigation&&(b.target.copy(a),b.dirty=!0)};this.getTarget=function(){return b?b.target.clone():new THREE.Vector3(0,0,0)};this.getEyeVector=function(){return b?b.target.clone().sub(b.position):new THREE.Vector3(0,0,-1)};this.getFovMin=function(){return 6.88};this.getFovMax=function(){return 100};this.setVerticalFov=
function(a,c){if(!b||b.isPerspective)if(6.88>a?a=6.88:100<a&&(a=100),b&&!this.__options.lockNavigation&&!(1E-6>=Math.abs(b.fov-a))){if(c){var f=this.getEyeVector(),k=THREE.Math.degToRad(b.fov),l=THREE.Math.degToRad(a),k=f.length()*Math.tan(0.5*k)/Math.tan(0.5*l),f=f.multiplyScalar(-1).normalize();this.setPosition(this.getTarget().add(f.multiplyScalar(k)))}b.setFov(a);b.dirty=!0}};this.computeFit=function(a,b,c,f){if(!f||f.empty())return{position:a,target:b};var l=f.center();f=f.size();f=0.5*Math.sqrt(f.x*
f.x+f.y*f.y+f.z*f.z);0===f&&(f=1);if(!this.getIs2D()){var m=Math.max(1,0.9+c/100*0.5);f*=m}a=a.clone().sub(b).normalize();c=f/Math.tan(THREE.Math.degToRad(0.5*c));a.multiplyScalar(c);return{position:l.clone().add(a),target:l}};this.computeOrthogonalUp=function(a,b){var c=this.__getUp(),f=b.clone().sub(a);if(0===f.lengthSq())return f.copy(c);var l=f.clone().cross(c);0===l.lengthSq()&&(c.z>c.y?f.y-=1E-4:f.z-=1E-4,l.crossVectors(f,c));return l.cross(f).normalize()};this.fitBounds=function(a,c,f){var k=
this.getTarget(),l=this.getPosition();if(this.__options.lockNavigation||!c||c.empty())return{position:l,target:k};var m=this.getVerticalFov();c=this.computeFit(l,k,m,c);f=f?this.computeOrthogonalUp(l,k):b.up;a?(b.up.copy(f),this.setView(c.position,c.target)):this.setRequestTransitionWithUp(!0,c.position,c.target,m,f);this.setPivotPoint(c.target);this.setPivotSetFlag(!0);return c};this.updateCamera=function(){b&&(b.updateProjectionMatrix(),this.orient(b,b.target,b.position,b.up),b.dirty=!1)};this.setCamera(a)};
Autodesk.Viewing.Navigation.prototype.constructor=Autodesk.Viewing.Navigation;Autodesk.Viewing.Navigation.prototype.setIs2D=function(a){this.__is2D=!!a};Autodesk.Viewing.Navigation.prototype.getIs2D=function(){return this.__is2D};Autodesk.Viewing.Navigation.prototype.setIsTouchDevice=function(a){this.__isTouchDevice=!!a};Autodesk.Viewing.Navigation.prototype.getIsTouchDevice=function(){return this.__isTouchDevice};
Autodesk.Viewing.Navigation.prototype.orient=function(){var a=new THREE.Matrix4,b=new THREE.Vector3,c=new THREE.Vector3,f=new THREE.Vector3;return function(d,g,h,k){var l=a.elements;f.subVectors(h,g).normalize();0===f.lengthSq()&&(f.z=1);b.crossVectors(k,f).normalize();0===b.lengthSq()&&(k.z>k.y?f.y-=1E-4:f.z+=1E-4,b.crossVectors(k,f).normalize());c.crossVectors(f,b);l[0]=b.x;l[4]=c.x;l[8]=f.x;l[1]=b.y;l[5]=c.y;l[9]=f.y;l[2]=b.z;l[6]=c.z;l[10]=f.z;d.setRotationFromMatrix(a)}}();
Autodesk.Viewing.Navigation.prototype.fov2fl=function(a){a=THREE.Math.degToRad(a);0>=a&&(a=1E-4);return Math.round(12/Math.tan(0.5*a))};Autodesk.Viewing.Navigation.prototype.fl2fov=function(a){0>=a&&(a=1E-4);a=2*Math.atan(12/a);return THREE.Math.radToDeg(a)};Autodesk.Viewing.Navigation.prototype.setCameraUpVector=function(a){if(!this.__options.lockNavigation){var b=this.getCamera();b.up.copy(a);b.dirty=!0}};
Autodesk.Viewing.Navigation.prototype.getCameraUpVector=function(){var a=this.getCameraRightVector(!1),b=this.getEyeVector();return a.cross(b).normalize()};Autodesk.Viewing.Navigation.prototype.getAlignedUpVector=function(){var a=this.getCameraRightVector(!0),b=this.getEyeVector();return a.cross(b).normalize()};
Autodesk.Viewing.Navigation.prototype.getCameraRightVector=function(a){var b=new THREE.Vector3;a=a?this.getWorldUpVector():this.getCamera().up;var c=this.getEyeVector();b.crossVectors(c,a);0===b.lengthSq()&&(a.z>a.y?c.y-=1E-4:c.z+=1E-4,b.crossVectors(c,a));return b.normalize()};Autodesk.Viewing.Navigation.prototype.setWorldUpVector=function(a,b){this.__options.lockNavigation||(this.__setUp(a),b&&this.orientCameraUp())};Autodesk.Viewing.Navigation.prototype.getWorldUpVector=function(){return this.__getUp().clone()};
Autodesk.Viewing.Navigation.prototype.getWorldRightVector=function(){var a=new THREE.Vector3;a.copy(this.__getUp());Math.abs(a.z)<=Math.abs(a.y)?a.set(a.y,-a.x,0):0<=a.z?a.set(a.z,0,-a.x):a.set(-a.z,0,a.x);return a.normalize()};Autodesk.Viewing.Navigation.prototype.getVerticalFov=function(){return this.getCamera().fov};Autodesk.Viewing.Navigation.prototype.getHorizontalFov=function(){var a=this.getScreenViewport();return this.getCamera().fov*(a.width/a.height)};
Autodesk.Viewing.Navigation.prototype.getFocalLength=function(){return this.fov2fl(this.getVerticalFov())};Autodesk.Viewing.Navigation.prototype.setFocalLength=function(a,b){this.setVerticalFov(this.fl2fov(a),b)};Autodesk.Viewing.Navigation.prototype.setReverseZoomDirection=function(a){this.__options.reverseDolly=!!a};Autodesk.Viewing.Navigation.prototype.setReverseHorizontalLookDirection=function(a){this.__options.reverseHorizontalLookDirection=!!a};
Autodesk.Viewing.Navigation.prototype.setReverseVerticalLookDirection=function(a){this.__options.reverseVerticalLookDirection=!!a};Autodesk.Viewing.Navigation.prototype.getReverseZoomDirection=function(){return this.__options.reverseDolly};Autodesk.Viewing.Navigation.prototype.getReverseHorizontalLookDirection=function(){return this.__options.reverseHorizontalLookDirection};Autodesk.Viewing.Navigation.prototype.getReverseVerticalLookDirection=function(){return this.__options.reverseVerticalLookDirection};
Autodesk.Viewing.Navigation.prototype.setZoomTowardsPivot=function(a){this.__options.dollyToPivot=!!a};Autodesk.Viewing.Navigation.prototype.getZoomTowardsPivot=function(){return this.__options.dollyToPivot};Autodesk.Viewing.Navigation.prototype.setOrbitPastWorldPoles=function(a){this.__options.orbitPastPoles=!!a};Autodesk.Viewing.Navigation.prototype.getOrbitPastWorldPoles=function(){return this.__options.orbitPastPoles};
Autodesk.Viewing.Navigation.prototype.setUsePivotAlways=function(a){this.__options.usePivotAlways=!!a};Autodesk.Viewing.Navigation.prototype.getUsePivotAlways=function(){return this.__options.usePivotAlways};Autodesk.Viewing.Navigation.prototype.setUseLeftHandedInput=function(a){this.__options.useLeftHandedInput=!!a};Autodesk.Viewing.Navigation.prototype.getUseLeftHandedInput=function(){return this.__options.useLeftHandedInput};
Autodesk.Viewing.Navigation.prototype.setIsLocked=function(a){this.__options.lockNavigation=!!a};Autodesk.Viewing.Navigation.prototype.getIsLocked=function(){return this.__options.lockNavigation};Autodesk.Viewing.Navigation.prototype.setPivotSetFlag=function(a){this.__options.lockNavigation||(this.__pivotIsSetFlag=!!a)};Autodesk.Viewing.Navigation.prototype.getPivotSetFlag=function(){return this.__pivotIsSetFlag};
Autodesk.Viewing.Navigation.prototype.setRequestFitToView=function(a){this.__options.lockNavigation||(this.__fitToViewRequested=!!a)};Autodesk.Viewing.Navigation.prototype.getRequestFitToView=function(){return this.__fitToViewRequested};Autodesk.Viewing.Navigation.prototype.setRequestHomeView=function(a){this.__options.lockNavigation||(this.__homeViewRequested=!!a)};Autodesk.Viewing.Navigation.prototype.getRequestHomeView=function(){return this.__homeViewRequested};
Autodesk.Viewing.Navigation.prototype.setRequestTransition=function(a,b,c,f,d){this.__destinationView=a?{position:b.clone(),coi:c.clone(),fov:f,up:this.getCamera().up.clone(),worldUp:this.getWorldUpVector(),reorient:d}:null};Autodesk.Viewing.Navigation.prototype.setRequestTransitionWithUp=function(a,b,c,f,d,g){this.__destinationView=a?{position:b.clone(),coi:c.clone(),fov:f,up:d.clone(),worldUp:g?g:this.getWorldUpVector(),reorient:!1}:null};
Autodesk.Viewing.Navigation.prototype.getRequestTransition=function(){return this.__destinationView};Autodesk.Viewing.Navigation.prototype.setTransitionActive=function(a){this.__transitionActive=!!a};Autodesk.Viewing.Navigation.prototype.getTransitionActive=function(){return this.__transitionActive};
Autodesk.Viewing.Navigation.prototype.getWorldSize=function(a){var b=this.getScreenViewport(),b=b.width/b.height;a=2*a*Math.tan(THREE.Math.degToRad(0.5*this.getCamera().fov));return new THREE.Vector2(a*b,a)};
Autodesk.Viewing.Navigation.prototype.getWorldPoint=function(a,b){b=2*(1-b)-1;var c=new THREE.Vector3(2*a-1,b,1);this.__getProjector().unprojectVector(c,this.getCamera());var f=this.getPosition(),c=c.sub(f).normalize(),d=this.getPivotPoint(),g=this.getEyeVector(),h=c.dot(g),d=0!==h?d.sub(f).dot(g)/h:d.sub(f).length();return c.multiplyScalar(d).add(f)};Autodesk.Viewing.Navigation.prototype.getPivotPlaneDistance=function(){var a=this.getPivotPoint(),b=this.getEyeVector(),c=this.getPosition();return a.sub(c).dot(b.normalize())};
Autodesk.Viewing.Navigation.prototype.panRelative=function(a,b,c){c=this.getWorldSize(c);a*=c.x;b*=c.y;a=this.getCameraRightVector(!1).multiplyScalar(a);b=this.getCameraUpVector().multiplyScalar(b);b=a.add(b);this.setView(this.getPosition().add(b),this.getTarget().add(b));this.getPivotSetFlag()||this.setPivotPoint(this.getTarget())};
Autodesk.Viewing.Navigation.prototype.dollyFromPoint=function(a,b){if(!(Math.abs(a)<=this.__kEpsilon)){var c=this.getPosition(),c=b.clone().sub(c),f=c.length(),d=f+a,g=10*this.__kEpsilon;d<g&&(d=g);f=d/f;Math.abs(f-1)>this.__kEpsilon&&(c.multiplyScalar(f),c.set(-c.x,-c.y,-c.z),c=c.add(b),d=this.getEyeVector(),d.multiplyScalar(f),this.setView(c,d.add(c)))}};
Autodesk.Viewing.Navigation.prototype.toPerspective=function(){var a=this.getCamera();this.__options.lockNavigation||a.isPerspective||(a.toPerspective(),a.dirty=!0)};Autodesk.Viewing.Navigation.prototype.toOrthographic=function(){var a=this.getCamera();!this.__options.lockNavigation&&a.isPerspective&&(a.toOrthographic(),a.dirty=!0)};"use strict";AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ViewingApplication=function(a,b){this.appContainerId=a;this.container=document.getElementById(a);this.options=b;this.myRegisteredViewers={};this.urn=this.myCurrentViewer=this.myDocument=null};Autodesk.Viewing.ViewingApplication.prototype.k3D="3D";Autodesk.Viewing.ViewingApplication.prototype.k2D="2D";
Autodesk.Viewing.ViewingApplication.prototype.registerViewer=function(a,b,c){c=c||{};this.options&&this.options.hasOwnProperty("disableBrowserContextMenu")&&!c.hasOwnProperty("disableBrowserContextMenu")&&(c.disableBrowserContextMenu=this.options.disableBrowserContextMenu);this.myRegisteredViewers[a]={};this.myRegisteredViewers[a].class=b;this.myRegisteredViewers[a].config=c};
Autodesk.Viewing.ViewingApplication.prototype.getViewerClass=function(a){return this.myRegisteredViewers.hasOwnProperty(a)?this.myRegisteredViewers[a].class:null};Autodesk.Viewing.ViewingApplication.prototype.getViewerContainer=function(){return document.getElementById(this.appContainerId)};
Autodesk.Viewing.ViewingApplication.prototype.getViewer=function(a,b,c){if(a in this.myRegisteredViewers){this.setCurrentViewer(null);var f=this.myRegisteredViewers[a].class,d={};a=this.myRegisteredViewers[a].config;for(var g in a)a.hasOwnProperty(g)&&(d[g]=a[g]);for(g in b)b.hasOwnProperty(g)&&(d[g]=b[g]);for(b=this.getViewerContainer();b.hasChildNodes();)b.removeChild(b.lastChild);f=new f(b,d);d=f.start();if(0===d)return this.setCurrentViewer(f),f;c&&c(d,"Viewer failed to initialize.")}return null};
Autodesk.Viewing.ViewingApplication.prototype.setCurrentViewer=function(a){this.myCurrentViewer&&this.myCurrentViewer.finish();this.myCurrentViewer=a};Autodesk.Viewing.ViewingApplication.prototype.getCurrentViewer=function(){return this.myCurrentViewer};Autodesk.Viewing.ViewingApplication.prototype.loadDocument=function(a,b,c){var f=this;Autodesk.Viewing.Document.load(a,function(a,c){f.myDocument=a;f.onDocumentLoaded(a,c);b&&b(a,c)},function(a,b,h){f.onDocumentFailedToLoad(b,a,h);c&&c(a,b,h)})};
Autodesk.Viewing.ViewingApplication.prototype.onDocumentLoaded=function(a,b){console.log(a,b)};Autodesk.Viewing.ViewingApplication.prototype.onDocumentFailedToLoad=function(a,b,c){console.log(a,b,c)};
Autodesk.Viewing.ViewingApplication.prototype.selectItem=function(a,b,c){var f=this.myDocument.getViewablePath(a);if(f){var d,g,h;if("geometry"===a.type&&"3d"===a.role)d=this.k3D,h=a.name;else if("view"===a.type&&"3d"===a.role){g=a;d=this.k3D;var k=this.myDocument.getViewGeometry(a);k&&(h=k.name)}else"geometry"===a.type&&"2d"===a.role?(d=0<Autodesk.Viewing.Document.getSubItemsWithProperties(a,{mime:"application/autodesk-f2d"},!1).length?this.k3D:this.k2D,h=a.name):"view"===a.type&&"2d"===a.role&&
(g=a,d=this.k3D,k=this.myDocument.getViewGeometry(a))&&(h=k.name);Autodesk.Viewing.Private.logger.log({viewer_current_time:Date.now(),viewer_event_type:"switch sheet",viewer_sheet_title:h});var l=this.myDocument.getMessages(a.guid,!0);if(d){var m=this,p=this.myCurrentViewer&&this.urn===f,k=null,k=g&&g.camera?function(){m.myCurrentViewer.setViewFromArray(g.camera);b&&b(m.myCurrentViewer,a,l)}:g&&g.viewbox?function(){m.myCurrentViewer.setViewFromViewBox(g.viewbox);b&&b(m.myCurrentViewer,a,l)}:p?function(){m.myCurrentViewer.setViewFromFile();
b&&b(m.myCurrentViewer,a,l)}:function(){b&&b(m.myCurrentViewer,a,l)},n=function(a,b){c&&c(a,b,l)},q=!1;p?(k&&k(),q=!0):(this.urn=null,h={defaultModelStructureTitle:h,viewableName:h},a.hasOwnProperty("extensions")&&(h.extensions=Array.isArray(a.extensions)?a.extensions:[a.extensions]),(d=this.getViewer(d,h,c))&&d.load(this.myDocument.getFullPath(f),this.myDocument.getPropertyDbPath(),k,n)&&(this.urn=f,q=!0));if(q)return this.onItemSelected(a),!0}}return!1};
Autodesk.Viewing.ViewingApplication.prototype.onItemSelected=function(a){console.log("Selected URL: http://"+location.host+location.pathname+"?document=urn:"+this.myDocument.getRootItem().guid+"&item="+encodeURIComponent(a.guid))};Autodesk.Viewing.ViewingApplication.prototype.selectItemById=function(a,b,c){return(a=this.myDocument.getItemById(a))?this.selectItem(a,b,c):!1};"use strict";AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.GuiViewer3D=function(a,b){b||(b={});b.startOnInitialize=!1;b.hasOwnProperty("docStructureConfig")||(b.docStructureConfig=Autodesk.Viewing.Private.GuiViewer3D.kDefaultDocStructureConfig);Autodesk.Viewing.Viewer3D.call(this,a,b)};Autodesk.Viewing.Private.GuiViewer3D.prototype=Object.create(Autodesk.Viewing.Viewer3D.prototype);Autodesk.Viewing.Private.GuiViewer3D.prototype.constructor=Autodesk.Viewing.Private.GuiViewer3D;
Autodesk.Viewing.Private.GuiViewer3D.prototype.resize=function(){Autodesk.Viewing.Viewer3D.prototype.resize.call(this);600>this.container.clientWidth?this.toolbar.collapse(!0):this.toolbar.collapse(!1)};Autodesk.Viewing.Private.GuiViewer3D.kDefaultDocStructureConfig={click:{onObject:["isolate"]},clickCtrl:{onObject:["toggleVisibility"]}};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initialize=function(){var a=Autodesk.Viewing.Viewer3D.prototype.initialize.call(this);if(0<a)return a;var b=this;if(this.toolController){var a=new Autodesk.Viewing.HotGestureTool(this),c=new Autodesk.Viewing.FovTool(this),f=new Autodesk.Viewing.WorldUpTool(this.impl,this);this.toolController.registerTool(a);this.toolController.registerTool(c);this.toolController.registerTool(f);this.toolController.activateTool(a.getName())}a=b.container;this.setDefaultNavigationTool("orbit");
this.initializeToolbar(a);this.initFocalLengthOverlay();this.addEventListener(Autodesk.Viewing.FULLSCREEN_MODE_EVENT,function(a){b.resizePanels({viewer:b});b.updateScreenModeButton(a.mode)});this.contextMenu||this.setContextMenu(new Autodesk.Viewing.Extensions.ViewerObjectContextMenu(this));this.progressbar=new Autodesk.Viewing.Private.ProgressBar(this.container);this.addEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,function(a){void 0!==a.percent&&b.progressbar.setPercent(a.percent)},!1);this.selectionActive=
!1;this.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT,function(a){b.selectionActive=0<a.dbIdArray.length;b.prefs.openPropertiesOnSelect&&b.getPropertyPanel(!0).setVisible(b.selectionActive)});this.addEventListener(Autodesk.Viewing.ISOLATE_EVENT,function(a){(b.prefs.openPropertiesOnSelect||a.nodeIdArray[0]===b.model.getRoot())&&b.propertygrid&&b.propertygrid.setVisible(0<a.nodeIdArray.length)});this.addEventListener(Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,function(a){b.renderoptions&&
b.renderoptions.syncUI();b.vieweroptions.syncUI()});this.initEscapeHandlers();this.updateScreenModeButton(this.getScreenMode());this.localize();this.run();return 0};
Autodesk.Viewing.Private.GuiViewer3D.prototype.uninitialize=function(){this.vieweroptions&&(this.vieweroptions.uninitialize(),this.vieweroptions=null);this.modelstructure&&(this.modelstructure.uninitialize(),this.modelstructure=null);this.layersPanel&&(this.layersPanel.uninitialize(),this.layersPanel=null);this.propertygrid&&(this.propertygrid.uninitialize(),this.propertygrid=null);this.renderoptions&&(this.renderoptions.uninitialize(),this.renderoptions=null);Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.ROLL");
Autodesk.Viewing.theHotkeyManager.popHotkeys("Autodesk.FOV");this.searchMenu=this.debugMenu=this.navTools=this.modelTools=this.minTools=this.progressbar=null;Autodesk.Viewing.Viewer3D.prototype.uninitialize.call(this)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initializeToolbar=function(a){a=this.getToolbar(!0);if(this.canChangeScreenMode()){this.minToolsId="minTools";this.minTools=a.addSubToolbar(this.minToolsId,!1);var b=this;this.minTools.minfullscreenbutton=this.addMenuButton(this.minToolsId,"toolbar-minfullscreenTool","Full screen",function(a){b.nextScreenMode()})}this.navTools=a.getSubToolbarById(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);this.modelTools=a.getSubToolbarById(Autodesk.Viewing.TOOLBAR.MODELTOOLSID)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.loadModel=function(a,b,c,f,d){-1!=a.indexOf(".f2d")?(this.createUI("2d"),this.setDefaultNavigationTool("pan")):(this.createUI("3d"),this.setDefaultNavigationTool("orbit"));return Autodesk.Viewing.Viewer3D.prototype.loadModel.call(this,a,b,c,f,d)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.setModelStructurePanel=function(a){var b=this;return Autodesk.Viewing.Viewer3D.prototype.setModelStructurePanel.call(b,a)?(a&&a.addVisibilityListener(function(c){if(c)b.onPanelVisible(a,b);b.setStructureButtonEnabled(c)}),!0):!1};
Autodesk.Viewing.Private.GuiViewer3D.prototype.setPropertyPanel=function(a){var b=this;return Autodesk.Viewing.Viewer3D.prototype.setPropertyPanel.call(b,a)?(a&&a.addVisibilityListener(function(c){if(c)b.onPanelVisible(a,b);b.setPropertiesButtonEnabled(c)}),!0):!1};
Autodesk.Viewing.Private.GuiViewer3D.prototype.setLayersPanel=function(a){var b=this;Autodesk.Viewing.Viewer3D.prototype.setLayersPanel.call(b,a);a&&a.addVisibilityListener(function(c){c?(b.onPanelVisible(a,b),b.modelTools.select(b.modelTools.layerButton.id)):b.modelTools.deselect(b.modelTools.layerButton.id)});return!0};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createUI=function(a){var b="3d"===a;this.initHotkeys(a);this.initNavTools(a);this.initCameraStateMachine(a);this.initModelTools(a);ENABLE_DEBUG&&this.initDebugTools();this.fireEvent({type:Autodesk.Viewing.TOOLBAR_CREATED_EVENT});this.initSearchBox();this.initInfoButton();this.initHomeButton(a);b&&this.initViewCube()};
Autodesk.Viewing.Private.GuiViewer3D.prototype.addOptionToggle=function(a,b,c,f,d){var g=d?this.prefs[d]:null;c="boolean"===typeof g?g:c;g=document.createElement("li");g.className="toolbar-submenu-listitem";var h=document.createElement("input");h.className="toolbar-submenu-checkbox";h.type="checkbox";h.id=b;g.appendChild(h);var k=document.createElement("label");k.setAttribute("for",b);k.setAttribute("data-i18n",b);k.textContent=Autodesk.Viewing.i18n.translate(b);g.appendChild(k);a.appendChild(g);
h.checked=c;a=this.navigation.getIsTouchDevice()?"touchstart":"click";h.addEventListener(a,function(a){f(h.checked);a.stopPropagation()});k.addEventListener(a,function(a){a.stopPropagation()});g.addEventListener(a,function(a){f(!h.checked);a.stopPropagation()});d&&this.prefs.addListeners(d,function(a){h.checked=a},function(a){h.checked=a;f(a)});return h};
Autodesk.Viewing.Private.GuiViewer3D.prototype.addOptionList=function(a,b,c,f,d,g){var h=this.prefs[g];f="number"===typeof h?h:f;var k=document.createElement("select");k.className="optionDropDown";for(h=0;h<c.length;h++){var l=document.createElement("option");l.value=h;l.setAttribute("data-i18n",c[h]);l.textContent=Autodesk.Viewing.i18n.translate(c[h]);k.add(l)}c=document.createElement("li");c.className="toolbar-submenu-select";h=document.createElement("div");h.className="toolbar-submenu-selectlabel";
h.setAttribute("for",b);h.setAttribute("data-i18n",b);h.textContent=Autodesk.Viewing.i18n.translate(b);c.appendChild(h);c.appendChild(k);a.appendChild(c);k.selectedIndex=f;k.onchange=function(a){d(a.target.selectedIndex);a.stopPropagation()};k.addEventListener(this.navigation.getIsTouchDevice()?"touchstart":"click",function(a){a.stopPropagation()});g&&this.prefs.addListeners(g,function(a){k.selectedIndex=a},function(a){k.selectedIndex=a;d(a)});return k};
Autodesk.Viewing.Private.GuiViewer3D.prototype.addMenuButton=function(a,b,c,f){b=Autodesk.Viewing.UI.Toolbar.createMenuButton(b,c,f);this.toolbar.addToSubToolbar(a,b);return b};Autodesk.Viewing.Private.GuiViewer3D.prototype.removeMenuButton=function(a,b){this.toolbar.removeFromSubToolbar(a,b)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initExplodeSlider=function(a){var b=this,c=this.container,f=document.createElement("style");f.appendChild(document.createTextNode(""));document.head.appendChild(f);var f=f.sheet,d=-1!=navigator.userAgent.search("Firefox")?"-moz-":"-webkit-";try{f.insertRule("@"+d+"keyframes explode-in {0% {bottom: calc(100% + 50px); width: 0; left: 50%;} 60% {bottom: calc(100% - 50px);} 75% {bottom: calc(100% - 15px); width: 200px; left: calc(50% - 100px);}  90% {bottom: calc(100% - 35px);} 100% {bottom: calc(100% - 30px);}}",
0),f.insertRule("@"+d+"keyframes explode-out {0% {bottom: calc(100% - 30px); width: 200px; left: calc(50% - 100px); opacity: 1;} 20% {bottom: calc(100% - 15px);} 35% {width: 200px; left: calc(50% - 100px);} 50% {bottom: calc(100% - 50px);} 100% {bottom: calc(100% + 50px); width: 0; left: 50%; opacity: 1;}}",0)}catch(g){try{f.insertRule("@keyframes explode-in {0% {bottom: calc(100% + 50px); width: 0; left: 50%;} 60% {bottom: calc(100% - 50px);} 75% {bottom: calc(100% - 15px); width: 200px; left: calc(50% - 100px);}  90% {bottom: calc(100% - 35px);} 100% {bottom: calc(100% - 30px);}}",
0),f.insertRule("@keyframes explode-out {0% {bottom: calc(100% - 30px); width: 200px; left: calc(50% - 100px); opacity: 1;} 20% {bottom: calc(100% - 15px);} 35% {width: 200px; left: calc(50% - 100px);} 50% {bottom: calc(100% - 50px);} 100% {bottom: calc(100% + 50px); width: 0; left: 50%; opacity: 1;}}",0)}catch(h){}}var k=this.explodeslider=document.createElement("input");k.className="explode-slider";k.id="explode-slider";k.type="range";k.min="0";k.max="100";k.value="0";k.width="200";c.appendChild(k);
k.addEventListener("input",function(a){b.explode(k.value/100)});k.addEventListener("change",function(a){b.explode(k.value/100)});this.explodebutton=this.addMenuButton(a,"toolbar-explodeTool","Explode model",function(a){a=!k.classList.contains("slider-anim-in");b.showExplodeSlider(a);if(a=Autodesk.Viewing.UI.Toolbar.getToolButton("toolbar-measureTool"))b.toolController.deactivateTool("measure"),Autodesk.Viewing.UI.SubToolbar.setToolState(a.id,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE)});k.addEventListener("keyup",
function(a){27===a.keyCode&&b.canvas.focus()})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.showExplodeSlider=function(a){var b=this.explodebutton.getBoundingClientRect(),c=this.container.getBoundingClientRect(),f=b.left-c.left+b.width/4,b=b.top-c.top;try{for(var d in document.styleSheets){var g=document.styleSheets[d],h;for(h in g.cssRules){var k=g.cssRules[h];if("explode-in"===k.name){k.deleteRule("0%");k.deleteRule("60%");var l="0% {bottom: calc(100% - "+b+"px); width: 0; left: "+f+"px;}";void 0!==k.insertRule?k.insertRule(l):void 0!==k.appendRule&&
k.appendRule(l)}else"explode-out"===k.name&&(k.deleteRule("100%"),k.deleteRule("50%"),l="100% {bottom: calc(100% - "+b+"px); width: 0; left: "+f+"px; opacity: 1;}",void 0!==k.insertRule?k.insertRule(l):void 0!==k.appendRule&&k.appendRule(l))}}}catch(m){}a?(Autodesk.Viewing.UI.SubToolbar.setToolState(this.explodebutton.id,Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE),this.explodeslider.classList.add("slider-anim-in"),this.explodeslider.classList.remove("slider-anim-out")):(Autodesk.Viewing.UI.SubToolbar.setToolState(this.explodebutton.id,
Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE),this.explodeslider.classList.add("slider-anim-out"),this.explodeslider.classList.remove("slider-anim-in"))};Autodesk.Viewing.Private.GuiViewer3D.prototype.showViewer3dOptions=function(a){a&&this.vieweroptions.isVisible()&&this.vieweroptions.setVisible(!1);this.vieweroptions.setVisible(a)};Autodesk.Viewing.Private.GuiViewer3D.prototype.showRenderingOptions=function(a){this.renderoptions.setVisible(a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.showLayerManager=function(a){this.layersPanel.setVisible(a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initHotkeys=function(a){var b=this,c=Autodesk.Viewing.theHotkeyManager.KEYCODES;if("3d"===a){var f;Autodesk.Viewing.theHotkeyManager.pushHotkeys("Autodesk.FOV",[{keycodes:[c.CONTROL,c.SHIFT],onPress:function(){if(b.toolController.getIsLocked())return!1;f=b.getActiveNavigationTool();b.setActiveNavigationTool("fov");return!0},onRelease:function(){if(b.toolController.getIsLocked())return!1;b.setActiveNavigationTool(f);return!0}}],{tryUntilSuccess:!0})}var d;
Autodesk.Viewing.theHotkeyManager.pushHotkeys("Autodesk.ROLL",[{keycodes:[c.ALT,c.SHIFT],onPress:function(){if(b.toolController.getIsLocked())return!1;d=b.getActiveNavigationTool();b.setActiveNavigationTool("worldup");return!0},onRelease:function(){if(b.toolController.getIsLocked())return!1;b.setActiveNavigationTool(d);return!0}}],{tryUntilSuccess:!0})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initNavTools=function(a){var b=this,c=Autodesk.Viewing.TOOLBAR.NAVTOOLSID;"3d"===a&&(this.navTools.orbitbutton=this.addMenuButton(c,"toolbar-orbitTool","Orbit",function(a){a=Autodesk.Viewing.UI.SubToolbar.getToolState(b.navTools.orbitbutton.id);a===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE?b.setActiveNavigationTool("orbit"):a===Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE&&b.setActiveNavigationTool()}));this.navTools.panbutton=this.addMenuButton(c,
"toolbar-panTool","Pan",function(a){a=Autodesk.Viewing.UI.SubToolbar.getToolState(b.navTools.panbutton.id);a===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE?b.setActiveNavigationTool("pan"):a===Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE&&b.setActiveNavigationTool()});this.navTools.dollybutton=this.addMenuButton(c,"toolbar-zoomTool","Zoom",function(a){a=Autodesk.Viewing.UI.SubToolbar.getToolState(b.navTools.dollybutton.id);a===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE?b.setActiveNavigationTool("dolly"):
a===Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE&&b.setActiveNavigationTool()});var f=Autodesk.Viewing.UI.Toolbar.createMenuButton("toolbar-cameraSubmenuTool","Camera interactions",null,{onToolStateChangedCB:function(){Autodesk.Viewing.UI.SubToolbar.getToolState("toolbar-cameraSubmenuTool")===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE&&(Autodesk.Viewing.UI.SubToolbar.setToolState("toolbar-fitToViewTool",Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE),Autodesk.Viewing.UI.SubToolbar.setToolState("toolbar-rollTool",
Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE))}});f.style.position="relative";this.toolbar.addToSubToolbar(c,f);a=this.createCameraSubmenu(a);this.toolbar.attachSubMenu(f,a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createCameraSubmenu=function(a){var b=document.createElement("ul");b.style.width="48px";b.style.position="absolute";b.style.left="2px";b.style.paddingBottom="2px";var c=Autodesk.Viewing.UI.Toolbar.createMenuButton,f=this,d={defaultTooltipValue:"Fit to view (F)"};this.navTools.fittoviewbutton=c("toolbar-fitToViewTool","Fit to view",function(a){f.fitToView()},d);this.navTools.fittoviewbutton.style.marginLeft="2px";this.navTools.fittoviewbutton.style.marginTop=
"2px";b.appendChild(this.navTools.fittoviewbutton);"3d"===a&&(d.defaultTooltipValue="Focal length (Ctrl+Shift drag)",this.navTools.fovbutton=c("toolbar-focalLengthTool","Focal length",function(a){a=Autodesk.Viewing.UI.SubToolbar.getToolState(f.navTools.fovbutton.id);a===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE?f.setActiveNavigationTool("fov"):a===Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE&&f.setActiveNavigationTool()},d),this.navTools.fovbutton.style.marginLeft="2px",this.navTools.fovbutton.style.marginTop=
"2px",b.appendChild(this.navTools.fovbutton));d.defaultTooltipValue="Roll (Alt+Shift drag)";this.navTools.rollbutton=c("toolbar-rollTool","Roll",function(a){a=Autodesk.Viewing.UI.SubToolbar.getToolState(f.navTools.rollbutton.id);a===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE?f.setActiveNavigationTool("worldup"):a===Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE&&f.setActiveNavigationTool()},d);this.navTools.rollbutton.style.marginLeft="2px";this.navTools.rollbutton.style.marginTop="2px";b.appendChild(this.navTools.rollbutton);
return b};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initCameraStateMachine=function(a){var b=this;b.addEventListener(Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,function(a){a=b.getActiveNavigationTool();var f={orbit:b.navTools.orbitbutton,dolly:b.navTools.dollybutton,pan:b.navTools.panbutton,fov:b.navTools.fovbutton,worldup:b.navTools.rollbutton},d;for(d in f)f[d]&&Autodesk.Viewing.UI.SubToolbar.setToolState(f[d].id,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE);f[a]&&Autodesk.Viewing.UI.SubToolbar.setToolState(f[a].id,Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE)});
b.addEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT,function(a){"fov"===a.toolName&&b.showFocalLengthOverlay(a.active)})};Autodesk.Viewing.Private.GuiViewer3D.prototype.getPropertyPanel=function(a){!this.propertygrid&&a&&this.setPropertyPanel(new Autodesk.Viewing.Extensions.ViewerPropertyPanel(this));return this.propertygrid};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initModelTools=function(a){var b=this,c=Autodesk.Viewing.TOOLBAR.MODELTOOLSID,f=null;"3d"===a?(this.modelTools.structurebutton=this.addMenuButton(c,"toolbar-modelStructureTool","Model structure",function(a){b.modelstructure||b.setModelStructurePanel(new Autodesk.Viewing.Extensions.ViewerModelStructurePanel(b,"Model Structure Loading",{docStructureConfig:b.config.docStructureConfig}));b.showModelStructurePanel(!b.modelstructure.isVisible())}),this.initExplodeSlider(c),
f="Reset model"):(f=new Autodesk.Viewing.Extensions.ViewerLayersPanel(this),this.setLayersPanel(f),this.modelTools.layerButton=this.addMenuButton(c,"toolbar-layersTool","Layer Manager",function(a){b.showLayerManager(!b.layersPanel.isVisible())}),f="Reset drawing");this.modelTools.resetModelButton=this.addMenuButton(c,"toolbar-resetTool",f,function(c){"3d"===a&&(b.explode(0),b.explodeslider.value=0);b.showAll()});this.modelTools.propertiesbutton=this.addMenuButton(c,"toolbar-propertiesTool","Properties",
function(a){a=b.getPropertyPanel(!0);a.setVisible(!a.isVisible())});this.modelTools.setToolVisibility(this.modelTools.propertiesbutton.id,!b.prefs.openPropertiesOnSelect);this.vieweroptions=new Autodesk.Viewing.Private.Viewer3dSettingsPanel(this,a);this.addPanel(this.vieweroptions);this.viewerOptionButton=this.addMenuButton(c,"toolbar-settingsTool","",null);this.createViewerOptionsMenu(a);ENABLE_DEBUG&&"3d"===a&&(this.renderoptions=new Autodesk.Viewing.Private.RenderOptionsPanel(this),this.addPanel(this.renderoptions),
this.renderoptionsbutton=this.addMenuButton(c,"toolbar-renderOptionsTool","Rendering options",function(a){b.showRenderingOptions(!b.renderoptions.isVisible())}));this.canChangeScreenMode()&&(this.modelTools.fullscreenbutton=this.addMenuButton(c,"toolbar-fullscreenTool","Full screen",function(a){b.nextScreenMode()}))};
Autodesk.Viewing.Private.GuiViewer3D.prototype.setPropertiesOnSelect=function(a){a?this.modelTools.setToolVisibility(this.modelTools.propertiesbutton.id,!1):this.modelTools.setToolVisibility(this.modelTools.propertiesbutton.id,!0)};Autodesk.Viewing.Private.GuiViewer3D.prototype.addDivider=function(a){var b=document.createElement("li");b.className="toolbar-submenu-horizontal-divider";a.appendChild(b);return b};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createViewerOptionsMenu=function(a){function b(a){var b=c.vieweroptions;b.isVisible()&&b.isTabSelected(a)?c.showViewer3dOptions(!1):(c.showViewer3dOptions(!0),b.selectTab(a))}var c=this;this.viewerOptionButton.subMenu=document.createElement("ul");this.viewerOptionButton.subMenu.className="toolbar-submenu";this.viewerOptionButton.subMenu.style.minWidth="310px";this.viewerOptionButton.subMenu.mode=a;this.container.appendChild(this.viewerOptionButton.subMenu);
if("3d"===a){a=[];for(var f=0;f<Autodesk.Viewing.Private.LightPresets.length;f++)a.push(Autodesk.Viewing.Private.LightPresets[f].name);this.viewerOptionButton.envList=this.addOptionList(this.viewerOptionButton.subMenu,"Background and lighting",a,4,function(a){c.blockEvent||c.setLightPreset(a)},"lightPreset");this.selectLightPreset=function(a){c.blockEvent=!0;c.viewerOptionButton.envList&&(c.viewerOptionButton.envList.selectedIndex=c.impl.currentLightPreset());c.blockEvent=!1};c.addEventListener(Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,
this.selectLightPreset);this.viewerOptionButton.displayLines=this.addOptionToggle(this.viewerOptionButton.subMenu,"Display Lines",!0,function(a){c.hideLines(!a)},"lineRendering");this.addDivider(this.viewerOptionButton.subMenu)}f=document.createElement("li");f.className="toolbar-submenu-listitem";a=document.createElement("label");a.setAttribute("data-i18n","Performance and appearance settings");a.textContent=Autodesk.Viewing.i18n.translate("Performance and appearance settings");f.appendChild(a);a=
this.navigation.getIsTouchDevice()?"touchstart":"click";this.show3dOptionsPerformanceTab=function(){b(Autodesk.Viewing.Private.PerformanceTab)};this.viewerOptionButton.performanceOption=f;this.viewerOptionButton.performanceOption.addEventListener(a,this.show3dOptionsPerformanceTab);this.viewerOptionButton.subMenu.appendChild(this.viewerOptionButton.performanceOption);this.addDivider(this.viewerOptionButton.subMenu);f=document.createElement("li");f.className="toolbar-submenu-listitem";var d=document.createElement("label");
d.setAttribute("data-i18n","Navigation and selection settings");d.textContent=Autodesk.Viewing.i18n.translate("Navigation and selection settings");f.appendChild(d);this.show3dOptionsNavigationTab=function(){b(Autodesk.Viewing.Private.NavigationTab)};this.viewerOptionButton.navigationOption=f;this.viewerOptionButton.navigationOption.addEventListener(a,this.show3dOptionsNavigationTab);this.viewerOptionButton.subMenu.appendChild(f);this.viewerOptionButton.subMenu.style.width=this.viewerOptionButton.subMenu.getBoundingClientRect().width+
"px";this.container.removeChild(this.viewerOptionButton.subMenu);this.toolbar.attachSubMenu(this.viewerOptionButton,this.viewerOptionButton.subMenu)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.removeViewerOptionsMenu=function(a){this.viewerOptionButton.removeChild(this.viewerOptionButton.subMenu);"3d"===a&&(this.removeEventListener(Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,this.selectLightPreset),this.viewerOptionButton.envList=null);a=this.navigation.getIsTouchDevice()?"touchstart":"click";this.viewerOptionButton.navigationOption.removeEventListener(a,this.show3dOptionsNavigationTab);this.viewerOptionButton.navigationOption=null;this.viewerOptionButton.performanceOption.removeEventListener(a,
this.show3dOptionsPerformanceTab);this.viewerOptionButton.performanceOption=null};Autodesk.Viewing.Private.GuiViewer3D.prototype.initDebugTools=function(){this.debugMenu=this.toolbar.addSubToolbar("debugTools",!1);this.debugMenu.debugSubMenuButton=this.addMenuButton("debugTools","toolbar-debugTool","",null);this.createDebugSubmenu(this.debugMenu.debugSubMenuButton)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createDebugSubmenu=function(a){function b(){c.localize()}var c=this;this.debugMenu.subMenu=document.createElement("ul");this.debugMenu.subMenu.className="toolbar-submenu";this.debugMenu.subMenu.style.minWidth="180px";this.container.appendChild(this.debugMenu.subMenu);this.initModelStats();this.addDivider(this.debugMenu.subMenu);this.addOptionToggle(this.debugMenu.subMenu,"Show search bar",!1,function(a){c.searchMenu.setVisibility(a)});this.addDivider(this.debugMenu.subMenu);
var f="en ru ja ko zh-Hant sp".split(" ");this.addOptionList(this.debugMenu.subMenu,"Language","English Russian Japanese Korean Chinese Spanish(unsupported)".split(" "),c.selectedLanguage?c.selectedLanguage:0,function(a){var d=f[a];c.selectedLanguage=a;Autodesk.Viewing.Private.setLanguage(d,b)},null).parentNode.style.paddingBottom="15px";this.addDivider(this.debugMenu.subMenu);this.addOptionList(this.debugMenu.subMenu,"Error","UNKNOWN FAILURE; BAD DATA;NETWORK ERROR;NETWORK ACCESS DENIED;NETWORK FILE NOT FOUND; NETWORK SERVER ERROR;NETWORK UNHANDLED RESPONSE CODE;BROWSER WEBGL NOT SUPPORTED;BAD DATA NO VIEWABLE CONTENT".split(";"),
0,function(a){Autodesk.Viewing.Private.ErrorHandler.reportError(c.container,a+1,"")},null).parentNode.style.paddingBottom="15px";this.debugMenu.subMenu.style.width=this.debugMenu.subMenu.getBoundingClientRect().width+"px";this.container.removeChild(this.debugMenu.subMenu);this.toolbar.attachSubMenu(a,this.debugMenu.subMenu);a=this.debugMenu.subMenu.getBoundingClientRect().right;var d=this.container.getBoundingClientRect().right;a>d&&(this.debugMenu.subMenu.style.left=-(a-d+10)+"px")};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initModelStats=function(){function a(a){var b=c.impl,g="",h=c.model;h&&(g+="Geom&nbsp;polys:&nbsp;"+h.geomPolyCount()+"<br>",g+="Instance&nbsp;polys:&nbsp;"+h.instancePolyCount()+"<br>",g+="Scenes:&nbsp;"+b.modelQueue().getSceneCount()+"<br>");c.modelStats.innerHTML=g+("# "+(a||""))}function b(){c.modelStats=document.createElement("div");c.modelStats.className="statspanel";c.container.appendChild(c.modelStats);c.addEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,
function(b){b.message&&a(b.message)})}var c=this;this.addOptionToggle(this.debugMenu.subMenu,"Model statistics",!1,function(f){f&&!c.modelStats&&(b(),a(""));c.modelStats.style.visibility=f?"visible":"hidden"})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initEscapeHandlers=function(){var a=this;this.addEventListener(Autodesk.Viewing.ESCAPE_EVENT,function(b){if(!a.contextMenu||!a.contextMenu.hide())if(a.renderoptions&&a.renderoptions.isVisible())a.renderoptions.setVisible(!1);else if(a.explodeslider&&a.explodeslider.classList.contains("slider-anim-in"))a.showExplodeSlider(!1);else if(a.getActiveNavigationTool()!==a.getDefaultNavigationToolName())a.toolController&&a.toolController.setIsLocked(!1),a.setActiveNavigationTool(),
Autodesk.Viewing.Private.HudMessage.dismiss();else if(a.selectionActive)a.clearSelection();else if(!a.areAllVisible())a.showAll();else if(!Autodesk.Viewing.Private.AlertBox.dismiss()){for(b=0;b<a.dockingPanels.length;++b){var c=a.dockingPanels[b];if("none"!==c.container.style.display&&""!==c.container.style.display){c.container===a.modelstructure?a.showModelStructurePanel(!1):c.setVisible(!1);return}}a.escapeScreenMode()}})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initHomeButton=function(a){var b=document.createElement("div");b.className="homeViewWrapper";b.style.cursor="pointer";this.container.appendChild(b);this.homeViewContainer=b;var c=this;b.addEventListener("click",function(a){c.navigation.setRequestHomeView(!0)});this.initHomeMenu(b,a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initHomeMenu=function(a,b){function c(a){k.style.display="none";document.removeEventListener("click",c)}var f=this.autocam,d=this,g=document.createElement("div");g.className="homeViewMenuHandle";var h=document.createElement("img");h.src="data:image/png;base64,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";
g.appendChild(h);g.addEventListener("mouseover",function(a){h.src="data:image/png;base64,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yzy2Vfgxu2cYtuT9OudhxnDiYue0NXud+DP3KI+Vg39r8SFtJ23KntnI/6Myn/MuyH5b1il9R9/OumKP0VhF3Eyv59f92fvBmnDCluqVYdSDuaT7N+fy0TcYz/fnRnn1MNpA34tMGxM/856Vufe1S2hpvUA9vvS/UkoppZRSSimllFJKXU07EREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREZE75B+Hl45qN6ZdJgAAAVNta0JU+s7K/gB/VYkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHic7dbhaYNgFIZRB3ERB3EQF3EQB3ERB7G8gQu3piH/ignngUObT/vrTWzOU5IkSZIkSZIkSZIkSZIkSZIkSR/RcRznvu9P5znLtXf3v7pP929d13Mcx3OapsfP7Bj9LPfUvXUWy7I8XscwDH++h3TvsmOVfbNhdq3N+z21f9U3v/6N7l+263tWOeuf5XqdffvG2b+6XtP9y3O+71//1+d5fto/1+z/fWXbeu7X79u2/frM9+e//b+v+h7X96v3QK7Vd/ucRdWfHddrkiRJkiRJkiRJ+vcGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4QD8K+ay4PVSpiAAADtdta0JU+s7K/gB/n3gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHic7Z2NkRwpDIUdiBNxIA7EiTgQB+JEHMhe6eo+17tnSUDPz/5Yr2pqZ7tpEBII0IOel5fBYDAYDAaDwWAwGAwGg8HgP/z69evl58+ff3ziOveq5+JzpawAZfj3wf9R6fmK/jN8//795dOnT3984jr3Mnz58uXfzy6+ffv2O++wN2UE9PtHRtT7tJ6Vnk/1vwI20f6u9l/1Ufp2laaT1+3f+Z1dVPKs5ARdGr1epcuuZ+28ez5wauereuvsH+Vr33W5tG97HpoPeQWq/q95ZfWO+58/f/73e+gt0v348eP3vXiGuqgvC0Q6vR7p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ZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIEZpcmV3b3JrcyBDUzUuMSAxMS4xLjAuMjA1IE1hY2ludG9zaDwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNC0wOS0yMlQyMDoxMDo0Mlo8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNC0wOS0yNFQxNToyNzoyMlo8L3htcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz7OxBilAAABKUlEQVQ4jc3UsUrDQBzH8e9VoQ4OSkhKH8KtS8Y6CDYQiXT0AQQHVx8hU8FBRyfniMEqBXF1yVDwHVoaER0cTMGcQ5o210ZNJYM3JeT/+3D3I4mQUlLGqpSi/EtoNb2o7V0FfwFG105DgQBOjsylEPfscXFHANtbWmEkjsHN3CvQzuHNUjvKLpG+R0IIWDvY5aOyDnwC4puMBFaoxu9El3fTfBYybG+pwkN/v5HmZ0fTTzchKfy3rh6eXpSiVej5+DX0rZYLt0yw0VukDNc2qlMk9C9a+RAA3TD0I8uF7jymIucW3IdKVErJ4ofraIbtBZ3eMOgPxkF/MA46vWGQdOhoufl8CMA0UmyGmMb8VAEIoK0btjdB2nreREEIoFlPnjfrP0GirB/bFy2PpzKb9kV5AAAAAElFTkSuQmCC"});
g.addEventListener("mouseleave",function(a){h.src="data:image/png;base64,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"});
a.appendChild(g);var k=document.createElement("div");k.className="homeViewMenu";this.container.appendChild(k);var l=document.createElement("div");l.className="homeViewMenuItem";l.textContent=Autodesk.Viewing.i18n.translate("Set current view as Home");k.appendChild(l);l.addEventListener("click",function(a){f.setCurrentViewAsHome(!1);c(a)});l=document.createElement("div");l.className="homeViewMenuItem";l.textContent=Autodesk.Viewing.i18n.translate("Focus and set as Home");k.appendChild(l);l.addEventListener("click",
function(a){f.setCurrentViewAsHome(!0);c(a)});l=document.createElement("div");l.className="homeViewMenuItem";l.textContent=Autodesk.Viewing.i18n.translate("Reset Home");k.appendChild(l);l.addEventListener("click",function(a){f.resetHome();c(a)});a.addEventListener("mouseover",function(a){if("2d"===b||d.prefs&&!d.prefs.viewCube)g.style.display="block"});a.addEventListener("mouseleave",function(a){g.style.display="none"});g.addEventListener("click",function(a){if("2d"===b||d.prefs&&!d.prefs.viewCube)k.style.display=
"block",document.addEventListener("click",c);a.stopPropagation()});a.addEventListener("contextmenu",function(a){if("2d"===b||d.prefs&&!d.prefs.viewCube)k.style.display="block",document.addEventListener("click",c)})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initViewCube=function(){this.viewcube=document.createElement("div");this.viewcube.className="viewcube";this.container.appendChild(this.viewcube);this.cube=new Autocam.ViewCube("cube",this.autocam,this.viewcube,LOCALIZATION_RESOURCE_ROOT);this.displayViewCube(this.prefs.viewCube)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initInfoButton=function(){this.infoButton=document.createElement("div");this.infoButton.className="infoButton";this.infoButton.style.cursor="pointer";this.container.appendChild(this.infoButton);var a=this;this.infoButton.addEventListener("click",function(b){b=a.getPropertyPanel(!0);var c=!b.areDefaultPropertiesShown()||!b.isVisible();c&&b.showDefaultProperties();c!==b.isVisible()&&b.setVisible(c)})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.displayViewCube=function(a){this.prefs.set("viewCube",a);this.viewcube.style.display=a?"block":"none";if(this.homeViewContainer){var b=this.homeViewContainer.getBoundingClientRect(),c=this.viewcube.getBoundingClientRect(),f=this.infoButton.getBoundingClientRect(),d=this.container.getBoundingClientRect();this.homeViewContainer.style.right=a?d.width+d.left-c.left-b.width+"px":d.width+d.left-f.left+b.width/2+"px"}a&&(this.impl.invalidate(!0),this.autocam.refresh())};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initSearchBox=function(){this.searchMenu=this.toolbar.addSubToolbar("searchBox",!1);this.searchMenu.setVisibility(!1);var a=document.createElement("li"),b=document.createElement("input");b.type="search";b.results=5;b.placeholder=Autodesk.Viewing.i18n.translate("Search");b.incremental="incremental";b.autosave=this.container.id+"search_autosave";b.setAttribute("data-i18n","[placeholder]Search");a.appendChild(b);this.toolbar.addToSubToolbar("searchBox",
a);var c=this;b.addEventListener("change",function(a){stderr("search "+b.value);c.search(b.value,function(a){c.isolateById(a)})});b.addEventListener("keypress",function(a){27===a.keyCode&&setTimeout(function(){""!==b.value&&(b.value="")},0)});this.toolbar.addEventListener("mouseleave",function(a){function d(){clearTimeout(g)}var g;c.toolbar.addEventListener("mouseenter",d);g=setTimeout(function(){c.toolbar&&c.toolbar.removeEventListener("mouseenter",d);document.activeElement===b&&c.canvas.focus()},
2E3)})};Autodesk.Viewing.Private.GuiViewer3D.prototype.setPropertiesButtonEnabled=function(a){a?this.modelTools.select(this.modelTools.propertiesbutton.id):this.modelTools.deselect(this.modelTools.propertiesbutton.id)};Autodesk.Viewing.Private.GuiViewer3D.prototype.setStructureButtonEnabled=function(a){a?this.modelTools.select(this.modelTools.structurebutton.id):this.modelTools.deselect(this.modelTools.structurebutton.id)};Autodesk.Viewing.Private.GuiViewer3D.prototype.showModelStructurePanel=function(a){this.modelstructure.setVisible(a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.onPanelVisible=function(a,b){b||(b=this);b.dockingPanels.splice(b.dockingPanels.indexOf(a),1);b.dockingPanels.splice(0,0,a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initFocalLengthOverlay=function(){var a=this.focallength=document.createElement("div");a.className="focallength";var b=document.createElement("table"),c=document.createElement("tbody");b.appendChild(c);a.appendChild(b);this.container.appendChild(a);b=c.insertRow(-1);c=b.insertCell(0);c.setAttribute("data-i18n","Focal Length");c.textContent=Autodesk.Viewing.i18n.translate("Focal Length");c=b.insertCell(1);c.textContent="";c.style.width="4em";c.style.textAlign=
"right";this.fovCell=c;a.style.visibility="hidden"};
Autodesk.Viewing.Private.GuiViewer3D.prototype.showFocalLengthOverlay=function(a){function b(a){a?Autodesk.Viewing.Private.HudMessage.displayMessage(g.container,{msgTitleKey:"Orthographic View Set",messageKey:"The view is set to Orthographic",messageDefaultValue:"The view is set to Orthographic. Changing the focal length will switch to Perspective."}):Autodesk.Viewing.Private.HudMessage.dismiss()}function c(a){a&&f();g.focallength&&(g.focallength.style.visibility=a?"visible":"hidden")}function f(){var a=
g.getFocalLength();h!==a&&(h=a,g.fovCell.textContent=a.toString()+" mm")}function d(a){f();"fov"===g.toolController.getActiveToolName()&&(a=(a=g.navigation.getCamera())&&!a.isPerspective,c(!a),b(a))}var g=this,h=0,k=g.navigation.getCamera(),k=k&&!k.isPerspective;c(a&&!k);b(a&&k);a?this.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,d):this.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,d)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.updateScreenModeButton=function(a){this.container.classList.remove("screenMode-kFullBrowser");this.container.classList.remove("screenMode-kFullScreen");var b;switch(a){case Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser)||(b="screenMode-kFullBrowser");break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser:b=this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen)?
"screenMode-kFullBrowser":"screenMode-kFullScreen";break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:b="screenMode-kFullScreen"}b&&this.container.classList.add(b)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.localize=function(){Autodesk.Viewing.i18n.localize();if(this.viewerOptionButton&&this.viewerOptionButton.subMenu){var a=this.viewerOptionButton.subMenu.mode;this.removeViewerOptionsMenu(a);this.createViewerOptionsMenu(a)}this.debugMenu&&this.debugMenu.debugSubMenuButton&&(this.debugMenu.debugSubMenuButton.removeChild(this.debugMenu.subMenu),this.createDebugSubmenu(this.debugMenu.debugSubMenuButton))};"use strict";AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.GuiViewer2D=function(a,b){Autodesk.Viewing.Viewer2D.call(this,a,b)};Autodesk.Viewing.Private.GuiViewer2D.prototype=Object.create(Autodesk.Viewing.Viewer2D.prototype);Autodesk.Viewing.Private.GuiViewer2D.prototype.constructor=Autodesk.Viewing.Private.GuiViewer2D;
Autodesk.Viewing.Private.GuiViewer2D.prototype.initialize=function(){var a=Autodesk.Viewing.Viewer2D.prototype.initialize.call(this);if(0<a)return a;this.toolbar=new Autodesk.Viewing.UI.Toolbar(this.container);this.initNavTools();this.initModelTools();this.initEscapeHandlers();this.initHomeButton();var b=this;this.addEventListener(Autodesk.Viewing.FULLSCREEN_MODE_EVENT,function(a){b.updateScreenModeButton(a.mode)});this.updateScreenModeButton(Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal);
this.localize();this.fireEvent({type:Autodesk.Viewing.TOOLBAR_CREATED_EVENT});return 0};
Autodesk.Viewing.Private.GuiViewer2D.prototype.initNavTools=function(){var a=this;this.navTools=this.toolbar.addSubToolbar("navTools",!0);this.navTools.panbutton=this.addMenuButton("navTools","toolbar-panTool","Pan",function(b){a.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN)});this.navTools.dollybutton=this.addMenuButton("navTools","toolbar-zoomTool","Zoom",function(b){a.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.ZOOM)});this.navTools.select(this.navTools.panbutton.id);this.addEventListener(Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,
function(b){a.navTools.deselectAll();switch(b.value){case VIEWER2D_NAVIGATION_MODE.PAN:a.navTools.select(a.navTools.panbutton.id);a.impl.container.style.cursor="url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NDUsNDA2zMjEy31lZWfNQUFDrKysrwwkJCZAMDAxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDw8ZDQ0NoVxcXfbLy8v/4ODh//b29//y8fL/3Nzc/8nJyf98e3z/FRUWuQ0NDSYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkJCT0mJSbSlpaW//7+/v//////////////////////////////////////uLe4/zc2N+MNDQ00AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUFBQFCgoJcD4+P/HMzM3//////////////////////////////////////////////////////8/Pz/8kJCTCEREREwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8PD0oTExOPcXFy//Ly8v//////8/Pz//v7+/////////////////////////////////////////////////+AgID/BAQEQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwcHLpNTU36+vr6/+fn5/99e33/Ly8v83d3eP3///////////////////////////////////////////////+bm5v/CQkJXQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABISElIbGxuaZGRk/zIyMusODg6GCQkJXVFRUvj8/Pz///////////////////////////////////////////+dnZ3/DAwMaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUFBQKBwcHPA8PDykAAAAADg4OUnBvcP7///////////////////////////////////////////////+BgYH/BAQEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhYWqcPDw////////////////////////////////////////////+Xl5f8tLS2+Dw8PDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBA4Pz8/6/////+7u7z/1dXW///////4+Pj//////////////////////6Ojo/8HBwdwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUVFQELCwuTsLCw//39/v+Dg4T/19fX/+Li4v+ZmJr//////9vb2/+6urv//////zMzM94SEhIUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwMDCc7Ozzx8fDx/8zMzf+SkZP//////5qam/+np6f//////5mYm//Hx8j/ubm5/xEREZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkJCWqSkpL//////5iXmf/P0ND/8/Pz/3h3ef/o6Oj/7e3u/3Fxc///////Tk5O+woKChwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADg4OBy0tLeri4eL/9/f3/29tcP//////qqqr/5qZmv//////mZma/8zMzf/Kysr/HR0engAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQByMjI8+mpqb/mZiZ/8LCw//6+vr/fn6A/9LS0v/8/P3/a2pu//////92dnb4BAQEOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQUFBwHBweAGhoa5f/////Kysr/i4qM//////+vr7D/MC8x/3x8fP8mJiawERERCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhYWok5OTvY0NDT1Pj4++aGhof86OjvNCQkJTAgICGATExMnAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFRUVCAoKCg8NDQ0KEBEQKxQUFH4SEhIpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x/+AfO/+AB1D/AANy/AABRvgAAXP4AAFk+AABXPxAAVz/wAFn/4ADIP8AA2X/AAd4/wAHXP4AD2P+AA9t/wAPVP/AH3QfwP87D///cAf//28D//9cA///XAP//2c=), wait";
break;case VIEWER2D_NAVIGATION_MODE.ZOOM:a.navTools.select(a.navTools.dollybutton.id);a.impl.container.style.cursor="url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANQAAAJ4AAACeAAAANQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5CQkJ/56env+enp7/CQkJ/wAAADkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8JCQn/oqKi////////////oqKi/wkJCf8AAAA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATQsLC/+oqKj//////////////////////6ioqP8LCwv/AAAATQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYDg4O/7a2tv////////////////////////////////+2trb/Dg4O/wAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQMDAz/wcHB////////////////////////////////////////////wcHB/wwMDP8AAABkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYxoaGv/Nzc3//////////////////////////////////////////////////////83Nzf8aGhr/AAAAYwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoKCgo/8zMzP/////////////////////////////////////////////////////////////////MzMz/KCgo/wAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7Ozs7/2lpaf9qamr/gICA/76+vv////////////////////////////////++vr7/gICA/2pqav9paWn/Ozs7/wAAADsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOwAAAGkAAABqAAAAgE5OTv////////////////////////////////9OTk7/AAAAgAAAAGoAAABpAAAAOwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJCQkJP////////////////////////////////8kJCT/AAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgICAv/29vb///////////////////////b29v8CAgL/AAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMzMzMz//////////////////////8zMzP8AAADMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJ2dnZ3//////////////////////52dnf8AAACdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhoaGj//////////////////////2hoaP8AAABoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAADs7Ozv//////////////////////zs7O/8AAAA7AAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYG/wAAAGQAAAD7+/v7////////////+/v7/wAAAPsAAABkBgYG/wAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEBA/2RkZP9RUVH/8vLy////////////8vLy/1FRUf9kZGT/QEBA/wAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAEQAAAAAAAAAmJiYm/6mpqf////////////////////////////////+pqan/JiYm/wAAACYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAABEAAAAAAAAAQAAAAKlZWVn/6enp////////////6enp/1lZWf8AAACpAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAADAAAAAAAAAAAAAACAJycn/729vf+9vb3/Jycn/wAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAVAAAAL0AAAC9AAAAVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x////O8A8A1CAGAFyAAAARgAAAHMPAPBkDwDwXA8A8FwPAPBnAAAAIAAAAGWAAAF4gAABXMAAA2PAAANt4AAHVOAAB3QQAA87CBgPcAQ8H28D//9cA///XAP//2c=), wait";
break;default:a.impl.container.style.cursor="auto"}});this.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN)};Autodesk.Viewing.Private.GuiViewer2D.prototype.uninitialize=function(){this.toolbar=this.navTools=this.modelTools=null;Autodesk.Viewing.Viewer2D.prototype.uninitialize.call(this)};
Autodesk.Viewing.Private.GuiViewer2D.prototype.initModelTools=function(){if(this.canChangeScreenMode()){this.modelTools=this.toolbar.addSubToolbar("modelTools",!1);var a=this;this.modelTools.fullscreenbutton=this.addMenuButton("modelTools","toolbar-fullscreenTool","viewer-toolbar:Full screen",function(b){a.nextScreenMode()})}};
Autodesk.Viewing.Private.GuiViewer2D.prototype.initEscapeHandlers=function(){var a=this;this.addEventListener(Autodesk.Viewing.ESCAPE_EVENT,function(b){a.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN)||a.escapeScreenMode()},!1)};
Autodesk.Viewing.Private.GuiViewer2D.prototype.initHomeButton=function(){var a=this,b=this.homeViewContainer=document.createElement("div");b.className="homeViewWrapper";var c=document.createElement("img");c.className="homeView";c.src=RESOURCE_ROOT+"icons/resetview_icon.png";c.style.cursor="pointer";b.appendChild(c);b.style.width="auto";this.container.appendChild(b);c.addEventListener("click",function(){a.impl.goHome()})};
Autodesk.Viewing.Private.GuiViewer2D.prototype.addMenuButton=function(a,b,c,f){b=Autodesk.Viewing.UI.Toolbar.createMenuButton(b,c,f);this.toolbar.addToSubToolbar(a,b);return b};
Autodesk.Viewing.Private.GuiViewer2D.prototype.updateScreenModeButton=function(a){this.container.classList.remove("screenMode-kFullBrowser");this.container.classList.remove("screenMode-kFullScreen");var b;switch(a){case Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser)||(b="screenMode-kFullBrowser");break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser:b=this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen)?
"screenMode-kFullBrowser":"screenMode-kFullScreen";break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:b="screenMode-kFullScreen"}b&&this.container.classList.add(b)};AutodeskNamespace("Autodesk.Viewing.Extensions");
Autodesk.Viewing.Extensions.ViewerModelStructurePanel=function(a,b,c){this.viewer=a;Autodesk.Viewing.UI.ModelStructurePanel.call(this,a.container,a.container.id+"ViewerModelStructurePanel",b,c);this.clickConfig=c&&c.docStructureConfig?c.docStructureConfig:null;this.isMac=-1!==navigator.userAgent.search("Mac OS");this.visibleNodes=[];this.hiddenNodes=[]};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype=Object.create(Autodesk.Viewing.UI.ModelStructurePanel.prototype);
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.constructor=Autodesk.Viewing.Extensions.ViewerModelStructurePanel;
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.initialize=function(){Autodesk.Viewing.UI.ModelStructurePanel.prototype.initialize.call(this);var a=this;a.addEventListener(a.viewer,Autodesk.Viewing.SELECTION_CHANGED_EVENT,function(b){a.setSelection(b.nodeArray.slice())});a.addEventListener(a.viewer,Autodesk.Viewing.ISOLATE_EVENT,function(b){a.setIsolation(b.nodeIdArray.slice())});a.addEventListener(a.viewer,Autodesk.Viewing.HIDE_EVENT,function(b){a.setHidden(b.nodeIdArray.slice(),
!0)});a.addEventListener(a.viewer,Autodesk.Viewing.SHOW_EVENT,function(b){a.setHidden(b.nodeIdArray.slice(),!1)})};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.uninitialize=function(){this.viewer=null;Autodesk.Viewing.UI.ModelStructurePanel.prototype.uninitialize.call(this)};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setModel=function(a,b){this.visibleNodes=[];this.hiddenNodes=[];Autodesk.Viewing.UI.ModelStructurePanel.prototype.setModel.call(this,a,b)};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.handleAction=function(a,b){for(var c in a)switch(a[c]){case "selectOnly":this.viewer.select([b.dbId]);break;case "deselectAll":this.viewer.select([]);break;case "selectToggle":this.viewer.toggleSelect(b.dbId);break;case "isolate":this.viewer.isolate(b);break;case "showAll":this.viewer.isolate(null);break;case "focus":this.viewer.fitToView();break;case "hide":this.viewer.hide(b);break;case "show":this.viewer.show(b);break;case "toggleVisibility":this.viewer.toggleVisibility(b)}};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.ctrlDown=function(a){return this.isMac&&a.metaKey||!this.isMac&&a.ctrlKey};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onClick=function(a,b){if(!this.isMac||!b.ctrlKey){var c="click";this.ctrlDown(b)&&(c+="Ctrl");b.shiftKey&&(c+="Shift");b.altKey&&(c+="Alt");this.clickConfig&&this.clickConfig[c]?this.handleAction(this.clickConfig[c].onObject,a):this.viewer.select([a.dbId])}};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onDoubleClick=function(a,b){this.handleAction(["focus"],a)};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onRightClick=function(a,b){if(this.isMac&&b.ctrlKey&&0===b.button)return this.clickConfig&&this.clickConfig.clickCtrl?this.handleAction(this.clickConfig.clickCtrl.onObject,a):this.viewer.select([a.dbId]),null;var c=[],f=!0;if(b.shiftKey||this.isMac&&b.metaKey||b.ctrlKey&&(this.isMac||2===b.button))for(var d=this.viewer.impl.selector.getSelection(),g=0;g<d.length;++g)d[g].dbId!==a.dbId?c.push(d[g].dbId):f=!1;f&&c.push(a.dbId);this.viewer.isolateById(c);
this.viewer.select(c);return this.viewer.contextMenu.show(b)};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setHidden=function(a,b){if(0<a.length)for(var c=0;c<a.length;++c){var f=a[c];b?-1===this.hiddenNodes.indexOf(f)&&this.addClass(a[c].dbId,"dim")&&(this.hiddenNodes.push(a[c]),f=this.visibleNodes.indexOf(f),-1<f&&(this.removeClass(a[c].dbId,"visible"),this.visibleNodes.splice(f))):-1===this.visibleNodes.indexOf(f)&&this.addClass(a[c].dbId,"visible")&&(this.visibleNodes.push(a[c]),f=this.hiddenNodes.indexOf(f),-1<f&&(this.removeClass(a[c].dbId,
"dim"),this.hiddenNodes.splice(f)))}};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setIsolation=function(a){for(var b=0;b<this.hiddenNodes.length;++b)this.removeClass(this.hiddenNodes[b].dbId,"dim");for(b=0;b<this.visibleNodes.length;++b)this.removeClass(this.visibleNodes[b].dbId,"visible");this.hiddenNodes=[];this.visibleNodes=[];if(0<a.length&&(1!==a.length||a[0]!==this.modelRoot))for(this.setHidden([this.modelRoot],!0),b=0;b<a.length;++b)this.setHidden([a[b]],!1)};AutodeskNamespace("Autodesk.Viewing.Extensions");
Autodesk.Viewing.Extensions.ViewerPropertyPanel=function(a){this.viewer=a;this.currentNodeIds=[];this.isDirty=!0;this.propertyNodeId=null;Autodesk.Viewing.UI.PropertyPanel.call(this,a.container,"ViewerPropertyPanel","Object Properties Loading...")};Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype=Object.create(Autodesk.Viewing.UI.PropertyPanel.prototype);Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.constructor=Autodesk.Viewing.Extensions.ViewerPropertyPanel;
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.initialize=function(){function a(a){for(var b=[],d=0;d<a.length;d++){var g=a[d].dbId;g&&b.push(g)}return b}Autodesk.Viewing.UI.PropertyPanel.prototype.initialize.call(this);var b=this;b.addEventListener(b.viewer,Autodesk.Viewing.SELECTION_CHANGED_EVENT,function(a){b.currentNodeIds=a.dbIdArray;b.isDirty=!0;b.requestProperties()});b.addEventListener(b.viewer,Autodesk.Viewing.ISOLATE_EVENT,function(c){b.currentNodeIds=a(c.nodeIdArray);b.isDirty=
!0;b.requestProperties()});b.addEventListener(b.viewer,Autodesk.Viewing.HIDE_EVENT,function(a){b.isDirty=!0;b.requestProperties()});b.addEventListener(b.viewer,Autodesk.Viewing.SHOW_EVENT,function(a){b.isDirty=!0;b.requestProperties()});this.currentNodeIds=a(b.viewer.getSelection());0===this.currentNodeIds.length&&(this.currentNodeIds=a(b.viewer.getIsolatedNodes()))};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.setTitle=function(a,b){a||(a="Object Properties",b=b||{},b.localizeTitle=!0);Autodesk.Viewing.UI.PropertyPanel.prototype.setTitle.call(this,a,b)};Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.setVisible=function(a){Autodesk.Viewing.UI.DockingPanel.prototype.setVisible.call(this,a);this.requestProperties()};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.requestProperties=function(){this.isVisible()&&this.isDirty&&(0<this.currentNodeIds.length?this.setNodeProperties(this.currentNodeIds[this.currentNodeIds.length-1]):this.showDefaultProperties(),this.isDirty=!1)};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.setNodeProperties=function(a){var b=this;this.propertyNodeId=a;b.viewer.getProperties(a,function(a){b.setTitle(a.name);b.setProperties(a.properties);b.highlight(b.viewer.searchText);a=b.viewer.getDimensions();b.resizeToContent({maxHeight:a.height});if(b.isVisible()){var f=b.viewer.toolController;a=f.lastClickX;var f=f.lastClickY,d=b.container.getBoundingClientRect(),g=d.left,h=d.top,k=d.width,d=d.height,l=b.viewer.canvas.getBoundingClientRect(),
m=l.left,p=l.top,n=l.width,l=l.height;g<=a&&a<g+k&&h<=f&&f<h+d&&(a<g+k/2&&a+k<m+n?(b.container.style.left=Math.round(a-m)+"px",b.container.dockRight=!1):m<=a-k?(b.container.style.left=Math.round(a-m-k)+"px",b.container.dockRight=!1):a+k<m+n?(b.container.style.left=Math.round(a-m)+"px",b.container.dockRight=!1):f+d<p+l?(b.container.style.top=Math.round(f-p)+"px",b.container.dockBottom=!1):p<=f-d&&(b.container.style.top=Math.round(f-p-d)+"px",b.container.dockBottom=!1))}})};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.showDefaultProperties=function(){var a=this.viewer.model.getRoot()?this.viewer.model.getRootId():null;null!==a?this.setNodeProperties(a):(this.propertyNodeId=null,this.setTitle("Model Properties",{localizeTitle:!0}),Autodesk.Viewing.UI.PropertyPanel.prototype.showDefaultProperties.call(this))};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.areDefaultPropertiesShown=function(){var a=this.viewer.model.getRootId();return this.propertyNodeId===a};Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.uninitialize=function(){Autodesk.Viewing.UI.PropertyPanel.prototype.uninitialize.call(this);this.viewer=null};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.onCategoryClick=function(a,b){Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryClick.call(this,a,b);var c=this.viewer.getDimensions();this.resizeToContent({maxHeight:c.height})};Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.onCategoryIconClick=function(a,b){Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryIconClick.call(this,a,b);var c=this.viewer.getDimensions();this.resizeToContent({maxHeight:c.height})};AutodeskNamespace("Autodesk.Viewing.Extensions");
Autodesk.Viewing.Extensions.ViewerLayersPanel=function(a){var b=a.container;Autodesk.Viewing.UI.LayersPanel.call(this,a,b,b.id+"ViewerLayersPanel")};Autodesk.Viewing.Extensions.ViewerLayersPanel.prototype=Object.create(Autodesk.Viewing.UI.LayersPanel.prototype);Autodesk.Viewing.Extensions.ViewerLayersPanel.prototype.constructor=Autodesk.Viewing.Extensions.ViewerLayersPanel;Autodesk.Viewing.Extensions.ViewerLayersPanel.prototype.onClick=function(a,b){this.isolateLayerVisible(a,b)};
Autodesk.Viewing.Extensions.ViewerLayersPanel.prototype.onImageClick=function(a,b){this.toggleLayerVisible(a)};Autodesk.Viewing.Extensions.ViewerLayersPanel.prototype.onTitleClick=function(a){this.viewer.setLayerVisible(null,!0)};Autodesk.Viewing.Extensions.ViewerLayersPanel.prototype.onTitleDoubleClick=function(a){this.viewer.fitToView()};AutodeskNamespace("Autodesk.Viewing.Extensions.RaaS");
Autodesk.Viewing.Extensions.RaaS.RaaSPanel=function(a){var b=this;this.viewer=a;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"RaaSPanel","Gallery");this.thumbnailPanel=document.createElement("div");this.thumbnailPanel.id="thumbnailPanel";this.imageNum=0;this.thumbList=[];this.imageList=[];this.imageIndex=0;this.container.style.width="140px";this.container.style.top="200px";this.container.style.left="150px";this.container.style.height="560px";this.container.dockRight=!0;this.container.style.display=
"none";this.addEventListener(this.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,function(){b.syncUI()})};Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.constructor=Autodesk.Viewing.Extensions.RaaSPanel;Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.syncUI=function(){};Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.screenCapture=function(a){return a.impl.renderer().screenCapture()};
Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.addImage=function(){var a=this,b=new Image;b.src=this.screenCapture(this.viewer);b.className="thumbnail";b.style.top=130*this.imageNum+"px";b.index=this.imageNum;var c=this.viewer.getCamera();b.cameraPosition=c.position.clone();b.cameraTarget=c.target.clone();b.cameraUp=c.up.clone();this.thumbList.push(b);this.thumbnailPanel.appendChild(this.thumbList[this.imageNum]);b=new Image;b.src="";b.status="progress";this.imageList.push(b);this.imageNum++;
this.container.appendChild(this.thumbnailPanel);this.imageIndex=this.imageNum-1;this.addEventListener(this.thumbList[this.imageIndex],"click",function(){"progress"==a.imageList[this.index].status?a.imageIndex=this.index:"complete"==a.imageList[this.index].status?(a.imageIndex=this.index,a.displayImage(a.imageList[a.imageIndex],a.imageIndex)):"error"==a.imageList[this.index].status&&(a.imageIndex=this.index)});this.zoomin()};
Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.loadThumbnail=function(a,b){this.thumbList[b-1].src=a};Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.loadImage=function(a,b){this.imageList[b-1].src=a;this.imageList[b-1].status="complete"};Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.imageError=function(a){this.imageList[a-1].status="error"};
Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.displayImage=function(a,b){if(0!=document.getElementsByClassName("imageContainer").length){var c=document.getElementsByClassName("imageContainer")[0];c.parentNode.removeChild(c)}var f=this.viewer.container,d=document.createElement("div");d.className="imageContainer";d.style.width=f.style.width;d.style.height=f.style.height;f.parentNode.appendChild(d);var g=document.createElement("canvas");d.appendChild(g);g.style.width=f.style.width;g.style.height=
f.style.height;g.width=this.viewer.canvas.width;g.height=this.viewer.canvas.height;this.addEventListener(g,"click",function(){f.style.zIndex="";null!=d.parentNode&&d.parentNode.removeChild(d)});f.style.zIndex=-1;d.style.zIndex=1;a.complete?toggleAnim(g,a):a.onload=function(){toggleAnim(g,a)};c=this.viewer.getCamera();c.position=this.thumbList[b].cameraPosition.clone();c.target=this.thumbList[b].cameraTarget.clone();c.up=this.thumbList[b].cameraUp.clone();c.updateProjectionMatrix()};
Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.uninitialize=function(){this.imageIndex=this.imageList=this.thumbList=this.imageNum=this.thumbnailPanel=this.viewer=null;Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this)};Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.getContentSize=function(){return{height:130*this.thumbList.length+45,width:130}};
Autodesk.Viewing.Extensions.RaaS.RaaSPanel.prototype.zoomin=function(){var a=this,b=new Image;b.src=this.screenCapture(this.viewer);var c=this.viewer.container,f=document.createElement("div");f.id="imageTemp";f.style.width=c.style.width;f.style.height=c.style.height;c.parentNode.appendChild(f);b.style.width=c.style.width;b.style.height=c.style.height;f.appendChild(b);c.style.zIndex=-1;f.style.zIndex=1;setTimeout(function(){var b=(a.thumbList[a.imageIndex].getBoundingClientRect().left+a.thumbList[a.imageIndex].getBoundingClientRect().right)/
2-(f.getBoundingClientRect().left+f.getBoundingClientRect().right)/2,g=a.thumbList[a.imageIndex].getBoundingClientRect().bottom<=a.thumbnailPanel.getBoundingClientRect().bottom?(a.thumbList[a.imageIndex].getBoundingClientRect().top+a.thumbList[a.imageIndex].getBoundingClientRect().bottom)/2-(f.getBoundingClientRect().top+f.getBoundingClientRect().bottom)/2:a.thumbnailPanel.getBoundingClientRect().bottom-a.thumbList[a.imageIndex].offsetHeight/2-(f.getBoundingClientRect().top+f.getBoundingClientRect().bottom)/
2,h=a.thumbList[a.imageIndex].clientWidth/c.clientWidth,k=a.thumbList[a.imageIndex].clientHeight/c.clientHeight;f.style.webkitTransform="translate("+b+"px,"+g+"px) scale("+h+","+k+")";f.style.transform="translate("+b+"px,"+g+"px) scale("+h+","+k+")"},10);setTimeout(function(){f.parentNode.removeChild(f);c.style.zIndex=""},500)};
function toggleAnim(a,b){function c(){var g=f+=d,h=a,k=b,l=h.getContext("2d");l.mozImageSmoothingEnabled=!1;l.webkitImageSmoothingEnabled=!1;l.imageSmoothingEnabled=!1;var m=0.01*g,g=h.width*m,m=h.height*m;l.drawImage(k,0,0,g,m);l.drawImage(h,0,0,g,m,0,0,h.width,h.height);100>=f&&requestAnimationFrame(c)}var f=0,d=0.5;c();window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,
1E3/60)}}()}"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.RaaS");Autodesk.Viewing.Extensions.RaaS.RaaSExtension=function(a,b){Autodesk.Viewing.Extension.call(this,a,b)};Autodesk.Viewing.Extensions.RaaS.RaaSExtension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.RaaS.RaaSExtension.prototype.constructor=Autodesk.Viewing.Extensions.RaaS.RaaSExtension;
Autodesk.Viewing.Extensions.RaaS.RaaSExtension.prototype.load=function(){function a(a){d.loadThumbnail(a.thumbnail,a.imageNo);d.loadImage(a.image,a.imageNo);var b=new Image;b.src=a.image;d.displayImage(b,a.imageNo-1)}function b(a){a.imageNo&&d.imageError(a.imageNo)}var c=this,f=this.viewer;this.raaSTools=f.getToolbar(!0).addSubToolbar("raaSTools",!1);var d=this.raaSPanel=new Autodesk.Viewing.Extensions.RaaS.RaaSPanel(f);f.addPanel(this.raaSPanel);this.raaSTools.renderButton=f.addMenuButton(this.raaSTools.id,
"toolbar-raaSTool","RaaS",function(d){c.showRaaSPanel(!0);c.raaSPanel.addImage();f.impl.svfloader.svfToSpdTranslator(f,c.raaSPanel.imageNum,a,b)});this.raaSTools.galleryButton=f.addMenuButton(this.raaSTools.id,"toolbar-raaSThumbnailTool","Gallery",function(a){c.showRaaSPanel(!d.isVisible())});return!0};Autodesk.Viewing.Extensions.RaaS.RaaSExtension.prototype.showRaaSPanel=function(a){this.raaSPanel&&this.raaSPanel.setVisible(a)};
Autodesk.Viewing.Extensions.RaaS.RaaSExtension.prototype.unload=function(){var a=this.viewer;a.removePanel(this.raaSPanel);if(a=a.getToolbar(!1))a.removeFromSubToolbar(this.raaSTools.id,this.raaSTools.renderButton),a.removeFromSubToolbar(this.raaSTools.id,this.raaSTools.galleryButton),a.removeSubToolbar(this.raaSTools);this.raaSPanel.uninitialize();this.raaSTools=this.raaSPanel=null};Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.RaaS",Autodesk.Viewing.Extensions.RaaS.RaaSExtension);
AutodeskNamespace("Autodesk.Viewing.Extensions");Autodesk.Viewing.Extensions.ViewerObjectContextMenu=function(a){Autodesk.Viewing.UI.ObjectContextMenu.call(this,a)};Autodesk.Viewing.Extensions.ViewerObjectContextMenu.prototype=Object.create(Autodesk.Viewing.UI.ObjectContextMenu.prototype);Autodesk.Viewing.Extensions.ViewerObjectContextMenu.prototype.constructor=Autodesk.Viewing.Extensions.ViewerObjectContextMenu;
Autodesk.Viewing.Extensions.ViewerObjectContextMenu.prototype.buildMenu=function(a,b){var c=this,f=[],d=this.viewer.model.is2d();!d&&b.hasSelected&&(f.push({title:"Isolate",target:function(){var a=c.viewer.getSelection();c.viewer.clearSelection();c.viewer.isolate(a)}}),b.hasVisible&&f.push({title:"Hide Selected",target:function(){var a=c.viewer.getSelection();c.viewer.clearSelection();c.viewer.hide(a)}}),b.hasHidden&&f.push({title:"Show Selected",target:function(){var a=c.viewer.getSelection();c.viewer.clearSelection();
c.viewer.show(a)}}));d?f.push({title:"Show All Layers",target:function(){c.viewer.setLayerVisible(null,!0)}}):f.push({title:"Show All Objects",target:function(){c.viewer.showAll()}});!d&&b.hasSelected&&f.push({title:"Focus",target:function(){c.viewer.fitToView()}});b.hasSelected&&f.push({title:"Clear Selection",target:function(){c.viewer.clearSelection()}});return f};"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.CAM360");
Autodesk.Viewing.Extensions.CAM360.CAM360Extension=function(a,b){Autodesk.Viewing.Extension.call(this,a,b)};Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype.constructor=Autodesk.Viewing.Extensions.CAM360.CAM360Extension;
Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype.load=function(){var a=new Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel(this.viewer,"CAM Model Structure Loading",this.options);this.viewer.setModelStructurePanel(a);this.viewer.hideLines(!1);this.viewer.setGhosting(!1);this.viewer.setQualityLevel(!1,!0);this.viewer.impl.setLightPreset(0,!0);return!0};Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype.unload=function(){this.viewer.setModelStructurePanel(null)};
Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.CAM360",Autodesk.Viewing.Extensions.CAM360.CAM360Extension);"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.CAM360");Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel=function(a,b,c){Autodesk.Viewing.Extensions.ViewerModelStructurePanel.call(this,a,b,c);this.viewer=a};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype=Object.create(Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype);
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.constructor=Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel;
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.sortCamNodes=function(a,b){function c(a){if(a.children)for(var b=0;b<a.children.length;b++){var d=a.children[b];h.push(d);c(d)}}function f(a,b){g.viewer.getProperties(a.dbId,function(c){a:{c=c.properties;for(var d=0;d<c.length;++d){var f=c[d];if("9429B915-D020-4CEB-971B-6ADD0A5D4BFA"===f.displayName){c=f.displayValue;break a}}c=null}c?("CAM_Setup"==c?g.camSetupNodes.push(a):"CAM_Operation"==c?g.camOperationNodes.push(a):"CAM_Tool"===
c?g.camToolNodes.push(a):"CAM_Stock"===c?g.camStockNodes.push(a):"CAM_Folder"==c&&g.camFolderNodes.push(a),g.camNodes.push(a)):g.camModelNodes.push(a);b()},function(a,c,d){b()})}function d(){0<h.length?f(h.shift(),d):b()}this.camNodes=[];this.camModelNodes=[];this.camSetupNodes=[];this.camStockNodes=[];this.camOperationNodes=[];this.camToolNodes=[];this.camFolderNodes=[];var g=this,h=[];c(a);d()};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.setModel=function(a,b){var c=this;c.sortCamNodes(a,function(){Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setModel.call(c,a,b);c.SetCAMNodeVisible(!1);c.setVisible(!0);c.ExpandSetupNodes()})};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.initialize=function(){function a(c){b.SetCAMNodeVisible(!1);b.removeEventListener(b.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,a)}Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.initialize.call(this);var b=this;this.viewer.model&&this.viewer.model.isLoadDone()||b.addEventListener(b.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,a);b.addEventListener(b.viewer,Autodesk.Viewing.SHOW_EVENT,function(a){if(a=a.nodeIdArray)for(var f=
0;f<a.length;f++)b.setCamNodeVisibility(a[f])});b.addEventListener(b.viewer,Autodesk.Viewing.SELECTION_CHANGED_EVENT,function(a){if(a=a.nodeArray)for(var f=0;f<a.length;f++)b.HideHightlightCAMNode(a[f])});b.addEventListener(b.viewer,Autodesk.Viewing.ISOLATE_EVENT,function(a){if(a=a.nodeIdArray)if(0==a.length)b.SetModelVisible(),b.SetCAMNodeVisible(!0);else for(var f=0;f<a.length;f++)b.setCamNodeVisibility(a[f])})};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMNode=function(a){return-1!==this.camNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMSetupNode=function(a){return-1!==this.camSetupNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMStockNode=function(a){return-1!==this.camStockNodes.indexOf(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMToolNode=function(a){return-1!==this.camToolNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMOperationNode=function(a){return-1!==this.camOperationNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMFolderNode=function(a){return-1!==this.camFolderNodes.indexOf(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.shouldInclude=function(a){return!this.IsCAMStockNode(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.isGroupNode=function(a){return this.IsCAMOperationNode(a)?!1:Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.isGroupNode.call(this,a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.setNodeVisibility=function(a,b){b?this.viewer.show(a):this.viewer.hide(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.SetModelVisible=function(){if(this.camModelNodes)for(var a=0;a<this.camModelNodes.length;a++)this.setNodeVisibility(this.camModelNodes[a],!0)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.SetCAMNodeVisible=function(a){if(this.camNodes){for(var b=0;b<this.camNodes.length;b++)this.setNodeVisibility(this.camNodes[b],a);this.SetToolNodeVisible(!1)}};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.SetToolNodeVisible=function(a){if(this.camToolNodes)for(var b=0;b<this.camToolNodes.length;b++)this.setNodeVisibility(this.camToolNodes[b],a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.HideHightlightNode=function(a){var b=this.viewer.impl;(function f(a){var g=a.fragIds;if("undefined"!=typeof g){Array.isArray(g)||(g=[g]);for(var h=0;h<g.length;++h)b.highlightFragment(this.modelRoot,g[h],!1)}if(a.children)for(g=0;g<a.children.length;g++)f(a.children[g])})(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.HideHightlightCAMNode=function(a){var b=this.IsCAMSetupNode(a),c=this.IsCAMOperationNode(a),f=this.IsCAMFolderNode(a);if(b)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMStockNode(c)||this.HideHightlightNode(c);else if(c)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMToolNode(c)&&this.HideHightlightNode(c);else if(f)for(b=0;b<a.children.length;b++)this.HideHightlightNode(a.children[b])};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.setCamNodeVisibility=function(a){var b=this.IsCAMSetupNode(a),c=this.IsCAMOperationNode(a),f=this.IsCAMFolderNode(a);if(b)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMStockNode(c)?this.setNodeVisibility(c,!0):this.setNodeVisibility(c,!1);else if(c)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMToolNode(c)&&this.setNodeVisibility(c,!1);else if(f)for(b=0;b<a.children.length;b++)this.setNodeVisibility(a.children[b],
!1)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.onClick=function(a,b){Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onClick.call(this,a,b);this.SetModelVisible();this.setCamNodeVisibility(a);this.viewer.fitToView()};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.ExpandSetupNodes=function(){if(this.camSetupNodes)for(var a=0;a<this.camSetupNodes.length;a++)this.tree.setCollapsed(this.camSetupNodes[a].dbId,!1)};"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.Fusion360");
Autodesk.Viewing.Extensions.Fusion360.AnimationExtension=function(a,b){Autodesk.Viewing.Extension.call(this,a,b);this.viewer=a;this.animTools=null;this.animToolsId="animationTools";this.resetButton=this.playButton=null;this.prevExplodeValue=0;this.prevAnimationTime=-1};Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype.constructor=Autodesk.Viewing.Extensions.Fusion360.AnimationExtension;
Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype.load=function(){function a(a,b){var c=a.getElementsByClassName("toolbar-button")[0],d=a.getElementsByClassName("toolbar-tooltip")[0];c&&d&&(c.id=b?"toolbar-animationPlayButton":"toolbar-animationPauseButton",d.textContent=b?Autodesk.Viewing.i18n.translate("Play"):Autodesk.Viewing.i18n.translate("Pause"))}function b(){p.toolbar.container.className="toolbar-menuplacer";m.animTools.setVisibility(!1)}function c(a,b){p.model.is2d()||0===
p.getExplodeScale()||(m.prevExplodeValue=p.explodeslider.value,b&&(p.explodeslider.value=a),p.explode(a))}function f(a){var b=a.value;a.style.background="-webkit-linear-gradient(left,#ffffff "+b+"%, #393939 "+b+"%)";a.style.background="-moz-linear-gradient(left,#ffffff "+b+"%, #393939 "+b+"%)";a.style.background="-ms-linear-gradient(left,#ffffff "+b+"%, #393939 "+b+"%)";a.style.background="-o-linear-gradient(left,#ffffff "+b+"%, #393939 "+b+"%)";a.style.background="linear-gradient(to right,#ffffff "+
b+"%, #393939 "+b+"%)"}function d(a){var b="";0>a&&(b="-",a=-a);var c=~~(a/3600),d=~~(a%3600/60);a%=60;0<c&&(b+=c+":"+(10>d?"0":""));return b=b+(d+":"+(10>a?"0":""))+a.toFixed(2)}function g(k){p.removeEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,g);p.modelTools.resetModelButton&&p.modelTools.setToolVisibility(p.modelTools.resetModelButton.id,!1);m.animTools=p.toolbar.addSubToolbar(m.animToolsId,!1);m.animTools.setVisibility(!1);m.playButton=p.addMenuButton(p.modelToolsId,"toolbar-animationPlay",
"Play",function(b){c(0);var g=p.impl.keyFrameAnimator;void 0!==g&&g&&(0<m.prevAnimationTime&&(g.goto(m.prevAnimationTime),m.prevAnimationTime=-1),g.play(0,function(b){n.value=b;l.value=d(g.currentTime);w.value=d(g.currentTime-g.duration);100<=b&&a(m.playButton,!0);f(n)}),a(m.playButton,g.isPaused),p.toolbar.container.className="toolbar-animationMenuplacer",m.animTools.setVisibility(!0),m.animTools.isPositionAdjusted||(h(),m.animTools.isPositionAdjusted=!0))});p.modelTools.insertToolAtIndex(m.playButton,
0);m.onExplodeChange=function(){var c=p.impl.keyFrameAnimator;void 0!==c&&c&&(0!==c.currentTime&&(m.prevAnimationTime=c.currentTime,c.goto(0)),a(m.playButton,!0));b()};p.addEventListener(Autodesk.Viewing.EXPLODE_CHANGE_EVENT,m.onExplodeChange);m.resetButton=p.addMenuButton(p.modelToolsId,"toolbar-resetTool","Reset model",function(b){b=p.impl.keyFrameAnimator;void 0!==b&&b&&(b.goto(0),n.value=0,l.value=d(0),w.value=d(-b.duration),a(m.playButton,!0));c(0,!0);p.showAll();f(n)});p.modelTools.insertToolAtIndex(m.resetButton,
3);m.animTools.backwardButton=p.addMenuButton(m.animToolsId,"toolbar-animationBackward","Previous keyframe",function(b){b=p.impl.keyFrameAnimator;void 0!==b&&b&&(b.prev(),n.value=0<b.duration?b.currentTime/b.duration*100:0,l.value=d(b.currentTime),w.value=d(b.currentTime-b.duration),a(m.playButton,b.isPaused),f(n))});if(k=m.animTools.backwardButton.getElementsByClassName("toolbar-button")[0])k.className="toolbar-animationButton";m.animTools.forwardButton=p.addMenuButton(m.animToolsId,"toolbar-animationForward",
"Next keyframe",function(b){b=p.impl.keyFrameAnimator;void 0!==b&&b&&(b.next(),n.value=0<b.duration?b.currentTime/b.duration*100:0,l.value=d(b.currentTime),w.value=d(b.currentTime-b.duration),a(m.playButton,b.isPaused),f(n))});if(k=m.animTools.forwardButton.getElementsByClassName("toolbar-button")[0])k.className="toolbar-animationButton";m.animTools.timeText=p.addMenuButton(m.animToolsId,"toolbar-animationTimeline","",null);var l=document.createElement("input");l.type="text";l.value="0";l.className=
"animationTimeLapse";l.disabled=!0;m.animTools.timeText.appendChild(l);m.animTools.timeline=p.addMenuButton(m.animToolsId,"toolbar-animationTimeline","",null);var n=m.animTools.input=document.createElement("input");n.type="range";n.value="0";n.className="animationTimeline";m.animTools.timeline.appendChild(n);n.addEventListener("input",function(b){b=p.impl.keyFrameAnimator;if(void 0!==b&&b){var c=n.value*b.duration/100;l.value=d(c);w.value=d(c-b.duration);b.goto(c);a(m.playButton,b.isPaused);f(n)}});
var u=document.createElement("div");u.className="toolbar-tooltip";u.textContent=Autodesk.Viewing.i18n.translate("Click-drag to scrub");m.animTools.timeline.appendChild(u);n.addEventListener("mouseover",function(a){a.target===n&&(u.style.visibility="visible")});n.addEventListener("mouseout",function(a){a.target===n&&(u.style.visibility="hidden")});m.animTools.timeLeftText=p.addMenuButton(m.animToolsId,"toolbar-animationTimeline","",null);var w=document.createElement("input");w.type="text";w.value=
"0";w.className="animationTimeLapse";w.disabled=!0;m.animTools.timeLeftText.appendChild(w);m.animTools.closeButton=p.addMenuButton(m.animToolsId,"toolbar-animationClose","Close animation timeline",function(a){b()});if(k=m.animTools.closeButton.getElementsByClassName("toolbar-button")[0])k.className="toolbar-animationCloseButton";m.onEscape=function(c){c=p.impl.keyFrameAnimator;void 0!==c&&c&&(c.isPaused?b():c.pause(),a(m.playButton,c.isPaused))};p.addEventListener(Autodesk.Viewing.ESCAPE_EVENT,m.onEscape);
m.onCameraChange=function(){if(p.toolController.cameraUpdated){var a=p.impl.keyFrameAnimator;void 0!==a&&a&&(!a.isPlaying||a.isPaused||a.areCameraAnimationsPaused||a.pauseCameraAnimations())}};p.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,m.onCameraChange)}function h(){m.animTools.subtoolbar.className="toolbar-animationSubtoolbar";m.animTools.subtoolbar.style.left="0px";var a=m.animTools.subtoolbar.getBoundingClientRect().left-p.modelTools.subtoolbar.getBoundingClientRect().left+10,a=p.navTools.subtoolbar.getBoundingClientRect().width+
a;m.animTools.subtoolbar.style.left=-a+"px";a=p.navTools.subtoolbar.getBoundingClientRect().width+p.modelTools.subtoolbar.getBoundingClientRect().width+10-(3*m.animTools.backwardButton.getBoundingClientRect().width+2*m.animTools.timeLeftText.getBoundingClientRect().width+(m.animTools.timeline.getBoundingClientRect().width-m.animTools.input.getBoundingClientRect().width)+2);m.animTools.input.style.width=a+"px"}function k(){var a=p.model.getData();if(a&&a.animations){var b=a.animations.animations,a=
n.keyFrameAnimator=new Autodesk.Viewing.Private.KeyFrameAnimator(n,a.animations.duration),c;for(c in b)a.add(b[c]);p.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,k);p.removeEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,l)}}function l(){p.model&&p.model.isLoadDone()?k():p.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,k)}var m=this,p=this.viewer,n=p.impl;this.viewer.toolbar&&0<this.viewer.toolbar.getSubToolbars().length?g():this.viewer.addEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,
g);p.model&&p.model.isObjectTreeCreated()?l():p.addEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,l);return!0};
Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype.unload=function(){var a=this.viewer;a.removeMenuButton(a.modelToolsId,this.playButton);a.removeMenuButton(a.modelToolsId,this.resetButton);a.removeMenuButton(this.animToolsId,this.animTools.timeText);a.removeMenuButton(this.animToolsId,this.animTools.timeline);a.removeMenuButton(this.animToolsId,this.animTools.timeLeftText);a.removeMenuButton(this.animToolsId,this.animTools.forwardButton);a.removeMenuButton(this.animToolsId,this.animTools.playbutton);
a.removeMenuButton(this.animToolsId,this.animTools.backwardButton);a.removeMenuButton(this.animToolsId,this.animTools.closeButton);a.toolbar.removeSubToolbar(this.animToolsId);a.removeEventListener(Autodesk.Viewing.EXPLODE_CHANGE_EVENT,this.onExplodeChange);a.removeEventListener(Autodesk.Viewing.ESCAPE_EVENT,this.onEscape);a.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChange);a.modelTools.resetModelButton&&a.modelTools.setToolVisibility(a.modelTools.resetModelButton.id,!0);
return!0};Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Fusion360.Animation",Autodesk.Viewing.Extensions.Fusion360.AnimationExtension);AutodeskNamespace("Autodesk.Viewing.Extensions.Markers");Autodesk.Viewing.Extensions.Markers.ViewerMarkers=function(a){Autodesk.Viewing.Extension.call(this,a)};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.constructor=Autodesk.Viewing.Extensions.Markers.ViewerMarkers;
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.load=function(){if(!(this.viewer instanceof Autodesk.Viewing.Viewer3D))return!1;this.markups=[];this.markerGroups=[];this.modelMarkers=[];this.lines=[];this.linesVisible=this.markersVisible=!0;this.minimumGroupMarkerWidth=80;this.markersWrap=document.createElement("div");this.markersWrap.id="markers-wrap";this.markersWrap.style.left=0;this.markersWrap.style.top=0;this.markersWrap.style.right=0;this.markersWrap.style.bottom=0;this.markersWrap.style.width=
"100%";this.markersWrap.style.height="100%";this.markersWrap.style.backgroundColor="transparent";this.markersWrap.style.position="absolute";this.markerLines=document.createElement("canvas");this.markerLines.id="markers-lines";this.markerLines.style.left=0;this.markerLines.style.top=0;this.markerLines.style.right=0;this.markerLines.style.bottom=0;this.markerLines.style.width="100%";this.markerLines.style.height="100%";this.markerLines.style.backgroundColor="transparent";this.markerLines.style.position=
"absolute";this.container=this.viewer.container;this.container.firstChild?this.container.insertBefore(this.markersWrap,this.container.firstChild):this.container.appendChild(this.markersWrap);this.markersWrap.appendChild(this.markerLines);this.markersWrap.style.pointerEvents="none";this.highlightedMeshes={};this.materialBase=new THREE.MeshBasicMaterial({color:16777215,opacity:0.25,transparent:!1});this.materialTop=new THREE.MeshBasicMaterial({color:16777215,opacity:0.01,shading:THREE.NoShading,transparent:!0});
this.viewer.impl.createOverlayScene("markers",this.materialBase,this.materialTop);this.htmlBounds=new THREE.Box2;this.viewerBounds=new THREE.Box2;this.modelMarkersBoundingBox=new THREE.Box2;this.modelMarkersBoundingBox.min.x=-1E5;this.modelMarkersBoundingBox.min.y=-1E5;this.cameraTransitionActive=!1;this.onCameraChange=function(a){a=this.viewer.navigation.getTransitionActive();this.viewer.toolController.cameraUpdated&&(a||this.cameraTransitionActive||this.clearMarkups());this.cameraTransitionActive=
a;this.update()}.bind(this);this.onExplodeChange=function(){this.update()}.bind(this);this.onViewerResize=function(){this.clientWidth=this.container.offsetWidth;this.clientHeight=this.container.offsetHeight;this.viewerBounds.min.x=0;this.viewerBounds.min.y=0;this.viewerBounds.max.x=this.clientWidth;this.viewerBounds.max.y=this.clientHeight;this.htmlBounds.min.x=this.viewerBounds.min.x+50;this.htmlBounds.min.y=this.viewerBounds.min.y+50;this.htmlBounds.max.x=this.viewerBounds.max.x-50;this.htmlBounds.max.y=
this.viewerBounds.max.y-50;this.viewer.impl.updateCameraMatrices();this.update()}.bind(this);var a=this,b=function(){a.viewer.removeEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,b);a.viewer.vieweroptions.addMarkersOption(a)};this.viewer.vieweroptions?b():this.viewer.addEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,b);this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChange);this.viewer.addEventListener(Autodesk.Viewing.EXPLODE_CHANGE_EVENT,this.onExplodeChange);
this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.onViewerResize);this.onViewerResize();return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.unload=function(){this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChange);this.viewer.removeEventListener(Autodesk.Viewing.EXPLODE_CHANGE_EVENT,this.onExplodeChange);this.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.onViewerResize);this.markerGroups.splice(0,this.markerGroups.length);this.modelMarkers.splice(0,this.markerGroups.length);this.lines.splice(0,this.lines.length);this.markersWrap.parentNode.removeChild(this.markersWrap);
this.viewer.impl.removeOverlayScene("markers");this.materialBase.dispose();this.materialTop.dispose();return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.update=function(){if(this.visible&&this.viewer.model){if(this.isModelHightlighted){for(var a=[],b=this.viewer.model.getData().fragments.fragId2dbId.length,c=0;c<b;++c)a.push(c);this.viewer.model.getRoot().fragIds=a;this.highlightNode(this.viewer.model.getRoot(),-1)}this.markerLines.width=this.markerLines.clientWidth;this.markerLines.height=this.markerLines.clientHeight;if(a=this.markerLines.getContext("2d"))a.clearRect(0,0,this.markerLines.width,
this.markerLines.height),b=this.getModelBoundingRectangle(this.viewer.model),this.updateMarkups(a),this.updateModelMarkers(a),this.updateMarkerGroups(a,b),this.updateLines(a)}};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateMarkups=function(a){for(var b=this.markups,c=this.markups.length,f=0;f<c;++f)this.drawMarkup(a,b[f])};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateMarkerGroups=function(a,b){if(this.markersVisible&&this.viewer.prefs.showCommentMarkers){this.updateProxiesCenters();this.sortMarkerGroups();for(var c=this.getModelCenter(this.viewer.model),f=this.markerGroups,d=f.length,g=b.min.x,h=b.max.x,k=0;k<d;++k)this.updateMarkerGroup(f[k],c,g,h);this.resolveMarkersCollisions(c,g,h);a.lineWidth=1;for(k=0;k<d;++k)if(g=c=f[k],h=g.length,c.clipped){var l=g[0].html;l.data.setDirection(c.flip?"outside_right":
"outside_left");l.style.display=c.visible?"":"none";l.style.left=c.flip?Math.round(c.x-l.offsetWidth)+"px":Math.round(c.x)+"px";l.style.top=Math.round(c.y-0.5*l.offsetHeight)+"px";for(var m=1;m<h;++m)l=g[m].html,l.style.display="none"}else{this.drawLine(a,c.proxyCenter.x,c.proxyCenter.y,c.x,c.y,"#FFFFFF");this.drawCircle(a,c.proxyCenter.x,c.proxyCenter.y,4,"#FFFFFF");for(var p=c.flip?"left":"right",n=c.flip?1:-1,m=0;m<h;++m){l=g[m].html;l.data.setDirection(0==m?p:"");l.style.display="";var q=c.y-
0.5*l.offsetHeight;l.style.left=Math.round(c.x-0.5*l.offsetWidth+l.offsetWidth*m*n)+"px";l.style.top=Math.round(q)+"px"}}}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateModelMarkers=function(a){a=this.modelMarkers;var b=a.length;if(0!=b){var c=10;if(this.markersVisible&&this.viewer.prefs.showCommentMarkers)for(var f=0;f<b;++f){var d=a[f].html;d.style.display="";d.style.left=c+"px";d.style.top="10px";c+=parseInt(d.offsetWidth+5);this.modelMarkersBoundingBox.max.x=c;this.modelMarkersBoundingBox.max.y=10+d.offsetHeight}else{for(f=0;f<b;++f)d=a[f].html,d.style.display="none";this.modelMarkersBoundingBox.max.x=
c;this.modelMarkersBoundingBox.max.y=10}}};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateLines=function(a){if(this.linesVisible){a.lineWidth=1;for(var b=this.lines,c=b.length,f=0;f<c;++f){var d=b[f],g=this.getProxyCenter(d.fragId);this.drawLine(a,g.x,g.y,d.x,d.y,"#FFFFFF");this.drawCircle(a,g.x,g.y,4,"#FFFFFF")}}};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.clearMarkups=function(){0!=this.markups.length&&(this.markups.splice(0,this.markups.length),this.update())};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.addRectangularMarkup=function(a,b,c,f,d,g){this.setRectangularMarkup(this.markups.length,a,b,c,f,d,g);return this.markups.length-1};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setRectangularMarkup=function(a,b,c,f,d,g,h){if(!(0>a)){var k=1/this.clientWidth,l=1/this.clientHeight,m=l/k;b={path:["M",(b*k*2-1)*m,-(c*l*2-1),"L",((f+b)*k*2-1)*m,-(c*l*2-1),"L",((f+b)*k*2-1)*m,-((d+c)*l*2-1),"L",(b*k*2-1)*m,-((d+c)*l*2-1),"z"],strokeWidth:g,strokeColor:h};a<this.markups.length?this.markups[a]=b:this.markups.push(b);this.update()}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.removeMarkupAt=function(a){this.markups.splice(a,1);this.update()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setNodeMarker=function(a,b,c){if(-1==this.getFragmentId(b)||!c)return!1;var f={id:a,html:c};c.style.display=this.markersVisible&&this.viewer.prefs.showCommentMarkers?"block":"none";c=this.getIndexFromId(b,this.markerGroups);-1!=c?(b=this.markerGroups[c],a=this.getIndexFromId(a,b),-1!=a?(this.markersWrap.removeChild(b[a].html),b.splice(a,1,f)):b.push(f)):(a=[f],a.id=b,a.fragId=this.getFragmentId(b),a.x=0,a.y=0,a.flip=!1,a.proxyCenter=new THREE.Vector2,
a.htmlOffset=new THREE.Vector2,a.htmlSize=new THREE.Vector2,a.distanceFromCenter=0,a.wholeBoundingBox=new THREE.Box2,a.htmlBoundingBox=new THREE.Box2,this.markerGroups.push(a));this.markersWrap.appendChild(f.html);this.update();return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setModelMarker=function(a,b){if(!b)return!1;var c={id:a,html:b};b.style.display=this.markersVisible&&this.viewer.prefs.showCommentMarkers?"block":"none";var f=this.getIndexFromId(a,this.modelMarkers);-1!=f?(this.markersWrap.removeChild(this.modelMarkers[f].html),this.modelMarkers.splice(f,1,c)):this.modelMarkers.push(c);this.markersWrap.appendChild(c.html);this.update();return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.removeMarker=function(a){for(var b=this.markerGroups,c=b.length,f=0;f<c;++f){var d=b[f],g=this.getIndexFromId(a,d);if(-1!=g){this.markersWrap.removeChild(d[g].html);d.splice(g,1);0==d.length&&b.splice(f,1);break}}a=this.getIndexFromId(a,this.modelMarkers);-1!=a&&(this.markersWrap.removeChild(this.modelMarkers[a].html),this.modelMarkers.splice(a,1));this.update()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setLine=function(a,b,c,f){if(-1==this.getFragmentId(b))return!1;b={id:a,nodeId:b,fragId:this.getFragmentId(b),x:c,y:f};a=this.getIndexFromId(a,this.lines);-1!=a?this.lines.splice(a,1,b):this.lines.push(b);this.update();return!0};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.removeLine=function(a){a=this.getIndexFromId(a,this.lines);-1!=a&&this.lines.splice(a,1);this.update()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.__defineGetter__("visible",function(){return"block"==this.markersWrap.style.display||""==this.markersWrap.style.display});Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.show=function(){this.markersWrap.style.display="block";this.update()};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.hide=function(){this.markersWrap.style.display="none"};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setEnabled=function(){this.visibilityUpdated();this.update()};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setVisible=function(a){a!=this.markersVisible&&(this.markersVisible=a,this.visibilityUpdated(),this.update())};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.visibilityUpdated=function(){for(var a=this.markersVisible&&this.viewer.prefs.showCommentMarkers?"block":"none",b=this.markerGroups,c=b.length,f=0;f<c;++f)for(var d=b[f],g=d.length,h=0;h<g;++h)d[h].html.style.display=a};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.showMarkers=function(){};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.hideMarkers=function(){};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getFragmentId=function(a){for(var b=this.viewer.model.getData().fragments.fragId2dbId,c=b.length,f=0;f<c;++f)if(b[f]==a)return f;return-1};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getIndexFromId=function(a,b){for(var c=b.length,f=0;f<c;++f)if(b[f].id==a)return f;return-1};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getModelCenter=function(a){a=a.getBoundingBox().center();return this.worldToClient(a)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getModelBoundingRectangle=function(a){var b=a.getBoundingBox().min;a=a.getBoundingBox().max;for(var b=[new THREE.Vector3(b.x,b.y,b.z),new THREE.Vector3(b.x,a.y,b.z),new THREE.Vector3(a.x,b.y,b.z),new THREE.Vector3(a.x,a.y,b.z),new THREE.Vector3(b.x,b.y,a.z),new THREE.Vector3(b.x,a.y,a.z),new THREE.Vector3(a.x,b.y,a.z),new THREE.Vector3(a.x,a.y,a.z)],c=a=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY,g=b.length,
h=0;h<g;++h){var k=this.worldToClient(b[h]);a=Math.min(a,k.x);c=Math.min(c,k.y);f=Math.max(f,k.x);d=Math.max(d,k.y)}return new THREE.Box2(new THREE.Vector2(a,c),new THREE.Vector2(f,d))};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getProxyCenter=function(a){a=this.viewer.impl.getRenderProxy(this.viewer.model,a);var b=a.geometry.boundingBox.center();b.applyMatrix4(a.matrixWorld);return this.worldToClient(b)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.worldToClient=function(a){var b=new THREE.Vector4;b.x=a.x;b.y=a.y;b.z=a.z;b.w=1;b.applyMatrix4(this.viewer.impl.camera.matrixWorldInverse);b.applyMatrix4(this.viewer.impl.camera.projectionMatrix);0<b.w&&(b.x/=b.w,b.y/=b.w,b.z/=b.w);a=this.viewer.impl.viewportToClient(b.x,b.y);a.x=Math.floor(a.x)+0.5;a.y=Math.floor(a.y)+0.5;b=this.viewer.impl.canvas.getBoundingClientRect();a.x-=b.left;a.y-=b.top;return a};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawLine=function(a,b,c,f,d,g){a.beginPath();a.moveTo(b,c);a.lineTo(f,d);a.strokeStyle=g;a.stroke()};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setModelHighlight=function(a){this.clearHighlightedNodes();a&&this.highlightNode(this.viewer.model.getRoot())};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.highlightNode=function(a){var b;if(a===this.viewer.model.getRoot()){a=a.dbId;var c=this.viewer.model.getData().fragments.fragId2dbId.length;b=Array(c);for(var f=0;f<c;++f)b[f]=f}else b=a.fragIds,a=a.dbId,Array.isArray(b)||(b=[b]);c=[];for(f=0;f<b.length;++f){var d=this.viewer.impl.getRenderProxy(this.viewer.model,b[f]);d&&!d.markupHighlightProxy&&(d.markupHighlightProxy=new THREE.Mesh(d.geometry,d.material,!0),d.markupHighlightProxy.matrixWorld=
d.matrixWorld,this.viewer.impl.addOverlay("markers",d.markupHighlightProxy),c.push(d))}c.length&&(this.highlightedMeshes[a]=c)};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.clearHighlightedNode=function(a){if(a===this.viewer.model.getRoot())this.clearHighlightedNodes();else{var b=this.highlightedMeshes[a.dbId];if(Array.isArray(b)){for(var c=0,f=b.length;c<f;++c){var d=b[c];this.viewer.impl.removeOverlay("markers",d.markupHighlightProxy);delete d.markupHighlightProxy}delete this.highlightedMeshes[a.dbId]}}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.clearHighlightedNodes=function(){for(var a in this.highlightedMeshes)for(var b=this.highlightedMeshes[a],c=0,f=b.length;c<f;++c){var d=b[c];this.viewer.impl.removeOverlay("markers",d.markupHighlightProxy);d.markupHighlightProxy=null}this.highlightedMeshes={}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawMarkup=function(a,b){var c=this.clientWidth,f=this.clientHeight,d=0==b.strokeWidth%2?0:0.5,g=this.clientHeight/this.clientWidth;a.lineWidth=b.strokeWidth;a.strokeStyle=b.strokeColor;a.beginPath();for(var h=b.path,k=h.length,l=0;l<k;l+=3){var m=Math.floor(0.5*(h[l+1]*g+1)*c)+d,p=Math.floor(0.5*(-h[l+2]+1)*f)+d;switch(h[l]){case "M":a.moveTo(m,p);break;case "L":a.lineTo(m,p)}}a.closePath();a.stroke()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawCircle=function(a,b,c,f,d){a.beginPath();a.arc(b,c,f,0,2*Math.PI,!1);a.fillStyle=d;a.fill()};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawCircumference=function(a,b,c,f,d){a.beginPath();a.arc(b,c,f,0,2*Math.PI,!1);a.strokeStyle=d;a.stroke()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawBoundingBox=function(a,b,c,f){a.globalAlpha=f;a.beginPath();a.rect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y);a.fillStyle=c;a.fill();a.globalAlpha=1};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateMarkerGroup=function(a,b,c,f){a.clipped?(a.x=a.proxyCenter.x,a.y=a.proxyCenter.y,this.restrainToViewerBounds(a)):(this.placeOutsideModelBoundingBox(a,b,c,f),this.hasMinimumLength(a)||this.placeOutsideModelBoundingBox(a,b,c,f,!a.flip))};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateProxiesCenters=function(){for(var a=this.container.offsetWidth,b=this.container.offsetHeight,c=this.markerGroups,f=c.length,d=0;d<f;++d){var g=c[d],h=this.getProxyCenter(g.fragId);g.proxyCenter=h;g.visible=0<=h.y&&h.y<=b;g.clipped=0>h.x||h.x>a||0>h.y||h.y>b}a=this.lines;b=a.length;for(d=0;d<b;++d)c=a[d],c.proxyCenter=this.getProxyCenter(c.fragId)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateMarkerGroupBoundingBoxes=function(a){var b=a.htmlBoundingBox,c=a.wholeBoundingBox,f,d;f=b.min;d=b.max;f.x=Math.round(a.x+a.htmlOffset.x);f.y=Math.round(a.y+a.htmlOffset.y);d.x=f.x+a.htmlSize.x;d.y=f.y+a.htmlSize.y;b.width=d.x-f.x;b.height=d.y-f.y;c.set(f,d);c.expandByPoint(a.proxyCenter);f=c.min;d=c.max;c.width=d.x-f.x;c.height=d.y-f.y};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.resolveMarkersCollisions=function(a,b,c){for(var f=this.markerGroups,d=f.length,g=[],h=0;h<d;++h){this.getMarkerGroupColliders(f[h],g,!1);for(var k=0;k<g.length;++k){var l=f[h],m=g[k];this.placeOutsideModelBoundingBox(l,a,b,c,!l.flip);if(!this.hasMinimumLength(l)||this.isMarkerGroupColliding(l,!1)||this.isMarkerGroupColliding(m,!1))this.placeOutsideModelBoundingBox(l,a,b,c,!l.flip),this.placeOutsideModelBoundingBox(m,a,b,c,!m.flip),(!this.hasMinimumLength(m)||
this.isMarkerGroupColliding(l,!1)||this.isMarkerGroupColliding(m,!1))&&this.placeOutsideModelBoundingBox(m,a,b,c,!m.flip)}}for(h=0;h<d;++h)for(this.getMarkerGroupColliders(f[h],g,!1),k=0;k<g.length;++k){var l=f[h],m=g[k],p;a=this.getPushDeltaPosition(l,!0);b=this.getPushDeltaPosition(m,!0);c=Math.abs(a);p=Math.abs(b);if(0<c||0<p)c<p?(l.x+=a,this.setFlip(l,l.x>l.proxyCenter.x)):(m.x+=b,this.setFlip(m,m.x>m.proxyCenter.x));else if(a=this.getPushDeltaPosition(l,!1),b=this.getPushDeltaPosition(m,!1),
c=Math.abs(a),p=Math.abs(b),0<c||0<p)c<p?(l.x+=a,this.setFlip(l,l.x>l.proxyCenter.x)):(m.x+=b,this.setFlip(m,m.x>m.proxyCenter.x))}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setFlip=function(a,b){a.flip=b;var c=a[0].html;a.htmlSize.x=c.offsetWidth*a.length;a.htmlSize.y=c.offsetHeight;a.htmlOffset.x=a.flip?0.5*-c.offsetWidth:0.5*c.offsetWidth-a.htmlSize.x;a.htmlOffset.y=0.5*-c.offsetHeight;a.htmlSize.x=c.offsetWidth*a.length;a.htmlSize.y=c.offsetHeight;a.htmlOffset.x=a.flip?0.5*-c.offsetWidth:0.5*c.offsetWidth-a.htmlSize.x;a.htmlOffset.y=0.5*-c.offsetHeight;this.updateMarkerGroupBoundingBoxes(a)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getPushDeltaPosition=function(a,b){for(var c=(b?1:-1)*(a.flip?1:-1)*20,f=0;;){a.x+=c;f+=c;this.updateMarkerGroupBoundingBoxes(a);if(this.isHtmlOutsideBounds(a))return a.x-=f,this.updateMarkerGroupBoundingBoxes(a),0;if(this.hasMinimumLength(a)&&!this.isMarkerGroupColliding(a,!0))return a.x-=f,this.updateMarkerGroupBoundingBoxes(a),f}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.isHtmlOutsideBounds=function(a){var b=this.htmlBounds,c=a.htmlBoundingBox,f=b.min.x,b=b.max.x;a.htmlBoundingBox.isIntersectionBox(this.modelMarkersBoundingBox)&&(f=this.modelMarkersBoundingBox.max.x);return c.max.x>b||c.min.x<f?!0:!1};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.restrainToViewerBounds=function(a){var b=this.viewerBounds;a.proxyCenter.x<b.min.x?(a.x=b.min.x,this.setFlip(a,!1)):a.proxyCenter.x>b.max.x&&(a.x=b.max.x,this.setFlip(a,!0))};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.placeOutsideModelBoundingBox=function(a,b,c,f,d){a.distanceFromCenter=Math.abs(a.proxyCenter.x-b.x);b=0.5*a.distanceFromCenter+f;var g=0.5*-a.distanceFromCenter+c;void 0===d&&(d=c<this.htmlBounds.min.x||f>this.htmlBounds.max.x?c<this.htmlBounds.min.x:Math.abs(a.proxyCenter.x-b)<Math.abs(a.proxyCenter.x-g));a.x=d?b:g;a.y=a.proxyCenter.y;this.setFlip(a,d);this.hasMinimumLength(a)||(a.x=a.proxyCenter.x+(this.minimumGroupMarkerWidth+a.htmlSize.x)*
(a.flip?1:-1),this.updateMarkerGroupBoundingBoxes(a));this.restrainToHtmlBounds(a)};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.restrainToHtmlBounds=function(a){var b=this.htmlBounds,c=a.htmlBoundingBox,f=b.min.x,b=b.max.x;a.htmlBoundingBox.isIntersectionBox(this.modelMarkersBoundingBox)&&(f=this.modelMarkersBoundingBox.max.x);c.max.x>b?(a.x=b-a.htmlOffset.x-a.htmlSize.x,this.updateMarkerGroupBoundingBoxes(a)):c.min.x<f&&(a.x=f-a.htmlOffset.x,this.updateMarkerGroupBoundingBoxes(a))};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.hasMinimumLength=function(a){return a.clipped||a.wholeBoundingBox.width-a.htmlBoundingBox.width>=this.minimumGroupMarkerWidth};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.sortMarkerGroups=function(){this.markerGroups.sort(function(a,b){return a.proxyCenter.y<b.proxyCenter.y?-1:a.proxyCenter.y>b.proxyCenter.y?1:0})};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getMarkerGroupColliders=function(a,b,c){var f=this.markerGroups,d=f.length;b.splice(0,b.length);if(!a.clipped)for(var g=0;g<d;++g){var h=f[g];h!==a&&(h.clipped||(c?h.htmlBoundingBox.isIntersectionBox(a.htmlBoundingBox)&&b.push(h):h.wholeBoundingBox.isIntersectionBox(a.wholeBoundingBox)&&b.push(h)))}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.isMarkerGroupColliding=function(a,b){var c=this.markerGroups,f=c.length;if(a.clipped)return!1;for(var d=0;d<f;++d){var g=c[d];if(g!==a&&!g.clipped)if(b){if(g.htmlBoundingBox.isIntersectionBox(a.htmlBoundingBox))return!0}else if(g.wholeBoundingBox.isIntersectionBox(a.wholeBoundingBox))return!0}return!1};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getState=function(a){a.objectSet||(a.objectSet=[]);for(var b=this.markups,c=this.markups.length,f=0;f<c;++f){for(var d=b[f],g=d.path,h=g.length,k=g[0],l=1;l<h;++l)k+=" "+g[l].toString();d={id:"Autodesk.Markers.Markup",path:k,strokeColor:d.strokeColor,strokeWidth:d.strokeWidth};a.objectSet.push(d)}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.restoreState=function(a,b){if(!a.objectSet)return!0;this.markups.splice(0,this.markups.length);for(var c=a.objectSet,f=c.length,d=0;d<f;++d){var g=c[d];if("Autodesk.Markers.Markup"==g.id){if(!g.path||!g.strokeColor||!g.strokeWidth)return this.markups.splice(0,this.markups.length),!1;for(var h=g.path.split(" "),k=h.length,l=0;l<k;++l)"M"!=h[l]&&"L"!=h[l]&&"z"!=h[l]&&(h[l]=parseFloat(h[l]));this.markups.push({path:h,strokeWidth:g.strokeWidth,
strokeColor:g.strokeColor})}}return!0};Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Markers",Autodesk.Viewing.Extensions.Markers.ViewerMarkers);AutodeskNamespace("Autodesk.Viewing.Extensions.Markers");Autodesk.Viewing.Extensions.Markers.ViewerMarkups=function(a){Autodesk.Viewing.Extension.call(this,a)};Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype=Object.create(Autodesk.Viewing.Extension.prototype);
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.constructor=Autodesk.Viewing.Extensions.Markers.ViewerMarkups;
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.load=function(){this.container=this.viewer.container;this.mDrawing=!1;this.mCurrentMarkupIndex=0;this.mCurrentStrokeWidth=1;this.mCurrentStrokeColor="#FFFFFF";this.mOnFinishCallback=null;this.mCurrentMarkupIndex=-1;this.mCurrentRectangleIniPoint=new THREE.Vector2;if(!(this.viewer instanceof Autodesk.Viewing.Viewer3D))return!1;this.markupsDiv=document.createElement("div");this.markupsDiv.id="markups";this.markupsDiv.style.left=0;this.markupsDiv.style.top=
0;this.markupsDiv.style.right=0;this.markupsDiv.style.bottom=0;this.markupsDiv.style.width="100%";this.markupsDiv.style.height="100%";this.markupsDiv.style.backgroundColor="transparent";this.markupsDiv.style.position="absolute";this.markupsDiv.style.zIndex=10;this.markupsDiv.addEventListener("mousemove",this.onMouseMove.bind(this));this.markupsDiv.addEventListener("mouseup",this.onMouseUp.bind(this));var a=document.createElement("div");a.className="markups-message-container";a.innerText=Autodesk.Viewing.i18n.translate("View is locked during mark-up.");
a.setAttribute("data-i18n","View is locked during mark-up.");this.markupsDiv.appendChild(a);a=document.createElement("reset");a.className="markups-cancel-button";a.innerText=Autodesk.Viewing.i18n.translate("Cancel");a.setAttribute("data-i18n","Cancel");a.addEventListener("mouseup",this.onMarkupCancelClick.bind(this));a.addEventListener("mousemove",this.onMarkupCancelMove.bind(this));this.markupsDiv.appendChild(a);return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.unload=function(){this.markupsDiv.parentNode&&this.markupsDiv.parentNode.removeChild(this.markupsDiv);return!0};Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.startRectangle=function(a,b,c){this.startDrawing(a,b,c)&&(this.mCurrentMarkupIndex=-1)};Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.clear=function(){this.markers.clearMarkups()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.startDrawing=function(a,b,c){if(this.mDrawing)return!1;this.mDrawing=!0;this.mCurrentMarkupIndex=-1;this.mCurrentStrokeWidth=a;this.mCurrentStrokeColor=b;this.mOnFinishCallback=c;this.mCurrentMarkups=this.markers.markups.slice();this.container.appendChild(this.markupsDiv);return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.endDrawing=function(a){if(!this.mDrawing)return!1;this.mDrawing=!1;this.mCurrentMarkupIndex=-1;if(a)for(var b=this.mCurrentMarkups,c=b.length,f=0;f<c;++f)this.markers.markups.push(b[f]),this.markers.update();this.markupsDiv.parentNode.removeChild(this.markupsDiv);this.mOnFinishCallback&&this.mOnFinishCallback(a);return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.onMouseMove=function(a){if(-1!=this.mCurrentMarkupIndex){var b=a.layerX,c=a.layerY;a=Math.min(this.mCurrentRectangleIniPoint.x,b);var f=Math.min(this.mCurrentRectangleIniPoint.y,c),b=Math.abs(this.mCurrentRectangleIniPoint.x-b),c=Math.abs(this.mCurrentRectangleIniPoint.y-c);this.markers.setRectangularMarkup(this.mCurrentMarkupIndex,a,f,b,c,this.mCurrentStrokeWidth,this.mCurrentStrokeColor)}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.onMouseUp=function(a){if(this.markers)if(-1==this.mCurrentMarkupIndex){var b=a.layerX;a=a.layerY;this.mCurrentRectangleIniPoint=new THREE.Vector2(b,a);this.mCurrentMarkupIndex=this.markers.addRectangularMarkup(b,a,1,1,this.mCurrentStrokeWidth,this.mCurrentStrokeColor)}else this.onMouseMove(a),this.endDrawing(!1);else this.endDrawing(!0)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.onMarkupCancelClick=function(){event.cancelBubble=!0;event.preventDefault();-1!=this.mCurrentMarkupIndex&&this.markers.removeMarkupAt(this.mCurrentMarkupIndex);this.endDrawing(!0)};Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.onMarkupCancelMove=function(a){a.cancelBubble=!0;a.preventDefault()};Autodesk.Viewing.Extensions.Markers.ViewerMarkups.prototype.__defineGetter__("markers",function(){return this.viewer.loadedExtensions["Autodesk.Markers"]});
Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Markups",Autodesk.Viewing.Extensions.Markers.ViewerMarkups);AutodeskNamespace("Autodesk.Viewing.Extensions");Autodesk.Viewing.TOGGLE_COMMENT_PANEL="toggleCommentPanel";Autodesk.Viewing.UNLOAD_COMMENT_PANEL="unloadCommentPanel";Autodesk.Viewing.Extensions.Commenting=function(a,b){Autodesk.Viewing.Extension.call(this,a,b)};Autodesk.Viewing.Extensions.Commenting.prototype=Object.create(Autodesk.Viewing.Extension.prototype);
Autodesk.Viewing.Extensions.Commenting.prototype.constructor=Autodesk.Viewing.Extensions.Commenting;
Autodesk.Viewing.Extensions.Commenting.prototype.load=function(){function a(b){100<=b.percent&&(c.viewer.removeEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,a),c.panel.requestComments())}function b(a){c.viewer.removeEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,b);c.createUI()}if(!(this.viewer instanceof Autodesk.Viewing.Viewer3D))return!1;this.inViewer=!this.options||!this.options.parentContainerId;var c=this;if(this.inViewer)this.dockingPanel=new Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel(this.viewer),
this.panel=this.dockingPanel.commentPanel,this.viewer.addPanel(this.dockingPanel);else{var f=this.options.parentContainerId,d=new Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate;this.panel=new Autodesk.Viewing.Extensions.Commenting.CommentPanel(d,this.viewer,f)}this.viewer.addEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,a);this.viewer.modelTools&&0<this.viewer.modelTools.getToolCount()?b():this.viewer.addEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,b);return!0};
Autodesk.Viewing.Extensions.Commenting.prototype.unload=function(){this.panel.destroy();this.dockingPanel&&(this.viewer.removePanel(this.dockingPanel),this.dockingPanel.uninitialize());this.destroyUI();this.inViewer=!1;this.dockingPanel=this.panel=null;this.viewer.fireEvent({type:Autodesk.Viewing.UNLOAD_COMMENT_PANEL});return!0};Autodesk.Viewing.Extensions.Commenting.prototype.createUI=function(){};
Autodesk.Viewing.Extensions.Commenting.prototype.destroyUI=function(){if(this.options.destroyUI&&"function"===typeof this.options.destroyUI)this.options.destroyUI.call(this);else if(this.commentButton){var a=this.viewer.getToolbar(!1);a&&a.removeFromSubToolbar(Autodesk.Viewing.TOOLBAR.MODELTOOLSID,this.commentButton)}};Autodesk.Viewing.theExtensionManager.registerExtension("Commenting",Autodesk.Viewing.Extensions.Commenting);"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions");
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate=function(){};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate;Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerClick=function(a,b){a.selectedComment!=b?(a.selectedComment&&a.clearSelectedSnapshot(!0),a.restoreCommentSnapshot(b),a.addCommentAnimationUpdateInterval(b)):a.selectedComment&&a.clearSelectedSnapshot()};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerEnter=function(a,b){var c=document.getElementById("comment-panel-entry-"+b.id);a.selectedComment&&a.selectedComment.id!=b.id&&a.hideCommentLine(a.selectedComment);a.drawCommentLine(b,c)};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerLeave=function(a,b){if(a.selectedComment)if(a.selectedComment!=b){if(a.hideCommentLine(b),a.selectedComment["node-id"]){var c=document.getElementById("comment-panel-entry-"+a.selectedComment.id);a.drawCommentLine(a.selectedComment,c)}}else b["node-id"]||a.hideCommentLine(b);else a.hideCommentLine(b)};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onViewerMarkerClick=function(a,b){a.isVisible()||(a.setVisible(!0),a.scrollToComment(b));if(a.selectedComment!=b){a.selectedComment&&a.clearSelectedSnapshot();a.restoreCommentSnapshot(b);a.addCommentAnimationUpdateInterval(b);var c=document.getElementById("comment-panel-entry-"+b.id);a.drawCommentLine(b,c)}else a.clearSelectedSnapshot(),b["node-id"]?a.markers.clearHighlightedNodes():a.markers.setModelHighlight(!1)};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.isVisible=function(a){return"block"===document.getElementById(a.rootContainerId).style.display};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.setVisible=function(a,b){var c=document.getElementById(a.rootContainerId);b?(c.style.display="block",a.markers.setVisible(!1)):(c.style.display="none",a.clearSelectedSnapshot(!0),a.markers.setVisible(!0));a.viewer.fireEvent({type:Autodesk.Viewing.TOGGLE_COMMENT_PANEL,visible:b})};
Autodesk.Viewing.Extensions.Commenting.CommentPanel=function(a,b,c){this.VIEWER_STATE_FILTER=!0;this.RESTORE_IS_IMMEDIATE=!1;this.myDelegate=a;this.viewer=b;this.commentList=[];this.nextCommentId=1;this.commentsRequested=!1;this.selectedComment=null;this.buildPanel(a,c)};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.CommentPanel;
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.buildPanel=function(a,b){var c=this,f;"string"===typeof b?(f=b,b=document.getElementById(f)):f=b.id;this.parentContainerId=f;this.rootContainerId=f+"-comment-panel-wrapper";var d=document.createElement("div");d.id=this.rootContainerId;d.className="comment-panel-wrapper";b.appendChild(d);f=document.createElement("div");f.className="comment-panel-container";var g=document.createElement("textarea");g.name="text";g.className="comment-panel-post-textarea";
g.placeholder=Autodesk.Viewing.i18n.translate("Comment");g.setAttribute("data-i18n","[placeholder]Comment");var h=document.createElement("input");h.type="submit";h.value=Autodesk.Viewing.i18n.translate("Post");h.className="comment-panel-post-button";h.setAttribute("data-i18n","[value]Post");var k=null,k=document.createElement("table"),l=document.createElement("tbody"),m=document.createElement("tr"),p=document.createElement("td");p.className="comment-markup-button";var n=document.createElement("img");
n.src=RESOURCE_ROOT+"icons/markup_draw.png";p.appendChild(n);m.appendChild(p);p.addEventListener("click",function(){this.markups.startRectangle(3,"#FFFFFF");this.markups.clear()}.bind(this));p=document.createElement("td");p.className="comment-markup-button";n=document.createElement("img");n.src=RESOURCE_ROOT+"icons/markup_erase.png";p.appendChild(n);m.appendChild(p);p.addEventListener("click",function(){this.markups.clear()}.bind(this));l.appendChild(m);k.appendChild(l);f.appendChild(g);f.appendChild(h);
k&&f.appendChild(k);k=document.createElement("div");k.className="comment-panel-entry-container";d.appendChild(f);d.appendChild(k);var q=function(){c.onPostClick(c)};h.addEventListener("click",q);var r=function(a){if(13==a.keyCode)c.onPostClick(c)};g.addEventListener("keypress",r);var s=function(a){c.selectedComment&&c.selectedComment["node-id"]&&(a=document.getElementById("comment-panel-entry-"+c.selectedComment.id),c.drawCommentLine(c.selectedComment,a))};d.addEventListener("scroll",s);this.clearEventListeners=
function(){h.removeEventListener("click",q);g.removeEventListener("keypress",r);d.removeEventListener("scroll",s)};this.postTextArea=g;this.commentEntryContainer=k};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.destroy=function(){this.clearEventListeners();this.clearEventListeners=null;var a,b;a=0;for(b=this.commentList.length;a<b;++a){var c=this.commentList[a];document.getElementById("comment-panel-entry-"+c.id).removeListeners();this.markers.removeMarker("marker-"+c.id)}this.commentList=null;this.nextCommentId=1;this.commentsRequested=!1;this.commentEntryContainer=this.postTextArea=this.selectedComment=null;a=document.getElementById(this.parentContainerId);
b=document.getElementById(this.rootContainerId);this.rootContainerId=this.parentContainerId=null;a.removeChild(b);Autodesk.Viewing.Extensions.Commenting.CommentStorage.destroy()};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.delegate=function(){return this.myDelegate};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.isVisible=function(){return this.myDelegate.isVisible(this)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.setVisible=function(a){this.myDelegate.setVisible(this,a)};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.onPostClick=function(a){if(""!==a.postTextArea.value){var b=a.createComment();a.renderComment(a,b);Autodesk.Viewing.Extensions.Commenting.CommentStorage.saveComment(b)}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.onPostResponseClick=function(a,b,c){if(""!==c.value){var f={content:c.value};void 0==a.responses&&(a.responses=[]);a.responses.push(f);c.value="";this.renderResponse(b,f);this.updateResponseHeight(a);Autodesk.Viewing.Extensions.Commenting.CommentStorage.saveComment(a)}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.createComment=function(){var a=null,b=this.nextCommentId++,c=this.viewer.getState(this.VIEWER_STATE_FILTER),f=this.viewer.viewerState.extractSelectedNodeIds(c),d=this.viewer.viewerState.extractIsolatedNodeIds(c);0<f.length?a=f[0]:0<d.length&&(a=d[0]);return{id:b,content:this.postTextArea.value,state:c,"marker-id":"marker-"+b,"node-id":a,"highlight-node-ids":f.concat(d)}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.renderComment=function(a,b){a.commentList.push(b);var c=this,f=document.createElement("div");f.className="comment-panel-entry";f.id="comment-panel-entry-"+b.id;var d=document.createElement("div");d.className="comment-panel-entry-content";var g=document.createElement("p");g.className="comment-panel-entry-paragraph";g.textContent=b.content;var h=document.createElement("span");h.className="comment-panel-content-replies";var k=document.createElement("br");
g.appendChild(k);g.appendChild(h);d.appendChild(g);a.postTextArea.value="";var g=b["node-id"],l=(new Autodesk.Viewing.Extensions.Commenting.Marker(b.id,null,g?"right":"")).getDiv(),m=l.data.cloneDiv("");m.id="comment-marker-"+b.id;m.classList.add("comment-panel-entry-marker");f.appendChild(m);var p=function(){a.myDelegate.onCommentMarkerClick(a,b)};m.addEventListener("click",p,!1);var n=function(c){a.myDelegate.onCommentMarkerEnter(a,b);c.stopPropagation();c.preventDefault()};m.addEventListener("mouseenter",
n,!1);var q=function(c){a.myDelegate.onCommentMarkerLeave(a,b);c.stopPropagation();c.preventDefault()};m.addEventListener("mouseleave",q,!1);var r=function(c){a.myDelegate.onViewerMarkerClick(a,b);c.stopPropagation();c.preventDefault()};l.addEventListener("click",r,!1);g?(m.getElementsByClassName("comment-marker-arrow")[0].classList.add("comment-panel-marker-arrow-override"),this.markers.setNodeMarker(b["marker-id"],g,l,"#FFFFFF")):this.markers.setModelMarker(b["marker-id"],l);f.appendChild(d);this.commentEntryContainer.appendChild(f);
g=document.createElement("div");g.id="comment-panel-response-wrapper-"+b.id;g.className="comment-panel-response-wrapper";var s=document.createElement("div");s.className="comment-panel-response-container";if(b.responses){for(var k=0,u=b.responses.length;k<u;++k)this.renderResponse(s,b.responses[k]);this.updateResponseText(h,b)}var w=document.createElement("textarea");w.name="text";w.className="comment-panel-response-post-textarea";w.placeholder="Response";w.setAttribute("data-i18n","[placeholder]Response");
var v=document.createElement("input");v.type="submit";v.value="Post";v.className="comment-panel-response-post-button";v.setAttribute("data-i18n","[value]Post");g.appendChild(s);g.appendChild(w);g.appendChild(v);d.appendChild(g);var B=function(a){c.onPostResponseClick(b,s,w);c.updateResponseText(h,b)};v.addEventListener("click",B);var z=function(a){13==a.keyCode&&(c.onPostResponseClick(b,s,w),c.updateResponseText(h,b))};w.addEventListener("keypress",z);var A=document.createElement("a");A.className=
"comment-panel-entry-delete";A.href="#";A.textContent="Delete Comment";A.setAttribute("data-i18n","Delete Comment");var C=function(c){c.stopPropagation();a.deleteComment(a,b.id)};A.addEventListener("click",C);d.appendChild(A);f.removeListeners=function(){m.removeEventListener("click",p,!1);m.removeEventListener("mouseenter",n);m.removeEventListener("mouseleave",q);l.removeEventListener("click",r);v.removeEventListener("click",B);A.removeEventListener("click",C);w.removeEventListener("keypress",z)}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.renderResponse=function(a,b){var c=document.createElement("div");c.className="comment-panel-response-content";var f=document.createElement("p");f.className="comment-panel-response-paragraph";f.textContent=b.content;c.appendChild(f);a.appendChild(c)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.updateResponseHeight=function(a){var b=document.getElementById("comment-panel-response-wrapper-"+a.id);b.style.maxHeight=this.selectedComment&&this.selectedComment.id===a.id?b.scrollHeight+"px":"0px"};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.updateResponseText=function(a,b){var c=b.responses.length;a.innerHTML=0===c?"":b.responses.length+(1===c?" reply":" replies")};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.deleteComment=function(a,b){var c="comment-panel-entry-"+b,f=this.commentEntryContainer.children,d,g;d=0;for(g=f.length;d<g;++d){var h=f[d];if(h.id==c){h.removeListeners();this.commentEntryContainer.removeChild(h);break}}c=a.commentList;d=0;for(g=c.length;d<g;++d)if(f=c[d],f.id===b){f["marker-id"]&&(a.hideCommentLine(f),a.selectedComment==f&&(a.selectedComment=null));d=c.splice(d,1)[0];Autodesk.Viewing.Extensions.Commenting.CommentStorage.deleteComment(d);
break}this.markers.removeMarker("marker-"+b);this.markups.clear()};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.serializeComment=function(a,b){this.viewer.impl.svfloader.postComments(viewer,b)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.drawCommentLine=function(a,b){if(a["node-id"]){var c=document.getElementsByClassName("adsk-viewing-viewer")[0],c=this.getElementPosition(c),f=this.getElementPosition(b),d=b.currentStyle||window.getComputedStyle(b),g=document.getElementById(this.rootContainerId),d=b.offsetLeft+parseInt(d.marginLeft);this.markers.setLine("line-"+a.id,a["node-id"],Math.floor(f.x-c.x-d)+0.5,Math.floor(f.y-c.y+28-g.scrollTop)+0.5,"#FFFFFF");if(c=this.viewer.model)for(c=
c.getNodesByIds(a["highlight-node-ids"]),f=c.length,g=0;g<f;++g)this.markers.highlightNode(c[g],a.id)}else this.markers.setModelHighlight(!0)};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.getElementPosition=function(a,b,c){for(var f=0,d=0,g=a;a;)f+=a.offsetLeft-a.scrollLeft+a.clientLeft,d+=a.offsetTop-a.scrollTop+a.clientTop,a=a.offsetParent;b&&(f+=g.offsetWidth);c&&(d+=g.offsetHeight);return{x:f,y:d}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.scrollToComment=function(a){a=document.getElementById("comment-panel-entry-"+a.id);a=this.getElementPosition(a);document.getElementById(this.rootContainerId).scrollTop=a.y};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.fitCommentDivInPanel=function(a){a=this.getElementPosition(a,!1,!0);this.getElementPosition(this.commentEntryContainer);var b=document.getElementById(this.rootContainerId);a.y>b.scrollTop+b.offsetHeight&&(b.scrollTop=a.y-b.offsetHeight)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.addCommentAnimationUpdateInterval=function(a){var b=0,c=document.getElementById("comment-panel-entry-"+a.id),f=this;this.timer=setInterval(function(){f.fitCommentDivInPanel(c);a["node-id"]&&f.drawCommentLine(a,c);b+=30;400<=b&&clearInterval(f.timer)},30)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.hideCommentLine=function(a){if(a["node-id"]){this.markers.removeLine("line-"+a.id);var b=this.viewer.model;if(b)for(var b=b.getNodesByIds(a["highlight-node-ids"]),c=b.length,f=0;f<c;++f)this.markers.clearHighlightedNode(b[f],a.id);this.timer&&(clearInterval(this.timer),this.timer=null)}else this.markers.setModelHighlight(!1)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.restoreCommentSnapshot=function(a){this.selectedComment=a;document.getElementById("comment-marker-"+this.selectedComment.id).classList.add("comment-marker-selected");this.updateResponseHeight(a);this.viewer.restoreState(a.state,this.VIEWER_STATE_FILTER,this.RESTORE_IS_IMMEDIATE);this.replaceSelectionWithCommentHighlights(a)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.clearSelectedSnapshot=function(a){this.selectedComment&&(document.getElementById("comment-marker-"+this.selectedComment.id).classList.remove("comment-marker-selected"),a&&this.hideCommentLine(this.selectedComment),a=this.selectedComment,this.selectedComment=null,this.updateResponseHeight(a))};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.replaceSelectionWithCommentHighlights=function(a){var b=this.viewer.impl?this.viewer.impl.selector:null;b&&b.clearSelection();if(a["node-id"]){if(b=this.viewer.model){a=b.getNodesByIds(a["highlight-node-ids"]);for(var b=a.length,c=0;c<b;++c)this.markers.highlightNode(a[c])}}else this.markers.setModelHighlight(!0)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.requestComments=function(){if(!this.commentsRequested){this.commentsRequested=!0;var a=this,b=this.viewer.impl.svfloader.svfUrn,c=function(){Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(function(b){for(var c=0,g=b.length;c<g;++c){var h=b[c];a.renderComment(a,h);h.id>=a.nextCommentId&&(a.nextCommentId=h.id+1)}},"local",b);a.isVisible()||a.markers.setVisible(!0)};this.viewer.model&&this.viewer.model.isLoadDone()?c():
this.viewer.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)}};
Autodesk.Viewing.Extensions.Commenting.Marker=function(a,b,c){this.commentId=a;this.symbolType=b||0;this.lastDirection="";c=c||"";this.holderDiv=document.createElement("div");this.holderDiv.className="comment-marker-holder";this.holderDiv.data=this;this.arrowDiv=document.createElement("div");this.arrowDiv.className="comment-marker-arrow";this.symbolDiv=document.createElement("div");this.symbolDiv.className="comment-marker-symbol";this.symbolDiv.innerHTML=a;0<this.symbolType&&this.symbolDiv.classList.add("comment-marker-symbol"+
b);this.holderDiv.appendChild(this.arrowDiv);this.holderDiv.appendChild(this.symbolDiv);this.lastArrowClassName=null;this.setDirection(c)};Autodesk.Viewing.Extensions.Commenting.Marker.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.Marker;
Autodesk.Viewing.Extensions.Commenting.Marker.prototype.setDirection=function(a){if(this.lastDirection!=a&&(this.lastArrowClassName&&(this.arrowDiv.classList.remove(this.lastArrowClassName),this.lastArrowClassName=null),""!=a)){var b;switch(a){case "left":b="comment-marker-left";break;case "right":b="comment-marker-right";break;case "outside_left":b="comment-marker-outside-left";break;case "outside_right":b="comment-marker-outside-right";break;case "outside_top":b="comment-marker-outside-top";break;
case "outside_bottom":b="comment-marker-outside-bottom"}this.arrowDiv.classList.add(b);this.lastArrowClassName=b;this.lastDirection=a}};Autodesk.Viewing.Extensions.Commenting.Marker.prototype.setNumber=function(a){this.symbolDiv.innerHTML=a};Autodesk.Viewing.Extensions.Commenting.Marker.prototype.getDiv=function(){return this.holderDiv};
Autodesk.Viewing.Extensions.Commenting.Marker.prototype.cloneDiv=function(a){a=null!=a?a:this.lastDirection;return(new Autodesk.Viewing.Extensions.Commenting.Marker(this.commentId,this.symbolType,a)).getDiv()};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.__defineGetter__("markers",function(){return this.viewer.loadedExtensions["Autodesk.Markers"]});Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.__defineGetter__("markups",function(){return this.viewer.loadedExtensions["Autodesk.Markups"]});
AutodeskNamespace("Autodesk.Viewing.Extensions.Commenting");
Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel=function(a){this.viewer=a;var b=this;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"CommentPanel","Comment and Markers");var c=new Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate;c.getViewer=function(){return a};c.isVisible=function(a){return b.isVisible()};c.setVisible=function(a,c){return b.setVisible(c)};this.commentPanel=new Autodesk.Viewing.Extensions.Commenting.CommentPanel(c,a,"CommentPanel");this.container.dockRight=
!0};Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel;Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel.prototype.uninitialize=function(){this.commentPanel=this.viewer=null;Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this)};
Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel.prototype.setVisible=function(a){a?this.commentPanel&&this.commentPanel.markers.setVisible(!1):this.commentPanel&&(this.commentPanel.clearSelectedSnapshot(!0),this.commentPanel.markers.setVisible(!0));Autodesk.Viewing.UI.DockingPanel.prototype.setVisible.call(this,a)};AutodeskNamespace("Autodesk.Viewing.Extensions.Commenting.CommentStorage");Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance;
Autodesk.Viewing.Extensions.Commenting.CommentStorage=function(){var a=this;this.comments=[];this.persistence=null;this.loaded=this.loading=!1;this.onLoadCallbacks=[];this.urn=null;this.byId={};this.getIndexById=function(b){for(var c=a.comments.length,f=0;f<c;++f)if(a.comments[f].id==b)return f;return-1}};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance=function(){Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance||(Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance=new Autodesk.Viewing.Extensions.Commenting.CommentStorage);return Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.setPersistenceType=function(a,b,c){a=a||"none";var f=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();f.loaded=!1;f.loading=!1;if("string"==typeof a)switch(a){case "none":f.loaded=!0;f.loading=!0;b=!1;f.persistence=null;"function"==typeof c&&c();break;default:f.persistence=new Autodesk.Viewing.Extensions.Commenting.CommentStorage.LocalCommentStorage}else"function"==typeof a?f.persistence=new a:"object"==typeof a&&(f.persistence=
a);b&&Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c,null,f.urn)};Autodesk.Viewing.Extensions.Commenting.CommentStorage.loaded=function(){return Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance().loaded};Autodesk.Viewing.Extensions.Commenting.CommentStorage.getAllComments=function(a){function b(b){a(c.comments)}var c=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();c.loaded?b(c.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(b)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.getCommentById=function(a,b){function c(c){b(f.byId[a])}var f=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();f.loaded?c(f.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.getCommentsByNodeId=function(a,b){function c(c){c=[];for(var g=f.comments.length,h=0;h<g;++h){var k=f.comments[h];k["node-id"]==a&&c.push(k)}b(c)}var f=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();f.loaded?c(f.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments=function(a,b,c){var f=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();c&&f.urn!=c&&(f.loaded=!1,f.loading=!1,f.urn=c);f.persistence?f.loaded?"function"==typeof a&&a(f.comments):("function"==typeof a&&f.onLoadCallbacks.push(a),f.loading||(f.loading=!0,f.comments=[],f.byId={},f.persistence&&"function"==typeof f.persistence.loadComments?(a=a||function(){},f.persistence.loadComments(c,function(a){var b;f.loaded=!0;
if(a&&Array.isArray(a))for(f.comments=a,k=a.length,b=0;b<k;++b){var c=a[b];f.byId[c.id]=c}var k=f.onLoadCallbacks.length;for(b=0;b<k;++b)(0,f.onLoadCallbacks[b])(f.comments)})):"function"==typeof a&&a(f.comments))):Autodesk.Viewing.Extensions.Commenting.CommentStorage.setPersistenceType(b||"local",!0,a)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.saveComment=function(a,b){function c(c){c=f.getIndexById(a.id);-1<c?f.comments[c]=a:f.comments.push(a);f.byId[a.id]=a;f.persistence&&"function"==typeof f.persistence.saveComment&&f.persistence.saveComment(a,f.comments,f.urn,b||function(){})}var f=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();f.loaded?c(f.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.deleteComment=function(a,b){function c(c){c=f.getIndexById(a.id);-1<c&&f.comments.splice(c,1);delete f.byId[a.id];f.persistence&&"function"==typeof f.persistence.deleteComment&&f.persistence.deleteComment(a,f.comments,f.urn,b||function(){})}var f=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();f.loaded?c(f.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.getCurrentURN=function(){return Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance().urn};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.destroy=function(){if(Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance){var a=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();a.comments=[];a.persistence=null;a.loading=!1;a.loaded=!1;a.onLoadCallbacks=[];a.byId={};Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance=null}};AutodeskNamespace("Autodesk.Viewing.Extensions.Commenting.CommentStorage");
Autodesk.Viewing.Extensions.Commenting.CommentStorage.LocalCommentStorage=function(){var a=[];this.loadComments=function(b,c){var f=window.localStorage.getItem(this.getStorageName(b));if(f)for(var f=JSON.parse(f),d=0,g=f.length;d<g;++d)a.push(f[d]);c(a)};this.saveComment=function(a,c,f,d){window.localStorage.setItem(this.getStorageName(f),JSON.stringify(c))};this.deleteComment=function(a,c,f,d){window.localStorage.setItem(this.getStorageName(f),JSON.stringify(c))};this.getStorageName=function(a){var c=
"comments";a&&(c+="."+a);return c}};
if("undefined"!==typeof window){var RTCPeerConnection=null,getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,trace=function(a){"\n"==a[a.length-1]&&(a=a.substring(0,a.length-1));console.log((performance.now()/1E3).toFixed(3)+": "+a)};navigator.mozGetUserMedia?(webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]),RTCPeerConnection=mozRTCPeerConnection,RTCSessionDescription=
mozRTCSessionDescription,RTCIceCandidate=mozRTCIceCandidate,getUserMedia=navigator.mozGetUserMedia.bind(navigator),createIceServer=function(a,b,c){var f=null,d=a.split(":");0===d[0].indexOf("stun")?f={url:a}:0!==d[0].indexOf("turn")||-1===a.indexOf("transport=udp")&&-1!==a.indexOf("?transport")||(f={url:a.split("?")[0],credential:c,username:b});return f},attachMediaStream=function(a,b){console.log("Attaching media stream");a.mozSrcObject=b;a.play()},reattachMediaStream=function(a,b){console.log("Reattaching media stream");
a.mozSrcObject=b.mozSrcObject;a.play()},MediaStream.prototype.getVideoTracks=function(){return[]},MediaStream.prototype.getAudioTracks=function(){return[]}):navigator.webkitGetUserMedia?(webrtcDetectedBrowser="chrome",webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2]),createIceServer=function(a,b,c){var f=null,d=a.split(":");0===d[0].indexOf("stun")?f={url:a}:0===d[0].indexOf("turn")&&(28>webrtcDetectedVersion?(a=a.split("turn:"),f={url:"turn:"+b+"@"+a[1],credential:c}):
f={url:a,credential:c,username:b});return f},RTCPeerConnection=webkitRTCPeerConnection,getUserMedia=navigator.webkitGetUserMedia.bind(navigator),attachMediaStream=function(a,b){"undefined"!==typeof a.srcObject?a.srcObject=b:"undefined"!==typeof a.mozSrcObject?a.mozSrcObject=b:"undefined"!==typeof a.src?a.src=URL.createObjectURL(b):console.log("Error attaching stream to element.")},reattachMediaStream=function(a,b){a.src=b.src},webkitMediaStream.prototype.getVideoTracks||(webkitMediaStream.prototype.getVideoTracks=
function(){return this.videoTracks},webkitMediaStream.prototype.getAudioTracks=function(){return this.audioTracks}),webkitRTCPeerConnection.prototype.getLocalStreams||(webkitRTCPeerConnection.prototype.getLocalStreams=function(){return this.localStreams},webkitRTCPeerConnection.prototype.getRemoteStreams=function(){return this.remoteStreams})):console.log("Browser does not appear to be WebRTC-capable")}AutodeskNamespace("Autodesk.Viewing.Private.Collaboration");
(function(){var a=Autodesk.Viewing,b=a.Private,c=b.Collaboration;c.Client=function(){};c.Client.prototype.constructor=c.Client;THREE.EventDispatcher.prototype.apply(c.Client.prototype);c.P2PClient=function(a){function b(){try{p=new RTCPeerConnection(u),p.onicecandidate=function(a){a.candidate?m.sendPrivateMessage(q,{type:"candidate",label:a.candidate.sdpMLineIndex,id:a.candidate.sdpMid,candidate:a.candidate.candidate}):console.log("End of candidates.")},p.onaddstream=function(a){l.dispatchEvent({type:"remoteStreamAdded",
data:a.stream})},p.onremovestream=function(a){l.dispatchEvent({type:"remoteStreamRemoved",data:a.stream})}}catch(a){console.log("Failed to create PeerConnection, exception: "+a.message),alert("Cannot create RTCPeerConnection object.")}}function c(a){console.log("createOffer() error: ",e)}function h(a){p.setLocalDescription(a);m.sendPrivateMessage(q,a);if(s.length){for(a=0;a<s.length;a++)p.addIceCandidate(s[a]);s=[]}}function k(){n=!1;p.close();q=r=p=null}var l=this,m=a,p,n=!1,q,r,s=[],u={iceServers:[{url:"stun:stun.l.google.com:19302"}]},
w={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};m.addEventListener("privateMessage",function(a){var b=a.data.msg;console.log("Client received message:",b);"offer"!=b.type||n?"answer"===b.type&&n?p.setRemoteDescription(new RTCSessionDescription(b)):"candidate"===b.type?(a=new RTCIceCandidate({sdpMLineIndex:b.label,candidate:b.candidate}),n?p.addIceCandidate(a):s.push(a)):"bye"===b&&n&&(l.dispatchEvent({type:"remoteHangup",data:null}),console.log("Session terminated."),k()):l.receiveCall(a.data)});
this.hangup=function(){console.log("Hanging up.");n&&(k(),m.sendPrivateMessage(q,"bye"))};this.initUserMedia=function(a){var b={video:!0,audio:!0};window.getUserMedia(b,function(b){console.log("Adding local stream.");a&&a(b);l.dispatchEvent({type:"localStreamAdded",data:b})},function(a){console.log("getUserMedia error: ",a)});console.log("Getting user media with constraints",b)};this.callUser=function(a){q=a;console.log("Calling user "+q);this.initUserMedia(function(a){r=a;n||"undefined"==typeof r||
(b(),p.addStream(r),n=!0,console.log("Sending offer to peer"),p.createOffer(h,c))})};this.receiveCall=function(a){q=a.from;this.initUserMedia(function(c){r=c;n||"undefined"==typeof r||(b(),p.addStream(r),n=!0);p.setRemoteDescription(new RTCSessionDescription(a.msg));console.log("Sending answer to peer.");p.createAnswer(h,null,w)})};this.getCurrentCallTarget=function(){return q}};c.P2PClient.prototype.constructor=c.P2PClient;THREE.EventDispatcher.prototype.apply(c.P2PClient.prototype);c.ViewTransceiver=
function(c){function d(a){p=!0;a=JSON.parse(a.data.msg);s.restoreState(a);m.impl.invalidate(!0,!1,!0);p=!1}function g(a){a=a.data.msg;a[0]!=q&&(q=a[0],l.dispatchEvent({type:"controlChange",data:q}));n=!1;m.navigation.setView((new THREE.Vector3).set(a[1],a[2],a[3]),(new THREE.Vector3).set(a[4],a[5],a[6]));m.navigation.setCameraUpVector((new THREE.Vector3).set(a[7],a[8],a[9]))}function h(a){if(n){a=a.camera;a=[a.position.x,a.position.y,a.position.z,a.target.x,a.target.y,a.target.z,a.up.x,a.up.y,a.up.z];
for(var b=0;b<a.length;b++)a[b]=Math.round(1E3*a[b])/1E3;a.unshift(c.getLocalId());r.sendMessage("camera",a);q!=a[0]&&(q=a[0],l.dispatchEvent({type:"controlChange",data:q}))}}function k(a){n&&!p&&(a=s.getState(u),c.sendMessage("state",JSON.stringify(a)))}var l=this,m=this.viewer=null,p=!1,n=!1,q,r=this.client=c,s,u={seedURN:!1,objectSet:!0,viewport:!1,renderOptions:{environment:!1,ambientOcclusion:!1,toneMap:{exposure:!1},appearance:!1}};this.takeControl=function(){n=!0};this.attach=function(c){m&&
this.detach();this.viewer=m=c;s=new b.ViewerState(m);r.addEventListener("cameraChange",g);r.addEventListener("viewerState",d);m.hasEventListener(a.CAMERA_CHANGE_EVENT,h)||m.addEventListener(a.CAMERA_CHANGE_EVENT,h);m.hasEventListener(a.SELECTION_CHANGED_EVENT,k)||(m.addEventListener(a.SELECTION_CHANGED_EVENT,k),m.addEventListener(a.ISOLATE_EVENT,k),m.addEventListener(a.HIDE_EVENT,k),m.addEventListener(a.SHOW_EVENT,k),m.addEventListener(a.HIGHLIGHT_EVENT,k),m.addEventListener(a.EXPLODE_CHANGE_EVENT,
k),m.addEventListener(a.LAYER_VISIBILITY_CHANGED_EVENT,k))};this.detach=function(){r&&(r.removeEventListener("cameraChange",g),r.removeEventListener("viewerState",d));m&&(m.removeEventListener(a.CAMERA_CHANGE_EVENT,h),m.removeEventListener(a.SELECTION_CHANGED_EVENT,k),m.removeEventListener(a.ISOLATE_EVENT,k),m.removeEventListener(a.HIDE_EVENT,k),m.removeEventListener(a.SHOW_EVENT,k),m.removeEventListener(a.HIGHLIGHT_EVENT,k),m.removeEventListener(a.EXPLODE_CHANGE_EVENT,k),m.removeEventListener(a.LAYER_VISIBILITY_CHANGED_EVENT,
k),s=this.viewer=m=null)}};c.ViewTransceiver.prototype.constructor=c.ViewTransceiver;THREE.EventDispatcher.prototype.apply(c.ViewTransceiver.prototype)})();AutodeskNamespace("Autodesk.Viewing.Private.Collaboration");
(function(){var a=Autodesk.Viewing.Private.Collaboration;a.JoyStick=function(a,c){var f,d=this.position=[0,0],g;this.dragStart=function(a){};this.dragMove=function(f){var k=(f.center.y-c.offsetTop)/c.offsetHeight;d[0]=1<(f.center.x-c.offsetLeft)/c.offsetWidth*2-1?1:-1>(f.center.x-c.offsetLeft)/c.offsetWidth*2-1?-1:(f.center.x-c.offsetLeft)/c.offsetWidth*2-1;d[1]=-(1<2*k-1?1:-1>2*k-1?-1:2*k-1);a.sendState();g.style.left=25*d[0]+40+"%";g.style.top=25*-d[1]+40+"%"};this.dragEnd=function(c){d[0]=0;d[1]=
0;a.sendState();g.style.left="40%";g.style.top="40%"};this.onSingleTap=function(a){console.log("on tap")};this.onDoubleTap=function(a){console.log("double tap")};f=document.createElement("div");f.classList.add("joystickOuterRing");c.appendChild(f);g=document.createElement("div");g.classList.add("joystickInnerRing");c.appendChild(g);"ontouchstart"in window&&(f=new Hammer.Manager(c,{recognizers:[[Hammer.Tap,{event:"singletap"}],[Hammer.Tap,{event:"doubletap",taps:2,interval:500,threshold:6,posThreshold:30}],
[Hammer.Pan,{event:"drag",pointers:1}]]}),f.on("dragstart",this.dragStart),f.on("dragmove",this.dragMove),f.on("dragend",this.dragEnd),f.on("singletap",this.onSingleTap),f.on("doubletap",this.onDoubleTap))};a.RemoteControl=function(b,c){function f(){90==window.orientation||-90==window.orientation?(d.style.width="50%",d.style.height="100%",g.style.width="50%",g.style.height="100%",g.style.top="0%",g.style.left="50%"):(d.style.width="100%",d.style.height="50%",g.style.width="100%",g.style.height="50%",
g.style.top="50%",g.style.left="0%")}var d,g,h,k;this.sendState=function(){b.sendMessage("joystick",{x1:h.position[0],y1:h.position[1],x2:k.position[0],y2:k.position[1]})};d=document.createElement("div");d.style.position="absolute";d.style.width="100%";d.style.height="100%";c.appendChild(d);g=document.createElement("div");g.style.position="absolute";g.style.width="100%";g.style.height="100%";g.style.top="50%";c.appendChild(g);window.addEventListener("orientationchange",f);f();h=new a.JoyStick(this,
d);k=new a.JoyStick(this,g)}})();AutodeskNamespace("Autodesk.Viewing.Private.Collaboration");
(function(){function a(a,b){function c(a){a=a.data.msg;d.x=a.x1;d.y=a.y1;f.x=a.x2;f.y=a.y2}var d=new THREE.Vector2,f=new THREE.Vector2,p;this.getNames=function(){return["intercept"]};this.getName=function(){return"intercept"};this.activate=function(d){b.client.addEventListener("joystick",c);p=a.navigation.getCamera();a.model&&a.model.getBoundingBox().size().length()};this.deactivate=function(a){b.client.removeEventListener("joystick",c);p=null};this.update=function(a){if(0==d.x&&0==d.y&&0==f.x&&0==
f.y)return!1;var b=p.target.clone().sub(p.position);a=b.length();b.multiplyScalar(1/a);var c=b.clone().cross(p.up).normalize(),g=b.clone().multiplyScalar(20*d.y);p.position.add(g);p.target.add(g);g=c.clone().multiplyScalar(20*d.x);p.position.add(g);p.target.add(g);g=new THREE.Quaternion;g.setFromAxisAngle(c,0.01*f.y);b=b.clone().applyQuaternion(g);c=new THREE.Quaternion;c.setFromAxisAngle(p.up,0.01*-f.x);b.applyQuaternion(c);b.multiplyScalar(a);p.target.copy(p.position).add(b);return!0};this.handleSingleClick=
function(a,b){return!1};this.handleDoubleClick=function(a,b){return!1};this.handleSingleTap=function(a){return!1};this.handleDoubleTap=function(a,b){return!1};this.handleKeyDown=function(a,b){return!1};this.handleKeyUp=function(a,b){return!1};this.handleWheelInput=function(a){b.takeControl();return!1};this.handleButtonDown=function(a,c){b.takeControl();return!1};this.handleButtonUp=function(a,b){return!1};this.handleMouseMove=function(a){return!1};this.handleTouchStart=function(a,b){return!1};this.handleTouchMove=
function(a,b){return!1};this.handleTouchChange=function(a,b){return!1};this.handleTouchEnd=function(a){return!1};this.handleBlur=function(a){return!1};this.handleResize=function(){}}function b(a,b,d,f){this.viewer=a;this.client=b;this.p2p=d;this.viewtx=f;c.UI.DockingPanel.call(this,a.container,"CollabPanel","Collaboration");this.container.classList.add("collabPanel");this.container.style.height="auto";this.container.dockRight=!0;this.content=document.createElement("div");this.container.appendChild(this.content);
this.content.classList.add("collabPanelContent");this.table=document.createElement("table");this.table.className="tftable";this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.content.appendChild(this.table);this.chatHistory=document.createElement("div");this.chatHistory.classList.add("chatHistory");this.chatHistory.classList.add("textEntry");this.content.appendChild(this.chatHistory);this.chatPanel=document.createElement("div");this.chatPanel.classList.add("chatPanel");
this.textInput=document.createElement("input");this.textInput.type="text";this.textInput.classList.add("textEntry");this.textInput.placeholder="Type a message...";this.chatPanel.appendChild(this.textInput);this.content.appendChild(this.chatPanel);var m=this;b.addEventListener("userListChange",function(a){m.updateUsers(a.data)});this.viewtx.addEventListener("controlChange",function(a){m.updateUserInControl(a.data)});b.addEventListener("chatReceived",function(a){m.updateChatHistory(a)});this.textInput.onkeyup=
function(a){m.handleChatInput(a)};this.p2p.addEventListener("remoteStreamAdded",function(a){m.videoPanel||m.createVideoPanel();m.remoteVideo.src=window.URL.createObjectURL(a.data)});this.p2p.addEventListener("localStreamAdded",function(a){m.videoPanel||m.createVideoPanel();m.localVideo.src=window.URL.createObjectURL(a.data)})}var c=Autodesk.Viewing,f=c.Extensions,d=c.Private.Collaboration;b.prototype=Object.create(c.UI.DockingPanel.prototype);b.prototype.constructor=b;b.prototype.updateUsers=function(a){for(var b=
this,c=document.createElement("tbody"),d=0;d<a.length;d++){var f=c.insertRow(-1);f.id=a[d].id;var p=f.insertCell(0);p.style.width="14px";p.style.cursor="default";var n=document.createElement("div");n.classList.add("statusBase");n.classList.add("statusNormal");n.innerHTML="&#9679";p.appendChild(n);f.insertCell(1).textContent=a[d].name;a[d].isSelf||(f=f.insertCell(2),f.classList.add("callButton"),f.innerHTML="&#9742",f.title="Start audio/video call",f.onclick=function(a){a=a.target.parentNode.id;b.p2p.getCurrentCallTarget()!=
a&&(b.videoPanel&&(b.p2p.hangup(),b.removeVideoPanel()),b.createVideoPanel(),b.p2p.callUser(a))})}this.table.replaceChild(c,this.tbody);this.tbody=c;this.fixComponentPlacement()};b.prototype.updateUserInControl=function(a){for(var b=0;b<this.tbody.rows.length;b++){var c=this.tbody.rows[b],d=c.cells[0].childNodes[0];c.id==a?(d.classList.remove("statusNormal"),d.classList.add("statusInControl"),d.innerHTML="&#9784"):(d.classList.remove("statusInControl"),d.classList.add("statusNormal"),d.innerHTML=
"&#9679")}};b.prototype.updateChatHistory=function(a){var b=this.client.getUserById(a.data.from);if(this.chatHistory.lastUser!=b.name){var c=document.createElement("p"),d=document.createElement("div");d.classList.add("heading");d.style.float="left";d.textContent=b.name;c.appendChild(d);d=document.createElement("div");d.classList.add("heading");d.style.textAlign="right";d.textContent=(new Date).toLocaleTimeString();c.appendChild(d);this.chatHistory.appendChild(c);this.chatHistory.lastUser=b.name}else b=
document.createElement("br"),this.chatHistory.appendChild(b);b=document.createElement("span");b.classList.add("messageText");b.textContent=a.data.msg;this.chatHistory.appendChild(b);this.chatHistory.scrollTop=this.chatHistory.scrollHeight};b.prototype.handleChatInput=function(a){13==a.which&&0!=this.textInput.value.length&&(this.client.sendChatMessage(this.textInput.value),this.textInput.value="",this.textInput.placeholder="")};b.prototype.fixComponentPlacement=function(a){a=this.table.offsetHeight+
this.chatPanel.offsetHeight;this.videoPanel&&(a+=this.videoPanel.offsetHeight);this.chatHistory.style.height="calc(100% - "+a+"px)"};b.prototype.createVideoPanel=function(a){this.videoPanel=document.createElement("div");this.videoPanel.classList.add("videoPanel");this.localVideo=document.createElement("video");this.localVideo.autoplay=!0;this.localVideo.muted=!0;this.localVideo.classList.add("videoInset");this.videoPanel.appendChild(this.localVideo);this.remoteVideo=document.createElement("video");
this.remoteVideo.autoplay=!0;this.remoteVideo.classList.add("videoMain");this.videoPanel.appendChild(this.remoteVideo);var b=this;a=document.createElement("div");a.classList.add("dockingPanelClose");a.innerHTML="&times";a.title="End video call";a.onclick=function(a){b.p2p.hangup();b.removeVideoPanel()};this.videoPanel.appendChild(a);this.content.insertBefore(this.videoPanel,this.chatHistory);this.fixComponentPlacement()};b.prototype.removeVideoPanel=function(){this.videoPanel&&this.content.removeChild(this.videoPanel);
this.videoPanel=null};b.prototype.reset=function(a){this.tbody&&(a=document.createElement("tbody"),this.table.replaceChild(a,this.tbody),this.tbody=a);this.chatHistory.textContent="";this.textInput.value="";this.removeVideoPanel()};f.Collaboration=function(b,f){c.Extension.call(this,b,f);this.viewer=b;this.client=new d.Client;this.viewtx=new d.ViewTransceiver(this.client);this.interceptor=new a(b,this.viewtx);b.toolController.registerTool(this.interceptor);this.p2p=new d.P2PClient(this.client)};f.Collaboration.prototype=
Object.create(c.Extension.prototype);f.Collaboration.prototype.constructor=f.Collaboration;f.Collaboration.prototype.createUI=function(){var a=this,d=this.viewer;this.panel=new b(this.viewer,this.client,this.p2p,this.viewtx);this.collabButton=c.UI.Toolbar.createMenuButton("toolbar-commentTool","Collaborate",function(b){a.panel.isVisible()?(a.p2p.hangup(),a.viewtx.detach(d),a.client.disconnect(),a.panel.setVisible(!1),a.panel.reset(),d.toolController.deactivateTool(a.interceptor.getName())):(d.model&&
(b=d.model.getData(),a.client.connect(b.basePath)),d.toolController.activateTool(a.interceptor.getName()),a.panel.setVisible(!0))});this.panel.addVisibilityListener(function(b){b?(d.model&&(b=d.model.getData(),a.client.connect(b.basePath),a.viewtx.attach(d)),d.toolController.activateTool(a.interceptor.getName()),d.modelTools.select(a.collabButton.id)):(a.p2p.hangup(),a.viewtx.detach(d),a.client.disconnect(),a.panel.reset(),d.toolController.deactivateTool(a.interceptor.getName()),d.modelTools.deselect(a.collabButton.id))});
var f=d.modelTools.getTool("toolbar-settingsTool");f?d.modelTools.insertToolBefore(this.collabButton,f):d.modelTools.addTool(this.collabButton)};f.Collaboration.prototype.load=function(){function a(d){b.removeEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,a);c.createUI()}var b=this.viewer,c=this;b.modelTools&&0<b.modelTools.getToolCount()?c.createUI():b.addEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,a);return!0};f.Collaboration.prototype.unload=function(){var a=this.viewer;this.p2p.hangup();
this.viewtx.detach(a);this.client.disconnect();a.toolController.deactivateTool(this.interceptor.getName());this.panel&&(this.panel.reset(),this.panel.setVisible(!1),this.panel=null);a.modelTools.removeTool(this.collabButton);return!0};c.theExtensionManager.registerExtension("Autodesk.Viewing.Collaboration",f.Collaboration)})();"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.Beeline");
Autodesk.Viewing.Extensions.Beeline.BeelineExtension=function(a,b){Autodesk.Viewing.Extension.call(this,a,b)};Autodesk.Viewing.Extensions.Beeline.BeelineExtension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.Beeline.BeelineExtension.prototype.constructor=Autodesk.Viewing.Extensions.Beeline.BeelineExtension;
Autodesk.Viewing.Extensions.Beeline.BeelineExtension.prototype.load=function(){var a=this,b=this.viewer,c=b.getToolbar(!0);this.tool=new Autodesk.Viewing.Extensions.Beeline.BeelineTool(b.impl,b);b.toolController.registerTool(this.tool);var f=this.tool.getNames();this.createUI(c);var d;this.HOTKEYS_ID="Autodesk.Beeline.Hotkeys";c=[];c.push({keycodes:[Autodesk.Viewing.theHotkeyManager.KEYCODES.CONTROL,Autodesk.Viewing.theHotkeyManager.KEYCODES.ALT],onPress:function(){d=b.getActiveNavigationTool();b.setActiveNavigationTool(f[0]);
return!0},onRelease:function(){b.setActiveNavigationTool(d?d:b.defaultNavigationToolName);return!0}});Autodesk.Viewing.theHotkeyManager.pushHotkeys(this.HOTKEYS_ID,c);this.onToolChanged=function(b){if(-1!==b.toolName.indexOf("beeline")){var c=b.active?Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE:Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE;"beeline-go-to"===b.toolName?Autodesk.Viewing.UI.SubToolbar.setToolState(a.goToButton.id,c):Autodesk.Viewing.UI.SubToolbar.setToolState(a.passThroughButton.id,
c)}};b.addEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT,this.onToolChanged);return!0};
Autodesk.Viewing.Extensions.Beeline.BeelineExtension.prototype.createUI=function(a){var b=a.getSubToolbarById(Autodesk.Viewing.TOOLBAR.NAVTOOLSID),c={onToolStateChangedCB:function(){Autodesk.Viewing.UI.SubToolbar.getToolState("toolbar-beelineSubmenuTool")===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE&&(Autodesk.Viewing.UI.SubToolbar.setToolState("toolbar-beelineGoToTool",Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE),Autodesk.Viewing.UI.SubToolbar.setToolState("toolbar-beelinePassThroughTool",
Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE))}},f=Autodesk.Viewing.UI.Toolbar.createMenuButton("toolbar-beelineSubmenuTool","Walkthrough",null,c);f.style.position="relative";(c=b.getTool("toolbar-cameraSubmenuTool"))?b.insertToolBefore(f,c):b.addTool(f);b=document.createElement("ul");b.style.width="48px";b.style.position="absolute";b.style.left="2px";b.style.paddingBottom="2px";var d=Autodesk.Viewing.UI.Toolbar.createMenuButton,g=this.viewer,c={defaultTooltipValue:"Pass through"};this.passThroughButton=
d("toolbar-beelinePassThroughTool","Pass through",function(a){a=Autodesk.Viewing.UI.SubToolbar.getToolState(self.passThroughButton);a===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE?g.setActiveNavigationTool("beeline-pass-through"):a===Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE&&g.setActiveNavigationTool(g.defaultNavigationToolName)},c);this.passThroughButton.style.marginLeft="2px";this.passThroughButton.style.marginTop="2px";b.appendChild(this.passThroughButton);c.defaultTooltipValue="Go to (Ctrl+Alt click)";
this.goToButton=d("toolbar-beelineGoToTool","Go to",function(a){a=Autodesk.Viewing.UI.SubToolbar.getToolState(self.goToButton);a===Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE?g.setActiveNavigationTool("beeline-go-to"):a===Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE&&g.setActiveNavigationTool(g.defaultNavigationToolName)},c);this.goToButton.style.marginLeft="2px";this.goToButton.style.marginTop="2px";b.appendChild(this.goToButton);a.attachSubMenu(f,b)};
Autodesk.Viewing.Extensions.Beeline.BeelineExtension.prototype.unload=function(){var a=this.viewer;a.removeEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT,this.onToolChanged);this.onToolChanged=void 0;Autodesk.Viewing.theHotkeyManager.popHotkeys(this.HOTKEYS_ID);var b=a.getToolbar(!1);b&&b.removeFromSubToolbar(Autodesk.Viewing.TOOLBAR.NAVTOOLSID,this.beelineButton);this.beelineButton=null;a.toolController.deregisterTool(this.tool);this.tool=null;return!0};
Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Beeline",Autodesk.Viewing.Extensions.Beeline.BeelineExtension);AutodeskNamespace("Autodesk.Viewing.Extensions.Beeline");
Autodesk.Viewing.Extensions.Beeline.BeelineTool=function(a,b){function c(){l.revertToStartState()}function f(a){var b={};b.target=a.target.clone();b.worldup=a.worldup.clone();b.position=a.position.clone();b.up=a.up.clone();for(var c="isPerspective fov zoom aspect left right top bottom".split(" "),d=0;d<c.length;d++)b[c[d]]=a[c[d]];return b}function d(b){var c=new THREE.Vector3(b.normalizedX,b.normalizedY,1);b=a.hitTestViewport(c.clone(),!1);if(!b.intersectPoint)return[];var d=b.node.fragIds instanceof
Array?b.node.fragIds:[b.node.fragIds];b=[];for(var f=0;f<d.length;f++){var g=a.getRenderProxy(this.model,d[f]);g&&b.push(g)}d=new THREE.Raycaster;c=c.clone();f=a.camera;g=new THREE.Vector3(c.x,c.y,1);c.z=-1;F.unprojectVector(c,f);F.unprojectVector(g,f);g.sub(c).normalize();d.set(n.isPerspective?f.position:c,g);return d.intersectObjects(b,!1)}function g(){n.isPerspective||(n.toPerspective(),q.activatePivot(!1));n.getFocalLength()>k&&n.setFocalLength(k,!1)}function h(a){if(S)return!0;var b=-1!==navigator.userAgent.search("Mac OS"),
c=a.ctrlKey||b&&a.metaKey;return!(a.metaKey&&!b)&&!a.shiftKey&&!(a.altKey^c)}var k=28,l=this,m=b.container,p=b.autocam,n=b.navigation,q=b.utilities,r=["beeline-go-to","beeline-pass-through"],s=1,u=0,w=!1,v=0,B=null,z=null,A=new THREE.Vector3,C=new THREE.Vector3,G=new THREE.Vector3,E=new THREE.Vector3,I=!1,H=new THREE.Vector3,Q=new THREE.Vector3,N=0,F=new THREE.Projector,D=null,S=null,J={0:"url(data:image/x-icon;base64,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), wait",
1:"url(data:image/x-icon;base64,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), wait"};
this.getNames=function(){return r};this.getName=function(){return r[0]};this.activate=function(a){s=a===r[0]?0:1;v=0;b.addEventListener(Autodesk.Viewing.FULLSCREEN_MODE_EVENT,c);p.userLookSpeed=1;this.showHUDMessage(!0)};this.deactivate=function(){b.removeEventListener(Autodesk.Viewing.FULLSCREEN_MODE_EVENT,c);this.revertToStartState();this.showHUDMessage(!1)};this.getCursor=function(){return w||0===v?J[s]:null};this.update=function(){var a=n.getCamera(),c=!1;if(w){var d=H.clone().sub(Q);if(0!==d.x||
0!==d.y){var c=n.getWorldUpVector().dot(n.getCameraUpVector()),g=b.prefs.reverseHorizontalLookDirection?-1:1,h=b.prefs.reverseVerticalLookDirection?-1:1;d.x*=0>c?-g:g;d.y*=h;p.sync(n.getCamera());p.look(d);c=!0;D=f(a)}Q.x=H.x;Q.y=H.y}return c};this.revertToStartState=function(){q.pivotActive(!1);u=0;I=!0;w=!1};this.fly=function(a){g();G=n.getPosition();z=a;switch(s){case 0:E=G.clone().lerp(A,0.8);break;case 1:a=2*p.camera.near;var b=C.clone().sub(G).length();a/=b;q.setPivotPoint(G.clone().lerp(C,
1+10*a),!0,!0);E=G.clone().lerp(C,1+a);break;default:return}u=1;I=!1;B=null;requestAnimationFrame(l.step)};this.step=function(a){var b=n.getCamera();if(!I){if(null===B)D=f(b),B=a;else{var c;a:if(c=D,b.target.equals(c.target)&&b.position.equals(c.position)&&b.worldup.equals(c.worldup)&&b.up.equals(c.up)){for(var d="isPerspective fov zoom aspect left right top bottom".split(" "),g=0;g<d.length;g++)if(b[d[g]]!==c[d[g]]){c=!1;break a}c=!0}else c=!1;if(!c){l.revertToStartState();return}}a-=B;c=a<z?a/z:
1;c=G.clone().lerp(E,c);d=n.getEyeVector();d.multiplyScalar(n.getPivotPoint().sub(n.getPosition()).length()/d.length());n.setView(c,d.add(c));D=f(b);q.activatePivot(!1);a<z?requestAnimationFrame(l.step):l.revertToStartState()}};this.handleGesture=function(a){switch(a.type){case "dragstart":return S="drag",this.handleButtonDown(a,0);case "dragmove":return"drag"===S?this.handleMouseMove(a):!1;case "dragend":if("drag"===S)return this.handleButtonUp(a,0),S=null,!0}return!1};this.handleButtonDown=function(a,
b){v+=1<<b;var c=h(a);0===b&&c&&(w=!0,Q.x=H.x=a.canvasX,Q.y=H.y=a.canvasY);return 0===b&&c};this.handleButtonUp=function(a,b){v-=1<<b;var c=h(a);0===b&&c&&(w=!1);return 0===b&&c};this.handleSingleClick=function(a,b){var c=h(a);if(0===b&&c){var f=a.timeStamp-N;switch(u){case 0:var g=d(a);0<g.length&&(A=g[0].point,C=g[g.length-1].point,q.setPivotPoint(A,!0,!0),q.pivotActive(!0),l.fly(400>=f?1E3:5500));break;case 1:400>=f?z=1E3:this.revertToStartState()}N=a.timeStamp}else this.revertToStartState();return 0===
b&&c};this.handleSingleTap=function(a){return this.handleSingleClick(a,0)};this.handleDoubleTap=function(a){z=1E3;return!0};this.handleDoubleClick=function(a,b){var c=h(a);return 0===b&&c};this.handleMouseMove=function(a){H.x=a.canvasX;H.y=a.canvasY;w&&g();return w};this.handleBlur=function(a){this.revertToStartState();return!1};this.showOrthoWarningMessage=function(){Autodesk.Viewing.Private.HudMessage.displayMessage(m,{msgTitleKey:"Orthographic View Set",messageKey:"The view is set to Orthographic Beeline",
messageDefaultValue:"The view is set to Orthographic. Using this tool will switch to Perspective."})};this.showFocalWarningMessage=function(){Autodesk.Viewing.Private.HudMessage.displayMessage(m,{msgTitleKey:"Long Focal Length View Set",messageKey:"The view is set to a long focal length",messageDefaultValue:"This view has a long focal length. Using this tool will set a short focal length."})};this.watchCamera=function(a){if(b.toolController.getActiveToolName()===r[0]||b.toolController.getActiveToolName()===
r[1]){a=(a=n.getCamera())&&!a.isPerspective;var c=n.getFocalLength()>k;a?l.showOrthoWarningMessage():c?l.showFocalWarningMessage():Autodesk.Viewing.Private.HudMessage.dismiss()}};this.showHUDMessage=function(a){var c=n.getCamera(),c=c&&!c.isPerspective,d=n.getFocalLength()>k;a&&c?l.showOrthoWarningMessage():a&&d?l.showFocalWarningMessage():Autodesk.Viewing.Private.HudMessage.dismiss();a?b.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,l.watchCamera):b.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,
l.watchCamera)}};"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.Measure");Autodesk.Viewing.Extensions.Measure.MeasureExtension=function(a,b){Autodesk.Viewing.Extension.call(this,a,b)};Autodesk.Viewing.Extensions.Measure.MeasureExtension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.Measure.MeasureExtension.prototype.constructor=Autodesk.Viewing.Extensions.Measure.MeasureExtension;
Autodesk.Viewing.Extensions.Measure.MeasureExtension.prototype.load=function(){function a(){c.createUI()}var b=this,c=this.viewer;this.escapeHotkeyId="Autodesk.Measure.Hotkeys.Escape";this.tool=new Autodesk.Viewing.Extensions.Measure.MeasureTool(c,{onCloseCallback:function(a){b.enableMeasureTool(!1)}});c.toolController.registerTool(this.tool);this.viewer.toolbar?0<this.viewer.toolbar.getSubToolbarById(Autodesk.Viewing.TOOLBAR.MODELTOOLSID).getToolCount()?this.createUI():this.viewer.addEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,
a):this.viewer.addEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,a);return!0};Autodesk.Viewing.Extensions.Measure.MeasureExtension.prototype.unload=function(){var a=this.viewer;this.destroyUI();a.toolController.deregisterTool(this.tool);this.tool=null;return!0};
Autodesk.Viewing.Extensions.Measure.MeasureExtension.prototype.enableMeasureTool=function(a){if(this.tool){var b=this.viewer.toolController,c=this.tool.isActive();if(a&&!c)return b.activateTool("measure"),Autodesk.Viewing.UI.SubToolbar.setToolState(this.measureToolButton.id,Autodesk.Viewing.UI.SubToolbar.STATE_ACTIVE),!0;if(!a&&c)return b.deactivateTool("measure"),Autodesk.Viewing.UI.SubToolbar.setToolState(this.measureToolButton.id,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE),!0}return!1};
Autodesk.Viewing.Extensions.Measure.MeasureExtension.prototype.createUI=function(){var a=this,b=this.viewer;this.inspectToolsButton=this.measureToolButton=null;if(b.model&&!b.model.is2d()){var c=b.getToolbar(!0),f=c.getSubToolbarById(Autodesk.Viewing.TOOLBAR.MODELTOOLSID),d=Autodesk.Viewing.UI.Toolbar.createMenuButton,g=b.modelTools.getTool("toolbar-explodeTool"),h=this.measureToolButton=d("toolbar-measureTool","Measure",function(c){a.enableMeasureTool(!a.tool.isActive());g&&a.tool.isActive()&&(b.explodeslider.classList.contains("slider-anim-in")&&
b.showExplodeSlider(!1),Autodesk.Viewing.UI.SubToolbar.setToolState(g.id,Autodesk.Viewing.UI.SubToolbar.STATE_NOTACTIVE))});g&&(this.inspectToolsButton=d("toolbar-inspectTools","Inspect",null),this.inspectToolsButton.style.position="relative",h=document.createElement("ul"),h.style.width="44px",h.style.position="absolute",h.style.right=0,f.removeTool(g),h.appendChild(this.measureToolButton),h.appendChild(g),g.children[0].style.left="110%",g.children[0].style.bottom="10%",c.attachSubMenu(this.inspectToolsButton,
h),h=this.inspectToolsButton);(c=b.modelTools.getTool("toolbar-resetTool"))?f.insertToolBefore(h,c):f.addTool(h);Autodesk.Viewing.theHotkeyManager.pushHotkeys(this.escapeHotkeyId,[{keycodes:[Autodesk.Viewing.theHotkeyManager.KEYCODES.ESCAPE],onRelease:function(){return a.enableMeasureTool(!1)}}])}};
Autodesk.Viewing.Extensions.Measure.MeasureExtension.prototype.destroyUI=function(){var a=this.viewer;a.model.is2d()||((a=a.getToolbar(!1))&&a.getSubToolbarById(Autodesk.Viewing.TOOLBAR.MODELTOOLSID)&&(this.inspectToolsButton?a.removeFromSubToolbar(Autodesk.Viewing.TOOLBAR.MODELTOOLSID,this.inspectToolsButton.id):this.measureToolButton&&a.removeFromSubToolbar(Autodesk.Viewing.TOOLBAR.MODELTOOLSID,this.measureToolButton.id),this.inspectToolsButton=this.measureToolButton=null),Autodesk.Viewing.theHotkeyManager.popHotkeys(this.escapeHotkeyId))};
Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Measure",Autodesk.Viewing.Extensions.Measure.MeasureExtension);AutodeskNamespace("Autodesk.Viewing.Extensions.Measure");
Autodesk.Viewing.Extensions.Measure.MeasureTool=function(a,b){function c(a){w.updateLabelPositions()}function f(a){var b=this,c=new THREE.Projector,f=null,h=null,k={first:{},second:{}},l={xyz:{axis:!1,color:"FF0000"},x:{axis:!0,color:"FF0000"},y:{axis:!0,color:"00FF00"},z:{axis:!0,color:"0000FF"}};this.showFirst=function(a,b){this.showEndPoint("first",a,b)};this.showSecond=function(a,b){this.showEndPoint("second",a,b)};this.showEndPoint=function(a,b,c){f||(f=new THREE.MeshPhongMaterial({color:16711680,
ambient:16711680,opacity:1,transparent:!0}),h=new THREE.MeshPhongMaterial({color:16711680,ambient:16711680,opacity:1,transparent:!0}),g.impl.createOverlayScene("MeasureTool-endPoint",f,h));a=k[a];var d=a.mesh;d||(a.geometry=new THREE.SphereGeometry(1),d=a.mesh=new THREE.Mesh(a.geometry,h),d.visible=!0,g.impl.addOverlay("MeasureTool-endPoint",d));f.opacity=1;h.opacity=1;d.scale.x=c;d.scale.y=c;d.scale.z=c;d.position.set(b.x,b.y,b.z);d.visible=!0;g.impl.invalidate(!1,!1,!0)};this.updateLabelPositions=
function(){var a=g.navigation.getCamera(),b=g.navigation.getScreenViewport(),d;for(d in l)if(l.hasOwnProperty(d)){var f=l[d],h=f.label;if(h){var k=new THREE.Vector3(f.labelX,f.labelY,f.labelZ);c.projectVector(k,a);f=(k.x+1)/2*b.width;k=(-k.y+1)/2*b.height;f+=10;k+=10;h.style.top=k+"px";h.style.left=f+"px"}}};this.drawLine=function(a,c){function d(a,c,f,h,k,m,n){var p=l[a],q=p.line,r=p.label,s=new THREE.Vector3(c,f,h),u=new THREE.Vector3(k,m,n);q&&(q.visible=!1);r&&r.classList.remove("visible");if(0<
s.distanceTo(u)){var v=p.geometry;q||(p.material=new THREE.LineBasicMaterial({color:parseInt(p.color,16),linewidth:1}),p.overlayName="MeasureTool-"+a,g.impl.createOverlayScene(p.overlayName,p.material,p.material),v=p.geometry=new THREE.Geometry,v.dynamic=!0,q=p.line=new THREE.Line(v,p.material),g.impl.addOverlay(p.overlayName,q));v.vertices.length=0;v.vertices.push(s);v.vertices.push(u);v.verticesNeedUpdate=!0;q.visible=!0;r||(r=p.label=document.createElement("div"),r.className="measure-length",p.axis&&
(r.style.color="#"+p.color,r.style.backgroundColor="transparent",r.textContent=a),g.container.appendChild(r));p.axis?(p.labelX=c+(k-c)/2,p.labelY=f+(m-f)/2,p.labelZ=h+(n-h)/2):(p.labelX=k,p.labelY=m,p.labelZ=n,b.updateDistance());r.classList.add("visible")}}d("xyz",a.x,a.y,a.z,c.x,c.y,c.z);var f=g.navigation.getAlignedUpVector(),h=Math.abs(f.x),k=Math.abs(f.y),f=Math.abs(f.z);f>h&&f>k?(d("x",a.x,a.y,a.z,c.x,a.y,a.z),d("y",c.x,a.y,a.z,c.x,c.y,a.z),d("z",c.x,c.y,a.z,c.x,c.y,c.z)):k>h&&k>f?(d("x",a.x,
a.y,a.z,c.x,a.y,a.z),d("z",c.x,a.y,a.z,c.x,a.y,c.z),d("y",c.x,a.y,c.z,c.x,c.y,c.z)):(d("y",a.x,a.y,a.z,a.x,c.y,a.z),d("z",a.x,c.y,a.z,a.x,c.y,c.z),d("x",a.x,c.y,c.z,c.x,c.y,c.z));this.updateLabelPositions()};this.updateDistance=function(){l.xyz.label.textContent=Autodesk.Viewing.Private.formatValueWithUnits(d.getCurrentDistance(),d.getUnits(),3,d.getPrecision())};this.hide=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a];b.mesh&&(b.mesh.visible=!1)}for(a in l)l.hasOwnProperty(a)&&(b=l[a],
b.line&&(b.line.visible=!1),b.label&&b.label.classList.remove("visible"));g.impl.invalidate(!1,!1,!0)};this.destroy=function(){for(var a in k)if(k.hasOwnProperty(a)){var b=k[a];b.mesh&&(g.impl.removeOverlay("MeasureTool-endPoint",b.mesh),b.mesh=b.geometry=null)}f&&(f=h=null,g.impl.removeOverlayScene("MeasureTool-endPoint"));for(a in l)l.hasOwnProperty(a)&&(b=l[a],b.line&&(g.impl.removeOverlay(b.overlayName,b.line),g.impl.removeOverlayScene(b.overlayName),b.material=b.line=b.geometry=null),b.label&&
(b.label.parentNode.removeChild(b.label),b.label=null),b.material=b.line=b.geometry=b.label=null)}}var d=this,g=a,h=["measure"],k=!1,l=null,m=null,p=!1,n=0,q=!1,r="",s=3,u=0,w=null,v=null;this.isActive=function(){return k};this.getNames=function(){return h};this.getName=function(){return h[0]};this.getCursor=function(){return p&&0===n?null:"url(data:image/png;base64,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), wait"};
this.activate=function(){k=!0;n=0;r||(r=g.model.getUnitString());p=!1;w||(w=new f(g));w.hide();v||(v=new Autodesk.Viewing.Extensions.Measure.MeasurePanel(d,g.container,"measure-panel","Measure",b));v.setVisible(!0);g.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,c)};this.deactivate=function(){k=!1;l=m=null;u=0;w.hide();w.destroy();v.setVisible(!1);v.clearPanel();g.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,c)};this.update=function(){return!1};this.getUnits=function(){return r};
this.setUnits=function(a){if(r!==a){var b=r;r=a;w&&(u=Autodesk.Viewing.Private.convertUnits(b,r,u),w.updateDistance())}};this.getPrecision=function(){return s};this.setPrecision=function(a){s!==a&&(s=a,w&&w.updateDistance())};this.getCurrentDistance=function(){return u};this.clearMeasurement=function(){l=m=null;u=0;w.hide();v.clearPanel()};this._handleMouseEvent=function(a){return(a=g.impl.hitTest(a.clientX,a.clientY,!1))&&a.intersectPoint?(0===n&&(this.clearMeasurement(),n=1),1===n?(l=a.intersectPoint,
w.showFirst(l,0.05)):2===n&&(m=a.intersectPoint,w.showSecond(m,0.05),a=g.model.getUnitString(),u=Autodesk.Viewing.Private.convertUnits(a,r,l.distanceTo(m)),v.updatePanel(l,m),w.drawLine(l,m)),!0):!1};this.handleButtonDown=function(a,b){p=!0;if(0===b&&!(a.ctrlKey||a.metaKey||a.shiftKey||a.altKey)){if(this._handleMouseEvent(a))return!0;this.clearMeasurement();n=0}return!1};this.handleMouseMove=function(a){return p&&(1===n||2===n)&&this._handleMouseEvent(a)};this.handleButtonUp=function(a,b){p=!1;return 1===
n||2===n?(this._handleMouseEvent(a),n=1===n?2:0,q=!0):!1};this.handleSingleClick=function(a,b){return q?(q=!1,!0):!1}};AutodeskNamespace("Autodesk.Viewing.Extensions.Measure");
Autodesk.Viewing.Extensions.Measure.MeasurePanel=function(a,b,c,f,d){function g(a,b,c,d,f){var g=document.createElement("select");g.className="optionDropDown";for(var h=0;h<c.length;h++){var k=document.createElement("option");k.value=h;k.setAttribute("data-i18n",c[h]);k.textContent=Autodesk.Viewing.i18n.translate(c[h]);g.add(k)}c=document.createElement("div");c.className="measure-submenu-select";h=document.createElement("div");h.className="measure-submenu-selectlabel";h.setAttribute("for",b);h.setAttribute("data-i18n",
b);h.textContent=Autodesk.Viewing.i18n.translate(b);c.appendChild(h);c.appendChild(g);a.appendChild(c);g.selectedIndex=d;g.onchange=function(a){f(a.target.selectedIndex)};return g}function h(a){var b=document.createElement("div");b.className="measure-horizontal-divider";a.appendChild(b);return b}Autodesk.Viewing.UI.DockingPanel.call(this,b,c,f,d);this.kPanelExpandedHeight=310;this.kPanelCollapsedHeight=35;this.measureTool=a;this.parentContainer=b;this.deltaZ=this.deltaY=this.deltaX=this.distance=
0;this.container.classList.add("measurePanel");this.container.dockRight=!0;this.container.style.minWidth="325px";this.container.style.minHeight=this.kPanelCollapsedHeight+"px";this.container.style.height=this.kPanelExpandedHeight+"px";this.container.style.maxHeight=this.kPanelExpandedHeight+"px";this.container.style.top="200px";this.container.style.left="220px";this.container.style.resize="none";this.container.style.position="absolute";this.addEventListener(this.closer,"click",function(a){if(d&&d.onCloseCallback)d.onCloseCallback()});
a=this.container.children[0];a.classList.add("measure-panelTitle");a.classList.add("expanded");this.measureResults=document.createElement("div");this.container.appendChild(this.measureResults);var k=this,l=["mm","cm","m","in","ft"];a=l.indexOf(this.measureTool.getUnits());g(this.measureResults,"Unit type",["Millimeters","Centimeters","Meters","Inches","Feet"],a,function(a){var b=k.measureTool.getUnits();a=l[a];k.measureTool.setUnits(a);k.distance=k.measureTool.getCurrentDistance();k.deltaX=Autodesk.Viewing.Private.convertUnits(b,
a,k.deltaX);k.deltaY=Autodesk.Viewing.Private.convertUnits(b,a,k.deltaY);k.deltaZ=Autodesk.Viewing.Private.convertUnits(b,a,k.deltaZ);k.update()});a=this.measureTool.getPrecision()-1;g(this.measureResults,"Precision",["0.1","0.01","0.001","0.0001","0.00001"],a,function(a){k.measureTool.setPrecision(a+1);k.update()}).parentNode.style.paddingBottom="15px";h(this.measureResults);a=document.createElement("div");this.measureResults.appendChild(a);b=document.createElement("div");b.className="measure-result";
b.setAttribute("data-i18n","Results");b.textContent=Autodesk.Viewing.i18n.translate("Results");a.appendChild(b);this.distanceDiv=document.createElement("div");this.distanceDiv.className="measure-results";a.appendChild(this.distanceDiv);b=document.createElement("div");b.className="measure-result-label";b.setAttribute("data-i18n","Distance = ");b.textContent=Autodesk.Viewing.i18n.translate("Distance = ");this.distanceDiv.appendChild(b);b=document.createElement("div");b.className="measure-result-number";
this.distanceDiv.appendChild(b);this.deltaXDiv=document.createElement("div");this.deltaXDiv.className="measure-results";a.appendChild(this.deltaXDiv);b=document.createElement("div");b.className="measure-result-label";b.setAttribute("data-i18n","Delta x = ");b.textContent=Autodesk.Viewing.i18n.translate("Delta x = ");this.deltaXDiv.appendChild(b);b=document.createElement("div");b.className="measure-result-number";this.deltaXDiv.appendChild(b);this.deltaYDiv=document.createElement("div");this.deltaYDiv.className=
"measure-results";a.appendChild(this.deltaYDiv);b=document.createElement("div");b.className="measure-result-label";b.setAttribute("data-i18n","Delta y = ");b.textContent=Autodesk.Viewing.i18n.translate("Delta y = ");this.deltaYDiv.appendChild(b);b=document.createElement("div");b.className="measure-result-number";this.deltaYDiv.appendChild(b);this.deltaZDiv=document.createElement("div");this.deltaZDiv.className="measure-results";a.appendChild(this.deltaZDiv);a=document.createElement("div");a.className=
"measure-result-label";a.setAttribute("data-i18n","Delta z = ");a.textContent=Autodesk.Viewing.i18n.translate("Delta z = ");this.deltaZDiv.appendChild(a);a=document.createElement("div");a.className="measure-result-number";this.deltaZDiv.appendChild(a);h(this.measureResults);a=document.createElement("div");a.className="measure-restart";a.setAttribute("data-i18n","Restart measurement");a.textContent=Autodesk.Viewing.i18n.translate("Restart measurement");a.addEventListener("click",function(){k.measureTool.clearMeasurement()},
!1);this.measureResults.appendChild(a);this.clearPanel()};Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype.constructor=Autodesk.Viewing.Extensions.Measure.MeasurePanel;Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype.isExpanded=function(){return this.container.children[0].classList.contains("expanded")};
Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype.onTitleClick=function(a){a=this.container.children[0];a.classList.contains("expanded")?(a.classList.remove("expanded"),a.classList.add("collapsed"),this.measureResults.style.display="none",this.container.style.height=this.kPanelCollapsedHeight+"px"):(a.classList.remove("collapsed"),a.classList.add("expanded"),this.measureResults.style.display="block",a=this.parentContainer.offsetHeight,parseInt(this.container.style.top)+this.kPanelExpandedHeight>
a&&(this.container.style.top=a-this.kPanelExpandedHeight-50+"px",this.container.style.maxHeight=this.kPanelExpandedHeight+"px"),this.container.style.height=this.kPanelExpandedHeight+"px")};Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype.getContentSize=function(){return{height:this.isExpanded()?this.measureResults.clientHeight+46:0,width:this.measureResults.clientWidth}};
Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype.updatePanel=function(a,b){a&&b?(this.distance=this.measureTool.getCurrentDistance(),this.deltaX=Math.abs(a.x-b.x),this.deltaY=Math.abs(a.y-b.y),this.deltaZ=Math.abs(a.z-b.z),this.update()):this.clearPanel()};
Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype.update=function(){var a=this.measureTool.getUnits(),b=this.measureTool.getPrecision();this.distanceDiv.children[1].textContent=Autodesk.Viewing.Private.formatValueWithUnits(this.distance,a,3,b);this.deltaXDiv.children[1].textContent=Autodesk.Viewing.Private.formatValueWithUnits(this.deltaX,a,3,b);this.deltaYDiv.children[1].textContent=Autodesk.Viewing.Private.formatValueWithUnits(this.deltaY,a,3,b);this.deltaZDiv.children[1].textContent=Autodesk.Viewing.Private.formatValueWithUnits(this.deltaZ,
a,3,b)};Autodesk.Viewing.Extensions.Measure.MeasurePanel.prototype.clearPanel=function(){this.deltaZ=this.deltaY=this.deltaX=this.distance=0;this.update()};
(function(a,b){var c=a.document,f;f=function(){var d={},f=!1,h=[],k,l,m,p,n,q,r,s,u,w,v,B;B=function(){var a,d,f=!1,g=c.createElement("fakeelement"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(a in h)if(g.style[a]!==b){d=h[a];f=!0;break}return{type:d,supported:f}};k=function(a){return c.getElementById(a)};d={labels:{ok:"OK",cancel:"Cancel"},delay:5E3,buttonReverse:!1,buttonFocus:"ok",transition:b,addListeners:function(a){var b=
"undefined"!==typeof m,d="undefined"!==typeof l,f="undefined"!==typeof v,g="",h=this,k,q,r,s,u;k=function(b){"undefined"!==typeof b.preventDefault&&b.preventDefault();r(b);"undefined"!==typeof v&&(g=v.value);"function"===typeof a&&("undefined"!==typeof v?a(!0,g):a(!0));return!1};q=function(b){"undefined"!==typeof b.preventDefault&&b.preventDefault();r(b);"function"===typeof a&&a(!1);return!1};r=function(a){h.hide();h.unbind(c.body,"keyup",s);h.unbind(p,"focus",u);b&&h.unbind(m,"click",k);d&&h.unbind(l,
"click",q)};s=function(a){var b=a.keyCode;(32===b&&!f||f&&13===b)&&k(a);27===b&&d&&q(a)};u=function(a){f?v.focus():!d||h.buttonReverse?m.focus():l.focus()};this.bind(p,"focus",u);this.bind(n,"focus",u);b&&this.bind(m,"click",k);d&&this.bind(l,"click",q);this.bind(c.body,"keyup",s);this.transition.supported||this.setFocus()},bind:function(a,b,c){"function"===typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},handleErrors:function(){if("undefined"!==typeof a.onerror){var b=
this;a.onerror=function(a,c,d){b.error("["+a+" on line "+d+" of "+c+"]",0)};return!0}return!1},appendButtons:function(a,b){return this.buttonReverse?b+a:a+b},build:function(a){var b=a.type,c=a.message,f=a.cssClass||"";a='<div class="alertify-dialog"><a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>';"none"===d.buttonFocus&&(a+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>');"prompt"===b&&(a+='<div id="alertify-form">');a+='<article class="alertify-inner">';
a+='<p class="alertify-message">{{message}}</p>'.replace("{{message}}",c);"prompt"===b&&(a+='<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>');a+='<nav class="alertify-buttons">{{buttons}}</nav>';a+="</article>";"prompt"===b&&(a+="</div>");a+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>';a+="</div>";switch(b){case "confirm":a=a.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>',
'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));a=a.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case "prompt":a=a.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>','<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));a=a.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);
break;case "alert":a=a.replace("{{buttons}}",'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'),a=a.replace("{{ok}}",this.labels.ok)}u.className="alertify alertify-"+b+" "+f;s.className="alertify-cover";return a},close:function(a,b){var c=b&&!isNaN(b)?+b:this.delay,d=this,f,g;this.bind(a,"click",function(){f(a)});g=function(a){a.stopPropagation();d.unbind(this,d.transition.type,g);w.removeChild(this);w.hasChildNodes()||(w.className+=" alertify-logs-hidden")};f=
function(a){"undefined"!==typeof a&&a.parentNode===w&&(d.transition.supported?(d.bind(a,d.transition.type,g),a.className+=" alertify-log-hide"):(w.removeChild(a),w.hasChildNodes()||(w.className+=" alertify-logs-hidden")))};0!==b&&setTimeout(function(){f(a)},c)},dialog:function(a,b,d,k,l){r=c.activeElement;var m=function(){w&&null!==w.scrollTop&&s&&null!==s.scrollTop||m()};if("string"!==typeof a)throw Error("message must be a string");if("string"!==typeof b)throw Error("type must be a string");if("undefined"!==
typeof d&&"function"!==typeof d)throw Error("fn must be a function");this.init();m();h.push({type:b,message:a,callback:d,placeholder:k,cssClass:l});f||this.setup();return this},extend:function(a){if("string"!==typeof a)throw Error("extend method must have exactly one paramter");return function(b,c){this.log(b,a,c);return this}},hide:function(){var a,b=this;h.splice(0,1);0<h.length?this.setup(!0):(f=!1,a=function(c){c.stopPropagation();b.unbind(u,b.transition.type,a)},this.transition.supported?(this.bind(u,
this.transition.type,a),u.className="alertify alertify-hide alertify-hidden"):u.className="alertify alertify-hide alertify-hidden alertify-isHidden",s.className="alertify-cover alertify-cover-hidden",r.focus())},init:function(){c.createElement("nav");c.createElement("article");c.createElement("section");null==k("alertify-cover")&&(s=c.createElement("div"),s.setAttribute("id","alertify-cover"),s.className="alertify-cover alertify-cover-hidden",c.body.appendChild(s));null==k("alertify")&&(f=!1,h=[],
u=c.createElement("section"),u.setAttribute("id","alertify"),u.className="alertify alertify-hidden",c.body.appendChild(u));null==k("alertify-logs")&&(w=c.createElement("section"),w.setAttribute("id","alertify-logs"),w.className="alertify-logs alertify-logs-hidden",c.body.appendChild(w));c.body.setAttribute("tabindex","0");this.transition=B()},log:function(a,b,c){var d=function(){w&&null!==w.scrollTop||d()};this.init();d();w.className="alertify-logs";this.notify(a,b,c);return this},notify:function(a,
b,d){var f=c.createElement("article");f.className="alertify-log"+("string"===typeof b&&""!==b?" alertify-log-"+b:"");f.innerHTML=a;w.appendChild(f);setTimeout(function(){f.className+=" alertify-log-show"},50);this.close(f,d)},set:function(a){var b;if("object"!==typeof a&&a instanceof Array)throw Error("args must be an object");for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},setFocus:function(){v?(v.focus(),v.select()):q.focus()},setup:function(a){var c=h[0],r=this,s;f=!0;s=function(a){a.stopPropagation();
r.setFocus();r.unbind(u,r.transition.type,s)};this.transition.supported&&!a&&this.bind(u,this.transition.type,s);u.innerHTML=this.build(c);p=k("alertify-resetFocus");n=k("alertify-resetFocusBack");m=k("alertify-ok")||b;l=k("alertify-cancel")||b;q="cancel"===d.buttonFocus?l:"none"===d.buttonFocus?k("alertify-noneFocus"):m;v=k("alertify-text")||b;k("alertify-form");"string"===typeof c.placeholder&&""!==c.placeholder&&(v.value=c.placeholder);a&&this.setFocus();this.addListeners(c.callback)},unbind:function(a,
b,c){"function"===typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}};return{alert:function(a,b,c){d.dialog(a,"alert",b,"",c);return this},confirm:function(a,b,c){d.dialog(a,"confirm",b,"",c);return this},extend:d.extend,init:d.init,log:function(a,b,c){d.log(a,b,c);return this},prompt:function(a,b,c,f){d.dialog(a,"prompt",b,c,f);return this},success:function(a,b){d.log(a,"success",b);return this},error:function(a,b){d.log(a,"error",b);return this},set:function(a){d.set(a)},
labels:d.labels,debug:d.handleErrors}};"function"===typeof define?define([],function(){return new f}):"undefined"===typeof a.alertify&&(a.alertify=new f)})(this);AutodeskNamespace("Autodesk.Viewing");AutodeskNamespace("Autodesk.Viewing.Private");var auth=null,VIEWING_URL,SEARCH_URL,RESOURCE_ROOT="",LOCALIZATION_RESOURCE_ROOT="";Autodesk.Viewing.Private.env=null;Autodesk.Viewing.Private.logger=null;Autodesk.Viewing.Private.refreshToken=null;Autodesk.Viewing.Private.lastTokenRefreshTime=null;
var USE_OAUTH_NONE=!0,USE_OAUTH_ZERO=!1,USE_OAUTH_ONE=!1,USE_OAUTH_TWO=!1,SHOULD_SET_TOKEN=!0;
Autodesk.Viewing.Private.EnvironmentConfigurations={Local:{RESOURCE:"",VIEWING:"https://viewing-dev.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-dev.api.autodesk.com/search/v1"},Development:{RESOURCE:"https://viewing-dev.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://viewing-dev.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-dev.api.autodesk.com/search/v1"},Staging:{RESOURCE:"https://viewing-staging.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://viewing-staging.api.autodesk.com/viewingservice/v1",
SEARCH:"https://search-staging.api.autodesk.com/search/v1"},Production:{RESOURCE:"https://viewing.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://viewing.api.autodesk.com/viewingservice/v1",SEARCH:"https://search.api.autodesk.com/search/v1"},AutodeskDevelopment:{RESOURCE:"https://developer-dev.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://developer-dev.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-dev.api.autodesk.com/search/v1"},AutodeskStaging:{RESOURCE:"https://developer-stg.api.autodesk.com/viewingservice/v1/viewers/",
VIEWING:"https://developer-stg.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-staging.api.autodesk.com/search/v1"},AutodeskProduction:{RESOURCE:"https://developer.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://developer.api.autodesk.com/viewingservice/v1",SEARCH:"https://search.api.autodesk.com/search/v1"}};
Autodesk.Viewing.Private.setAuthTokenInCookie=function(a,b,c){var f={oauth:{token:""}};f.oauth.token=a;a=new XMLHttpRequest;a.open("POST",VIEWING_URL+"/token",!0);a.setRequestHeader("Content-Type","application/json");a.withCredentials=!0;a.onload=b;a.onerror=c;a.ontimeout=c;a.send(JSON.stringify(f))};
Autodesk.Viewing.Private.setApigeeTokenInCookie=function(a,b,c){var f=new XMLHttpRequest,d=VIEWING_URL.substring(0,VIEWING_URL.indexOf("/viewingservice"));f.open("POST",d+"/utility/v1/settoken",!0);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");f.withCredentials=!0;f.onload=b;f.onerror=c;f.ontimeout=c;f.send("access-token="+a)};
Autodesk.Viewing.Private.initializeEnvironmentVariable=function(a){var b;a&&a.env&&(b=a.env);b||(b=Autodesk.Viewing.Private.getParameterByName("env"));if(!b)switch(window.location.hostname){case "viewing-dev.api.autodesk.com":b="Development";break;case "viewing-staging.api.autodesk.com":b="Staging";break;case "viewing.api.autodesk.com":b="Production";break;case "developer-dev.api.autodesk.com":b="AutodeskDevelopment";break;case "developer-stg.api.autodesk.com":b="AutodeskStaging";break;case "developer.api.autodesk.com":b=
"AutodeskProduction";break;case "ec2-23-20-101-198.compute-1.amazonaws.com":b="Development";break;case "localhost.autodesk.com":b="Local";break;case "":b="Local";break;case "127.0.0.1":b="Local";break;default:b="AutodeskProduction"}console.log("Host name : "+window.location.hostname);console.log("Environment initialized as : "+b);Autodesk.Viewing.Private.env=b};
Autodesk.Viewing.Private.initializeServiceEndPoints=function(){var a=Autodesk.Viewing.Private.EnvironmentConfigurations[Autodesk.Viewing.Private.env];VIEWING_URL=a.VIEWING;SEARCH_URL=a.SEARCH;RESOURCE_ROOT=a.RESOURCE};
Autodesk.Viewing.Private.initializeAuth=function(a,b){auth=!0;var c=Autodesk.Viewing.Private,f;b?(f=b.getAccessToken?b.getAccessToken():b.accessToken?b.accessToken:c.getParameterByName("accessToken"),c.refreshToken=b.refreshToken):f=c.getParameterByName("accessToken");f||(f="tAndIEVhrHuJZJn4HpPM3niKvJg=",console.log("Warning : no access token is provided. Use built in token : "+f));SHOULD_SET_TOKEN&&(0==c.env.indexOf("Autodesk")?c.setApigeeTokenInCookie(f,a):c.setAuthTokenInCookie(f,a));c.initializeLogger(f);
c.lastTokenRefreshTime=Date.now();setInterval(c.heartBeat,6E4);return auth};Autodesk.Viewing.Private.initializeLogger=function(a){var b=Autodesk.Viewing.Private.logger=new Autodesk.Viewing.Private.Logger({console:!1,viewingservice:!0,webstorage:!1,endpoint:VIEWING_URL,flushThreshold:10});a={viewer_current_time:Date.now(),viewer_user_access_token:a,viewer_user_host_url:window.location.hostname,viewer_user_agent:navigator.userAgent};b.log(a)};
Autodesk.Viewing.Private.heartBeat=function(){var a=Autodesk.Viewing.Private;6E4<Date.now()-a.logger.lastFlushTime&&a.logger.flush()};Autodesk.Viewing.Private.getAuthObject=function(){return auth};Autodesk.Viewing.Private.getParameterByName=function(a){return Autodesk.Viewing.Private.getParameterByNameFromPath(a,window.location.href)};
Autodesk.Viewing.Private.getParameterByNameFromPath=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=RegExp("[\\?&]"+a+"=([^&#]*)").exec(b);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))};
Autodesk.Viewing.Private.getDemoDocumentURN=function(){var a;switch(Autodesk.Viewing.Private.env){case "Development":a="urn:dXJuOmFkc2suYTM2MGJldGFkZXY6ZnMuZmlsZTplbnRlcnByaXNlLmxtdnRlc3QuRFM1YTczMFFUYmYwMDIyZDA3NTFhYmE5MjZlZDZkMjJlZDY0P3ZlcnNpb249MQ==";break;case "Staging":a="urn:dXJuOmFkc2suczM6ZGVyaXZlZC5maWxlOlZpZXdpbmdTZXJ2aWNlVGVzdEFwcC91c2Vycy9NaWNoYWVsX0hhbicvTU0zNTAwQXNzZW1ibHkuZHdm";break;case "Production":a="FIXME";break;default:a="urn:dXJuOmFkc2suYTM2MGJldGFkZXY6ZnMuZmlsZTplbnRlcnByaXNlLmxtdnRlc3QuRFM1YTczMFFUYmYwMDIyZDA3NTFhYmE5MjZlZDZkMjJlZDY0P3ZlcnNpb249MQ=="}return a};
Autodesk.Viewing.Private.setLanguage=function(a,b){var c={lng:a,resGetPath:"locales/__lng__/__ns__.json.generated",ns:{namespaces:["allstrings"],defaultNs:"allstrings"},fallbackLng:"en",debug:!1};LOCALIZATION_RESOURCE_ROOT=RESOURCE_ROOT+"locales/"+a+"/";Autodesk.Viewing.i18n.init(c,function(a){Autodesk.Viewing.i18n.localize();b&&b()})};Autodesk.Viewing.Private.initializeLocalization=function(){navigator.language.split("-");Autodesk.Viewing.Private.setLanguage("en")};
function stderr(a){ENABLE_TRACE&&console.log(a)}Autodesk.Viewing.Initializer=function(a,b){Autodesk.Viewing.Private.WEBGL_HELP_LINK=a?a.webGLHelpLink:null;Autodesk.Viewing.Private.initializeEnvironmentVariable(a);Autodesk.Viewing.Private.initializeServiceEndPoints();Autodesk.Viewing.Private.initializeAuth(b,a);Autodesk.Viewing.Private.initializeLocalization()};
